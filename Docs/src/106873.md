---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
keywords: 实时音视频    # use ',' as separator
---

在使用云端录制时，你可能需要自定义录制文件名来方便查找。

你可以自定义录制文件的文件名，且文件名支持输出填充变量，以展示录制文件的相关信息，方便查找。但文件名的总长度不得超过 128 个字符，若超出，则超出部分被截断，且最后一位字符变为波浪号`～`。不同用户的文件名可以相同，不会被相互覆盖。

> 中括号`{ }`指示可选填充变量，当中括号和可选填充变量以组合形式出现时，如`{RoomId}`，则为可选变量填充占位符，最后文件名会输出变量的值（不区分大小写）；如用户对 `RoomId`、`UserId` 等可选变量拼写错误，则视为普通文本。
> 自定义文件名格式设置中不包含文件格式。使用 OpenAPI `2020-12-01` 版本时，文件格式固定为`MP4`，使用 OpenAPI `2022-06-01` 版本时，文件格式由 `FileFormatConfig` 参数控制。
## 单流录制

* 若你未设置文件名格式，则文件名格式为默认值。默认值格式为：`{TaskId}_{RoomId}_{UserId}_{Type}_{StartTime}_{Duration}_{Random}`。
若此时`TaskId`=`mytask123456789`，`RoomId`=`myroom99991234`，`UserId`=`user223344`，`Type`=`C`，`StartTime`=`1686281212582`，`Duration`=`003600`，`Random`= `45678903`，则文件名为：`mytask123456789_myroom99991234_user223344_C_1686281212582_003600_45678903`。  

* 若你设置了文件名格式，且文件名中包含可选填充变量，则文件名会输出填充变量的值。可选填充变量如下：
	| 可选填充变量 | 描述 |
	| --- |--- |
	|   TaskId | 云端录制任务 ID。 |
	|   RoomId | 房间 ID，是房间的唯一标志。 |
	|   UserId | 用户 ID，表示这个流所属的用户。 |
	|   Type | 流的类型。输出值为 `C` 和 `S`。`C` 表示摄像头流，`S` 表示屏幕流。 |
	|   StartTime | 文件开始录制的 UTC 时间，单位为毫秒。 |
	|   Duration | 录制文件时长，单位为秒，长度固定为 6 个字符。若实际时长不足 6 位字符，则补 0。如 `000123`。 | 

	如设置文件名格式为：`{TaskId}_{RoomId}_{UserId}_{Type}_{Duration}`,
		若此时用户 1 的`TaskId`=`mytask123456789`，`RoomId`=`myroom99991234`，`UserId`=`user223344`，`Type`=`C`，`Duration`=`003600`，则用户 1 文件名为：`mytask123456789_myroom99991234_user223344_C_003600`。
		若此时用户 2 的 `TaskId`=`mytask123456789`，`RoomId`=`myroom99991234`，`UserId`=`user445566`，`Type`=`C`，`Duration`=`003600`，则用户 2 的文件名为：`mytask123456789_myroom99991234_user445566_C_003600`。

* 	若你设置了文件名格式，但不包含可选填充变量，则文件名为你设置的字符串值。如你设置文件名格式为：`recordfile_info1_info2_info3`，则用户1和用户2文件名均为：`recordfile_info1_info2_info3`。(用户1和用户2为两个独立录制文件，但文件名称相同。)

   
## 合流录制

 * 若你未设置文件名格式，则文件名格式为默认值。默认值格式为：`{TaskId}_{RoomId}_{StartTime}_{Duration}_{Random}`。若此时`TaskId`=`mytask123456789`，`RoomId`=`myroom99991234`，`StartTime`=`1686281212582`，`Duration`=`003600`，`Random`= `45678903`，则文件名为：`mytask123456789_myroom99991234_1686281212582_003600_45678903`。
    
* 若你设置了文件名格式，且文件名中包含可选填充变量，则文件名会输出填充变量的值。可选填充变量如下：
    
	| 可选填充变量  | 描述 |
	| --- |--- |
	|   TaskId | 云端录制任务 ID。 |
	|   RoomId | 房间 ID，是房间的唯一标志。 |
	|   StartTime  | 文件开始录制的 UTC 时间，单位为毫秒。 |
	|   Duration | 录制文件时长，单位为秒，长度固定为 6 个字符，若实际时长不足 6 位字符，则补 0。如 `000123`。 |

	如设置文件名格式为：`{TaskId}_{RoomId}`，若此时`TaskId`=`mytask123456789`，`RoomId`=`myroom99991234`，则合流文件名为：`mytask123456789_myroom99991234`。

* 若你设置了文件名格式，但不包含可选填充变量，则文件名为你设置的字符串值。如你设置文件名格式为：`recordfile_info1_info2_info3`，则合流文件名为：`recordfile_info1_info2_info3`。



## 自动录制

> 当前自动录制模式仅支持单流录制，即对房间内每个录制用户生成各自的音视频文件。
> 自动录制下 TaskId=UserId

自动录制下，文件名格式仅支持默认格式：`{TaskId}_{RoomId}_{UserId}_{Type}_{StartTime}_{Duration}_{Random}`，若此时用户1的`TaskId`=`user223344`，`RoomId`=`myroom99991234`，`UserId`=`user223344`，`Type`=`C`，`Duration`=`003600`，`Random`= `45678903`，则文件名为`user223344_myroom99991234_user223344_C_1686281212582_003600_45678903`。
