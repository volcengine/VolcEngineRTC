---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---

RTC SDK 提供**基础美颜**和**智能美化特效**两种美颜功能，且二者不能共用。
- 基础美颜提供美白、锐化、磨皮效果，广泛适用于视频通话、直播等场景。
- 智能美化特效特效提供美颜、滤镜、背景贴纸等高级特效，需付费使用。参看 RTC 和智能美化特效（CV）产品深度融合打造的[智能美化特效](114717)功能。

## 功能变更日志

自 Electron SDK 3.44 起，基础美颜功能可用。

## 前提条件

- 你已经集成了 RTC SDK，并实现音视频通话功能。

- 操作系统需满足以下要求：
	- macOS: macOS 10.11+
		
	- Windows: Win 7+
	
- 基础美颜首次运行时需要连接网络下载所需文件，因此需要确保你的设备具有网络连接，且系统时间正常。
	

## 操作步骤

### 步骤一：集成美颜模块

1. 根据应用的目标平台，从相应的 RTC SDK 压缩包中获取动态库文件，复制到项目的根目录下。
    - [Windows](75707#%E4%B8%8B%E8%BD%BD-sdk)：VolcEngineRTC/bin/Win32(x64)/effect.dll，pthreadVC2.dll
    - [macOS](75707#%E4%B8%8B%E8%BD%BD-sdk)：libeffect.dylib

2. 更新打包配置，把美颜所需的动态库复制到指定目录。
以 electron-builder 打包组件为例，在 extraResources 字段中指定需要打包的文件以及打包后的目标路径。
    - Windows：把动态库复制到主程序 exe 相同目录下。
    - macOS：把动态库复制到 Frameworks 目录下。
```json
  "build": {
    "win": {
       "extraResources": [
        {
          "from": "./effect.dll",
          "to": "../effect.dll" 
        },
        {
          "from": "./pthreadVC2.dll",
          "to": "../pthreadVC2.dll" 
        }
      ]
    },
    "mac": {
       "extraResources": [
        {
          "from": "./libeffect.dylib",
          "to": "../Frameworks/libeffect.dylib"
        }
      ]
    }
  }
```

### 步骤二：添加素材资源

``` TypeScript
basic_beauty/
  ComposeMakeup/
    beauty_Android_lite/
    ...
```

### 步骤三：初始化

在创建引擎后，调用 [startVideoCapture](Electron-api#rtcvideo-startvideocapture) 开启视频采集。

``` TypeScript
const rtcVideo= new veRTCVideo();
rtcVideo.startVideoCapture();
```

### 步骤四：开启美颜

调用 [enableEffectBeauty](Electron-api#rtcvideo-enableeffectbeauty) ，将参数 `enable` 设置为 `true`，开启基础美颜。
> 首次安装 App 时，调用 [enableEffectBeauty](Electron-api#rtcvideo-enableeffectbeauty) 会返回 `-1004`，这表明当前正在下载美颜所需文件，下载完成后美颜会自动生效。文件下载成功后，后续开启基础美颜将立即生效，接口返回 `0`，此时可在本地预览画面中看到效果。
若未在开启前设置基础美颜强度，则美白、锐化、磨皮的默认强度为 0.5。
``` TypeScript
let ret = rtcVideo.enableEffectBeauty(true);
```


### 步骤五：设置美颜强度

调用 [setBeautyIntensity](Electron-api#rtcvideo-setbeautyintensity) 调整基础美颜强度。 若在开启基础美颜前设置调用，则对应美颜功能的强度初始值会根据设置更新。 销毁引擎后，强度设置将会失效，再次开启美颜时强度恢复默认值。
基础美颜的有效强度范围为 [0, 1]，超过此范围则不生效。强度设置为 0 时无效果。
``` TypeScript
let ret = rtcVideo.setBeautyIntensity(EffectBeautyMode.kEffectBeautyWhite, 0.8);
```
	
### 步骤六：关闭美颜
	
调用 [enableEffectBeauty](Electron-api#rtcvideo-enableeffectbeauty) ，将参数 `enable` 设置为 `false`，关闭基础美颜。
