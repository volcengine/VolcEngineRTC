---
_id: "6657097ddd57510309286c9f"
is_dir: False    # True for dir; False for doc
keywords: 实时音视频    # use ',' as separator
status: 1    # 1 for online; 0 for offline
---

## 发送时机

发送和接收房间内消息时，发送者和接收者必须已在房间内。成功进房的标志是收到 `onRoomStateChanged` 回调通知。
以 Android SDK 为例。
*   RTC SDK：[`onRoomStateChanged`](Android-callback#IRTCRoomEventHandler-onroomstatechanged)
*   RTS SDK：[`onRoomStateChanged`](136645#IRTSRoomEventHandler-onroomstatechanged)

## 消息大小

每条消息的原始大小不能超过 **64KB**。

## 消息发送频率

为了获得低延迟的实时消息体验，消息发送频率应同时满足以下要求。
> 如有更高的消息频率需求，请联系技术支持。
### 单房间上限
单个房间内所有用户发送的消息次数之和。不区分发送方式，包含客户端发送和调用 OpenAPI 发送。
- 500 人以下房间：**100** 次/秒。
- 500 人及以上房间：**80** 次/秒。
> 例如， 用户 A 在 1 秒内发送房间内消息 10 条，用户 B 发送 20 条，则这 1 秒内的房间消息发送次数计为 30 次。不超过房间内消息要求的频率上限。
### [OpenAPI](https://www.volcengine.com/docs/6348/1164060) 发送上限
对于每个 AppId，调用 SendUnicast、SendRoomUnicast、SendBroadcast 与 BatchSendRoomUnicast 的频率上限之和为 **500** 次/秒。
> 例一，调用 1 次 [BatchSendRoomUnicast](https://www.volcengine.com/docs/6348/1164064) 将同一消息给 50 名用户，计为发送 50 次。
> 例二，1 秒内调用 [SendUnicast](https://www.volcengine.com/docs/6348/1164061) 和 [SendRoomUnicast](https://www.volcengine.com/docs/6348/1164062) 各 200 次，计为 400 次。Open API 发送消息不超过 500 次/秒，但不能满足单个房间内消息的频率上限 100 次/秒的要求。
### 客户端发送上限
对于单个客户端，不同类型的消息发送频率要求如下。
- 向用户发送点对点消息： **100** 次/秒。
- 向房间发送广播消息： **65** 次/秒。
- 向应用服务器发送消息： **20** 次/秒。
> 例一， 1 秒内调用 [sendUserMessage](Android-api#sendusermessage) 发送 100 次，又调用 [sendUserMessageOutsideRoom](Android-api#sendusermessageoutsideroom) 发送 50 次。两个方法发送的消息类型都是点对点消息，需要累加统计，则这 1 秒内的点对点消息发送计为 150 次。超过了点对点消息要求的频率上限。
> 例二， 1 秒内调用 [sendUserMessage](Android-api#sendusermessage) 发送 10 次，又调用 [sendRoomMessage](Android-api#sendroommessage) 发送 5 次。则这 1 秒内的点对点消息发送计为 10 次，广播消息 5 次。不超过消息类型对应的频率上限要求。


#### 客户端消息分类说明

消息分类对应的方法详见下表。以 Android SDK 为例。

| 分类 |   RTC SDK 方法 | RTS SDK 方法 |
| --- | --- | --- |
| 点对点消息 |  <div style="width: 250pt"><li>[sendUserMessage](Android-api#sendusermessage)</li><li>[sendUserMessageOutsideRoom](Android-api#sendusermessageoutsideroom)</li></div> <li>[sendUserBinaryMessage](Android-api#senduserbinarymessage)</li><li>[sendUserBinaryMessageOutsideRoom](Android-api#senduserbinarymessageoutsideroom)</li> | <li>[sendMessage](136644#sendmessage)<li>[sendBinaryMessage](136644#sendbinarymessage) |
| 房间内广播消息   | <li>[sendRoomMessage](Android-api#sendroommessage)<li>[sendRoomBinaryMessage](Android-api#sendroombinarymessage) | <li>[sendRoomMessage](136644#sendroommessage)<li>[sendRoomBinaryMessage](136644#sendroombinarymessage) |
| 客户端给应用服务器发送消息    | <li> [sendServerMessage](Android-api#sendservermessage)<li>[sendServerBinaryMessage](Android-api#sendserverbinarymessage) | <li>[sendServerMessage](136644#sendservermessage)<li>[sendServerBinaryMessage](136644#sendserverbinarymessage) |
