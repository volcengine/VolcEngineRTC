---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
useHub: 1    # 0 by default for using Doc Repo; 1 for using APIHub / SDKHub.
keywords: 实时音视频    # use ',' as separator
---

为了在白板互动中共享文件，你可能需要将文档转为静态图片或动态的 HTML5 页面。通过调用服务端 OpenAPI `WbTranscodeCreate` 发起文档转码任务。<br>
转码的任务处理是异步的，你可以通过 [`WbTranscodeQuery`](1217292) 查询到转码任务完成后，调用 [`WbTranscodeGet`](1217293) 获取转换好的链接集合。

> 调用服务端接口完成文档转码后，你还需要调用客户端接口，将转码后的文档共享到白板房间。文件上传的完整流程参见 [文档上传](164753)。

## 接口行为
`WbTranscodeCreate` 发起一个文档转码任务。

- 静态转码：可将 PPT、PPTX、DOC、DOCX、PDF 格式文件转为 PNG、JPG/JPEG 的静态图片。文档中的每个页面转换为一张图片。
- 动态转码：可将 PPT、PPTX 格式文件转换为 HTML5 页面，支持实时交互，动态展示动画或多媒体。对照[动态转码文件要求](1119987)检查文件，以确保动态文档转码任务顺利执行。

> - 调用本接口前，你需要先将文件上传到 TOS。
> - 如果你需要对多个文件进行转码，请分别调用 `WbTranscodeCreate` 传入相应的文件和参数设置。

## 前提条件

- 在 RTC 控制台[开通转码服务](https://console.volcengine.com/rtc/cloudRTC?tab=whiteboard)
- 在火山引擎或其他 TOS 服务商开通了 [TOS 服务](https://www.volcengine.com/product/tos)

### 调用接口
关于调用接口的请求结构、公共参数、签名算法和返回结构，参看[调用方法](1178320)。
## 注意事项
请求频率：单用户请求频率限制为 **10 次/秒**。
## 请求说明
- 请求方式：**POST**
- 请求地址：**https://rtc.volcengineapi.com?Action=WbTranscodeCreate&Version=2023-11-01**
## 请求参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
### Query
```mixin-react
const columns = [
  {
    "title": "参数名称",
    "dataIndex": "name",
    "width": "15%"
  },
  {
    "title": "数据类型",
    "dataIndex": "type",
    "width": "15%"
  },
  {
    "title": "是否必选",
    "dataIndex": "required",
    "width": "10%"
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "20%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "description",
    "width": "40%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "Action",
    "type": "String",
    "required": "是",
    "example": "<code>WbTranscodeCreate</code>",
    "description": "接口名称。当前 API 的名称为 <code>WbTranscodeCreate</code>。",
    "key": "Action"
  },
  {
    "name": "Version",
    "type": "String",
    "required": "是",
    "example": "<code>2023-11-01</code>",
    "description": "接口版本。当前 API 的版本为 <code>2023-11-01</code>。",
    "key": "Version"
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
### Body
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "20%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "10%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "是否必选",
    "dataIndex": "required",
    "width": "10%"
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "15%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "title",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "AppId",
    "key": "0-0",
    "title": "应用的唯一标志。你可以通过<a href=\"https://console.volcengine.com/rtc/listRTC\" target=\"_blank\" class=\"external\">控制台</a>查看和复制你的 app_id。或通过调用 <a href=\"https://www.volcengine.com/docs/6348/74489\" target=\"_blank\" class=\"external\">ListApps</a> 接口获取。",
    "example": "<code>Your_AppId</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "Operator",
    "key": "0-1",
    "title": "发起转码的用户 ID",
    "example": "<code>Operator</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "Resource",
    "key": "0-2",
    "title": "需要转换为图片的文档链接地址。每次调用接口只能请求处理一份文档。",
    "example": "<code>Your_resource_url</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "ResourceAttr",
    "key": "0-3",
    "title": "动态转码文件设置。动态转码必填，静态转码无需填写",
    "example": "<code>-</code>",
    "required": "否",
    "type": "Object",
    "children": [
      {
        "name": "FileName",
        "key": "0-3-0",
        "title": "文件名",
        "example": "<code>Your_file_name</code>",
        "required": "是",
        "type": "String"
      },
      {
        "name": "Size",
        "key": "0-3-1",
        "title": "文件大小，单位字节",
        "example": "<code>10000</code>",
        "required": "是",
        "type": "Integer"
      }
    ]
  },
  {
    "name": "TranscodeMode",
    "key": "0-4",
    "title": "<p>转码类型</p>\n<ul>\n<li><code>0</code>: 静态转码</li>\n<li><code>1</code>: 动态转码<br>\n默认值为 <code>0</code>。</li>\n</ul>",
    "example": "<code>0</code>",
    "required": "是",
    "type": "Integer"
  },
  {
    "name": "Priority",
    "key": "0-5",
    "title": "<p>静态转码的转码优先级</p>\n<ul>\n<li><code>0</code>: 非实时转码</li>\n<li><code>1</code>: 实时转码<br>\n默认值为 <code>0</code>。</li>\n</ul>",
    "example": "<code>0</code>",
    "required": "是",
    "type": "Integer"
  },
  {
    "name": "TranscodeConfig",
    "key": "0-6",
    "title": "转码配置，静态转码时必填，动态转码需要生成缩略图时必填",
    "example": "<code>-</code>",
    "required": "否",
    "type": "Object",
    "children": [
      {
        "name": "ForceUseResolution",
        "key": "0-6-0",
        "title": "是否按照指定分辨率拉伸页面<br>\n默认为 <code>false</code>，按照文件的原始宽高比适配指定分辨率。",
        "example": "<code>false</code>",
        "required": "是",
        "type": "Boolean"
      },
      {
        "name": "InputFormat",
        "key": "0-6-1",
        "title": "输入文件类型<br>\n<code>1</code>: ppt<br>\n<code>2</code>: pptx<br>\n<code>3</code>: doc<br>\n<code>4</code>: docx<br>\n<code>5</code>: pdf",
        "example": "<code>2</code>",
        "required": "是",
        "type": "Integer"
      },
      {
        "name": "OutputFormat",
        "key": "0-6-2",
        "title": "输出文件类型<br>\n<code>1</code>: png<br>\n<code>2</code>: jpg/jpeg",
        "example": "<code>1</code>",
        "required": "是",
        "type": "Integer"
      },
      {
        "name": "OutputWidth",
        "key": "0-6-3",
        "title": "转码后的页面宽度，单位为像素",
        "example": "<code>1080</code>",
        "required": "是",
        "type": "Integer"
      },
      {
        "name": "OutputHeight",
        "key": "0-6-4",
        "title": "转码后的页面高度，单位为像素",
        "example": "<code>720</code>",
        "required": "是",
        "type": "Integer"
      },
      {
        "name": "Thumbnail",
        "key": "0-6-5",
        "title": "是否需要缩略图。<br>\n<code>true</code>：需要<br>\n<code>false</code>：不需要。<br>\n默认为 <code>false</code>。",
        "example": "<code>true</code>",
        "required": "是",
        "type": "Boolean"
      },
      {
        "name": "ThumbnailWidth",
        "key": "0-6-6",
        "title": "缩略图分辨率宽，单位为像素，默认为 <code>320</code>",
        "example": "<code>270</code>",
        "required": "是",
        "type": "Integer"
      },
      {
        "name": "ThumbnailHeight",
        "key": "0-6-7",
        "title": "缩略图分辨率高，单位为像素，默认为 <code>180</code>",
        "example": "<code>180</code>",
        "required": "是",
        "type": "Integer"
      }
    ]
  },
  {
    "name": "StorageConfig",
    "key": "0-7",
    "title": "转码结果存储配置，参数优先级高于控制台配置。<br>\n若控制台未进行设置，此参数必填。",
    "example": "",
    "required": "否",
    "type": "Object",
    "children": [
      {
        "name": "Type",
        "key": "0-7-0",
        "title": "存储平台。<br>\n<code>0</code>: TOS<br>\n<code>1</code>: 第三方对象存储接口。<br>\n默认值为 <code>0</code>。",
        "example": "<code>0</code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "TosConfig",
        "key": "0-7-1",
        "title": "火山引擎的对象存储服务参数设置",
        "example": "<code>-</code>",
        "required": "否",
        "type": "Object",
        "children": [
          {
            "name": "AccountId",
            "key": "0-7-1-0",
            "title": "Bucket 所属的火山引擎账号 ID。在登录火山引擎后，可在头像的悬浮菜单中找到<strong>账号 ID</strong>。<br>\n<img src=\"https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_0819c44c6aadff358a7dfc52c5daab57.png\" alt=\"\">",
            "example": "<code>Your_account_id</code>",
            "required": "是",
            "type": "String"
          },
          {
            "name": "Region",
            "key": "0-7-1-1",
            "title": "参看 <a href=\"1217553\">Region 对照表</a>。",
            "example": "<code>0</code>",
            "required": "是",
            "type": "Integer"
          },
          {
            "name": "Bucket",
            "key": "0-7-1-2",
            "title": "桶名称。登录 <a href=\"https://console.volcengine.com/tos/bucket\" target=\"_blank\" class=\"external\">TOS 控制台</a> 开通和获取。",
            "example": "<code>Your_bucket</code>",
            "required": "是",
            "type": "String"
          }
        ]
      },
      {
        "name": "CustomConfig",
        "key": "0-7-2",
        "title": "第三方对象存储服务参数设置",
        "example": "<code>-</code>",
        "required": "否",
        "type": "Object",
        "children": [
          {
            "name": "Vendor",
            "key": "0-7-2-0",
            "title": "第三方存储供应商<br>\n<code>0</code>: Amazon 亚马逊<br>\n<code>1</code>: Alicloud 阿里云",
            "example": "<code>0</code>",
            "required": "是",
            "type": "Integer"
          },
          {
            "name": "Region",
            "key": "0-7-2-1",
            "title": "参看 <a href=\"https://www.volcengine.com/docs/6348/1167931\" target=\"_blank\" class=\"external\">Region 对照表</a><br>\n当 <code>vendor</code> =<code>0</code> 时，<code>7</code>、<code>9</code>、<code>15</code>、<code>16</code>、<code>17</code>、<code>23</code> 均不支持。",
            "example": "<code>0</code>",
            "required": "是",
            "type": "Integer"
          },
          {
            "name": "Bucket",
            "key": "0-7-2-2",
            "title": "桶名称",
            "example": "<code>Your_bucket</code>",
            "required": "是",
            "type": "String"
          },
          {
            "name": "AccessKey",
            "key": "0-7-2-3",
            "title": "第三方存储平台账号的密钥。需确保此账号对存储桶有写权限，<strong>不建议开启读权限</strong>。",
            "example": "<code>Your_access_key</code>",
            "required": "是",
            "type": "String"
          },
          {
            "name": "SecretKey",
            "key": "0-7-2-4",
            "title": "第三方存储平台账号的密钥",
            "example": "<code>Your_secret_key</code>",
            "required": "是",
            "type": "String"
          }
        ]
      }
    ]
  },
  {
    "name": "PreSignDuration",
    "key": "0-8",
    "title": "TOS 桶中存储对象的预签名 URL 有限期。单位为秒，取值范围为<code>[0,604800]</code>。默认值为 <code>0</code>，表示无限期。",
    "example": "<code>0</code>",
    "required": "否",
    "type": "Integer"
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
## 返回参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "13%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "10%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "15%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "title",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "TaskId",
    "key": "0-1-0",
    "title": "用于查询任务进度和获取转码后链接的任务 ID。",
    "example": "<code>Your_TaskId</code>",
    "type": "String"
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
## 请求示例
```json
POST https://rtc.volcengineapi.com?Action=WbTranscodeCreate&Version=2023-11-01
{
    "AppId": "Your_AppId",
    "Operator": "Operator`",
    "PreSignDuration": 0,
    "Priority": 0,
    "Resource": "Your_resource_url",
    "ResourceAttr": {
        "FileName": "Your_file_name",
        "Size": 10000
    },
    "StorageConfig": {
        "Type": 0,
        "TosConfig": {
            "AccountId": "Your_account_id",
            "Region": 0,
            "Bucket": "Your_bucket"
        },
        "CustomConfig": {
            "Vendor": 0,
            "Region": 0,
            "Bucket": "Your_bucket",
            "AccessKey": "Your_access_key",
            "SecretKey": "Your_secret_key"
        }
    },
    "TranscodeConfig": {
        "ForceUseResolution": false,
        "InputFormat": 2,
        "OutputFormat": 1,
        "OutputWidth": 1080,
        "OutputHeight": 720,
        "Thumbnail": true,
        "ThumbnailWidth": 270,
        "ThumbnailHeight": 180
    },
    "TranscodeMode": 0
}
```
## 返回示例
```json
{
    "ResponseMetadata": {
        "RequestId": "your_request_id",
        "Service": "rtc",
        "Region": "cn-north-1",
        "Action": "WbTranscodeCreate",
        "Version": "2023-11-01"
    },
    "Result": {
        "TaskId": "Your_TaskId"
    }
}
```

## 错误码
您可访问[公共错误码](https://www.volcengine.com/docs/6348/70426)，获取更多错误码信息。
