---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---
# BIMClient
```java
public class com.bytedance.im.core.api.BIMClient
```

IM SDK 对外接口类，通过此类提供所有 IM SDK 能力接口。


## 静态函数
| 返回 | 名称 |
| --- | --- |
| **static BIMClient** | [getInstance](#BIMClient-getinstance) |

## 成员函数
| 返回 | 名称 |
| --- | --- |
| **boolean** | [initSDK](#BIMClient-initsdk) |
| **boolean** | [initSDK](#initsdk-2) |
| **void** | [unInitSDK](#BIMClient-uninitsdk) |
| **void** | [login](#BIMClient-login) |
| **void** | [logout](#BIMClient-logout) |
| **void** | [logout](#logout-2) |
| **void** | [addConnectListener](#BIMClient-addconnectlistener) |
| **void** | [removeConnectListener](#BIMClient-removeconnectlistener) |
| **long** | [getCurrentUserID](#BIMClient-getcurrentuserid) |
| **String** | [getToken](#BIMClient-gettoken) |
| **String** | [getVersion](#BIMClient-getversion) |
| **long** | [getVersionCode](#BIMClient-getversioncode) |
| **BIMConnectStatus** | [getConnectStatus](#BIMClient-getconnectstatus) |
| **Long** | [getServerTime](#BIMClient-getservertime) |
| **int** | [getAppID](#BIMClient-getappid) |
| **void** | [getConversationList](#BIMClient-getconversationlist) |
| **void** | [getConversation](#BIMClient-getconversation) |
| **void** | [addConversationListener](#BIMClient-addconversationlistener) |
| **void** | [removeConversationListener](#BIMClient-removeconversationlistener) |
| **void** | [createGroupConversation](#BIMClient-creategroupconversation) |
| **void** | [getConversationMemberList](#BIMClient-getconversationmemberlist) |
| **void** | [addGroupMemberList](#BIMClient-addgroupmemberlist) |
| **void** | [removeGroupMemberList](#BIMClient-removegroupmemberlist) |
| **void** | [setGroupMemberRole](#BIMClient-setgroupmemberrole) |
| **void** | [dissolveGroup](#BIMClient-dissolvegroup) |
| **void** | [leaveGroup](#BIMClient-leavegroup) |
| **void** | [setGroupName](#BIMClient-setgroupname) |
| **void** | [setGroupNotice](#BIMClient-setgroupnotice) |
| **void** | [setConversationLocalExt](#BIMClient-setconversationlocalext) |
| **void** | [setConversationMyExt](#BIMClient-setconversationmyext) |
| **void** | [setConversationCoreExt](#BIMClient-setconversationcoreext) |
| **void** | [createSingleConversation](#BIMClient-createsingleconversation) |
| **void** | [deleteConversation](#BIMClient-deleteconversation) |
| **void** | [deleteConversation](#deleteconversation-2) |
| **void** | [markConversationRead](#BIMClient-markconversationread) |
| **void** | [stickTopConversation](#BIMClient-sticktopconversation) |
| **void** | [muteConversation](#BIMClient-muteconversation) |
| **void** | [setConversationDraft](#BIMClient-setconversationdraft) |
| **void** | [getHistoryMessageList](#BIMClient-gethistorymessagelist) |
| **void** | [getNewerMessageList](#BIMClient-getnewermessagelist) |
| **void** | [getLocalMessageListByType](#BIMClient-getlocalmessagelistbytype) |
| **void** | [getMessage](#BIMClient-getmessage) |
| **void** | [getMessageByServerID](#BIMClient-getmessagebyserverid) |
| **void** | [getConversationByShortID](#BIMClient-getconversationbyshortid) |
| **void** | [getConversationByShortIDList](#BIMClient-getconversationbyshortidlist) |
| **void** | [modifyMessage](#BIMClient-modifymessage) |
| **void** | [sendMessage](#BIMClient-sendmessage) |
| **void** | [addLocalMessage](#BIMClient-addlocalmessage) |
| **void** | [addMessageListener](#BIMClient-addmessagelistener) |
| **void** | [removeMessageListener](#BIMClient-removemessagelistener) |
| **void** | [deleteMessage](#BIMClient-deletemessage) |
| **void** | [deleteLocalMessage](#BIMClient-deletelocalmessage) |
| **void** | [recallMessage](#BIMClient-recallmessage) |
| **BIMMessage** | [createTextMessage](#BIMClient-createtextmessage) |
| **BIMMessage** | [createTextMessage](#createtextmessage-2) |
| **BIMMessage** | [createTextMessage](#createtextmessage-3) |
| **BIMMessage** | [createAudioMessage](#BIMClient-createaudiomessage) |
| **BIMMessage** | [createAudioMessage](#createaudiomessage-2) |
| **BIMMessage** | [createImageMessage](#BIMClient-createimagemessage) |
| **BIMMessage** | [createImageMessage](#createimagemessage-2) |
| **BIMMessage** | [createVideoMessage](#BIMClient-createvideomessage) |
| **BIMMessage** | [createVideoMessage](#createvideomessage-2) |
| **BIMMessage** | [createFileMessage](#BIMClient-createfilemessage) |
| **BIMMessage** | [createCustomMessage](#BIMClient-createcustommessage) |
| **BIMMessage** | [createP2PMessage](#BIMClient-createp2pmessage) |
| **void** | [sendP2PMessage](#BIMClient-sendp2pmessage) |
| **void** | [sendP2PMessage](#sendp2pmessage-2) |
| **void** | [addP2PMessageListener](#BIMClient-addp2pmessagelistener) |
| **void** | [removeP2PMessageListener](#BIMClient-removep2pmessagelistener) |
| **void** | [getTotalUnreadMessageCount](#BIMClient-gettotalunreadmessagecount) |
| **void** | [refreshMediaMessage](#BIMClient-refreshmediamessage) |
| **void** | [modifyMessageProperty](#BIMClient-modifymessageproperty) |
| **void** | [getMessagesReadReceipt](#BIMClient-getmessagesreadreceipt) |
| **void** | [sendMessageReadReceipts](#BIMClient-sendmessagereadreceipts) |
| **void** | [markConversationMessagesRead](#BIMClient-markconversationmessagesread) |
| **void** | [downloadFile](#BIMClient-downloadfile) |
| **void** | [getSDKDid](#BIMClient-getsdkdid) |
| **void** | [cancelMediaFileMessageUpload](#BIMClient-cancelmediafilemessageupload) |
| **void** | [markConversationRead](#markconversationread-2) |
| **void** | [getConversationUnReadMessageList](#BIMClient-getconversationunreadmessagelist) |

## 函数说明
<span id="BIMClient-getinstance"></span>
### getInstance
```java
public static BIMClient com.bytedance.im.core.api.BIMClient.getInstance()
```
获取 BIMClient 单例

**返回值**
BIMClient 单例


<span id="BIMClient-initsdk"></span>
### initSDK
```java
public boolean com.bytedance.im.core.api.BIMClient.initSDK(
    Application app,
    int appId,
    BIMSDKConfig config)
```
初始化 SDK。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| app | **Application** | 应用 Application 实例。 |
| appId | **int** | 从[控制台](https://console.volcengine.com/rtc/im/appManage)获取的应用 ID。<br/>不同应用 ID 无法进行互通。 |
| config | **BIMSDKConfig** | 配置信息，参看 [BIMSDKConfig](293453#bimsdkconfig)。 |
**返回值**

+ `true`: 成功。
+ `false`: 失败。


**注意**
如需使用海外环境，请调用 [initSDK](#initsdk-2) 进行初始化。

<span id="BIMClient-initsdk"></span>
### initSDK
```java
public boolean com.bytedance.im.core.api.BIMClient.initSDK(
    Application app,
    int appId,
    BIMSDKConfig config,
    int env)
```
初始化 SDK。
你可以设置使用国内或海外环境。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| app | **Application** | 应用 Application 实例。 |
| appId | **int** | 从[控制台](https://console.volcengine.com/rtc/im/appManage)获取的应用 ID。<br/>不同应用 ID 无法进行互通。 |
| config | **BIMSDKConfig** | 配置信息，参看 [BIMSDKConfig](293453#bimsdkconfig)。 |
| env | **int** | 环境配置，默认使用国内环境，参看 [BIMEnv](293453#bimenv)。 |
**返回值**

+ `true`: 成功。
+ `false`: 失败。


<span id="BIMClient-uninitsdk"></span>
### unInitSDK
```java
public void com.bytedance.im.core.api.BIMClient.unInitSDK()
```
注销 SDK, 释放内存缓存资源、注销监听等。


<span id="BIMClient-login"></span>
### login
```java
public void com.bytedance.im.core.api.BIMClient.login(
    final long uid,
    final String token,
    final BIMSimpleCallback callback)
```
登录服务器。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **final long** | 用户 ID。 |
| token | **final String** | 用户 Token。 |
| callback | **final BIMSimpleCallback** | 登录结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-logout"></span>
### logout
```java
public void com.bytedance.im.core.api.BIMClient.logout(
    BIMSimpleCallback callback)
```
登出服务器。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **BIMSimpleCallback** | 成功回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-logout"></span>
### logout
```java
public void com.bytedance.im.core.api.BIMClient.logout()
```
登出服务器。


<span id="BIMClient-addconnectlistener"></span>
### addConnectListener
```java
public void com.bytedance.im.core.api.BIMClient.addConnectListener(
    final BIMConnectListener listener)
```
设置长链状态监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **final BIMConnectListener** | 长链状态监听方，参看 [BIMConnectListener](293451#bimconnectlistener)。 |

<span id="BIMClient-removeconnectlistener"></span>
### removeConnectListener
```java
public void com.bytedance.im.core.api.BIMClient.removeConnectListener(
    final BIMConnectListener listener)
```
设置长链状态监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **final BIMConnectListener** | 长链状态监听方，参看 [BIMConnectListener](293451#bimconnectlistener)。 |

<span id="BIMClient-getcurrentuserid"></span>
### getCurrentUserID
```java
public long com.bytedance.im.core.api.BIMClient.getCurrentUserID()
```
获取当前用户 ID。

**返回值**
用户 ID。


<span id="BIMClient-gettoken"></span>
### getToken
```java
public String com.bytedance.im.core.api.BIMClient.getToken()
```
获取当前用户 Token。

**返回值**
用户 Token。


<span id="BIMClient-getversion"></span>
### getVersion
```java
public String com.bytedance.im.core.api.BIMClient.getVersion()
```
获取 SDK 版本号名称。

**返回值**
SDK 版本号名称。


<span id="BIMClient-getversioncode"></span>
### getVersionCode
```java
public long com.bytedance.im.core.api.BIMClient.getVersionCode()
```
获取 SDK 版本号。

**返回值**
SDK 版本号。


<span id="BIMClient-getconnectstatus"></span>
### getConnectStatus
```java
public BIMConnectStatus com.bytedance.im.core.api.BIMClient.getConnectStatus()
```
获取连接状态。

**返回值**
连接状态。


<span id="BIMClient-getservertime"></span>
### getServerTime
```java
public Long com.bytedance.im.core.api.BIMClient.getServerTime()
```
获取服务端时间。

**返回值**
服务端时间戳，单位为毫秒。


<span id="BIMClient-getappid"></span>
### getAppID
```java
public int com.bytedance.im.core.api.BIMClient.getAppID()
```
获取当前 appID。

**返回值**
当前 appID


<span id="BIMClient-getconversationlist"></span>
### getConversationList
```java
public void com.bytedance.im.core.api.BIMClient.getConversationList(
    long cursor,
    int count,
    BIMResultCallback<BIMConversationListResult> callback)
```
获取会话列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 100 个会话。 |
| callback | **BIMResultCallback<BIMConversationListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversationListResult](293453#bimconversationlistresult)。 |

**注意**
+ 历史会话数量可能很多，因此建议采用分页查询的方式进行接口调用。
+ 该接口拉取的是本地缓存的会话。若服务器会话有更新，SDK 内部会自动同步，并通过 [BIMResultCallback](293451#bimresultcallback) 回调告知用户。
+ 如果会话全部拉取完毕，结果回调 [BIMResultCallback](293451#bimresultcallback) 中的 hasMore 获取字段值为 false。


<span id="BIMClient-getconversation"></span>
### getConversation
```java
public void com.bytedance.im.core.api.BIMClient.getConversation(
    String conversationId,
    BIMResultCallback<BIMConversation> callback)
```
获取指定单个会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-addconversationlistener"></span>
### addConversationListener
```java
public void com.bytedance.im.core.api.BIMClient.addConversationListener(
    BIMConversationListListener listener)
```
添加会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMConversationListListener** | 会话监听方，参看 [BIMConversationListListener](293451#bimconversationlistlistener)。 |

<span id="BIMClient-removeconversationlistener"></span>
### removeConversationListener
```java
public void com.bytedance.im.core.api.BIMClient.removeConversationListener(
    BIMConversationListListener listener)
```
移除会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMConversationListListener** | 会话监听方，参看 [BIMConversationListListener](293451#bimconversationlistlistener)。 |

<span id="BIMClient-creategroupconversation"></span>
### createGroupConversation
```java
public void com.bytedance.im.core.api.BIMClient.createGroupConversation(
    List<Long> uidList,
    BIMResultCallback<BIMConversation> callback)
```
创建群聊。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **List<Long>** | 用户 ID 列表。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-getconversationmemberlist"></span>
### getConversationMemberList
```java
public void com.bytedance.im.core.api.BIMClient.getConversationMemberList(
    String conversationId,
    BIMResultCallback<List<BIMMember>> callback)
```
获取群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMResultCallback<List<BIMMember>>** | 群成员列表回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMember](293453#bimmember)。 |

<span id="BIMClient-addgroupmemberlist"></span>
### addGroupMemberList
```java
public void com.bytedance.im.core.api.BIMClient.addGroupMemberList(
    String conversationId,
    List<Long> ids,
    BIMSimpleCallback callback)
```
添加群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| ids | **List<Long>** | 待添加的群成员 ID 列表。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-removegroupmemberlist"></span>
### removeGroupMemberList
```java
public void com.bytedance.im.core.api.BIMClient.removeGroupMemberList(
    String conversationId,
    List<Long> ids,
    BIMSimpleCallback callback)
```
移除群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| ids | **List<Long>** | 待移除的群成员 ID 列表。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-setgroupmemberrole"></span>
### setGroupMemberRole
```java
public void com.bytedance.im.core.api.BIMClient.setGroupMemberRole(
    String conversationId,
    List<Long> uidList,
    BIMMemberRole role,
    BIMSimpleCallback callback)
```
设置群成员角色。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| uidList | **List<Long>** | 群成员 ID 列表。 |
| role | **BIMMemberRole** | 群组角色，参看。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-dissolvegroup"></span>
### dissolveGroup
```java
public void com.bytedance.im.core.api.BIMClient.dissolveGroup(
    String conversationId,
    boolean isDeleteLocal,
    BIMSimpleCallback callback)
```
解散群组。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| isDeleteLocal | **boolean** | 是否在本地删除。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-leavegroup"></span>
### leaveGroup
```java
public void com.bytedance.im.core.api.BIMClient.leaveGroup(
    String conversationId,
    boolean isDeleteServer,
    BIMSimpleCallback callback)
```
离开群组。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| isDeleteServer | **boolean** | 是否在服务器删除。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-setgroupname"></span>
### setGroupName
```java
public void com.bytedance.im.core.api.BIMClient.setGroupName(
    String conversationId,
    String name,
    BIMSimpleCallback callback)
```
设置群组名称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| name | **String** | 群组名称。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-setgroupnotice"></span>
### setGroupNotice
```java
public void com.bytedance.im.core.api.BIMClient.setGroupNotice(
    String conversationId,
    String notice,
    BIMSimpleCallback callback)
```
设置群公告。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| notice | **String** | 群公告内容。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-setconversationlocalext"></span>
### setConversationLocalExt
```java
public void com.bytedance.im.core.api.BIMClient.setConversationLocalExt(
    String conversationId,
    Map<String,
    String> ext,
    BIMResultCallback<BIMConversation> callback)
```
设置会话本地额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| ext | **Map<String, String>** | 会话本地额外信息,无多端同步。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback) ,[BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-setconversationmyext"></span>
### setConversationMyExt
```java
public void com.bytedance.im.core.api.BIMClient.setConversationMyExt(
    String conversationId,
    Map<String,
    String> ext,
    BIMResultCallback<BIMConversation> callback)
```
设置会话私有额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| ext | **Map<String, String>** | 会话私有额外信息。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback) ,[BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-setconversationcoreext"></span>
### setConversationCoreExt
```java
public void com.bytedance.im.core.api.BIMClient.setConversationCoreExt(
    String conversationId,
    Map<String,
    String> ext,
    BIMResultCallback<BIMConversation> callback)
```
设置会话额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| ext | **Map<String, String>** | 会话额外信息。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback) ,[BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-createsingleconversation"></span>
### createSingleConversation
```java
public void com.bytedance.im.core.api.BIMClient.createSingleConversation(
    long toUid,
    BIMResultCallback<BIMConversation> callback)
```
创建单聊会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| toUid | **long** | 对方用户 ID。 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversation](293453#bimconversation)。 |

<span id="BIMClient-deleteconversation"></span>
### deleteConversation
```java
public void com.bytedance.im.core.api.BIMClient.deleteConversation(
    long toUid,
    BIMSimpleCallback callback)
```
通过用户 ID 删除会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| toUid | **long** | 对方用户 ID。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

**注意**
调用本接口后，SDK 会从本地和服务端删除该会话及会话中的历史消息，且不可恢复。

<span id="BIMClient-deleteconversation"></span>
### deleteConversation
```java
public void com.bytedance.im.core.api.BIMClient.deleteConversation(
    String conversationId,
    BIMSimpleCallback callback)
```
通过会话 ID 删除会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

**注意**
调用本接口后，SDK 会从本地和服务端删除该会话及会话中的历史消息，且不可恢复。

<span id="BIMClient-markconversationread"></span>
### markConversationRead
```java
public void com.bytedance.im.core.api.BIMClient.markConversationRead(
    String conversationId,
    BIMSimpleCallback callback)
```
标记会话已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |

<span id="BIMClient-sticktopconversation"></span>
### stickTopConversation
```java
public void com.bytedance.im.core.api.BIMClient.stickTopConversation(
    String conversationId,
    boolean isStickTop,
    BIMSimpleCallback callback)
```
置顶会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| isStickTop | **boolean** | 是否置顶。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-muteconversation"></span>
### muteConversation
```java
public void com.bytedance.im.core.api.BIMClient.muteConversation(
    String conversationId,
    boolean isMute,
    BIMSimpleCallback callback)
```
设置会话免打扰。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| isMute | **boolean** | 是否免打扰。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-setconversationdraft"></span>
### setConversationDraft
```java
public void com.bytedance.im.core.api.BIMClient.setConversationDraft(
    String draft,
    String conversationId)
```
设置会话草稿。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| draft | **String** | 草稿内容。 |
| conversationId | **String** | 会话 ID。 |

<span id="BIMClient-gethistorymessagelist"></span>
### getHistoryMessageList
```java
public void com.bytedance.im.core.api.BIMClient.getHistoryMessageList(
    String conversationId,
    BIMGetMessageOption option,
    BIMResultCallback<BIMMessageListResult> callback)
```
获取历史消息（锚点之前的消息），返回消息顺序从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| option | **BIMGetMessageOption** | 获取消息选项，参看 [BIMGetMessageOption](293453#bimgetmessageoption)。 |
| callback | **BIMResultCallback<BIMMessageListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessageListResult](293453#bimmessagelistresult)。 |

<span id="BIMClient-getnewermessagelist"></span>
### getNewerMessageList
```java
public void com.bytedance.im.core.api.BIMClient.getNewerMessageList(
    String conversationId,
    BIMGetMessageOption option,
    BIMResultCallback<BIMMessageListResult> callback)
```
获取历史消息（锚点之后的消息），返回消息顺序从旧到新。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| option | **BIMGetMessageOption** | 获取消息选项，参看 [BIMGetMessageOption](293453#bimgetmessageoption)。 |
| callback | **BIMResultCallback<BIMMessageListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessageListResult](293453#bimmessagelistresult)。 |

<span id="BIMClient-getlocalmessagelistbytype"></span>
### getLocalMessageListByType
```java
public void com.bytedance.im.core.api.BIMClient.getLocalMessageListByType(
    final String conversationId,
    BIMGetMessageByTypeOption option,
    final BIMResultCallback<BIMMessageListResult> callback)
```
获取指定消息类型的本地历史消息（锚点之后的消息），返回消息顺序从旧到新。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **final String** | 会话 ID。 |
| option | **BIMGetMessageByTypeOption** | 获取消息选项，参看 [BIMGetMessageByTypeOption](293453#bimgetmessagebytypeoption)。 |
| callback | **final BIMResultCallback<BIMMessageListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessageListResult](293453#bimmessagelistresult)。 |

<span id="BIMClient-getmessage"></span>
### getMessage
```java
public void com.bytedance.im.core.api.BIMClient.getMessage(
    String uuid,
    BIMResultCallback<BIMMessage> callback)
```
返回查询到的消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uuid | **String** | 消息客户端 Id |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调,参看 [BIMResultCallback](293451#bimresultcallback),[BIMMessage](293453#bimmessage) |

<span id="BIMClient-getmessagebyserverid"></span>
### getMessageByServerID
```java
public void com.bytedance.im.core.api.BIMClient.getMessageByServerID(
    long msgId,
    long conversationShortId,
    boolean isServer,
    BIMResultCallback<BIMMessage> callback)
```
返回查询到的消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| msgId | **long** | 消息服务端 Id |
| isServer | **boolean** | true 表示服务端查询，false 表示客户端本地查询 |
| conversationShortId | **long** | 会话 shortID |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调,参看 [BIMResultCallback](293451#bimresultcallback),[BIMMessage](293453#bimmessage) |

<span id="BIMClient-getconversationbyshortid"></span>
### getConversationByShortID
```java
public void com.bytedance.im.core.api.BIMClient.getConversationByShortID(
    long conversationShortId,
    boolean isServer,
    BIMResultCallback<BIMConversation> callback)
```
返回查询到的会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 会话服务端 Id |
| isServer | **boolean** | true 表示服务端查询，false 表示客户端本地查询 |
| callback | **BIMResultCallback<BIMConversation>** | 结果回调,参看 [BIMResultCallback](293451#bimresultcallback),[BIMConversation](293453#bimconversation) |

<span id="BIMClient-getconversationbyshortidlist"></span>
### getConversationByShortIDList
```java
public void com.bytedance.im.core.api.BIMClient.getConversationByShortIDList(
    List<Long> conversationShortIdList,
    boolean isServer,
    BIMResultCallback<List<BIMConversation>> callback)
```
返回批量查询到的会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortIdList | **List<Long>** | 会话服务端 Id列表，服务端查询建议20个以内，否则接口可能超时失败。 |
| isServer | **boolean** | true 表示服务端查询，false 表示客户端本地查询 |
| callback | **BIMResultCallback<List<BIMConversation>>** | 结果回调，其中 `conversation` 是拉取到的会话 [BIMConversation](293453#bimconversation)，`error` 参看 [BIMErrorCode](293452#bimerrorcode)。 |

<span id="BIMClient-modifymessage"></span>
### modifyMessage
```java
public void com.bytedance.im.core.api.BIMClient.modifyMessage(
    BIMMessage message,
    BIMResultCallback<BIMMessage> callback)
```
修改消息内容和ext。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage** | 待更新的消息 |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调, 参看 [BIMResultCallback](293451#bimresultcallback),[BIMMessage](293453#bimmessage) |

<span id="BIMClient-sendmessage"></span>
### sendMessage
```java
public void com.bytedance.im.core.api.BIMClient.sendMessage(
    final BIMMessage message,
    String conversationId,
    BIMSendCallback callback)
```
发送消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 消息体，由 `createXxxMessage` 接口创建，参看 [BIMMessage](293453#bimmessage)。 |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMSendCallback** | 发送结果回调，参看 [BIMSendCallback](293451#bimsendcallback)。 |

<span id="BIMClient-addlocalmessage"></span>
### addLocalMessage
```java
public void com.bytedance.im.core.api.BIMClient.addLocalMessage(
    final BIMMessage message,
    String conversationId,
    BIMResultCallback<BIMMessage> callback)
```
添加消息到本地。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 待添加的消息，参看 [BIMMessage](293453#bimmessage)。 |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMClient-addmessagelistener"></span>
### addMessageListener
```java
public void com.bytedance.im.core.api.BIMClient.addMessageListener(
    BIMMessageListener listener)
```
设置消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMMessageListener** | 消息监听方，参看 [BIMMessageListener](293451#bimmessagelistener)。 |

<span id="BIMClient-removemessagelistener"></span>
### removeMessageListener
```java
public void com.bytedance.im.core.api.BIMClient.removeMessageListener(
    BIMMessageListener listener)
```
移除消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMMessageListener** | 消息监听方，参看 [BIMMessageListener](293451#bimmessagelistener)。 |

<span id="BIMClient-deletemessage"></span>
### deleteMessage
```java
public void com.bytedance.im.core.api.BIMClient.deleteMessage(
    BIMMessage bimMessage,
    BIMResultCallback<BIMMessage> callback)
```
删除本地和服务端消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| bimMessage | **BIMMessage** | 待删除的消息，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMClient-deletelocalmessage"></span>
### deleteLocalMessage
```java
public void com.bytedance.im.core.api.BIMClient.deleteLocalMessage(
    BIMMessage message,
    BIMResultCallback<BIMMessage> callback)
```
删除本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage** | 待删除的消息，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMClient-recallmessage"></span>
### recallMessage
```java
public void com.bytedance.im.core.api.BIMClient.recallMessage(
    BIMMessage message,
    final BIMResultCallback<BIMMessage> callback)
```
撤回消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage** | 待撤回的消息，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **final BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMClient-createtextmessage"></span>
### createTextMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createTextMessage(
    String text)
```
创建文本消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **String** | 消息文本。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createtextmessage"></span>
### createTextMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createTextMessage(
    String text,
    List<Long> uidList)
```
创建带 @ 标记的消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **String** | 消息文本。 |
| uidList | **List<Long>** | 需要 @ 的用户列表。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


**注意**
仅可在群组中发送带 @ 标记的消息。

<span id="BIMClient-createtextmessage"></span>
### createTextMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createTextMessage(
    String text,
    List<Long> atUidList,
    BIMMessage refMessage,
    String hint)
```
创建带引用消息的文本消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **String** | 消息文本。 |
| atUidList | **List<Long>** | 需要 @ 的用户列表。 |
| refMessage | **BIMMessage** | 引用的消息，参看 [BIMMessage](293453#bimmessage)。 |
| hint | **String** | 业务透传引用信息，无法动态编辑。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createaudiomessage"></span>
### createAudioMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createAudioMessage(
    String path,
    Uri uri)
```
创建语音消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 音频路径。 |
| uri | **Uri** | 音频 uri。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createaudiomessage"></span>
### createAudioMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createAudioMessage(
    String path)
```
创建语音消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 音频路径。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createimagemessage"></span>
### createImageMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createImageMessage(
    String path)
```
创建图片消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 图片路径。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


**注意**
若图片来自系统相册，需要先把图片导入 App 目录下。

<span id="BIMClient-createimagemessage"></span>
### createImageMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createImageMessage(
    String path,
    Uri uri)
```
创建图片消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 图片路径。 |
| uri | **Uri** | 图片 uri。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


**注意**
若图片来自系统相册，需要先把图片导入 App 目录下。

<span id="BIMClient-createvideomessage"></span>
### createVideoMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createVideoMessage(
    String path)
```
创建视频消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 视频路径。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


**注意**
若视频来自系统相册，需要先把视频导入 App 目录下。

<span id="BIMClient-createvideomessage"></span>
### createVideoMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createVideoMessage(
    String path,
    Uri uri)
```
创建视频消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| path | **String** | 视频路径。 |
| uri | **Uri** | 视频 uri。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


**注意**
若视频来自系统相册，需要先把视频导入 App 目录下。

<span id="BIMClient-createfilemessage"></span>
### createFileMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createFileMessage(
    Uri uri,
    String path,
    String fileName,
    long length)
```
创建文件消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uri | **Uri** | 文件 URI。 |
| path | **String** | 文件路径。 |
| fileName | **String** | 文件名称。 |
| length | **long** | 文件大小。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createcustommessage"></span>
### createCustomMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createCustomMessage(
    String data)
```
创建自定义消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| data | **String** | 自定义参数。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-createp2pmessage"></span>
### createP2PMessage
```java
public BIMMessage com.bytedance.im.core.api.BIMClient.createP2PMessage(
    String content)
```
创建自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| content | **String** | 自定义参数。 |
**返回值**
消息体，参看 [BIMMessage](293453#bimmessage)。


<span id="BIMClient-sendp2pmessage"></span>
### sendP2PMessage
```java
public void com.bytedance.im.core.api.BIMClient.sendP2PMessage(
    final BIMMessage message,
    String conversationId,
    BIMSimpleCallback callback)
```
发送自定义透传消息（会话纬度），给会话内所有用户发送自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 自定义透传消息 ID。 |
| conversationId | **String** | 会话 ID。 |
| callback | **BIMSimpleCallback** | 结果回调，其中 `error` 参看 [BIMErrorCode](293452#bimerrorcode)。 |

<span id="BIMClient-sendp2pmessage"></span>
### sendP2PMessage
```java
public void com.bytedance.im.core.api.BIMClient.sendP2PMessage(
    final BIMMessage message,
    String conversationId,
    List<Long> userIdList,
    BIMSimpleCallback callback)
```
发送自定义透传消息（用户纬度），给指定用户发送自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 自定义透传消息 ID。 |
| conversationId | **String** | 会话 ID。 |
| userIdList | **List<Long>** | 用户 ID列表。 |
| callback | **BIMSimpleCallback** | 结果回调，其中 `error` 参看 [BIMErrorCode](293452#bimerrorcode)。 |

<span id="BIMClient-addp2pmessagelistener"></span>
### addP2PMessageListener
```java
public void com.bytedance.im.core.api.BIMClient.addP2PMessageListener(
    BIMP2PMessageListener listener)
```
设置自定义透传消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMP2PMessageListener** | 消息监听方，参看 [BIMP2PMessageListener](293451#bimp2pmessagelistener)。 |

<span id="BIMClient-removep2pmessagelistener"></span>
### removeP2PMessageListener
```java
public void com.bytedance.im.core.api.BIMClient.removeP2PMessageListener(
    BIMP2PMessageListener listener)
```
移除自定义透传消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMP2PMessageListener** | 消息监听方，参看 [BIMP2PMessageListener](293451#bimp2pmessagelistener)。 |

<span id="BIMClient-gettotalunreadmessagecount"></span>
### getTotalUnreadMessageCount
```java
public void com.bytedance.im.core.api.BIMClient.getTotalUnreadMessageCount(
    BIMResultCallback<BIMUnReadInfo> callback)
```
获取所有会话的未读消息总数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **BIMResultCallback<BIMUnReadInfo>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMUnReadInfo](293453#bimunreadinfo)。 |

**注意**
会话未读消息不包括设置为免打扰会话中的未读消息。

<span id="BIMClient-refreshmediamessage"></span>
### refreshMediaMessage
```java
public void com.bytedance.im.core.api.BIMClient.refreshMediaMessage(
    BIMMessage bimMessage,
    BIMResultCallback<BIMMessage> callback)
```
刷新媒体信息，媒体 URL 过期时调用该方法。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| bimMessage | **BIMMessage** | 消息体，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMClient-modifymessageproperty"></span>
### modifyMessageProperty
```java
public void com.bytedance.im.core.api.BIMClient.modifyMessageProperty(
    final BIMMessage message,
    final List<BIMMessageNewPropertyModify> propertyItems,
    final BIMSimpleCallback callback)
```
批量修改消息属性。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 待修改属性的消息，参看 [BIMMessage](293453#bimmessage)。 |
| propertyItems | **final List<BIMMessageNewPropertyModify>** | 更新的消息属性，参看 [BIMMessageNewPropertyModify](293453#bimmessagenewpropertymodify)。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-getmessagesreadreceipt"></span>
### getMessagesReadReceipt
```java
public void com.bytedance.im.core.api.BIMClient.getMessagesReadReceipt(
    List<BIMMessage> messageList,
    final BIMResultCallback<List<BIMMessageReadReceipt>> callback)
```
从服务端批量获取消息已读回执。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| messageList | **List<BIMMessage>** | 需要被查询的消息列表。 |
| callback | **final BIMResultCallback<List<BIMMessageReadReceipt>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback)，[BIMMessageReadReceipt](293453#bimmessagereadreceipt)。 |

<span id="BIMClient-sendmessagereadreceipts"></span>
### sendMessageReadReceipts
```java
public void com.bytedance.im.core.api.BIMClient.sendMessageReadReceipts(
    List<BIMMessage> messageList,
    final BIMSimpleCallback callback)
```
发送消息已读回执。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| messageList | **List<BIMMessage>** | 需要发送已读回执的消息列表。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-markconversationmessagesread"></span>
### markConversationMessagesRead
```java
public void com.bytedance.im.core.api.BIMClient.markConversationMessagesRead(
    final String conversationId,
    final BIMSimpleCallback callback)
```
发送会话已读回执，该方法仅适用于单聊会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **final String** | 会话 ID。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-downloadfile"></span>
### downloadFile
```java
public void com.bytedance.im.core.api.BIMClient.downloadFile(
    BIMMessage message,
    final String url,
    final BIMDownloadCallback callback)
```
下载消息体附件到本地，不建议直播群调用。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage** | 下载消息, 参看 [BIMMessage](293453#bimmessage)。 |
| url | **final String** | 附件URL。 |
| callback | **final BIMDownloadCallback** | 结果回调，参看 [BIMDownloadCallback](293451#bimdownloadcallback)。 |

<span id="BIMClient-getsdkdid"></span>
### getSDKDid
```java
public void com.bytedance.im.core.api.BIMClient.getSDKDid(
    final BIMResultCallback<String> callback)
```
获取设备 did。

**返回值**
设备 did。


<span id="BIMClient-cancelmediafilemessageupload"></span>
### cancelMediaFileMessageUpload
```java
public void com.bytedance.im.core.api.BIMClient.cancelMediaFileMessageUpload(
    final BIMMessage message,
    BIMSimpleCallback callback)
```
取消文件上传。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 上传消息，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **BIMSimpleCallback** | 取消文件上传回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-markconversationread"></span>
### markConversationRead
```java
public void com.bytedance.im.core.api.BIMClient.markConversationRead(
    String conversationId,
    BIMMessage beforeMessage,
    BIMSimpleCallback callback)
```
以指定消息标记已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **String** | 会话 ID。 |
| beforeMessage | **BIMMessage** | 会话中的此条消息之前的未读消息(包含传入的消息)会被置为已读，并减少会话未读数。参看 [BIMMessage](293453#bimmessage)。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMClient-getconversationunreadmessagelist"></span>
### getConversationUnReadMessageList
```java
public void com.bytedance.im.core.api.BIMClient.getConversationUnReadMessageList(
    final String conversationId,
    final BIMGetMessageOption option,
    final BIMResultCallback<BIMMessageListResult> callback)
```
获取未读历史消息，返回消息顺序从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **final String** | 会话 ID。 |
| option | **final BIMGetMessageOption** | 获取消息选项，参看 [BIMGetMessageOption](293453#bimgetmessageoption)。 |
| callback | **final BIMResultCallback<BIMMessageListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback)，[BIMMessageListResult](293453#bimmessagelistresult)。 |

# BIMLiveExpandService
```java
public class com.bytedance.im.live.BIMLiveExpandService
```

IM SDK 直播群对外接口类，通过此类提供所有直播群能力接口。
获取实例方式 BIMClient.getInstance().getService(BIMLiveExpandService.class)，参看 [BIMClient](#bimclient)，直播群不提供本地数据存储。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [getOwnerLiveGroupList](#BIMLiveExpandService-getownerlivegrouplist) |
| **void** | [getAllLiveGroupList](#BIMLiveExpandService-getalllivegrouplist) |
| **void** | [getLiveGroup](#BIMLiveExpandService-getlivegroup) |
| **void** | [getLiveGroupHistoryMessageList](#BIMLiveExpandService-getlivegrouphistorymessagelist) |
| **void** | [getLiveGroupOnLineCount](#BIMLiveExpandService-getlivegrouponlinecount) |
| **void** | [createLiveGroup](#BIMLiveExpandService-createlivegroup) |
| **void** | [joinLiveGroup](#BIMLiveExpandService-joinlivegroup) |
| **void** | [addLiveGroupMessageListener](#BIMLiveExpandService-addlivegroupmessagelistener) |
| **void** | [removeLiveGroupMessageListener](#BIMLiveExpandService-removelivegroupmessagelistener) |
| **void** | [addLiveConversationListener](#BIMLiveExpandService-addliveconversationlistener) |
| **void** | [removeLiveConversationListener](#BIMLiveExpandService-removeliveconversationlistener) |
| **void** | [addLiveGroupMemberListener](#BIMLiveExpandService-addlivegroupmemberlistener) |
| **void** | [removeLiveGroupMemberListener](#BIMLiveExpandService-removelivegroupmemberlistener) |
| **void** | [leaveLiveGroup](#BIMLiveExpandService-leavelivegroup) |
| **void** | [dissolveLiveGroup](#BIMLiveExpandService-dissolvelivegroup) |
| **void** | [getLiveGroupMemberOnlineList](#BIMLiveExpandService-getlivegroupmemberonlinelist) |
| **void** | [getLiveGroupMemberList](#BIMLiveExpandService-getlivegroupmemberlist) |
| **void** | [getLiveGroupMemberSilentWhiteList](#BIMLiveExpandService-getlivegroupmembersilentwhitelist) |
| **void** | [addLiveGroupMemberSilentWhiteList](#BIMLiveExpandService-addlivegroupmembersilentwhitelist) |
| **void** | [removeLiveGroupMemberSilentWhiteList](#BIMLiveExpandService-removelivegroupmembersilentwhitelist) |
| **void** | [getLiveGroupMemberBlockList](#BIMLiveExpandService-getlivegroupmemberblocklist) |
| **void** | [addLiveGroupMemberBlockList](#BIMLiveExpandService-addlivegroupmemberblocklist) |
| **void** | [removeLiveGroupMemberBlockList](#BIMLiveExpandService-removelivegroupmemberblocklist) |
| **void** | [getLiveGroupMemberSilentList](#BIMLiveExpandService-getlivegroupmembersilentlist) |
| **void** | [setLiveGroupSilent](#BIMLiveExpandService-setlivegroupsilent) |
| **void** | [addLiveGroupMemberSilentList](#BIMLiveExpandService-addlivegroupmembersilentlist) |
| **void** | [removeLiveGroupMemberSilentList](#BIMLiveExpandService-removelivegroupmembersilentlist) |
| **void** | [kickLiveGroupMemberList](#BIMLiveExpandService-kicklivegroupmemberlist) |
| **void** | [transLiveGroupOwner](#BIMLiveExpandService-translivegroupowner) |
| **void** | [addLiveGroupAdmin](#BIMLiveExpandService-addlivegroupadmin) |
| **void** | [removeLiveGroupAdmin](#BIMLiveExpandService-removelivegroupadmin) |
| **void** | [setLiveGroupMemberRole](#BIMLiveExpandService-setlivegroupmemberrole) |
| **void** | [setLiveGroupMemberInfo](#BIMLiveExpandService-setlivegroupmemberinfo) |
| **void** | [setLiveGroupMemberAlias](#BIMLiveExpandService-setlivegroupmemberalias) |
| **void** | [setLiveGroupMemberAvatar](#BIMLiveExpandService-setlivegroupmemberavatar) |
| **void** | [addLiveGroupMemberExt](#BIMLiveExpandService-addlivegroupmemberext) |
| **void** | [joinLiveGroup](#joinlivegroup-2) |
| **void** | [getLiveGroupMemberInfo](#BIMLiveExpandService-getlivegroupmemberinfo) |
| **void** | [setLiveGroupNotice](#BIMLiveExpandService-setlivegroupnotice) |
| **void** | [setLiveGroupDescription](#BIMLiveExpandService-setlivegroupdescription) |
| **void** | [setLiveGroupName](#BIMLiveExpandService-setlivegroupname) |
| **void** | [setLiveGroupIcon](#BIMLiveExpandService-setlivegroupicon) |
| **void** | [sendLiveGroupMessage](#BIMLiveExpandService-sendlivegroupmessage) |
| **void** | [sendLiveGroupMessage](#BIMLiveExpandService-sendlivegroupmessage-2) |
| **void** | [getLiveGroupMemberOnlineInfo](#BIMLiveExpandService-getlivegroupmemberonlineinfo) |
| **void** | [refreshLiveGroupMediaMessage](#BIMLiveExpandService-refreshlivegroupmediamessage) |
| **void** | [manageLiveGroupMarkTypes](#BIMLiveExpandService-managelivegroupmarktypes) |
| **void** | [addLiveGroupMarkTypeListener](#BIMLiveExpandService-addlivegroupmarktypelistener) |
| **void** | [removeLiveGroupMarkTypeListener](#BIMLiveExpandService-removelivegroupmarktypelistener) |
| **void** | [markLiveGroupMemberList](#BIMLiveExpandService-marklivegroupmemberlist) |
| **void** | [getLiveGroupMarkTypeList](#BIMLiveExpandService-getlivegroupmarktypelist) |
| **void** | [getLiveGroupMemberOnlineList](#getlivegroupmemberonlinelist-2) |

## 函数说明
<span id="BIMLiveExpandService-getownerlivegrouplist"></span>
### getOwnerLiveGroupList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getOwnerLiveGroupList(
    long cursor,
    int count,
    final BIMResultCallback<BIMLiveGroupListResult> callback)
```
获取我是群主的直播群列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个会话。 |
| callback | **final BIMResultCallback<BIMLiveGroupListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveGroupListResult](293453#bimlivegrouplistresult)。 |

<span id="BIMLiveExpandService-getalllivegrouplist"></span>
### getAllLiveGroupList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getAllLiveGroupList(
    long cursor,
    int count,
    final BIMResultCallback<BIMLiveGroupListResult> callback)
```
获取当前应用下的所有直播群列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个会话。 |
| callback | **final BIMResultCallback<BIMLiveGroupListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveGroupListResult](293453#bimlivegrouplistresult)。 |

<span id="BIMLiveExpandService-getlivegroup"></span>
### getLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroup(
    long conversationShortId,
    final BIMResultCallback<BIMConversation> callback)
```
获取直播群信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群会话 shortId。 |
| callback | **final BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversation](293453#bimconversation)。 |

<span id="BIMLiveExpandService-getlivegrouphistorymessagelist"></span>
### getLiveGroupHistoryMessageList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupHistoryMessageList(
    long conversationShortId,
    long cursor,
    long limit,
    final BIMResultCallback<BIMLiveMessageListResult> callback)
```
获取直播群历史消息(从新到旧)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群会话 shortId。 |
| cursor | **long** | 直播群历史消息拉取起点 |
| callback | **final BIMResultCallback<BIMLiveMessageListResult>** | 获取直播群历史消息，参看 [BIMResultCallback](293451#bimresultcallback),[BIMLiveMessageListResult](293453#bimlivemessagelistresult)。 |

<span id="BIMLiveExpandService-getlivegrouponlinecount"></span>
### getLiveGroupOnLineCount
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupOnLineCount(
    long conversationShortId,
    final BIMResultCallback<Long> callback)
```
获取直播群在线人数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群会话 shortId。 |
| callback | **final BIMResultCallback<Long>** | 在线人数结果回调，参看 [BIMResultCallback](293451#bimresultcallback)。 |

<span id="BIMLiveExpandService-createlivegroup"></span>
### createLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.createLiveGroup(
    BIMGroupInfo groupInfo,
    final BIMResultCallback<BIMConversation> callback)
```
创建直播群。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| groupInfo | **BIMGroupInfo** | 创建直播群参数信息，包括名称，头像等，参看 [BIMGroupInfo](293453#bimgroupinfo) |
| callback | **final BIMResultCallback<BIMConversation>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversation](293453#bimconversation)。 |

<span id="BIMLiveExpandService-joinlivegroup"></span>
### joinLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.joinLiveGroup(
    final long conversationShortId,
    final BIMResultCallback<BIMLiveJoinGroupResult> callback)
```
加入直播群，加入直播群后可以收发当前群的信息，直播群不提供本地存储。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **final long** | 直播群 ShortId。 |
| callback | **final BIMResultCallback<BIMLiveJoinGroupResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveJoinGroupResult](293453#bimlivejoingroupresult)。 |

<span id="BIMLiveExpandService-addlivegroupmessagelistener"></span>
### addLiveGroupMessageListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMessageListener(
    BIMLiveMessageListener listener)
```
设置直播群消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveMessageListener** | 直播群消息事件回调监听方，参看 [BIMLiveMessageListener](293451#bimlivemessagelistener)。 |

<span id="BIMLiveExpandService-removelivegroupmessagelistener"></span>
### removeLiveGroupMessageListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMessageListener(
    BIMLiveMessageListener listener)
```
设置直播群消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveMessageListener** | 直播群消息事件回调监听方，参看 [BIMLiveMessageListener](293451#bimlivemessagelistener)。 |

<span id="BIMLiveExpandService-addliveconversationlistener"></span>
### addLiveConversationListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveConversationListener(
    BIMLiveConversationListener listener)
```
设置直播群会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveConversationListener** | 直播群会话事件回调监听方，参看 [BIMLiveConversationListener](293451#bimliveconversationlistener)。 |

<span id="BIMLiveExpandService-removeliveconversationlistener"></span>
### removeLiveConversationListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveConversationListener(
    BIMLiveConversationListener listener)
```
移除直播群会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveConversationListener** | 直播群会话事件回调监听方，参看 [BIMLiveConversationListener](293451#bimliveconversationlistener)。 |

<span id="BIMLiveExpandService-addlivegroupmemberlistener"></span>
### addLiveGroupMemberListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMemberListener(
    BIMLiveGroupMemberEventListener listener)
```
设置直播群成员监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveGroupMemberEventListener** | 直播群成员事件回调监听方，参看 [BIMLiveGroupMemberEventListener](293451#bimlivegroupmembereventlistener)。 |

<span id="BIMLiveExpandService-removelivegroupmemberlistener"></span>
### removeLiveGroupMemberListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMemberListener(
    BIMLiveGroupMemberEventListener listener)
```
移除直播群成员监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveGroupMemberEventListener** | 直播群成员事件回调监听方，参看 [BIMLiveGroupMemberEventListener](293451#bimlivegroupmembereventlistener)。 |

<span id="BIMLiveExpandService-leavelivegroup"></span>
### leaveLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.leaveLiveGroup(
    long conversationShortId,
    BIMSimpleCallback callback)
```
离开直播群。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| callback | **BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-dissolvelivegroup"></span>
### dissolveLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.dissolveLiveGroup(
    long conversationShortId,
    final BIMSimpleCallback callback)
```
解散直播群，仅群主可操作。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-getlivegroupmemberonlinelist"></span>
### getLiveGroupMemberOnlineList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberOnlineList(
    long conversationShortId,
    long cursor,
    long count,
    final BIMResultCallback<BIMLiveMemberListResult> callback)
```
获取直播群在线用户列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **final BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

**注意**
+ 使用国内环境时，支持拉取最新加群的 10,000 个在线成员。
+ 使用海外环境时，支持拉取最新加群的 3,000 个在线成员。


<span id="BIMLiveExpandService-getlivegroupmemberlist"></span>
### getLiveGroupMemberList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberList(
    long conversationShortId,
    long cursor,
    long count,
    final BIMResultCallback<BIMLiveMemberListResult> callback)
```
获取直播群群主管理员等常驻成员列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **final BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

<span id="BIMLiveExpandService-getlivegroupmembersilentwhitelist"></span>
### getLiveGroupMemberSilentWhiteList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberSilentWhiteList(
    long conversationShortId,
    long cursor,
    long count,
    final BIMResultCallback<BIMLiveMemberListResult> callback)
```
获取会话禁言白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **final BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

<span id="BIMLiveExpandService-addlivegroupmembersilentwhitelist"></span>
### addLiveGroupMemberSilentWhiteList
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMemberSilentWhiteList(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
添加禁言会话白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 成员列表 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-removelivegroupmembersilentwhitelist"></span>
### removeLiveGroupMemberSilentWhiteList
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMemberSilentWhiteList(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
移除禁言会话白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 成员列表 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-getlivegroupmemberblocklist"></span>
### getLiveGroupMemberBlockList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberBlockList(
    long conversationShortId,
    long cursor,
    long count,
    BIMResultCallback<BIMLiveMemberListResult> callback)
```
获取直播群进群黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback),[BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

<span id="BIMLiveExpandService-addlivegroupmemberblocklist"></span>
### addLiveGroupMemberBlockList
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMemberBlockList(
    long conversationShortId,
    List<Long> uidList,
    long blockTime,
    final BIMSimpleCallback callback)
```
添加群进群黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 待加入禁言成员 UID 列表。 |
| blockTime | **long** | 禁言时间(绝对时间), 单位: 秒(s) |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-removelivegroupmemberblocklist"></span>
### removeLiveGroupMemberBlockList
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMemberBlockList(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
添加群进群黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 待移出禁言成员 UID 列表。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-getlivegroupmembersilentlist"></span>
### getLiveGroupMemberSilentList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberSilentList(
    long conversationShortId,
    long cursor,
    long count,
    BIMResultCallback<BIMLiveMemberListResult> callback)
```
获取直播群禁言用户列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback),[BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

<span id="BIMLiveExpandService-setlivegroupsilent"></span>
### setLiveGroupSilent
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupSilent(
    long conversationShortId,
    boolean isSilent,
    final BIMSimpleCallback callback)
```
设置会话禁言(所有成员禁言)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| isSilent | **boolean** | 禁言设置为 true、取消禁言设置为 false。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

<span id="BIMLiveExpandService-addlivegroupmembersilentlist"></span>
### addLiveGroupMemberSilentList
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMemberSilentList(
    long conversationShortId,
    List<Long> uidList,
    long blockTime,
    final BIMSimpleCallback callback)
```
添加群成员禁言。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 待添加禁言成员 UID 列表。 |
| blockTime | **long** | 禁言时间(绝对时间), 单位: 秒(s) |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-removelivegroupmembersilentlist"></span>
### removeLiveGroupMemberSilentList
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMemberSilentList(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
移出群成员禁言。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 待添加禁言成员 UID 列表。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-kicklivegroupmemberlist"></span>
### kickLiveGroupMemberList
```java
public void com.bytedance.im.live.BIMLiveExpandService.kickLiveGroupMemberList(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
踢出在线成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 踢出成员 UID 列表。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-translivegroupowner"></span>
### transLiveGroupOwner
```java
public void com.bytedance.im.live.BIMLiveExpandService.transLiveGroupOwner(
    long conversationShortId,
    long uid,
    final BIMSimpleCallback callback)
```
转让群主。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uid | **long** | 转让群主用户 ID。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-addlivegroupadmin"></span>
### addLiveGroupAdmin
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupAdmin(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
设置直播群管理员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 设置群管理员列表 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-removelivegroupadmin"></span>
### removeLiveGroupAdmin
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupAdmin(
    long conversationShortId,
    List<Long> uidList,
    final BIMSimpleCallback callback)
```
移除直播群管理员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 移除群管理员列表 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupmemberrole"></span>
### setLiveGroupMemberRole
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupMemberRole(
    long conversationShortId,
    List<Long> uidList,
    BIMMemberRole role,
    final BIMSimpleCallback callback)
```
设置成员角色。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 设置成员列表 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupmemberinfo"></span>
### setLiveGroupMemberInfo
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupMemberInfo(
    long conversationShortId,
    MemberUpdateInfo memberInfo,
    final BIMSimpleCallback callback)
```
设置直播群成员信息，覆盖服务端存储。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| memberInfo | **MemberUpdateInfo** | 设置当前用户成员信息，参看 [MemberUpdateInfo](293453#memberupdateinfo)。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

**注意**
成员信息与用户信息不同，用户在不同直播群可以拥有不同的成员信息，退群后信息自动销毁。

<span id="BIMLiveExpandService-setlivegroupmemberalias"></span>
### setLiveGroupMemberAlias
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupMemberAlias(
    long conversationShortId,
    String alias,
    final BIMSimpleCallback callback)
```
设置直播群成员昵称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| alias | **String** | 设置当前用户成员昵称。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupmemberavatar"></span>
### setLiveGroupMemberAvatar
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupMemberAvatar(
    long conversationShortId,
    String avatarUrl,
    final BIMSimpleCallback callback)
```
设置直播群成员头像。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| avatarUrl | **String** | 设置当前用户成员头像 URL。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-addlivegroupmemberext"></span>
### addLiveGroupMemberExt
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMemberExt(
    long conversationShortId,
    Map<String,String> ext,
    final BIMSimpleCallback callback)
```
设置直播群成员自定义信息，相同 key 会覆盖。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| ext | **Map<String,String>** | 设置直播群成员自定义信息。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-joinlivegroup"></span>
### joinLiveGroup
```java
public void com.bytedance.im.live.BIMLiveExpandService.joinLiveGroup(
    final long conversationShortId,
    MemberUpdateInfo memberInfo,
    final BIMResultCallback<BIMLiveJoinGroupResult> callback)
```
加入直播群并设置当前用户成员信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **final long** | 直播群 ShortId。 |
| memberInfo | **MemberUpdateInfo** | 当前用户成员信息，参看 [MemberUpdateInfo](293453#memberupdateinfo)。 |
| callback | **final BIMResultCallback<BIMLiveJoinGroupResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveJoinGroupResult](293453#bimlivejoingroupresult)。 |

**注意**
+ 同一时间只能进入一个直播群，直播群不提供本地存储。
+ 成员信息与用户信息不同，用户在不同直播群可以拥有不同的成员信息，退群后信息自动销毁。


<span id="BIMLiveExpandService-getlivegroupmemberinfo"></span>
### getLiveGroupMemberInfo
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberInfo(
    long conversationShortId,
    long uid,
    final BIMResultCallback<BIMMember> callback)
```
获取直播群成员信息，其中包括当前在直播群的成员以及群主管理员，退出群的游客信息无法获取。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uid | **long** | 直播群成员 uid |
| callback | **final BIMResultCallback<BIMMember>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveJoinGroupResult](293453#bimlivejoingroupresult)。 |

<span id="BIMLiveExpandService-setlivegroupnotice"></span>
### setLiveGroupNotice
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupNotice(
    long conversationShortId,
    String notice,
    final BIMSimpleCallback callback)
```
设置群公告。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| notice | **String** | 群公告。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupdescription"></span>
### setLiveGroupDescription
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupDescription(
    long conversationShortId,
    String description,
    final BIMSimpleCallback callback)
```
设置群描述。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| description | **String** | 群描述。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupname"></span>
### setLiveGroupName
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupName(
    long conversationShortId,
    String name,
    final BIMSimpleCallback callback)
```
设置群名称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| name | **String** | 群名称。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-setlivegroupicon"></span>
### setLiveGroupIcon
```java
public void com.bytedance.im.live.BIMLiveExpandService.setLiveGroupIcon(
    long conversationShortId,
    String url,
    final BIMSimpleCallback callback)
```
设置群头像。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| url | **String** | 群头像 URL。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-sendlivegroupmessage"></span>
### sendLiveGroupMessage
```java
public void com.bytedance.im.live.BIMLiveExpandService.sendLiveGroupMessage(
    final BIMMessage message,
    BIMConversation conversation,
    final BIMSendCallback callback)
```
发送直播群消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 发送的消息体，参看 [BIMMessage](293453#bimmessage)。 |
| conversation | **BIMConversation** | 会话信息, 参看 [BIMConversation](293453#bimconversation) |
| callback | **final BIMSendCallback** | 结果回调，参看 [BIMSendCallback](293451#bimsendcallback)。 |

**注意**
若需要为消息设置优先级，请调用 [sendLiveGroupMessage](293450#BIMLiveExpandService-sendlivegroupmessage-2)。

<span id="BIMLiveExpandService-sendlivegroupmessage"></span>
### sendLiveGroupMessage
```java
public void com.bytedance.im.live.BIMLiveExpandService.sendLiveGroupMessage(
    final BIMMessage message,
    BIMConversation conversation,
    BIMMessagePriority priority,
    final BIMSendCallback callback)
```
<span id="BIMLiveExpandService-sendlivegroupmessage-2"></span>
发送直播群消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **final BIMMessage** | 发送的消息体，参看 [BIMMessage](293453#bimmessage)。 |
| conversation | **BIMConversation** | 会话信息，参看 [BIMConversation](293453#bimconversation)。 |
| priority | **BIMMessagePriority** | 设置消息优先级，参看 [BIMMessagePriority](293453#bimmessagepriority)。 |
| callback | **final BIMSendCallback** | 结果回调，参看 [BIMSendCallback](293451#bimsendcallback)。 |

<span id="BIMLiveExpandService-getlivegroupmemberonlineinfo"></span>
### getLiveGroupMemberOnlineInfo
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberOnlineInfo(
    long conversationId,
    List<Long> uidList,
    final BIMResultCallback<List<BIMLiveMemberOnlineInfo>> callback)
```
获取直播群成员在线信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **long** | 会话 ID。 |
| uidList | **List<Long>** | 成员 ID 列表。 |
| callback | **final BIMResultCallback<List<BIMLiveMemberOnlineInfo>>** | 结果回调， 参看 [BIMLiveMemberOnlineInfo](293453#bimlivememberonlineinfo) |

<span id="BIMLiveExpandService-refreshlivegroupmediamessage"></span>
### refreshLiveGroupMediaMessage
```java
public void com.bytedance.im.live.BIMLiveExpandService.refreshLiveGroupMediaMessage(
    final BIMMessage bimMessage,
    final BIMResultCallback<BIMMessage> callback)
```
刷新直播群媒体信息，媒体 URL 过期时调用该方法。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| bimMessage | **final BIMMessage** | 消息体，参看 [BIMMessage](293453#bimmessage)。 |
| callback | **final BIMResultCallback<BIMMessage>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMMessage](293453#bimmessage)。 |

<span id="BIMLiveExpandService-managelivegroupmarktypes"></span>
### manageLiveGroupMarkTypes
```java
public void com.bytedance.im.live.BIMLiveExpandService.manageLiveGroupMarkTypes(
    long conversationShortId,
    BIMLiveGroupMarkTypeAction action,
    List<String> markTypeList,
    final BIMSimpleCallback callback)
```
管理群成员标记类型。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| action | **BIMLiveGroupMarkTypeAction** | 标记变更类型，参看 [BIMLiveGroupMarkTypeAction](293453#bimlivegroupmarktypeaction)。 |
| markTypeList | **List<String>** | 标记列表。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMLiveExpandService-addlivegroupmarktypelistener"></span>
### addLiveGroupMarkTypeListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.addLiveGroupMarkTypeListener(
    BIMLiveGroupMarkTypeListener listener)
```
新增直播群标记事件监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveGroupMarkTypeListener** | 直播群标记事件回调监听方，参看 [BIMLiveGroupMarkTypeListener](293451#bimlivegroupmarktypelistener)。 |

<span id="BIMLiveExpandService-removelivegroupmarktypelistener"></span>
### removeLiveGroupMarkTypeListener
```java
public void com.bytedance.im.live.BIMLiveExpandService.removeLiveGroupMarkTypeListener(
    BIMLiveGroupMarkTypeListener listener)
```
移除直播群标记事件监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMLiveGroupMarkTypeListener** | 直播群标记事件回调监听方，参看 [BIMLiveGroupMarkTypeListener](293451#bimlivegroupmarktypelistener)。 |

<span id="BIMLiveExpandService-marklivegroupmemberlist"></span>
### markLiveGroupMemberList
```java
public void com.bytedance.im.live.BIMLiveExpandService.markLiveGroupMemberList(
    long conversationShortId,
    List<Long> uidList,
    BIMLiveGroupMarkTypeAction action,
    List<String> markTypeList,
    final BIMResultCallback<List<BIMLiveGroupMarkMemberFailedInfo>> callback)
```
标记群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| uidList | **List<Long>** | 成员列表。 |
| action | **BIMLiveGroupMarkTypeAction** | 标记变更类型，参看 [BIMLiveGroupMarkTypeAction](293453#bimlivegroupmarktypeaction)。 |
| markTypeList | **List<String>** | 标记列表 |
| callback | **final BIMResultCallback<List<BIMLiveGroupMarkMemberFailedInfo>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveGroupMarkMemberFailedInfo](293453#bimlivegroupmarkmemberfailedinfo) |

<span id="BIMLiveExpandService-getlivegroupmarktypelist"></span>
### getLiveGroupMarkTypeList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMarkTypeList(
    long conversationShortId,
    final BIMResultCallback<List<String>> callback)
```
获取群聊标记类型列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| callback | **final BIMResultCallback<List<String>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback). |

<span id="BIMLiveExpandService-getlivegroupmemberonlinelist"></span>
### getLiveGroupMemberOnlineList
```java
public void com.bytedance.im.live.BIMLiveExpandService.getLiveGroupMemberOnlineList(
    long conversationShortId,
    long cursor,
    long count,
    String markType,
    final BIMResultCallback<BIMLiveMemberListResult> callback)
```
根据标记获取直播群在线用户列表。
支持拉取近 1000 个在线游客。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long** | 直播群 ShortId。 |
| markType | **String** | 标记类型。 |
| cursor | **long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **long** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 成员。 |
| callback | **final BIMResultCallback<BIMLiveMemberListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMLiveMemberListResult](293453#bimlivememberlistresult)。 |

# BIMContactExpandService
```java
public class com.bytedance.im.user.BIMContactExpandService
```

IM SDK 联系人对外接口类，通过此类提供所有联系人能力接口。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [getFriendApplyList](#BIMContactExpandService-getfriendapplylist) |
| **void** | [getFriendList](#BIMContactExpandService-getfriendlist) |
| **void** | [applyFriend](#BIMContactExpandService-applyfriend) |
| **void** | [deleteFriend](#BIMContactExpandService-deletefriend) |
| **void** | [replyFriendApply](#BIMContactExpandService-replyfriendapply) |
| **void** | [markFriendApplyRead](#BIMContactExpandService-markfriendapplyread) |
| **void** | [addFriendListener](#BIMContactExpandService-addfriendlistener) |
| **void** | [getFriendApplyUnreadCount](#BIMContactExpandService-getfriendapplyunreadcount) |
| **boolean** | [removeFriendListener](#BIMContactExpandService-removefriendlistener) |
| **void** | [addToBlackList](#BIMContactExpandService-addtoblacklist) |
| **void** | [deleteFromBlackList](#BIMContactExpandService-deletefromblacklist) |
| **void** | [checkUserInBlackList](#BIMContactExpandService-checkuserinblacklist) |
| **void** | [getBlackList](#BIMContactExpandService-getblacklist) |
| **void** | [getBlackList](#getblacklist-2) |
| **void** | [updateFriendAlias](#BIMContactExpandService-updatefriendalias) |
| **void** | [getUserFullInfo](#BIMContactExpandService-getuserfullinfo) |
| **void** | [getUserFullInfo](#getuserfullinfo-2) |
| **void** | [getUserFullInfoList](#BIMContactExpandService-getuserfullinfolist) |
| **void** | [getUserFullInfoList](#getuserfullinfolist-2) |
| **void** | [setUserSelfPortrait](#BIMContactExpandService-setuserselfportrait) |
| **void** | [setUserSelfNickName](#BIMContactExpandService-setuserselfnickname) |
| **void** | [setUserSelfExt](#BIMContactExpandService-setuserselfext) |
| **void** | [updateUserSelfProfile](#BIMContactExpandService-updateuserselfprofile) |
| **void** | [addFriendConversationListener](#BIMContactExpandService-addfriendconversationlistener) |
| **void** | [getFriendConversationList](#BIMContactExpandService-getfriendconversationlist) |
| **void** | [getFriendConversationListTotalUnreadCount](#BIMContactExpandService-getfriendconversationlisttotalunreadcount) |
| **void** | [removeFriendConversationListener](#BIMContactExpandService-removefriendconversationlistener) |

## 函数说明
<span id="BIMContactExpandService-getfriendapplylist"></span>
### getFriendApplyList
```java
public void com.bytedance.im.user.BIMContactExpandService.getFriendApplyList(
    long cursor,
    long limit,
    final BIMResultCallback<BIMFriendApplyListResult> callback)
```
获取好友申请列表，按发起申请的时间排序（从新到旧）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long** | 游标，首页拉取可使用 0。 |
| limit | **long** | 查询条数。 |
| callback | **final BIMResultCallback<BIMFriendApplyListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMFriendApplyListResult](293453#bimfriendapplylistresult)。 |

<span id="BIMContactExpandService-getfriendlist"></span>
### getFriendList
```java
public void com.bytedance.im.user.BIMContactExpandService.getFriendList(
    final BIMResultCallback<List<BIMUserFullInfo>> callback)
```
获取好友列表（全量）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **final BIMResultCallback<List<BIMUserFullInfo>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-applyfriend"></span>
### applyFriend
```java
public void com.bytedance.im.user.BIMContactExpandService.applyFriend(
    final BIMApplyInfo applyInfo,
    final BIMResultCallback<BIMFriendApplyInfo> callback)
```
申请添加好友。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| applyInfo | **final BIMApplyInfo** | 申请信息，参看 [BIMApplyInfo](293453#bimapplyinfo)。 |
| callback | **final BIMResultCallback<BIMFriendApplyInfo>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMFriendApplyInfo](293453#bimfriendapplyinfo)。 |

<span id="BIMContactExpandService-deletefriend"></span>
### deleteFriend
```java
public void com.bytedance.im.user.BIMContactExpandService.deleteFriend(
    long uid,
    final BIMSimpleCallback callback)
```
删除好友。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long** | 联系人用户 ID。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMContactExpandService-replyfriendapply"></span>
### replyFriendApply
```java
public void com.bytedance.im.user.BIMContactExpandService.replyFriendApply(
    final BIMReplyInfo replyInfo,
    final BIMResultCallback<BIMFriendApplyInfo> callback)
```
回应好友申请。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| replyInfo | **final BIMReplyInfo** | 回应信息, 参看 [BIMReplyInfo](293453#bimreplyinfo)。 |
| callback | **final BIMResultCallback<BIMFriendApplyInfo>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback)，[BIMFriendApplyInfo](293453#bimfriendapplyinfo)。 |

<span id="BIMContactExpandService-markfriendapplyread"></span>
### markFriendApplyRead
```java
public void com.bytedance.im.user.BIMContactExpandService.markFriendApplyRead(
    final BIMSimpleCallback callback)
```
标记好友申请已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback) 。 |

<span id="BIMContactExpandService-addfriendlistener"></span>
### addFriendListener
```java
public void com.bytedance.im.user.BIMContactExpandService.addFriendListener(
    BIMFriendListener listener)
```
设置联系人监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMFriendListener** | 联系人消息事件回调监听方，参看 [BIMFriendListener](293451#bimfriendlistener) 。 |

<span id="BIMContactExpandService-getfriendapplyunreadcount"></span>
### getFriendApplyUnreadCount
```java
public void com.bytedance.im.user.BIMContactExpandService.getFriendApplyUnreadCount(
    BIMResultCallback<Integer> callback)
```
获取好友申请未读数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **BIMResultCallback<Integer>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback) 。 |

<span id="BIMContactExpandService-removefriendlistener"></span>
### removeFriendListener
```java
public boolean com.bytedance.im.user.BIMContactExpandService.removeFriendListener(
    BIMFriendListener listener)
```
移除联系人监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMFriendListener** | 结果回调，参看 [BIMFriendListener](293451#bimfriendlistener) 。 |

<span id="BIMContactExpandService-addtoblacklist"></span>
### addToBlackList
```java
public void com.bytedance.im.user.BIMContactExpandService.addToBlackList(
    BIMBlackListFriendInfo blackListFriendInfo,
    final BIMResultCallback<BIMUserFullInfo> callback)
```
添加该用户到黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| blackListFriendInfo | **BIMBlackListFriendInfo** | 黑名单信息，参看 [BIMBlackListFriendInfo](293453#bimblacklistfriendinfo)。 |
| callback | **final BIMResultCallback<BIMUserFullInfo>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback)。 |

<span id="BIMContactExpandService-deletefromblacklist"></span>
### deleteFromBlackList
```java
public void com.bytedance.im.user.BIMContactExpandService.deleteFromBlackList(
    long uid,
    final BIMSimpleCallback callback)
```
把该用户从黑名单中移除。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long** | 联系人用户 ID。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMContactExpandService-checkuserinblacklist"></span>
### checkUserInBlackList
```java
public void com.bytedance.im.user.BIMContactExpandService.checkUserInBlackList(
    List<Long> ids,
    final BIMResultCallback<Map<Long,
    Boolean>> callback)
```
校验用户是否在黑名单中。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| ids | **List<Long>** | 用户id列表。 |
| callback | **Boolean>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback)。 |

<span id="BIMContactExpandService-getblacklist"></span>
### getBlackList
```java
public void com.bytedance.im.user.BIMContactExpandService.getBlackList(
    final BIMResultCallback<List<BIMUserFullInfo>> callback)
```
获取黑名单信息（全量）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **final BIMResultCallback<List<BIMUserFullInfo>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-getblacklist"></span>
### getBlackList
```java
public void com.bytedance.im.user.BIMContactExpandService.getBlackList(
    long cursor,
    long limit,
    final BIMResultCallback<BIMUserInfoListResult> callback)
```
分页获取黑名单信息，按照拉黑时间从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long** | 游标，首页拉取可使用 0。 |
| limit | **long** | 查询条数。 |
| callback | **final BIMResultCallback<BIMUserInfoListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMUserInfoListResult](293453#bimuserinfolistresult)。 |

<span id="BIMContactExpandService-updatefriendalias"></span>
### updateFriendAlias
```java
public void com.bytedance.im.user.BIMContactExpandService.updateFriendAlias(
    long uid,
    String alias,
    final BIMSimpleCallback callback)
```
修改好友备注名。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long** | 好友用户 ID。 |
| alias | **String** | 好友备注名。 |
| callback | **final BIMSimpleCallback** | 结果回调，参看 [BIMSimpleCallback](293451#bimsimplecallback)。 |

<span id="BIMContactExpandService-getuserfullinfo"></span>
### getUserFullInfo
```java
public void com.bytedance.im.user.BIMContactExpandService.getUserFullInfo(
    long uid,
    final BIMResultCallback<BIMUserFullInfo> callback)
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long** | 用户 ID。 |
| callback | **final BIMResultCallback<BIMUserFullInfo>** | 全量信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-getuserfullinfo"></span>
### getUserFullInfo
```java
public void com.bytedance.im.user.BIMContactExpandService.getUserFullInfo(
    long uid,
    boolean syncServer,
    final BIMResultCallback<BIMUserFullInfo> callback)
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long** | 用户 ID。 |
| syncServer | **boolean** | 是否强制同步服务端数据，如 false 则优先使用本地数据 |
| callback | **final BIMResultCallback<BIMUserFullInfo>** | 全量信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-getuserfullinfolist"></span>
### getUserFullInfoList
```java
public void com.bytedance.im.user.BIMContactExpandService.getUserFullInfoList(
    List<Long> uidList,
    final BIMResultCallback<List<BIMUserFullInfo>> callback)
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **List<Long>** | 用户 ID 列表。 |
| callback | **final BIMResultCallback<List<BIMUserFullInfo>>** | 全量信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-getuserfullinfolist"></span>
### getUserFullInfoList
```java
public void com.bytedance.im.user.BIMContactExpandService.getUserFullInfoList(
    List<Long> uidList,
    boolean syncServer,
    final BIMResultCallback<List<BIMUserFullInfo>> callback)
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **List<Long>** | 用户 ID 列表。 |
| syncServer | **boolean** | 是否强制同步服务端数据，如 false 则优先使用本地数据 |
| callback | **final BIMResultCallback<List<BIMUserFullInfo>>** | 全量信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-setuserselfportrait"></span>
### setUserSelfPortrait
```java
public void com.bytedance.im.user.BIMContactExpandService.setUserSelfPortrait(
    String portraitUrl,
    BIMResultCallback<BIMUserFullInfo> callback)
```
更新用户头像信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| portraitUrl | **String** | 用户头像 url |
| callback | **BIMResultCallback<BIMUserFullInfo>** | 用户信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-setuserselfnickname"></span>
### setUserSelfNickName
```java
public void com.bytedance.im.user.BIMContactExpandService.setUserSelfNickName(
    String nickName,
    BIMResultCallback<BIMUserFullInfo> callback)
```
更新用户昵称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| nickName | **String** | 用户昵称 |
| callback | **BIMResultCallback<BIMUserFullInfo>** | 用户信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-setuserselfext"></span>
### setUserSelfExt
```java
public void com.bytedance.im.user.BIMContactExpandService.setUserSelfExt(
    Map<String,
    String> ext,
    BIMResultCallback<BIMUserFullInfo> callback)
```
更新用户额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| ext | **Map<String, String>** | 用户额外信息 |
| callback | **BIMResultCallback<BIMUserFullInfo>** | 用户信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-updateuserselfprofile"></span>
### updateUserSelfProfile
```java
public void com.bytedance.im.user.BIMContactExpandService.updateUserSelfProfile(
    BIMUserProfile bimUserProfile,
    final BIMResultCallback<BIMUserFullInfo> callback)
```
更新用户信息详情。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| bimUserProfile | **BIMUserProfile** | 用户信息详情，参看 [BIMUserProfile](293453#bimuserprofile)。 |
| callback | **final BIMResultCallback<BIMUserFullInfo>** | 用户信息，参看 [BIMUserFullInfo](293453#bimuserfullinfo)。 |

<span id="BIMContactExpandService-addfriendconversationlistener"></span>
### addFriendConversationListener
```java
public void com.bytedance.im.user.BIMContactExpandService.addFriendConversationListener(
    BIMConversationListListener listener)
```
添加好友会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMConversationListListener** | 会话监听方，参看 [BIMConversationListListener](293451#bimconversationlistlistener)。 |

<span id="BIMContactExpandService-getfriendconversationlist"></span>
### getFriendConversationList
```java
public void com.bytedance.im.user.BIMContactExpandService.getFriendConversationList(
    final long cursor,
    final int count,
    final BIMResultCallback<BIMConversationListResult> callback)
```
获取好友会话列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **final long** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **final int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 100 个会话。 |
| callback | **final BIMResultCallback<BIMConversationListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMConversationListResult](293453#bimconversationlistresult)。 |

**注意**
+ 历史朋友会话数量可能很多，因此建议采用分页查询的方式进行接口调用。
+ 该接口拉取的是本地缓存的会话。若服务器会话有更新，SDK 内部会自动同步，并通过 [BIMResultCallback](293451#bimresultcallback) 回调告知用户。
+ 如果会话全部拉取完毕，结果回调 [BIMResultCallback](293451#bimresultcallback) 中的 hasMore 获取字段值为 false。


<span id="BIMContactExpandService-getfriendconversationlisttotalunreadcount"></span>
### getFriendConversationListTotalUnreadCount
```java
public void com.bytedance.im.user.BIMContactExpandService.getFriendConversationListTotalUnreadCount(
    final BIMResultCallback<BIMUnReadInfo> callback)
```
获取所有好友会话的未读消息总数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| callback | **final BIMResultCallback<BIMUnReadInfo>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMUnReadInfo](293453#bimunreadinfo)。 |

**注意**
会话未读消息不包括设置为免打扰会话中的未读消息。

<span id="BIMContactExpandService-removefriendconversationlistener"></span>
### removeFriendConversationListener
```java
public void com.bytedance.im.user.BIMContactExpandService.removeFriendConversationListener(
    BIMConversationListListener listener)
```
移除好友会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **BIMConversationListListener** | 会话监听方，参看 [BIMConversationListListener](293451#bimconversationlistlistener)。 |

# BIMSearchExpandService
```java
public class com.bytedance.im.search.api.BIMSearchExpandService
```

IM SDK 消息内容搜索入口。
获取实例方式 BIMClient.getInstance().getService(BIMSearchExpandService.class)，参看 [BIMClient](#bimclient)。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [searchLocalMessage](#BIMSearchExpandService-searchlocalmessage) |
| **void** | [searchLocalMessageWithMsgType](#BIMSearchExpandService-searchlocalmessagewithmsgtype) |

## 函数说明
<span id="BIMSearchExpandService-searchlocalmessage"></span>
### searchLocalMessage
```java
public void com.bytedance.im.search.api.BIMSearchExpandService.searchLocalMessage(
    final String key,
    final String conversationId,
    final BIMResultCallback<List<BIMSearchMsgInfo>> callback)
```
搜索本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **final String** | 会话 ID。 |
| callback | **final BIMResultCallback<List<BIMSearchMsgInfo>>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMSearchMsgInfo](293453#bimsearchmsginfo)。 |

<span id="BIMSearchExpandService-searchlocalmessagewithmsgtype"></span>
### searchLocalMessageWithMsgType
```java
public void com.bytedance.im.search.api.BIMSearchExpandService.searchLocalMessageWithMsgType(
    final String key,
    final String conversationId,
    final BIMGetMessageByTypeOption option,
    final BIMResultCallback<BIMSearchMessageListResult> callback)
```
按照消息类型和关键词搜索本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| key | **final String** | 搜索关键词 |
| conversationId | **final String** | 会话 id |
| option | **final BIMGetMessageByTypeOption** | 搜索配置, 参看 [BIMGetMessageByTypeOption](293453#bimgetmessagebytypeoption) |
| callback | **final BIMResultCallback<BIMSearchMessageListResult>** | 结果回调，参看 [BIMResultCallback](293451#bimresultcallback), [BIMSearchMsgInfo](293453#bimsearchmsginfo)。 |
