---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
useHub: 1    # 0 by default for using Doc Repo; 1 for using APIHub / SDKHub.
keywords: 实时音视频    # use ',' as separator
---

你可以使用此接口查询指定云录屏任务的相关信息。
## 使用说明
### 接口行为
你可以调用`GetWebCastTask`接口，指定你所属的 `AppId`，查询指定 `RoomId` 下的云录屏任务。
通过此接口仅能查询距今 72 小时内开始的云录屏任务。

## 注意事项
请求频率：QPS 不得超过 60。
## 请求说明
- 请求方式：**GET**
- 请求地址：**https://rtc.volcengineapi.com?Action=GetWebCastTask&Version=2020-12-01**
## 调试

<APILink link="https://api.volcengine.com/api-explorer/debug?action=GetWebCastTask&serviceCode=rtc&version=2020-12-01&groupName=云录屏" />

## 请求参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
### Query
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "15%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "15%"
  },
  {
    "title": "是否必选",
    "dataIndex": "required",
    "width": "10%"
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "20%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "description",
    "width": "40%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "Action",
    "type": "String",
    "required": "是",
    "example": "<code>GetWebCastTask</code>",
    "description": "接口名称。当前 API 的名称为 <code>GetWebCastTask</code>。",
    "key": "Action"
  },
  {
    "name": "Version",
    "type": "String",
    "required": "是",
    "example": "<code>2020-12-01</code>",
    "description": "接口版本。当前 API 的版本为 <code>2020-12-01</code>。",
    "key": "Version"
  },
  {
    "required": "是",
    "name": "AppId",
    "type": "String",
    "example": "<code>Your_AppId</code>",
    "description": "你的音视频应用的唯一标志",
    "key": "AppId"
  },
  {
    "required": "是",
    "name": "RoomId",
    "type": "String",
    "example": "<code>Your_RoomId</code>",
    "description": "房间的 ID，是房间的唯一标志",
    "key": "RoomId"
  },
  {
    "required": "是",
    "name": "TaskId",
    "type": "String",
    "example": "<code>Your_TaskId</code>",
    "description": "要查询的云录屏任务 ID。",
    "key": "TaskId"
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
## 返回参数
下表仅列出本接口特有的返回参数，公共返回参数请参见[返回结构](1178322)。
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "21%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "10%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "15%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "title",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "WebCastTask",
    "key": "0-1-0",
    "title": "云录屏任务信息",
    "example": "<code>-</code>",
    "type": "Object",
    "children": [
      {
        "name": "StartTime",
        "key": "0-1-0-0",
        "title": "任务开始时间戳，Unix 时间，单位为毫秒",
        "example": "<code>1676987478000</code>",
        "type": "Long"
      },
      {
        "name": "EndTime",
        "key": "0-1-0-1",
        "title": "任务结束时间戳，Unix 时间，单位为毫秒。<code>0</code> 表示任务未结束",
        "example": "<code>1676987489000</code>",
        "type": "Long"
      },
      {
        "name": "Status",
        "key": "0-1-0-2",
        "title": "<p>任务状态。</p>\n<ul>\n<li><code>0</code>: 未知异常状态</li>\n<li><code>1</code>: 未开始</li>\n<li><code>2</code>: 运行中</li>\n<li><code>3</code>: 已结束</li>\n<li><code>4</code>: 任务运行失败</li>\n</ul>",
        "example": "<code>3</code>",
        "type": "Long"
      },
      {
        "name": "StopReason",
        "key": "0-1-0-3",
        "title": "<p>任务停止的原因</p>\n<ul>\n<li>返回为空：表示任务未结束</li>\n<li><code>UnknownStopReason</code>：未知停止原因</li>\n<li><code>StopByAPI</code>：用户主动调用 服务端 OpenAPI 停止</li>\n<li><code>StartTaskFailed</code>：任务启动失败</li>\n<li><code>ExceedMaxRunningTime</code>：任务超过最大运行时间</li>\n</ul>",
        "example": "<code>StopByAPI</code>",
        "type": "String"
      },
      {
        "name": "UserId",
        "key": "0-1-0-4",
        "title": "推送网页音视频内容的用户对应的 UserId",
        "example": "<code>Your_UserId</code>",
        "type": "String"
      },
      {
        "name": "SourceURL",
        "key": "0-1-0-5",
        "title": "需要转推的网页地址，可以携带自定义的 queryParams 来鉴权等，总体长度不超过 1024。",
        "example": "<code>https://xxxxx</code>",
        "type": "String"
      },
      {
        "name": "VideoSolutions",
        "key": "0-1-0-6",
        "title": "输出的视频参数，最多支持2路，以大小流的方式支持接收端按需订阅，将以最大的视频流分辨率作为网页渲染分辨率，为空时按默认值填充一路",
        "example": "<code>-</code>",
        "type": "Object[]",
        "children": [
          {
            "name": "Width",
            "key": "0-1-0-6-0",
            "title": "视频宽度，单位为像素，范围为 <code>[50,1920]</code>，默认值为 <code>1280</code>。必须是偶数，值为奇数时自动调整为偶数。",
            "example": "<code>1280</code>",
            "type": "Integer"
          },
          {
            "name": "Height",
            "key": "0-1-0-6-1",
            "title": "视频高度，单位为像素，范围为 <code>[50,1080]</code>，默认值为 <code>720</code>。必须是偶数，值为奇数时自动调整为偶数。",
            "example": "<code>720</code>",
            "type": "Integer"
          },
          {
            "name": "FrameRate",
            "key": "0-1-0-6-2",
            "title": "发送帧率，单位为 帧/秒，范围为<code>[1,60]</code>，默认值为 <code>15</code>。帧率和码率设置建议参照<a href=\"70122#param\">视频发布参数对照表</a>以获取最佳体验。",
            "example": "<code>15</code>",
            "type": "Integer"
          },
          {
            "name": "Bitrate",
            "key": "0-1-0-6-3",
            "title": "最大发送码率，取值范围为<code>[0,10000]</code>，单位为 Kbps，默认值 <code>0</code>，为 <code>0</code> 时表示自适应码率。",
            "example": "<code>0</code>",
            "type": "Integer"
          }
        ]
      },
      {
        "name": "MaxRunningTime",
        "key": "0-1-0-7",
        "title": "最大运行时间，超过此时间后，任务自动终止。单位为秒。取值范围为<code>[10,86400]</code>，默认值为 <code>86400</code>。不填时自动调整为默认值。",
        "example": "<code>86400</code>",
        "type": "Integer"
      },
      {
        "name": "MonitorConfig",
        "key": "0-1-0-8",
        "title": "页面可用性监控配置",
        "example": "<code>-</code>",
        "type": "Object",
        "children": [
          {
            "name": "FreezeCheckInterval",
            "key": "0-1-0-8-0",
            "title": "<p>对页面内容是否无变化的检测间隔。取值范围为<code>[2,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n<ul>\n<li>当连续两次出现检测命中时，将对页面进行刷新，并回调<code>Status=4，Reason=&quot;PageFreeze&quot;</code>。</li>\n<li>再次出现连续两次检测命中时，将进行任务重调度，并回调<code>Status=5，Reason=&quot;PageFreeze&quot;</code>。</li>\n</ul>\n<strong>注意</strong>：页面无变化可能是您业务的正常场景，请谨慎评估页面实际内容情况后再开启此功能，以免任务提前退出。",
            "example": "<code>5 </code>",
            "type": "Integer"
          },
          {
            "name": "BlankCheckInterval",
            "key": "0-1-0-8-1",
            "title": "<p>对页面是否白屏的检测间隔。取值范围为<code>[2,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n<ul>\n<li>当连续两次出现检测命中时，将对页面进行刷新，并回调<code>Status=4，Reason=&quot;PageBlank&quot;</code> 。</li>\n<li>再次出现连续两次检测命中时将进行任务重调度，并回调<code>Status=5，Reason=&quot;PageBlank&quot;</code>。</li>\n</ul>\n<strong>注意</strong>：页面全白可能是您业务的正常场景，请谨慎评估页面实际内容情况后再开启此功能，以免任务提前退出。",
            "example": "<code> 5</code>",
            "type": "Integer"
          },
          {
            "name": "CrashCheckInterval",
            "key": "0-1-0-8-2",
            "title": "<p>对页面 JS 线程是否崩溃/卡死的检测间隔。 取值范围为<code>[0,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n当出现检测命中时将进行任务重调度，并回调 <code>Status=5，Reason=&quot;PageCrash&quot;</code>。",
            "example": "<code>5</code>",
            "type": "Integer"
          }
        ]
      },
      {
        "name": "EventNotifyConfig",
        "key": "0-1-0-9",
        "title": "页面事件通知配置。若需要避免未载入完成时的不完整页面被采集，可以启用此配置。",
        "example": "<code>-</code>",
        "type": "Object",
        "children": [
          {
            "name": "EnableEventNotify",
            "key": "0-1-0-9-0",
            "title": "<p>是否启用页面主动事件通知, 默认值为<code>false</code>。</p>\n<ul>\n<li><code>false</code>：页面在打开后就会开始采集，在收到 <code>StopWebCast</code> openAPI 请求后结束采集。</li>\n<li><code>true</code>：在页面中注入两个 JS 函数：<code>onWebcastStart()</code>和 <code>onWebcastEnd()</code>。</li>\n</ul>\n<p>当页面判断资源加载完成之后调用<code> onWebcastStart()</code>，控制程序才会开始进行页面内容的采集。当页面判断本次任务内容已完成时调用<code>onWebcastEnd()</code> 通知控制程序结束本次任务。<code>StopWebCast</code> openAPI 效果不变，业务可提前结束任务。其他页面内容、JS 线程的检测（若启用），将在收到 <code>onWebcastStart()</code>事件后才开始。</p>\n<p>当启用页面主动事件通知后，你可以参考以下示例代码来通知采集开始。</p>\n<pre class=\"hljs\"><code class=\"language-html volc-pre-code\">&lt;script&gt;\n    if (ready() &amp;&amp; typeof onWebcastStart === 'function')\n        onWebcastStart();\n&lt;/script&gt;\n</code></pre>",
            "example": "<code>true</code>",
            "type": "Boolean"
          },
          {
            "name": "StartTimeout",
            "key": "0-1-0-9-1",
            "title": "<p>启用页面主动事件通知后，等待开始事件的超时时间。取值范围为<code>[0,60]</code>，单位为秒。默认值为<code>0</code>，表示不启用。仅当 <code>EnableEventNotify</code> 为 <code>true</code> 时，此参数有效。</p>\n<ul>\n<li>当在超时时间内收到开始事件，采集功能正常运行，用户将收到 <code>Status=1</code>的回调。</li>\n<li>当超时时间内未收到开始事件，将进行刷新，等待时间被重置，再次发生超时后将进行任务重调度。刷新时将回调 <code>Status=4，Reason=&quot; StartEventTimeout&quot;</code>。重调度时将回调 <code>Status=5，Reason=&quot;StartEventTimeout&quot;</code>。</li>\n</ul>",
            "example": "<code>2</code>",
            "type": "Integer"
          }
        ]
      }
    ]
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
## 请求示例
```json
GET https://rtc.volcengineapi.com?Action=GetWebCastTask&Version=2020-12-01&AppId=Your_AppId&RoomId=Your_RoomId&TaskId=Your_TaskId
```
## 返回示例
```json
{
    "Result": {
        "WebcastTask": {
            "StartTime": 1676987478000,
            "EndTime": 1676987489000,
            "Status": 3,
            "StopReason": "StopByAPI",
            "UserId": "Your_UserId",
            "SourceURL": "https://xxxxx",
            "VideoSolutions": [
                {
                    "Width": 1920,
                    "Height": 1080,
                    "FrameRate": 60,
                    "Bitrate": 10000
                }
            ],
            "MonitorConfig": {
                "BlankCheckInterval": 5,
                "CrashCheckInterval": 5,
                "FreezeCheckInterval": 5
            },
            "EventNotifyConfig": {
                "EnableEventNotify": true,
                "StartTimeout": 2
            },
            "MaxRunningTime": 3600
        }
    },
    "ResponseMetadata": {
        "RequestId": "Your_RequestId",
        "Action": "GetWebCastTask",
        "Version": "2020-12-01",
        "Service": "rtc",
        "Region": "cn-north-1"
    }
}
```

## 错误码
您可访问[公共错误码](https://www.volcengine.com/docs/6348/70426)，获取更多错误码信息。
<div data-source="api-doc-hub" style="display: none"></div>
