---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---
# BIMClient
```objectivec
@interface BIMClient : NSObject
```

BIMClient Class
IM SDK 对外接口类，通过此类提供所有 IM SDK 能力接口。


## 静态函数
| 返回 | 名称 |
| --- | --- |
| **instancetype** | [sharedInstance](#BIMClient-sharedinstance) |

## 成员函数
| 返回 | 名称 |
| --- | --- |
| **BOOL** | [initSDK:config:](#BIMClient-initsdk-config) |
| **void** | [unInitSDK](#BIMClient-uninitsdk) |
| **void** | [addConnectListener:](#BIMClient-addconnectlistener) |
| **void** | [removeConnectListener:](#BIMClient-removeconnectlistener) |
| **NSString*** | [getVersion](#BIMClient-getversion) |
| **long long** | [getServerTime](#BIMClient-getservertime) |
| **BIMConnectStauts** | [getConnectStatus](#BIMClient-getconnectstatus) |
| **void** | [login:token:completion:](#BIMClient-login-token-completion) |
| **void** | [logoutWithCompletion:](#BIMClient-logoutwithcompletion) |
| **NSString*** | [getCurrentUserID](#BIMClient-getcurrentuserid) |
| **NSString*** | [getToken](#BIMClient-gettoken) |
| **void** | [addMessageListener:](#BIMClient-addmessagelistener) |
| **void** | [removeMessageListener:](#BIMClient-removemessagelistener) |
| **BIMMessage*** | [createTextMessage:](#BIMClient-createtextmessage) |
| **BIMMessage*** | [createTextMessage:atUserList:](#BIMClient-createtextmessage-atuserlist) |
| **BIMMessage*** | [createTextAtMessage:atUserList:refMessage:hint:](#BIMClient-createtextatmessage-atuserlist-refmessage-hint) |
| **BIMMessage*** | [createCustomMessage:](#BIMClient-createcustommessage) |
| **BIMMessage*** | [createImageMessage:](#BIMClient-createimagemessage) |
| **BIMMessage*** | [createAudioMessage:](#BIMClient-createaudiomessage) |
| **BIMMessage*** | [createVideoMessage:](#BIMClient-createvideomessage) |
| **BIMMessage*** | [createFileMessage:fileName:](#BIMClient-createfilemessage-filename) |
| **BIMMessage*** | [createP2PMessage:](#BIMClient-createp2pmessage) |
| **NSString*** | [sendMessage:conversationId:saved:progress:completion:](#BIMClient-sendmessage-conversationid-saved-progress-completion) |
| **NSString*** | [addLocalMessage:conversationId:saved:](#BIMClient-addlocalmessage-conversationid-saved) |
| **void** | [deleteMessage:completion:](#BIMClient-deletemessage-completion) |
| **void** | [deleteLocalMessage:completion:](#BIMClient-deletelocalmessage-completion) |
| **void** | [recallMessage:completion:](#BIMClient-recallmessage-completion) |
| **void** | [modifyMessageProperty:propertyItems:completion:](#BIMClient-modifymessageproperty-propertyitems-completion) |
| **void** | [modifyMessage:completion:](#BIMClient-modifymessage-completion) |
| **void** | [getMessage:inConversationId:completion:](#BIMClient-getmessage-inconversationid-completion) |
| **void** | [getMessageByServerID:inConversationShortID:isServer:completion:](#BIMClient-getmessagebyserverid-inconversationshortid-isserver-completion) |
| **void** | [getHistoryMessageList:option:completion:](#BIMClient-gethistorymessagelist-option-completion) |
| **void** | [getConversationUnReadMessageList:option:completion:](#BIMClient-getconversationunreadmessagelist-option-completion) |
| **void** | [getNewerMessageList:option:completion:](#BIMClient-getnewermessagelist-option-completion) |
| **void** | [downloadFile:remoteURL:progressBlock:completion:](#BIMClient-downloadfile-remoteurl-progressblock-completion) |
| **void** | [cancelMediaFileMessageUpload:completion:](#BIMClient-cancelmediafilemessageupload-completion) |
| **void** | [refreshMediaMessage:completion:](#BIMClient-refreshmediamessage-completion) |
| **void** | [getLocalMessageListByType:option:completion:](#BIMClient-getlocalmessagelistbytype-option-completion) |
| **void** | [getMessagesReadReceipt:completion:](#BIMClient-getmessagesreadreceipt-completion) |
| **void** | [sendMessageReadReceipts:completion:](#BIMClient-sendmessagereadreceipts-completion) |
| **void** | [markConversationMessagesRead:completion:](#BIMClient-markconversationmessagesread-completion) |
| **void** | [getDid:](#BIMClient-getdid) |
| **void** | [sendP2PMessage:conversationId:completion:](#BIMClient-sendp2pmessage-conversationid-completion) |
| **void** | [sendP2PMessage:conversationId:userIdList:completion:](#BIMClient-sendp2pmessage-conversationid-useridlist-completion) |
| **void** | [addP2PMessageListener:](#BIMClient-addp2pmessagelistener) |
| **void** | [removeP2PMessageListener:](#BIMClient-removep2pmessagelistener) |

## 函数说明
<span id="BIMClient-sharedinstance"></span>
### sharedInstance
```objectivec
+ (instancetype)sharedInstance;
```
获取 BIMClient 单例。

**返回值**
BIMClient 单例。


<span id="BIMClient-initsdk-config"></span>
### initSDK:config:
```objectivec
- (BOOL)initSDK:(int)sdkAppID config:(BIMSDKConfig *)config;
```
初始化 SDK。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| sdkAppID | **int** | 从[控制台](https://console.volcengine.com/rtc/im/appManage)获取的应用 ID。<br/>不同应用 ID 无法进行互通。 |
| config | **BIMSDKConfig*** | 配置信息，参看 [BIMSDKConfig](293486#bimsdkconfig)。 |
**返回值**

+ `true`: 成功。
+ `false`: 失败。


<span id="BIMClient-uninitsdk"></span>
### unInitSDK
```objectivec
- (void)unInitSDK;
```
注销 SDK，释放内存缓存资源、注销监听等。


<span id="BIMClient-addconnectlistener"></span>
### addConnectListener:
```objectivec
- (void)addConnectListener:(id<BIMConnectListener>)listener NS_SWIFT_NAME(addConnectListener(listener:));
```
设置长链状态监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConnectListener>** | 长链状态监听方，参看 [BIMConnectListener](293484#bimconnectlistener)。 |

<span id="BIMClient-removeconnectlistener"></span>
### removeConnectListener:
```objectivec
- (void)removeConnectListener:(id<BIMConnectListener>)listener NS_SWIFT_NAME(removeConnectListener(listener:));
```
移除长链状态监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConnectListener>** | 长链状态监听方，参看 [BIMConnectListener](293484#bimconnectlistener)。 |

<span id="BIMClient-getversion"></span>
### getVersion
```objectivec
- (NSString*)getVersion;
```
获取 SDK 版本号。

**返回值**
SDK 版本号。


<span id="BIMClient-getservertime"></span>
### getServerTime
```objectivec
- (long long)getServerTime;
```
获取服务端时间。

**返回值**
服务端时间戳，单位为毫秒。


<span id="BIMClient-getconnectstatus"></span>
### getConnectStatus
```objectivec
- (BIMConnectStauts)getConnectStatus;
```
获取连接状态。

**返回值**
连接状态，参看 [BIMConnectStauts](293486#bimconnectstauts)。


<span id="BIMClient-login-token-completion"></span>
### login:token:completion:
```objectivec
- (void)login:(NSString *)userID token:(NSString *)token completion:(BIMCompletion)completion;
```
登录服务器。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| userID | **NSString*** | 用户 ID。 |
| token | **NSString*** | 用户 Token。 |
| completion | **BIMCompletion** | 登录完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-logoutwithcompletion"></span>
### logoutWithCompletion:
```objectivec
- (void)logoutWithCompletion:(BIMCompletion)completion;
```
登出服务器。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMCompletion** | 登出完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getcurrentuserid"></span>
### getCurrentUserID
```objectivec
- (NSString *)getCurrentUserID;
```
获取当前用户 ID。

**返回值**
用户 ID。


<span id="BIMClient-gettoken"></span>
### getToken
```objectivec
- (NSString *)getToken;
```
获取当前用户 Token。

**返回值**
用户 Token。


<span id="BIMClient-addmessagelistener"></span>
### addMessageListener:
```objectivec
- (void)addMessageListener:(id<BIMMessageListener>)listener NS_SWIFT_NAME(addMessageListener(listener:));
```
设置消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMMessageListener>** | 消息监听方，参看 [BIMMessageListener](293484#bimmessagelistener)。 |

<span id="BIMClient-removemessagelistener"></span>
### removeMessageListener:
```objectivec
- (void)removeMessageListener:(id<BIMMessageListener>)listener NS_SWIFT_NAME(removeMessageListener(listener:));
```
移除消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMMessageListener>** | 消息监听方，参看 [BIMMessageListener](293484#bimmessagelistener)。 |

<span id="BIMClient-createtextmessage"></span>
### createTextMessage:
```objectivec
- (BIMMessage *)createTextMessage:(NSString *)text;
```
创建文本消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **NSString*** | 消息文本。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-createtextmessage-atuserlist"></span>
### createTextMessage:atUserList:
```objectivec
- (BIMMessage *)createTextMessage:(NSString *)text atUserList:(NSArray<NSNumber *> *)atUserList;
```
创建带 @ 标记的消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **NSString*** | 消息文本。 |
| atUserList | **NSArray<NSNumber*>*** | 需要 @ 的用户列表。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


**注意**
仅可在群组中发送带 @ 标记的消息。

<span id="BIMClient-createtextatmessage-atuserlist-refmessage-hint"></span>
### createTextAtMessage:atUserList:refMessage:hint:
```objectivec
- (BIMMessage *)createTextAtMessage:(NSString *)text atUserList:(NSArray<NSNumber *> *)atUserList refMessage:(BIMMessage *)refMessage hint:(NSString *)hint;
```
创建带引用消息的文本消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| text | **NSString*** | 消息文本。 |
| atUserList | **NSArray<NSNumber*>*** | 需要 @ 的用户列表。 |
| refMessage | **BIMMessage*** | 引用的消息，参看 [BIMMessage](293486#bimmessage)。 |
| hint | **NSString*** | 业务透传的引用信息 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-createcustommessage"></span>
### createCustomMessage:
```objectivec
- (BIMMessage *)createCustomMessage:(NSDictionary *)content;
```
创建自定义消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| content | **NSDictionary*** | 自定义参数。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-createimagemessage"></span>
### createImageMessage:
```objectivec
- (BIMMessage *)createImageMessage:(NSString *)imagePath;
```
创建图片消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| imagePath | **NSString*** | 图片路径。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。
@note 若图片来自系统相册，需要先把图片导入 App 目录下。


<span id="BIMClient-createaudiomessage"></span>
### createAudioMessage:
```objectivec
- (BIMMessage *)createAudioMessage:(NSString *)audioFilePath;
```
创建语音消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| audioFilePath | **NSString*** | 音频路径。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-createvideomessage"></span>
### createVideoMessage:
```objectivec
- (BIMMessage *)createVideoMessage:(NSString *)videoFilePath;
```
创建视频消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| videoFilePath | **NSString*** | 视频路径。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。
@note 若视频来自系统相册，需要先把视频导入 App 目录下。


<span id="BIMClient-createfilemessage-filename"></span>
### createFileMessage:fileName:
```objectivec
- (BIMMessage *)createFileMessage:(NSString *)filePath fileName:(NSString *)fileName;
```
创建文件消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| filePath | **NSString*** | 文件路径。 |
| fileName | **NSString*** | 文件名称。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-createp2pmessage"></span>
### createP2PMessage:
```objectivec
- (BIMMessage *)createP2PMessage:(NSDictionary *)content;
```
创建自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| content | **NSDictionary*** | 自定义参数。 |
**返回值**
消息体，参看 [BIMMessage](293486#bimmessage)。


<span id="BIMClient-sendmessage-conversationid-saved-progress-completion"></span>
### sendMessage:conversationId:saved:progress:completion:
```objectivec
- (NSString *)sendMessage:(BIMMessage *)message conversationId:(NSString *)conversationId saved:(BIMMessageCompletion)saved progress:(BIMProgress)progress completion:(BIMMessageCompletion)completion;
```
发送消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 消息体，由 `createXxxMessage` 接口创建，参看 [BIMMessage](293486#bimmessage)。 |
| conversationId | **NSString*** | 会话 ID。 |
| saved | **BIMMessageCompletion** | 消息入库回调，其中message参看[BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |
| progress | **BIMProgress** | 媒体消息上传进度回调。 |
| completion | **BIMMessageCompletion** | 发送结果回调，其中message参看[BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-addlocalmessage-conversationid-saved"></span>
### addLocalMessage:conversationId:saved:
```objectivec
- (NSString *)addLocalMessage:(BIMMessage *)message conversationId:(NSString *)conversationId saved:(BIMMessageCompletion)saved;
```
添加本地消息，不会发送到服务端。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待发送的消息对象，需要通过对应的 createXXXMessage 接口进行创建。 |
| conversationId | **NSString*** | 回话id |
| saved | **BIMMessageCompletion** | 消息入库回调，其中 message 参看 [BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |
**返回值**
msgID         消息唯一标识


<span id="BIMClient-deletemessage-completion"></span>
### deleteMessage:completion:
```objectivec
- (void)deleteMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
删除本地和服务端消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待删除的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 message 参看 [BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-deletelocalmessage-completion"></span>
### deleteLocalMessage:completion:
```objectivec
- (void)deleteLocalMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
删除本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待删除的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-recallmessage-completion"></span>
### recallMessage:completion:
```objectivec
- (void)recallMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
撤回消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待撤回的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
仅发送成功的消息才可被撤回，其他情况会报错。

<span id="BIMClient-modifymessageproperty-propertyitems-completion"></span>
### modifyMessageProperty:propertyItems:completion:
```objectivec
- (void)modifyMessageProperty:(BIMMessage *)message propertyItems:(NSArray<BIMMessageNewPropertyModify *> *)arrNewPropertyModify completion:(BIMCompletion)completion;
```
批量修改消息属性。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待修改属性的消息，参看 [BIMMessage](293486#bimmessage)。 |
| propertyItems | **BIMCompletion** | 更新的消息属性，参看 [BIMMessageNewPropertyModify](293486#bimmessagenewpropertymodify)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-modifymessage-completion"></span>
### modifyMessage:completion:
```objectivec
- (void)modifyMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
修改消息内容和额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待更新的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getmessage-inconversationid-completion"></span>
### getMessage:inConversationId:completion:
```objectivec
- (void)getMessage:(NSString *)uuid inConversationId:(NSString *)conversationId completion:(BIMMessageCompletion)completion;
```
返回查询到的本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uuid | **NSString*** | 消息客户端 Id。 |
| conversationId | **NSString*** | 会话ID |
| completion | **BIMMessageCompletion** | 结果回调,其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getmessagebyserverid-inconversationshortid-isserver-completion"></span>
### getMessageByServerID:inConversationShortID:isServer:completion:
```objectivec
- (void)getMessageByServerID:(long long)msgID inConversationShortID:(long long)conversationShortID isServer:(BOOL)isServer completion:(BIMMessageCompletion)completion;
```
返回查询到的消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| msgID | **long long** | 消息服务端 ID |
| conversationShortID | **long long** | 会话 shortID |
| isServer | **BOOL** | YES 表示服务端查询，NO 表示客户端本地查询 |
| completion | **BIMMessageCompletion** | 结果回调,其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-gethistorymessagelist-option-completion"></span>
### getHistoryMessageList:option:completion:
```objectivec
- (void)getHistoryMessageList:(NSString *)conversationId option:(BIMGetMessageOption *)option completion:(BIMMessageListCompletion)completion;
```
获取历史消息（锚点之前的消息），返回消息顺序从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| option | **BIMGetMessageOption*** | 获取消息选项，参看 [BIMGetMessageOption](293486#bimgetmessageoption)。 |
| completion | **BIMMessageListCompletion** | 结果回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getconversationunreadmessagelist-option-completion"></span>
### getConversationUnReadMessageList:option:completion:
```objectivec
- (void)getConversationUnReadMessageList:(NSString *)conversationId option:(BIMGetMessageOption *)option completion:(BIMMessageListCompletion)completion;
```
获取未读历史消息，返回消息顺序从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| option | **BIMGetMessageOption*** | 获取消息选项，参看 [BIMGetMessageOption](293486#bimgetmessageoption)。 |
| completion | **BIMMessageListCompletion** | 结果回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getnewermessagelist-option-completion"></span>
### getNewerMessageList:option:completion:
```objectivec
- (void)getNewerMessageList:(NSString *)conversationId option:(BIMGetMessageOption *)option completion:(BIMMessageListCompletion)completion;
```
获取历史消息（锚点之后的消息），返回消息顺序从旧到新。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| option | **BIMGetMessageOption*** | 获取消息选项，参看 [BIMGetMessageOption](293486#bimgetmessageoption)。 |
| completion | **BIMMessageListCompletion** | 结果回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-downloadfile-remoteurl-progressblock-completion"></span>
### downloadFile:remoteURL:progressBlock:completion:
```objectivec
- (void)downloadFile:(BIMMessage *)message remoteURL:(NSString *)remoteURL progressBlock:(_Nullable BIMProgress)progressBlock completion:(BIMCompletion)completion;
```
下载消息体附件到本地，不建议直播群调用。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 下载消息，参看 [BIMMessage](293486#bimmessage)。 |
| remoteURL | **NSString*** | 附件URL |
| progressBlock | **BIMProgress** | 进度回调，其中整型变量 `progress` 表示下载进度，取值范围 0 ～ 100。 |
| completion | **BIMCompletion** | 下载完成回调， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-cancelmediafilemessageupload-completion"></span>
### cancelMediaFileMessageUpload:completion:
```objectivec
- (void)cancelMediaFileMessageUpload:(BIMMessage *)message completion:(BIMCompletion)completion;
```
取消文件上传。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 上传消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 取消文件上传回调， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-refreshmediamessage-completion"></span>
### refreshMediaMessage:completion:
```objectivec
- (void)refreshMediaMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
刷新媒体信息，媒体 URL 过期时调用该方法。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待刷新的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getlocalmessagelistbytype-option-completion"></span>
### getLocalMessageListByType:option:completion:
```objectivec
- (void)getLocalMessageListByType:(NSString *)conversationId option:(BIMGetMessageByTypeOption *)option completion:(BIMMessageListCompletion)completion;
```
按消息类型拉取消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| option | **BIMGetMessageByTypeOption*** | 拉取消息列表选项，参看 [BIMGetMessageByTypeOption](293486#bimgetmessagebytypeoption) |
| completion | **BIMMessageListCompletion** | 结果回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getmessagesreadreceipt-completion"></span>
### getMessagesReadReceipt:completion:
```objectivec
- (void)getMessagesReadReceipt:(NSArray<BIMMessage *> *)messageList completion:(BIMMessageReadReceiptListCompletion)completion;
```
从服务端批量获取消息已读回执。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| messageList | **NSArray<BIMMessage*>*** | 需要被查询的消息列表。 |
| completion | **BIMMessageReadReceiptListCompletion** | 结果回调，其中 receiptList 参看 [BIMMessageReadReceipt](293486#bimmessagereadreceipt)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-sendmessagereadreceipts-completion"></span>
### sendMessageReadReceipts:completion:
```objectivec
- (void)sendMessageReadReceipts:(NSArray<BIMMessage *> *)messageList completion:(BIMCompletion)completion;
```
发送消息已读回执。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| messageList | **NSArray<BIMMessage*>*** | 需要发送已读回执的消息列表。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-markconversationmessagesread-completion"></span>
### markConversationMessagesRead:completion:
```objectivec
- (void)markConversationMessagesRead:(NSString *)conversationId completion:(BIMCompletion)completion;
```
发送会话已读回执，该方法仅适用于单聊会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-getdid"></span>
### getDid:
```objectivec
- (void)getDid:(BIMDeviceIDCompletion)completion;
```
获取设备 did。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMDeviceIDCompletion** | 结果回调。 |

<span id="BIMClient-sendp2pmessage-conversationid-completion"></span>
### sendP2PMessage:conversationId:completion:
```objectivec
- (void)sendP2PMessage:(BIMMessage *)message conversationId:(NSString *)conversationId completion:(BIMCompletion)completion;
```
发送自定义透传消息（会话纬度），给会话内所有用户发送自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 自定义透传消息 ID。 |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-sendp2pmessage-conversationid-useridlist-completion"></span>
### sendP2PMessage:conversationId:userIdList:completion:
```objectivec
- (void)sendP2PMessage:(BIMMessage *)message conversationId:(NSString *)conversationId userIdList:(NSArray<NSNumber *> * _Nullable)userIdList completion:(BIMCompletion)completion;
```
发送自定义透传消息（用户纬度），给指定用户发送自定义透传消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 自定义透传消息 ID。 |
| conversationId | **NSString*** | 会话 ID。 |
| userIdList | **NSArray<NSNumber*>*** | 用户 ID列表。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClient-addp2pmessagelistener"></span>
### addP2PMessageListener:
```objectivec
- (void)addP2PMessageListener:(id<BIMP2PMessageListener>)listener;
```
设置自定义透传消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMP2PMessageListener>** | 消息监听方，参看 [BIMP2PMessageListener](293484#bimp2pmessagelistener)。 |

<span id="BIMClient-removep2pmessagelistener"></span>
### removeP2PMessageListener:
```objectivec
- (void)removeP2PMessageListener:(id<BIMP2PMessageListener>)listener;
```
移除自定义透传消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMP2PMessageListener>** | 消息监听方，参看 [BIMP2PMessageListener](293484#bimp2pmessagelistener)。 |

# BIMClient (conversation)
```objectivec
@interface BIMClient (conversation)
```

BIMClient (conversation) Class
IM SDK 会话对外接口类，通过此类提供所有会话能力接口。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [addConversationListener:](#BIMClientConversation-addconversationlistener) |
| **void** | [removeConversationListener:](#BIMClientConversation-removeconversationlistener) |
| **void** | [getConversationList:count:completion:](#BIMClientConversation-getconversationlist-count-completion) |
| **void** | [getConversation:completion:](#BIMClientConversation-getconversation-completion) |
| **void** | [getConversationByShortID:isServer:completion:](#BIMClientConversation-getconversationbyshortid-isserver-completion) |
| **void** | [getConversationByShortIDList:isServer:completion:](#BIMClientConversation-getconversationbyshortidlist-isserver-completion) |
| **void** | [deleteConversation:completion:](#BIMClientConversation-deleteconversation-completion) |
| **void** | [deleteConversationWithToUid:completion:](#BIMClientConversation-deleteconversationwithtouid-completion) |
| **void** | [setConversationDraft:draft:](#BIMClientConversation-setconversationdraft-draft) |
| **void** | [stickTopConversation:isStickTop:completion:](#BIMClientConversation-sticktopconversation-issticktop-completion) |
| **void** | [muteConversation:mute:completion:](#BIMClientConversation-muteconversation-mute-completion) |
| **void** | [getTotalUnreadMessageCount:](#BIMClientConversation-gettotalunreadmessagecount) |
| **void** | [markConversationRead:completion:](#BIMClientConversation-markconversationread-completion) |
| **void** | [markConversationRead:beforeMessage:completion:](#BIMClientConversation-markconversationread-beforemessage-completion) |
| **void** | [createSingleConversation:completion:](#BIMClientConversation-createsingleconversation-completion) |
| **void** | [createGroupConversation:completion:](#BIMClientConversation-creategroupconversation-completion) |
| **NSArray<id<BIMMember>>*** | [getConversationMemberList:](#BIMClientConversation-getconversationmemberlist) |
| **void** | [setGroupName:name:completion:](#BIMClientConversation-setgroupname-name-completion) |
| **void** | [setGroupNotice:notice:completion:](#BIMClientConversation-setgroupnotice-notice-completion) |
| **void** | [addGroupMemberList:memberList:completion:](#BIMClientConversation-addgroupmemberlist-memberlist-completion) |
| **void** | [removeGroupMemberList:uidList:completion:](#BIMClientConversation-removegroupmemberlist-uidlist-completion) |
| **void** | [leaveGroup:completion:](#BIMClientConversation-leavegroup-completion) |
| **void** | [dissolveGroup:completion:](#BIMClientConversation-dissolvegroup-completion) |
| **void** | [setGroupMemberRole:uidList:role:completion:](#BIMClientConversation-setgroupmemberrole-uidlist-role-completion) |
| **void** | [setConversationLocalExt:value:completion:](#BIMClientConversation-setconversationlocalext-value-completion) |
| **void** | [setConversationMyExt:value:completion:](#BIMClientConversation-setconversationmyext-value-completion) |
| **void** | [setConversationCoreExt:value:completion:](#BIMClientConversation-setconversationcoreext-value-completion) |

## 函数说明
<span id="BIMClientConversation-addconversationlistener"></span>
### addConversationListener:
```objectivec
- (void)addConversationListener:(id<BIMConversationListListener>)listener;
```
添加会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConversationListListener>** | 会话监听方，参看 [BIMConversationListListener](293484#bimconversationlistlistener)。 |

<span id="BIMClientConversation-removeconversationlistener"></span>
### removeConversationListener:
```objectivec
- (void)removeConversationListener:(id<BIMConversationListListener>)listener;
```
移除会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConversationListListener>** | 会话监听方，参看 [BIMConversationListListener](293484#bimconversationlistlistener)。 |

<span id="BIMClientConversation-getconversationlist-count-completion"></span>
### getConversationList:count:completion:
```objectivec
- (void)getConversationList:(long long)cursor count:(int)count completion:(BIMConversationListCompletion)completion;
```
获取本地会话列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long long** | 分页拉取的游标，第一次默认取传 0。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 100 个会话。 |
| completion | **BIMConversationListCompletion** | 结果回调，其中 `*conversations` 是拉取到的会话，`hasMore`标记数据库是否还有会话 ，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
+ 历史会话数量可能很多，因此建议采用分页查询的方式进行接口调用。
+ 如果会话全部拉取完毕，结果回调 BIMConversationListCompletion 中的 `hasMore` 获取字段值为 NO。


<span id="BIMClientConversation-getconversation-completion"></span>
### getConversation:completion:
```objectivec
- (void)getConversation:(NSString *)conversationId completion:(BIMConversationCompletion)completion;
```
获取指定单个会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMConversationCompletion** | 结果回调，其中 `conversation` 是拉取到的会话 [BIMConversation](293486#bimconversation)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-getconversationbyshortid-isserver-completion"></span>
### getConversationByShortID:isServer:completion:
```objectivec
- (void)getConversationByShortID:(long long)conversationShortId isServer:(BOOL)isServer completion:(BIMConversationCompletion)completion;
```
返回查询到的会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortId | **long long** | 会话服务端 Id |
| isServer | **BOOL** | true 表示服务端查询，false 表示客户端本地查询 |
| completion | **BIMConversationCompletion** | 结果回调，其中 `conversation` 是拉取到的会话 [BIMConversation](293486#bimconversation)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-getconversationbyshortidlist-isserver-completion"></span>
### getConversationByShortIDList:isServer:completion:
```objectivec
- (void)getConversationByShortIDList:(NSArray<NSNumber *> *)conversationShortIdList isServer:(BOOL)isServer completion:(BIMConversationBatchCompletion)completion;
```
返回批量查询到的会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationShortIdList | **NSArray<NSNumber*>*** | 会话服务端 Id列表，服务端查询建议20个以内，否则接口可能超时失败。 |
| isServer | **BOOL** | true 表示服务端查询，false 表示客户端本地查询 |
| completion | **BIMConversationBatchCompletion** | 结果回调，其中 `conversation` 是拉取到的会话 [BIMConversation](293486#bimconversation)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-deleteconversation-completion"></span>
### deleteConversation:completion:
```objectivec
- (void)deleteConversation:(NSString *)conversationId completion:(BIMCompletion)completion;
```
通过会话 ID 删除会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
调用本接口后，SDK 会从本地和服务端删除该会话及会话中的历史消息，且不可恢复。

<span id="BIMClientConversation-deleteconversationwithtouid-completion"></span>
### deleteConversationWithToUid:completion:
```objectivec
- (void)deleteConversationWithToUid:(NSNumber *)toUid completion:(BIMCompletion)completion;
```
通过用户 ID 删除会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| toUid | **NSNumber*** | 对方用户ID。 |
| completion | **BIMCompletion** | 结果回调，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
调用本接口后，SDK 会从本地和服务端删除该会话及会话中的历史消息，且不可恢复。

<span id="BIMClientConversation-setconversationdraft-draft"></span>
### setConversationDraft:draft:
```objectivec
- (void)setConversationDraft:(NSString *)conversationId draft:(NSString *)draft;
```
设置会话草稿。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| draft | **NSString*** | 草稿内容。 |

<span id="BIMClientConversation-sticktopconversation-issticktop-completion"></span>
### stickTopConversation:isStickTop:completion:
```objectivec
- (void)stickTopConversation:(NSString *)conversationId isStickTop:(BOOL)isStickTop completion:(BIMCompletion)completion;
```
置顶会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| isStickTop | **BOOL** | 是否置顶。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-muteconversation-mute-completion"></span>
### muteConversation:mute:completion:
```objectivec
- (void)muteConversation:(NSString *)conversationId mute:(BOOL)mute completion:(BIMCompletion)completion;
```
设置会话免打扰。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| mute | **BOOL** | 是否设置为免打扰。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-gettotalunreadmessagecount"></span>
### getTotalUnreadMessageCount:
```objectivec
- (void)getTotalUnreadMessageCount:(BIMConversationUnreadCountCompletion)completion;
```
获取所有会话的未读消息总数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMConversationUnreadCountCompletion** | 结果回调，其中 `unreadCount` 是获取到的未读数，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
会话未读消息不包括设置为免打扰会话中的未读消息。

<span id="BIMClientConversation-markconversationread-completion"></span>
### markConversationRead:completion:
```objectivec
- (void)markConversationRead:(NSString *)conversationId completion:(BIMCompletion)completion;
```
标记会话已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-markconversationread-beforemessage-completion"></span>
### markConversationRead:beforeMessage:completion:
```objectivec
- (void)markConversationRead:(NSString *)conversationID beforeMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
以指定消息标记已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationID | **NSString*** | 会话 ID。 |
| message | **BIMMessage*** | 会话中的此条消息之前的未读消息(包含传入的消息)会被置为已读,并减少会话未读数, 参看 [BIMMessage](293486#bimmessage)。。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-createsingleconversation-completion"></span>
### createSingleConversation:completion:
```objectivec
- (void)createSingleConversation:(NSNumber *)toUid completion:(BIMConversationCompletion)completion;
```
创建单聊会话。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| toUid | **NSNumber*** | 对方用户 ID。 |
| completion | **BIMConversationCompletion** | 结果回调，其中 `conversation` 是拉取到的会话，参看 [BIMConversation](293486#bimconversation)，`error` 参看 [BIMErrorCode](293485#bimerrorcode) |

<span id="BIMClientConversation-creategroupconversation-completion"></span>
### createGroupConversation:completion:
```objectivec
- (void)createGroupConversation:(NSSet<NSNumber *> *)uidList completion:(BIMConversationCompletion)completion;
```
创建群聊。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **NSSet<NSNumber*>*** | 用户 ID 列表。 |
| completion | **BIMConversationCompletion** | 结果回调，其中 `conversation` 是拉取到的会话，参看 [BIMConversation](293486#bimconversation)，`error` 参看 [BIMErrorCode](293485#bimerrorcode) |

<span id="BIMClientConversation-getconversationmemberlist"></span>
### getConversationMemberList:
```objectivec
- (NSArray<id<BIMMember>> *)getConversationMemberList:(NSString *)conversationId;
```
获取群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
**返回值**
群成员列表回调，参看 [BIMMember](293486#bimmember)。


<span id="BIMClientConversation-setgroupname-name-completion"></span>
### setGroupName:name:completion:
```objectivec
- (void)setGroupName:(NSString *)conversationId name:(NSString *)name completion:(BIMCompletion)completion;
```
设置群组名称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| name | **NSString*** | 群组名称。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-setgroupnotice-notice-completion"></span>
### setGroupNotice:notice:completion:
```objectivec
- (void)setGroupNotice:(NSString *)conversationId notice:(NSString *)notice completion:(BIMCompletion)completion;
```
设置群公告。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| notice | **NSString*** | 群公告内容。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-addgroupmemberlist-memberlist-completion"></span>
### addGroupMemberList:memberList:completion:
```objectivec
- (void)addGroupMemberList:(NSString *)conversationId memberList:(NSOrderedSet<NSNumber *> *)memberList completion:(BIMParticipantsCompletion)completion;
```
添加群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| memberList | **NSOrderedSet<NSNumber*>*** | 待添加的群成员 ID 列表。 |
| completion | **BIMParticipantsCompletion** | 结果回调，其中 `*participants` 是群成员 ID, `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-removegroupmemberlist-uidlist-completion"></span>
### removeGroupMemberList:uidList:completion:
```objectivec
- (void)removeGroupMemberList:(NSString *)conversationId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMParticipantsCompletion)completion;
```
移除群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| uidList | **NSSet<NSNumber*>*** | 待移除的群成员 ID 列表。 |
| completion | **BIMParticipantsCompletion** | 结果回调，其中 `*participants` 是群成员 ID，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-leavegroup-completion"></span>
### leaveGroup:completion:
```objectivec
- (void)leaveGroup:(NSString *)conversationId completion:(BIMCompletion)completion;
```
离开群组。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-dissolvegroup-completion"></span>
### dissolveGroup:completion:
```objectivec
- (void)dissolveGroup:(NSString *)conversationId completion:(BIMCompletion)completion;
```
解散群组。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-setgroupmemberrole-uidlist-role-completion"></span>
### setGroupMemberRole:uidList:role:completion:
```objectivec
- (void)setGroupMemberRole:(NSString *)conversationId uidList:(NSSet<NSNumber *> *)uidList role:(BIMMemberRole)role completion:(BIMCompletion)completion;
```
设置群成员角色。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| uidList | **NSSet<NSNumber*>*** | 需要更改身份的群成员列表。 |
| role | **BIMMemberRole** | 群组角色，参看 [BIMMemberRole](293486#bimmemberrole)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-setconversationlocalext-value-completion"></span>
### setConversationLocalExt:value:completion:
```objectivec
- (void)setConversationLocalExt:(NSString *)conversationId value:(NSDictionary<NSString *, NSString *> *)value completion:(BIMCompletion)completion;
```
设置会话本地额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| value | **NSDictionary<NSString*, NSString*>*** | 会话本地额外信息。 |
| completion | **BIMCompletion** | completion 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-setconversationmyext-value-completion"></span>
### setConversationMyExt:value:completion:
```objectivec
- (void)setConversationMyExt:(NSString *)conversationId value:(NSDictionary<NSString *, NSString *> *)value completion:(BIMCompletion)completion;
```
设置会话私有额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| value | **NSDictionary<NSString*, NSString*>*** | 会话本地额外信息。 |
| completion | **BIMCompletion** | completion 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientConversation-setconversationcoreext-value-completion"></span>
### setConversationCoreExt:value:completion:
```objectivec
- (void)setConversationCoreExt:(NSString *)conversationId value:(NSDictionary<NSString *, NSString *> *)value completion:(BIMCompletion)completion;
```
设置会话额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID。 |
| value | **NSDictionary<NSString*, NSString*>*** | 会话本地额外信息。 |
| completion | **BIMCompletion** | completion 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

# BIMClient (Friend)
```objectivec
@interface BIMClient (Friend)
```

BIMClient (Friend) Class
IM SDK 联系人对外接口类，通过此类提供所有联系人能力接口。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [getFriendApplyList:limit:completion:](#BIMClientFriend-getfriendapplylist-limit-completion) |
| **void** | [getFriendListCompletion:](#BIMClientFriend-getfriendlistcompletion) |
| **void** | [applyFriend:completion:](#BIMClientFriend-applyfriend-completion) |
| **void** | [replyFriendApply:completion:](#BIMClientFriend-replyfriendapply-completion) |
| **void** | [deleteFriend:completion:](#BIMClientFriend-deletefriend-completion) |
| **void** | [updateFriend:alias:completion:](#BIMClientFriend-updatefriend-alias-completion) |
| **void** | [markFriendApplyRead:](#BIMClientFriend-markfriendapplyread) |
| **void** | [getFriendApplyUnreadCount:](#BIMClientFriend-getfriendapplyunreadcount) |
| **void** | [addFriendListener:](#BIMClientFriend-addfriendlistener) |
| **void** | [removeFriendListener:](#BIMClientFriend-removefriendlistener) |
| **void** | [addToBlackList:completion:](#BIMClientFriend-addtoblacklist-completion) |
| **void** | [deleteFromBlackList:completion:](#BIMClientFriend-deletefromblacklist-completion) |
| **void** | [checkUserInBlackList:completion:](#BIMClientFriend-checkuserinblacklist-completion) |
| **void** | [getBlackListCompletion:](#BIMClientFriend-getblacklistcompletion) |
| **void** | [getBlackList:limit:completion:](#BIMClientFriend-getblacklist-limit-completion) |
| **void** | [setUserSelfPortrait:completion:](#BIMClientFriend-setuserselfportrait-completion) |
| **void** | [setUserSelfNickName:completion:](#BIMClientFriend-setuserselfnickname-completion) |
| **void** | [setUserSelfExt:completion:](#BIMClientFriend-setuserselfext-completion) |
| **void** | [updateUserSelfProfile:completion:](#BIMClientFriend-updateuserselfprofile-completion) |
| **void** | [getUserFullInfo:completion:](#BIMClientFriend-getuserfullinfo-completion) |
| **void** | [getUserFullInfo:syncServer:completion:](#BIMClientFriend-getuserfullinfo-syncserver-completion) |
| **void** | [getUserFullInfoList:completion:](#BIMClientFriend-getuserfullinfolist-completion) |
| **void** | [getUserFullInfoList:syncServer:completion:](#BIMClientFriend-getuserfullinfolist-syncserver-completion) |

## 函数说明
<span id="BIMClientFriend-getfriendapplylist-limit-completion"></span>
### getFriendApplyList:limit:completion:
```objectivec
- (void)getFriendApplyList:(long long)cursor limit:(long)limit completion:(BIMFriendApplyListCompletion)completion;
```
获取好友申请列表，按发起申请的时间排序（从新到旧）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long long** | 游标，首页拉取可使用 0。 |
| limit | **long** | 查询条数。 |
| completion | **BIMFriendApplyListCompletion** | 完成回调，其中 `infos` 是好友申请信息，参看 [BIMFriendApplyInfo](293486#bimfriendapplyinfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getfriendlistcompletion"></span>
### getFriendListCompletion:
```objectivec
- (void)getFriendListCompletion:(BIMFriendListCompletion)completion;
```
获取好友列表（全量）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMFriendListCompletion** | 完成回调，其中 `infos` 是好友信息，参看 [BIMUserFullInfo](293486#bimuserfullinfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-applyfriend-completion"></span>
### applyFriend:completion:
```objectivec
- (void)applyFriend:(BIMApplyInfo *)applyInfo completion:(BIMCompletion)completion;
```
申请添加好友。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| applyInfo | **BIMApplyInfo*** | 申请信息，参看 [BIMApplyInfo](293486#bimapplyinfo)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-replyfriendapply-completion"></span>
### replyFriendApply:completion:
```objectivec
- (void)replyFriendApply:(BIMReplyInfo *)replyInfo completion:(BIMCompletion)completion;
```
回应好友申请。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| replyInfo | **BIMReplyInfo*** | 回应信息, 参看 [BIMReplyInfo](293486#bimreplyinfo)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-deletefriend-completion"></span>
### deleteFriend:completion:
```objectivec
- (void)deleteFriend:(long long)uid completion:(BIMCompletion)completion;
```
删除好友。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 联系人用户 ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-updatefriend-alias-completion"></span>
### updateFriend:alias:completion:
```objectivec
- (void)updateFriend:(long long)uid alias:(NSString *)alias completion:(BIMCompletion)completion;
```
修改好友备注名。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 好友用户 ID。 |
| alias | **NSString*** | 好友备注名。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-markfriendapplyread"></span>
### markFriendApplyRead:
```objectivec
- (void)markFriendApplyRead:(BIMCompletion)completion;
```
标记好友申请列表已读。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getfriendapplyunreadcount"></span>
### getFriendApplyUnreadCount:
```objectivec
- (void)getFriendApplyUnreadCount:(BIMFriendApplyUnreadCompletion)completion;
```
获取好友申请未读数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMFriendApplyUnreadCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-addfriendlistener"></span>
### addFriendListener:
```objectivec
- (void)addFriendListener:(id<BIMFriendListener>)listener;
```
设置联系人监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMFriendListener>** | 联系人消息事件回调监听方，参看 [BIMFriendListener](293484#bimfriendlistener)。 |

<span id="BIMClientFriend-removefriendlistener"></span>
### removeFriendListener:
```objectivec
- (void)removeFriendListener:(id<BIMFriendListener>)listener;
```
移除联系人监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMFriendListener>** | 结果回调，参看 [BIMFriendListener](293484#bimfriendlistener) 。 |

<span id="BIMClientFriend-addtoblacklist-completion"></span>
### addToBlackList:completion:
```objectivec
- (void)addToBlackList:(BIMBlackListFriendInfo *)blackListFriendInfo completion:(BIMCompletion)completion;
```
添加该用户到黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| blackListFriendInfo | **BIMBlackListFriendInfo*** | 黑名单信息，参看[BIMBlackListFriendInfo](293486#bimblacklistfriendinfo)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-deletefromblacklist-completion"></span>
### deleteFromBlackList:completion:
```objectivec
- (void)deleteFromBlackList:(long long)uid completion:(BIMCompletion)completion;
```
把该用户从黑名单中移除。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 用户ID。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-checkuserinblacklist-completion"></span>
### checkUserInBlackList:completion:
```objectivec
- (void)checkUserInBlackList:(long long)uid completion:(BIMCheckIsInBlackListCompletion)completion;
```
校验用户是否在黑名单中。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 用户ID。 |
| completion | **BIMCheckIsInBlackListCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getblacklistcompletion"></span>
### getBlackListCompletion:
```objectivec
- (void)getBlackListCompletion:(BIMFriendAllBlackListCompletion)completion;
```
获取黑名单信息（全量）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMFriendAllBlackListCompletion** | 结果回调，其中 `infos` 是黑名单好友信息，参看[BIMUserFullInfo](293486#bimuserfullinfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getblacklist-limit-completion"></span>
### getBlackList:limit:completion:
```objectivec
- (void)getBlackList:(long long)cursor limit:(long long)limit completion:(BIMFriendBlackListCompletion)completion;
```
分页获取黑名单信息，按照拉黑时间从新到旧。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long long** | 游标，首页拉取可使用0。 |
| limit | **long long** | 查询条数。 |
| completion | **BIMFriendBlackListCompletion** | 结果回调，其中 `infos` 是黑名单好友信息，参看[BIMUserFullInfo](293486#bimuserfullinfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-setuserselfportrait-completion"></span>
### setUserSelfPortrait:completion:
```objectivec
- (void)setUserSelfPortrait:(NSString *)portraitUrl completion:(BIMCompletion)completion;
```
更新用户头像信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| portraitUrl | **NSString*** | 用户头像 url |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientFriend-setuserselfnickname-completion"></span>
### setUserSelfNickName:completion:
```objectivec
- (void)setUserSelfNickName:(NSString *)nickName completion:(BIMCompletion)completion;
```
更新用户昵称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| nickName | **NSString*** | 用户昵称 |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientFriend-setuserselfext-completion"></span>
### setUserSelfExt:completion:
```objectivec
- (void)setUserSelfExt:(NSDictionary<NSString *, NSString *> *)ext completion:(BIMCompletion)completion;
```
更新用户额外信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| ext | **NSDictionary<NSString*, NSString*>*** | 用户额外信息 |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientFriend-updateuserselfprofile-completion"></span>
### updateUserSelfProfile:completion:
```objectivec
- (void)updateUserSelfProfile:(BIMUserProfile *)profile completion:(BIMCompletion)completion;
```
更新用户信息详情。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| profile | **BIMUserProfile*** | 用户信息详情 |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientFriend-getuserfullinfo-completion"></span>
### getUserFullInfo:completion:
```objectivec
- (void)getUserFullInfo:(long long)uid completion:(BIMUserFullInfoCompletion)completion;
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 用户 ID 。 |
| completion | **BIMUserFullInfoCompletion** | 结果回调，其中 `info` 是用户全量信息，参看 [BIMUserFullInfo](293486#bimuserfullinfo), `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getuserfullinfo-syncserver-completion"></span>
### getUserFullInfo:syncServer:completion:
```objectivec
- (void)getUserFullInfo:(long long)uid syncServer:(BOOL)syncServer completion:(BIMUserFullInfoCompletion)completion;
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uid | **long long** | 用户 ID。 |
| syncServer | **BOOL** | 是否强制同步服务端数据，如 false 则优先使用本地数据 |
| completion | **BIMUserFullInfoCompletion** | 结果回调，其中 `info` 是用户全量信息，参看 [BIMUserFullInfo](293486#bimuserfullinfo), `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getuserfullinfolist-completion"></span>
### getUserFullInfoList:completion:
```objectivec
- (void)getUserFullInfoList:(NSArray<NSNumber *> *)uidList completion:(BIMMUserFullInfoListCompletion)completion;
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **NSArray<NSNumber*>*** | 用户 ID 列表。 |
| completion | **BIMMUserFullInfoListCompletion** | 结果回调，其中 `info` 是用户全量信息，参看 [BIMUserFullInfo](293486#bimuserfullinfo), `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFriend-getuserfullinfolist-syncserver-completion"></span>
### getUserFullInfoList:syncServer:completion:
```objectivec
- (void)getUserFullInfoList:(NSArray<NSNumber *> *)uidList syncServer:(BOOL)syncServer completion:(BIMMUserFullInfoListCompletion)completion;
```
获取用户全量信息，首先查询本地用户数据，不存在则拉取服务端用户信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| uidList | **NSArray<NSNumber*>*** | 用户 ID 列表。 |
| syncServer | **BOOL** | 是否强制同步服务端数据，如 false 则优先使用本地数据 |
| completion | **BIMMUserFullInfoListCompletion** | 结果回调，其中 `info` 是用户全量信息，参看 [BIMUserFullInfo](293486#bimuserfullinfo), `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

# BIMClient (FriendConversation)
```objectivec
@interface BIMClient (FriendConversation)
```

BIMClient (FriendConversation) Class


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [addFriendConversationListener:](#BIMClientFriendConversation-addfriendconversationlistener) |
| **void** | [removeFriendConversationListener:](#BIMClientFriendConversation-removefriendconversationlistener) |
| **void** | [getFriendConversationList:count:completion:](#BIMClientFriendConversation-getfriendconversationlist-count-completion) |
| **void** | [getFriendConversationListTotalUnreadCount:](#BIMClientFriendConversation-getfriendconversationlisttotalunreadcount) |

## 函数说明
<span id="BIMClientFriendConversation-addfriendconversationlistener"></span>
### addFriendConversationListener:
```objectivec
- (void)addFriendConversationListener:(id<BIMConversationListListener>)listener;
```
添加好友会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConversationListListener>** | 会话监听方，参看 [BIMConversationListListener](293484#bimconversationlistlistener)。 |

<span id="BIMClientFriendConversation-removefriendconversationlistener"></span>
### removeFriendConversationListener:
```objectivec
- (void)removeFriendConversationListener:(id<BIMConversationListListener>)listener;
```
移除好友会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMConversationListListener>** | 会话监听方，参看 [BIMConversationListListener](293484#bimconversationlistlistener)。 |

<span id="BIMClientFriendConversation-getfriendconversationlist-count-completion"></span>
### getFriendConversationList:count:completion:
```objectivec
- (void)getFriendConversationList:(long long)cursor count:(int)count completion:(BIMConversationListCompletion)completion;
```
获取好友会话列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **long long** | 分页拉取的游标，第一次默认取传 0。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 100 个好友会话。 |
| completion | **BIMConversationListCompletion** | 结果回调，其中 `*conversations` 是拉取到的好友会话，`hasMore`标记数据库是否还有会话 ，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
+ 历史好友会话数量可能很多，因此建议采用分页查询的方式进行接口调用。
+ 如果好友会话全部拉取完毕，结果回调 BIMConversationListCompletion 中的 `hasMore` 获取字段值为 NO。


<span id="BIMClientFriendConversation-getfriendconversationlisttotalunreadcount"></span>
### getFriendConversationListTotalUnreadCount:
```objectivec
- (void)getFriendConversationListTotalUnreadCount:(BIMConversationUnreadCountCompletion)completion;
```
获取所有好友会话的未读消息总数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| completion | **BIMConversationUnreadCountCompletion** | 结果回调，其中 `unreadCount` 是获取到的未读数，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
会话未读消息不包括设置为免打扰会话中的未读消息。

# BIMClient (liveGroup)
```objectivec
@interface BIMClient (liveGroup)
```

BIMClient (liveGroup) Class
IM SDK 直播群对外接口类，通过此类提供所有直播群能力接口。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [addLiveGroupMessageListener:](#BIMClientLiveGroup-addlivegroupmessagelistener) |
| **void** | [removeLiveGroupMessageListener:](#BIMClientLiveGroup-removelivegroupmessagelistener) |
| **void** | [addLiveConversationListener:](#BIMClientLiveGroup-addliveconversationlistener) |
| **void** | [removeLiveConversationListener:](#BIMClientLiveGroup-removeliveconversationlistener) |
| **void** | [addLiveGroupMemberListener:](#BIMClientLiveGroup-addlivegroupmemberlistener) |
| **void** | [removeLiveGroupMemberListener:](#BIMClientLiveGroup-removelivegroupmemberlistener) |
| **NSString*** | [sendLiveGroupMessage:conversation:completion:](#BIMClientLiveGroup-sendlivegroupmessage-conversation-completion) |
| **NSString*** | [sendLiveGroupMessage:conversation:priority:completion:](#BIMClientLiveGroup-sendlivegroupmessage-conversation-priority-completion) |
| **NSString*** | [sendLiveGroupMessage:conversation:priority:progress:completion:](#BIMClientLiveGroup-sendlivegroupmessage-conversation-priority-progress-completion) |
| **void** | [getOwnerLiveGroupList:count:completion:](#BIMClientLiveGroup-getownerlivegrouplist-count-completion) |
| **void** | [getALLLiveGroupList:count:completion:](#BIMClientLiveGroup-getalllivegrouplist-count-completion) |
| **void** | [getLiveGroup:completion:](#BIMClientLiveGroup-getlivegroup-completion) |
| **void** | [createLiveGroup:completion:](#BIMClientLiveGroup-createlivegroup-completion) |
| **void** | [joinLiveGroup:completion:](#BIMClientLiveGroup-joinlivegroup-completion) |
| **void** | [joinLiveGroup:memberInfo:completion:](#BIMClientLiveGroup-joinlivegroup-memberinfo-completion) |
| **void** | [leaveLiveGroup:completion:](#BIMClientLiveGroup-leavelivegroup-completion) |
| **void** | [dissolveLiveGroup:completion:](#BIMClientLiveGroup-dissolvelivegroup-completion) |
| **void** | [getLiveGroupMemberBlockList:cursor:count:completion:](#BIMClientLiveGroup-getlivegroupmemberblocklist-cursor-count-completion) |
| **void** | [addLiveGroupMemberBlockList:uidList:completion:](#BIMClientLiveGroup-addlivegroupmemberblocklist-uidlist-completion) |
| **void** | [removeLiveGroupMemberBlockList:uidList:completion:](#BIMClientLiveGroup-removelivegroupmemberblocklist-uidlist-completion) |
| **void** | [getLiveGroupMemberOnlineList:cursor:count:completion:](#BIMClientLiveGroup-getlivegroupmemberonlinelist-cursor-count-completion) |
| **void** | [getLiveGroupMemberSilentList:cursor:count:completion:](#BIMClientLiveGroup-getlivegroupmembersilentlist-cursor-count-completion) |
| **void** | [setLiveGroupSilent:isSilent:completion:](#BIMClientLiveGroup-setlivegroupsilent-issilent-completion) |
| **void** | [addLiveGroupMemberSilentList:uidList:blockTime:completion:](#BIMClientLiveGroup-addlivegroupmembersilentlist-uidlist-blocktime-completion) |
| **void** | [removeLiveGroupMemberSilentList:uidList:completion:](#BIMClientLiveGroup-removelivegroupmembersilentlist-uidlist-completion) |
| **void** | [kickLiveGroupMemberList:uidList:completion:](#BIMClientLiveGroup-kicklivegroupmemberlist-uidlist-completion) |
| **void** | [transLiveGroupOwner:uid:completion:](#BIMClientLiveGroup-translivegroupowner-uid-completion) |
| **void** | [addLiveGroupAdmin:uidList:completion:](#BIMClientLiveGroup-addlivegroupadmin-uidlist-completion) |
| **void** | [removeLiveGroupAdmin:uidList:completion:](#BIMClientLiveGroup-removelivegroupadmin-uidlist-completion) |
| **void** | [getLiveGroupMemberList:cursor:count:completion:](#BIMClientLiveGroup-getlivegroupmemberlist-cursor-count-completion) |
| **void** | [getLiveGroupMemberSilentWhiteList:cursor:count:completion:](#BIMClientLiveGroup-getlivegroupmembersilentwhitelist-cursor-count-completion) |
| **void** | [addLiveGroupMemberSilentWhiteList:uidList:completion:](#BIMClientLiveGroup-addlivegroupmembersilentwhitelist-uidlist-completion) |
| **void** | [removeLiveGroupMemberSilentWhiteList:uidList:completion:](#BIMClientLiveGroup-removelivegroupmembersilentwhitelist-uidlist-completion) |
| **void** | [getLiveGroupOnlineMemberCount:completion:](#BIMClientLiveGroup-getlivegrouponlinemembercount-completion) |
| **void** | [setLiveGroupNotice:notice:completion:](#BIMClientLiveGroup-setlivegroupnotice-notice-completion) |
| **void** | [setLiveGroupDescription:description:completion:](#BIMClientLiveGroup-setlivegroupdescription-description-completion) |
| **void** | [setLiveGroupName:name:completion:](#BIMClientLiveGroup-setlivegroupname-name-completion) |
| **void** | [setLiveGroupIcon:url:completion:](#BIMClientLiveGroup-setlivegroupicon-url-completion) |
| **void** | [getLiveGroupMemberOnlineInfo:uidList:completion:](#BIMClientLiveGroup-getlivegroupmemberonlineinfo-uidlist-completion) |
| **void** | [getLiveGroupHistoryMessageList:cursor:limit:completion:](#BIMClientLiveGroup-getlivegrouphistorymessagelist-cursor-limit-completion) |
| **void** | [setLiveGroupMemberInfo:memberInfo:completion:](#BIMClientLiveGroup-setlivegroupmemberinfo-memberinfo-completion) |
| **void** | [setLiveGroupMemberAlias:alias:completion:](#BIMClientLiveGroup-setlivegroupmemberalias-alias-completion) |
| **void** | [setLiveGroupMemberAvatar:avatarUrl:completion:](#BIMClientLiveGroup-setlivegroupmemberavatar-avatarurl-completion) |
| **void** | [addLiveGroupMemberExt:ext:completion:](#BIMClientLiveGroup-addlivegroupmemberext-ext-completion) |
| **void** | [getLiveGroupMemberInfo:uid:completion:](#BIMClientLiveGroup-getlivegroupmemberinfo-uid-completion) |
| **void** | [refreshLiveGroupMediaMessage:completion:](#BIMClientLiveGroup-refreshlivegroupmediamessage-completion) |
| **void** | [addLiveGroupMarkTypeListener:](#BIMClientLiveGroup-addlivegroupmarktypelistener) |
| **void** | [removeLiveGroupMarkTypeListener:](#BIMClientLiveGroup-removelivegroupmarktypelistener) |
| **void** | [markLiveGroupMemberList:uidList:action:markTypeList:completion:](#BIMClientLiveGroup-marklivegroupmemberlist-uidlist-action-marktypelist-completion) |
| **void** | [getLiveGroupMarkTypeList:completion:](#BIMClientLiveGroup-getlivegroupmarktypelist-completion) |
| **void** | [getLiveGroupMemberOnlineList:cursor:count:markType:completion:](#BIMClientLiveGroup-getlivegroupmemberonlinelist-cursor-count-marktype-completion) |
| **void** | [manageLiveGroupMarkTypes:action:markTypeList:completion:](#BIMClientLiveGroup-managelivegroupmarktypes-action-marktypelist-completion) |

## 函数说明
<span id="BIMClientLiveGroup-addlivegroupmessagelistener"></span>
### addLiveGroupMessageListener:
```objectivec
- (void)addLiveGroupMessageListener:(id<BIMLiveMessageListener>)listener;
```
设置直播群消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveMessageListener>** | 直播群消息事件回调监听方，参看 [BIMLiveMessageListener](293484#bimlivemessagelistener)。 |

<span id="BIMClientLiveGroup-removelivegroupmessagelistener"></span>
### removeLiveGroupMessageListener:
```objectivec
- (void)removeLiveGroupMessageListener:(id<BIMLiveMessageListener>)listener;
```
移除直播群消息监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveMessageListener>** | 直播群消息事件回调监听方，参看 [BIMLiveMessageListener](293484#bimlivemessagelistener)。 |

<span id="BIMClientLiveGroup-addliveconversationlistener"></span>
### addLiveConversationListener:
```objectivec
- (void)addLiveConversationListener:(id<BIMLiveConversationListener>)listener;
```
设置直播群会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveConversationListener>** | 直播群会话事件回调监听方，参看 [BIMLiveConversationListener](293484#bimliveconversationlistener)。 |

<span id="BIMClientLiveGroup-removeliveconversationlistener"></span>
### removeLiveConversationListener:
```objectivec
- (void)removeLiveConversationListener:(id<BIMLiveConversationListener>)listener;
```
移除直播群会话监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveConversationListener>** | 直播群会话事件回调监听方，参看 [BIMLiveConversationListener](293484#bimliveconversationlistener)。 |

<span id="BIMClientLiveGroup-addlivegroupmemberlistener"></span>
### addLiveGroupMemberListener:
```objectivec
- (void)addLiveGroupMemberListener:(id<BIMLiveGroupMemberEventListener>)listener;
```
设置直播群成员监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveGroupMemberEventListener>** | 直播群成员事件回调监听方，参看 [BIMLiveGroupMemberEventListener](293484#bimlivegroupmembereventlistener)。 |

<span id="BIMClientLiveGroup-removelivegroupmemberlistener"></span>
### removeLiveGroupMemberListener:
```objectivec
- (void)removeLiveGroupMemberListener:(id<BIMLiveGroupMemberEventListener>)listener;
```
移除直播群成员监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveGroupMemberEventListener>** | 直播群成员事件回调监听方，参看 [BIMLiveGroupMemberEventListener](293484#bimlivegroupmembereventlistener)。 |

<span id="BIMClientLiveGroup-sendlivegroupmessage-conversation-completion"></span>
### sendLiveGroupMessage:conversation:completion:
```objectivec
- (NSString *)sendLiveGroupMessage:(BIMMessage *)message conversation:(NSString *)shortId completion:(BIMMessageCompletion)completion;
```
发送直播群消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 消息体，参看 [BIMMessage](293486#bimmessage)。 |
| shortId | **NSString*** | 会话 shortId。 |
| completion | **BIMMessageCompletion** | 完成回调，其中`message`参看[BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-sendlivegroupmessage-conversation-priority-completion"></span>
### sendLiveGroupMessage:conversation:priority:completion:
```objectivec
- (NSString *)sendLiveGroupMessage:(BIMMessage *)message conversation:(NSString *)shortId priority:(BIMMessagePriority)priority completion:(BIMMessageCompletion)completion;
```
发送直播群消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 消息体，参看 [BIMMessage](293486#bimmessage)。 |
| shortId | **NSString*** | 会话 shortId。 |
| priority | **BIMMessagePriority** | 设置消息优先级，参看 [BIMMessagePriority](293486#bimmessagepriority)。 |
| completion | **BIMMessageCompletion** | 完成回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-sendlivegroupmessage-conversation-priority-progress-completion"></span>
### sendLiveGroupMessage:conversation:priority:progress:completion:
```objectivec
- (NSString *)sendLiveGroupMessage:(BIMMessage *)message conversation:(NSString *)shortId priority:(BIMMessagePriority)priority progress:(BIMProgress)progress completion:(BIMMessageCompletion)completion;
```
发送直播群消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 消息体，参看 [BIMMessage](293486#bimmessage)。 |
| shortId | **NSString*** | 会话 shortId。 |
| priority | **BIMMessagePriority** | 设置消息优先级，参看 [BIMMessagePriority](293486#bimmessagepriority)。 |
| progress | **BIMProgress** | 进度回调，其中整型变量 `progress` 表示下载进度，取值范围 0 ～ 100。 |
| completion | **BIMMessageCompletion** | 完成回调，其中 `message` 参看 [BIMMessage](293486#bimmessage)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getownerlivegrouplist-count-completion"></span>
### getOwnerLiveGroupList:count:completion:
```objectivec
- (void)getOwnerLiveGroupList:(uint64_t)cursor count:(int)count completion:(BIMLiveGroupListCompletion)completion;
```
获取我是群主和管理员的直播群列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个会话。 |
| completion | **BIMLiveGroupListCompletion** | 完成回调，其中 `conversations` 是拉取到的会话参看[BIMConversation](293486#bimconversation)，`hasMore`标记数据库是否还有会话 ，`nextCursor`标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getalllivegrouplist-count-completion"></span>
### getALLLiveGroupList:count:completion:
```objectivec
- (void)getALLLiveGroupList:(uint64_t)cursor count:(int)count completion:(BIMLiveGroupListCompletion)completion;
```
获取所有直播群列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个会话。 |
| completion | **BIMLiveGroupListCompletion** | 完成回调，其中 `conversations` 是拉取到的会话参看[BIMConversation](293486#bimconversation)，`hasMore`标记数据库是否还有会话 ，`nextCursor`标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroup-completion"></span>
### getLiveGroup:completion:
```objectivec
- (void)getLiveGroup:(NSString *)shortId completion:(BIMConversationCompletion)completion;
```
获取直播群信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| completion | **BIMConversationCompletion** | 完成回调，其中 `conversations` 是拉取到的会话参看[BIMConversation](293486#bimconversation)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-createlivegroup-completion"></span>
### createLiveGroup:completion:
```objectivec
- (void)createLiveGroup:(BIMGroupInfo *)groupInfo completion:(BIMConversationCompletion)completion;
```
创建直播群。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| groupInfo | **BIMGroupInfo*** | 创建直播群参数信息，包括名称，头像等，参看 [BIMGroupInfo](293486#bimgroupinfo)。 |
| completion | **BIMConversationCompletion** | 完成回调，其中 `conversations` 是成功创建的会话参看[BIMConversation](293486#bimconversation)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-joinlivegroup-completion"></span>
### joinLiveGroup:completion:
```objectivec
- (void)joinLiveGroup:(NSString *)shortId completion:(BIMConversationJoinCompletion)completion;
```
加入直播群。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| completion | **BIMConversationJoinCompletion** | 完成回调，其中 `conversations` 是拉取到的会话参看[BIMConversation](293486#bimconversation)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
同一时间只能进入一个直播群，直播群不提供本地存储

<span id="BIMClientLiveGroup-joinlivegroup-memberinfo-completion"></span>
### joinLiveGroup:memberInfo:completion:
```objectivec
- (void)joinLiveGroup:(NSString *)shortId memberInfo:(BIMMemberUpdateInfo *)memberInfo completion:(BIMConversationJoinCompletion)completion;
```
加入直播群并设置当前用户成员信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| memberInfo | **BIMMemberUpdateInfo*** | 当前用户成员信息，参看 [BIMMemberUpdateInfo](293486#bimmemberupdateinfo)。 |
| completion | **BIMConversationJoinCompletion** | 完成回调，其中 `conversations` 是拉取到的会话参看 [BIMConversation](293486#bimconversation)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
+ 同一时间只能进入一个直播群，直播群不提供本地存储。
+ 成员信息与用户信息不同，用户在不同直播群可以拥有不同的成员信息，退群后信息自动销毁。


<span id="BIMClientLiveGroup-leavelivegroup-completion"></span>
### leaveLiveGroup:completion:
```objectivec
- (void)leaveLiveGroup:(NSString *)shortId completion:(BIMCompletion)completion;
```
离开直播群。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-dissolvelivegroup-completion"></span>
### dissolveLiveGroup:completion:
```objectivec
- (void)dissolveLiveGroup:(NSString *)shortId completion:(BIMCompletion)completion;
```
解散直播群（仅群主）。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroupmemberblocklist-cursor-count-completion"></span>
### getLiveGroupMemberBlockList:cursor:count:completion:
```objectivec
- (void)getLiveGroupMemberBlockList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count completion:(BIMMemberListCompletion)completion;
```
获取直播群成员黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupmemberblocklist-uidlist-completion"></span>
### addLiveGroupMemberBlockList:uidList:completion:
```objectivec
- (void)addLiveGroupMemberBlockList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
添加直播群成员黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待加入黑名单用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-removelivegroupmemberblocklist-uidlist-completion"></span>
### removeLiveGroupMemberBlockList:uidList:completion:
```objectivec
- (void)removeLiveGroupMemberBlockList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
移除直播群成员黑名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待移除黑名单用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroupmemberonlinelist-cursor-count-completion"></span>
### getLiveGroupMemberOnlineList:cursor:count:completion:
```objectivec
- (void)getLiveGroupMemberOnlineList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count completion:(BIMMemberListCompletion)completion;
```
获取直播群在线成员列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
+ 使用国内环境时，支持拉取最新加群的 10,000 个在线成员。
+ 使用海外环境时，支持拉取最新加群的 3,000 个在线成员。


<span id="BIMClientLiveGroup-getlivegroupmembersilentlist-cursor-count-completion"></span>
### getLiveGroupMemberSilentList:cursor:count:completion:
```objectivec
- (void)getLiveGroupMemberSilentList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count completion:(BIMMemberListCompletion)completion;
```
获取直播群被禁言成员列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupsilent-issilent-completion"></span>
### setLiveGroupSilent:isSilent:completion:
```objectivec
- (void)setLiveGroupSilent:(NSString *)shortId isSilent:(BOOL)isSilent completion:(BIMCompletion)completion;
```
设置直播群禁言(所有人)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| isSilent | **BOOL** | 是否禁言。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupmembersilentlist-uidlist-blocktime-completion"></span>
### addLiveGroupMemberSilentList:uidList:blockTime:completion:
```objectivec
- (void)addLiveGroupMemberSilentList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList blockTime:(long long)blockTime completion:(BIMCompletion)completion;
```
设置直播群禁言(指定用户)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待禁言用户UID列表。 |
| blockTime | **long long** | 禁言时间。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-removelivegroupmembersilentlist-uidlist-completion"></span>
### removeLiveGroupMemberSilentList:uidList:completion:
```objectivec
- (void)removeLiveGroupMemberSilentList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
设置直播群用户解除禁言(指定用户)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待解除禁言用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-kicklivegroupmemberlist-uidlist-completion"></span>
### kickLiveGroupMemberList:uidList:completion:
```objectivec
- (void)kickLiveGroupMemberList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
踢出直播群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待被踢出群用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-translivegroupowner-uid-completion"></span>
### transLiveGroupOwner:uid:completion:
```objectivec
- (void)transLiveGroupOwner:(NSString *)shortId uid:(long long)uid completion:(BIMCompletion)completion;
```
转让群主。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uid | **long long** | 转让群主用户uid。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupadmin-uidlist-completion"></span>
### addLiveGroupAdmin:uidList:completion:
```objectivec
- (void)addLiveGroupAdmin:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
设置直播群管理员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 会话 ID。 |
| uidList | **NSSet<NSNumber*>*** | 需要更改身份的群成员列表。 |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientLiveGroup-removelivegroupadmin-uidlist-completion"></span>
### removeLiveGroupAdmin:uidList:completion:
```objectivec
- (void)removeLiveGroupAdmin:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
移除直播群管理员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 会话 ID。 |
| uidList | **NSSet<NSNumber*>*** | 需要更改身份的群成员列表。 |
| completion | **BIMCompletion** | 结果回调。 |

<span id="BIMClientLiveGroup-getlivegroupmemberlist-cursor-count-completion"></span>
### getLiveGroupMemberList:cursor:count:completion:
```objectivec
- (void)getLiveGroupMemberList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count completion:(BIMMemberListCompletion)completion;
```
获取直播群群主管理员等常驻成员列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroupmembersilentwhitelist-cursor-count-completion"></span>
### getLiveGroupMemberSilentWhiteList:cursor:count:completion:
```objectivec
- (void)getLiveGroupMemberSilentWhiteList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count completion:(BIMMemberListCompletion)completion;
```
获取直播群会话禁言白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupmembersilentwhitelist-uidlist-completion"></span>
### addLiveGroupMemberSilentWhiteList:uidList:completion:
```objectivec
- (void)addLiveGroupMemberSilentWhiteList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
添加禁言会话白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待禁言用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-removelivegroupmembersilentwhitelist-uidlist-completion"></span>
### removeLiveGroupMemberSilentWhiteList:uidList:completion:
```objectivec
- (void)removeLiveGroupMemberSilentWhiteList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMCompletion)completion;
```
移除禁言会话白名单。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 待解除禁言用户UID列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegrouponlinemembercount-completion"></span>
### getLiveGroupOnlineMemberCount:completion:
```objectivec
- (void)getLiveGroupOnlineMemberCount:(NSString *)shortId completion:(BIMOnlineMemberCountCompletion)completion;
```
获取直播群在线人数。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群会话 shortId。 |
| completion | **BIMOnlineMemberCountCompletion** | 在线人数结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupnotice-notice-completion"></span>
### setLiveGroupNotice:notice:completion:
```objectivec
- (void)setLiveGroupNotice:(NSString *)shortId notice:(NSString *)notice completion:(BIMCompletion)completion;
```
设置直播群公告。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| notice | **NSString*** | 直播群公告内容。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupdescription-description-completion"></span>
### setLiveGroupDescription:description:completion:
```objectivec
- (void)setLiveGroupDescription:(NSString *)shortId description:(NSString *)description completion:(BIMCompletion)completion;
```
设置直播群描述。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| description | **NSString*** | 直播群描述内容。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupname-name-completion"></span>
### setLiveGroupName:name:completion:
```objectivec
- (void)setLiveGroupName:(NSString *)shortId name:(NSString *)name completion:(BIMCompletion)completion;
```
设置直播群名称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| name | **NSString*** | 直播群名称。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupicon-url-completion"></span>
### setLiveGroupIcon:url:completion:
```objectivec
- (void)setLiveGroupIcon:(NSString *)shortId url:(NSString *)url completion:(BIMCompletion)completion;
```
设置直播群头像。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| url | **NSString*** | 直播群头像 url 地址。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroupmemberonlineinfo-uidlist-completion"></span>
### getLiveGroupMemberOnlineInfo:uidList:completion:
```objectivec
- (void)getLiveGroupMemberOnlineInfo:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList completion:(BIMOnlineMemberInfoCompletion)completion;
```
获取直播群成员在线信息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uidList | **NSSet<NSNumber*>*** | 用户 UID 列表 |
| completion | **BIMOnlineMemberInfoCompletion** | 结果回调，参看 [BIMLiveMemberOnlineInfo](293486#bimlivememberonlineinfo) |

<span id="BIMClientLiveGroup-getlivegrouphistorymessagelist-cursor-limit-completion"></span>
### getLiveGroupHistoryMessageList:cursor:limit:completion:
```objectivec
- (void)getLiveGroupHistoryMessageList:(NSString *)shortId cursor:(uint64_t)cursor limit:(int)limit completion:(BIMLiveMessageListCompletion)completion;
```
获取直播群历史消息(从新到旧)。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群会话 shortId。 |
| cursor | **uint64_t** | 直播群历史消息拉取起点 |
| limit | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个。 |
| completion | **BIMLiveMessageListCompletion** | 结果回调 |

<span id="BIMClientLiveGroup-setlivegroupmemberinfo-memberinfo-completion"></span>
### setLiveGroupMemberInfo:memberInfo:completion:
```objectivec
- (void)setLiveGroupMemberInfo:(NSString *)shortId memberInfo:(BIMMemberUpdateInfo *)memberInfo completion:(BIMCompletion)completion;
```
设置直播群成员信息，覆盖服务端存储。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| memberInfo | **BIMMemberUpdateInfo*** | 设置当前用户成员信息, 参看 [BIMMemberUpdateInfo](293486#bimmemberupdateinfo) |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

**注意**
成员信息与用户信息不同，用户在不同直播群可以拥有不同的成员信息，退群后信息自动销毁。

<span id="BIMClientLiveGroup-setlivegroupmemberalias-alias-completion"></span>
### setLiveGroupMemberAlias:alias:completion:
```objectivec
- (void)setLiveGroupMemberAlias:(NSString *)shortId alias:(NSString *)alias completion:(BIMCompletion)completion;
```
设置直播群成员昵称。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| alias | **NSString*** | 设置当前用户成员昵称。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-setlivegroupmemberavatar-avatarurl-completion"></span>
### setLiveGroupMemberAvatar:avatarUrl:completion:
```objectivec
- (void)setLiveGroupMemberAvatar:(NSString *)shortId avatarUrl:(NSString *)avatarUrl completion:(BIMCompletion)completion;
```
设置直播群成员头像。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| avatarUrl | **NSString*** | 设置当前用户成员头像 URL。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupmemberext-ext-completion"></span>
### addLiveGroupMemberExt:ext:completion:
```objectivec
- (void)addLiveGroupMemberExt:(NSString *)shortId ext:(NSDictionary *)ext completion:(BIMCompletion)completion;
```
设置直播群成员自定义信息，相同 key 会覆盖。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 ShortId。 |
| ext | **NSDictionary*** | 设置直播群成员自定义信息。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-getlivegroupmemberinfo-uid-completion"></span>
### getLiveGroupMemberInfo:uid:completion:
```objectivec
- (void)getLiveGroupMemberInfo:(NSString *)shortId uid:(long long)uid completion:(BIMMemberCompletion)completion;
```
获取直播群成员信息，其中包括当前在直播群的成员以及群主管理员，退出群的游客信息无法获取。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| uid | **long long** | 查询的用户 uid。 |
| completion | **BIMMemberCompletion** | 结果回调，其中 member 参看 [BIMMember](293486#bimmember)， `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-refreshlivegroupmediamessage-completion"></span>
### refreshLiveGroupMediaMessage:completion:
```objectivec
- (void)refreshLiveGroupMediaMessage:(BIMMessage *)message completion:(BIMCompletion)completion;
```
刷新直播群媒体信息，媒体 URL 过期时调用该方法。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| message | **BIMMessage*** | 待刷新的消息，参看 [BIMMessage](293486#bimmessage)。 |
| completion | **BIMCompletion** | 结果回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-addlivegroupmarktypelistener"></span>
### addLiveGroupMarkTypeListener:
```objectivec
- (void)addLiveGroupMarkTypeListener:(id<BIMLiveGroupMarkTypeListener>)listener;
```
新增直播群标记事件监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveGroupMarkTypeListener>** | 直播群标记事件回调监听方，参看 [BIMLiveGroupMarkTypeListener](293484#bimlivegroupmarktypelistener)。 |

<span id="BIMClientLiveGroup-removelivegroupmarktypelistener"></span>
### removeLiveGroupMarkTypeListener:
```objectivec
- (void)removeLiveGroupMarkTypeListener:(id<BIMLiveGroupMarkTypeListener>)listener;
```
移除直播群标记事件监听。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| listener | **id<BIMLiveGroupMarkTypeListener>** | 直播群标记事件回调监听方，参看 [BIMLiveGroupMarkTypeListener](293484#bimlivegroupmarktypelistener)。 |

<span id="BIMClientLiveGroup-marklivegroupmemberlist-uidlist-action-marktypelist-completion"></span>
### markLiveGroupMemberList:uidList:action:markTypeList:completion:
```objectivec
- (void)markLiveGroupMemberList:(NSString *)shortId uidList:(NSSet<NSNumber *> *)uidList action:(BIMLiveGroupMarkTypeAction)action markTypeList:(NSSet<NSString *> *)markTypeList completion:(BIMLiveGroupMarkMemberCompletion)completion;
```
标记群成员。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 ShortId。 |
| uidList | **NSSet<NSNumber*>*** | 成员列表。 |
| action | **BIMLiveGroupMarkTypeAction** | 标记变更类型，参看 [BIMLiveGroupMarkTypeAction](293486#bimlivegroupmarktypeaction)。 |
| markTypeList | **NSSet<NSString*>*** | 标记列表。 |
| completion | **BIMLiveGroupMarkMemberCompletion** | 结果回调，其中 `failedInfos` 参看 [BIMLiveGroupMarkMemberFailedInfo](293486#bimlivegroupmarkmemberfailedinfo)，`error` 参看 [BIMError](293486#bimerror)。 |

<span id="BIMClientLiveGroup-getlivegroupmarktypelist-completion"></span>
### getLiveGroupMarkTypeList:completion:
```objectivec
- (void)getLiveGroupMarkTypeList:(NSString *)shortId completion:(BIMLiveGroupMarkTypeListCompletion)completion;
```
获取群聊标记类型列表。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 ShortId。 |
| completion | **BIMLiveGroupMarkTypeListCompletion** | 结果回调，其中 `markTypeList` 为标记列表，`error` 参看 [BIMError](293486#bimerror)。 |

<span id="BIMClientLiveGroup-getlivegroupmemberonlinelist-cursor-count-marktype-completion"></span>
### getLiveGroupMemberOnlineList:cursor:count:markType:completion:
```objectivec
- (void)getLiveGroupMemberOnlineList:(NSString *)shortId cursor:(uint64_t)cursor count:(int)count markType:(NSString *)markType completion:(BIMMemberListCompletion)completion;
```
根据标记获取直播群在线成员列表。
支持拉取近 1000 个在线游客。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 shortId。 |
| cursor | **uint64_t** | 分页拉取的游标，第一次默认取传 0，后续分页拉传上一次分页拉取成功回调里的 nextCursor。 |
| count | **int** | 分页拉取的个数。一次分页拉取不宜太多，否则可能影响拉取的速度，建议每次拉取 20 个成员。 |
| markType | **NSString*** | 标记类型。 |
| completion | **BIMMemberListCompletion** | 完成回调，其中 `members` 是拉取到的成员列表，参看 [BIMMember](293486#bimmember)，`hasMore` 标记数据库是否还有成员，`nextCursor` 标记下次拉取游标的位置，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientLiveGroup-managelivegroupmarktypes-action-marktypelist-completion"></span>
### manageLiveGroupMarkTypes:action:markTypeList:completion:
```objectivec
- (void)manageLiveGroupMarkTypes:(NSString *)shortId action:(BIMLiveGroupMarkTypeAction)action markTypeList:(NSSet<NSString *> *)markTypeList completion:(BIMCompletion)completion;
```
管理群成员标记类型。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| shortId | **NSString*** | 直播群 ShortId。 |
| action | **BIMLiveGroupMarkTypeAction** | 标记变更类型，参看 [BIMLiveGroupMarkTypeAction](293486#bimlivegroupmarktypeaction)。 |
| markTypeList | **NSSet<NSString*>*** | 标记列表。 |
| completion | **BIMCompletion** | 完成回调，其中 `error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

# BIMClient (FTS)
```objectivec
@interface BIMClient (FTS)
```

BIMClient (FTS) Class
IM SDK 搜索对外接口类，通过此类提供搜索能力。


## 成员函数
| 返回 | 名称 |
| --- | --- |
| **void** | [searchLocalMessage:key:completion:](#BIMClientFTS-searchlocalmessage-key-completion) |
| **void** | [searchLocalMessage:key:option:completion:](#BIMClientFTS-searchlocalmessage-key-option-completion) |

## 函数说明
<span id="BIMClientFTS-searchlocalmessage-key-completion"></span>
### searchLocalMessage:key:completion:
```objectivec
- (void)searchLocalMessage:(NSString *)conversationId key:(NSString *)key completion:(BIMSearchMessageCompletion)completion;
```
搜索本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID，如果为空则全局搜索 |
| key | **NSString*** | 关键词 |
| completion | **BIMSearchMessageCompletion** | 完成回调，其中 `infos` 是搜索结果信息，参看 [BIMSearchMsgInfo](293486#bimsearchmsginfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |

<span id="BIMClientFTS-searchlocalmessage-key-option-completion"></span>
### searchLocalMessage:key:option:completion:
```objectivec
- (void)searchLocalMessage:(NSString *)conversationId key:(NSString *)key option:(BIMGetMessageByTypeOption * _Nullable)option completion:(BIMSearchMessageByTypeCompletion)completion;
```
搜索本地消息。

**传入参数**
| 参数名 | 类型 | 说明 |
| --- | --- | --- |
| conversationId | **NSString*** | 会话 ID |
| key | **NSString*** | 搜索关键词 |
| option | **BIMGetMessageByTypeOption*** | 搜索选项，参看 [BIMGetMessageByTypeOption](293486#bimgetmessagebytypeoption)<br/>completion 完成回调，其中 `infos` 是搜索结果信息，参看 [BIMSearchMsgInfo](293486#bimsearchmsginfo)，`error` 参看 [BIMErrorCode](293485#bimerrorcode)。 |
