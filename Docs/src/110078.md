---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
keywords: 实时音视频    # use ',' as separator
---

## 3.58


该版本于 2024 年 3 月 12 日发布。此次升级包含的客户端系统有：Android、iOS、macOS、Windows、Linux、Electron。
Flutter SDK 3.58 版本于 2024 年 7 月 8 日发布。新增特性和升级指南参看 [Changelog for Flutter](https://pub.dev/packages/volc_engine_rtc/changelog)。

### 升级必看

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70007)。

### 新增特性

1. 支持内部采集信号静音控制（不改变本端硬件）。可以选择静音或取消静音麦克风采集，而不影响 SDK 音频流发布状态。参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux |  Unity | 
   | --- | --- | --- | --- | --- | --- | --- |
   | 设置是否将录音信号静音（不改变本端硬件） | [`muteAudioCapture`](70080#RTCVideo-muteaudiocapture) | [`muteAudioCapture:mute:`](70086#ByteRTCVideo-muteaudiocapture-mute) | [`muteAudioCapture:mute:`](70092#ByteRTCVideo-muteaudiocapture-mute) | [`muteAudioCapture`](70095#IRTCVideo-muteaudiocapture)  |[`muteAudioCapture`](85516#IRTCVideo-muteaudiocapture)  |[`MuteAudioCapture`](191859#IRTCVideo-muteaudiocapture) |

1. 支持对外部采集的 RGBA 视频帧中的 Alpha 通道进行编码，使移动端作为订阅端时可内部渲染带有背景透明效果的 RGBA 视频帧。该功能适用于需要将视频中的主体与背景分离的场景。参看：

   | 功能简述 | Android | iOS | Windows | Electron |
   | --- | --- | --- | --- | --- |
   | 开启外部采集视频帧的 Alpha 通道编码功能。 | [`enableAlphaChannelVideoEncode`](70080#RTCVideo-enablealphachannelvideoencode) | [`enableAlphaChannelVideoEncode:withAlphaLayout:`](70086#ByteRTCVideo-enablealphachannelvideoencode-withalphalayout) | [`enableAlphaChannelVideoEncode`](70095#IRTCVideo-enablealphachannelvideoencode)  | [`enableAlphaChannelVideoEncode`](85532#rtcvideo-enablealphachannelvideoencode)  |
   | 关闭外部采集视频帧的 Alpha 通道编码功能。 | [`disableAlphaChannelVideoEncode`](70080#RTCVideo-disablealphachannelvideoencode) | [`disableAlphaChannelVideoEncode:`](70086#ByteRTCVideo-disablealphachannelvideoencode) | [`disableAlphaChannelVideoEncode`](70095#IRTCVideo-disablealphachannelvideoencode)  | [`disableAlphaChannelVideoEncode`](85532#rtcvideo-disablealphachannelvideoencode)  |

1. 在 Android 平台，在支持渲染 View 对象的基础上，新增支持渲染 Surface 对象。

1. 在 Android 平台，支持动态加载主库 `libvolcenginertc.so`，集成指南参看[按需集成插件](https://www.volcengine.com/docs/6348/1108726#%E7%A6%BB%E7%BA%BF%E9%9B%86%E6%88%90)。

### 功能优化

1. 在 Android 系统上，加入房间，使用手机音量键调节的音量是 RTC 房间的播放音量。此前，在个别 Android 手机上，加入房间未播放音频时，使用音量键调节的是铃声音量，而非音频音量。
   - 当 SDK 将音频模式设置为通话模式时，调节通话模式音量；
   - 当 SDK 将音频模式设置为媒体模式时，调节媒体模式音量。

## 3.57 (Unity)

该版本于 2024 年 2 月 27 日发布。

### 新增特性

| 功能模块 | 说明 | 相关文档 |
| --- | --- | --- |
| 音视频传输 | 摄像头处于关闭状态时，支持使用静态图片填充本地推送的视频流。 | [SetDummyCaptureImagePath](191859#IRTCVideo-setdummycaptureimagepath) |
| ^^ | 跨房间转发媒体流，适用于跨房间连麦等场景。 | <ul><li>[StartForwardStreamToRooms](191859#IRTCVideoRoom-startforwardstreamtorooms)</li><li>[StopForwardStreamToRooms](191859#IRTCVideoRoom-stopforwardstreamtorooms)</li><li>[UpdateForwardStreamToRooms](191859#IRTCVideoRoom-updateforwardstreamtorooms)</li><li>[PauseForwardStreamToAllRooms](191859#IRTCVideoRoom-pauseforwardstreamtoallrooms)</li><li>[ResumeForwardStreamToAllRooms](191859#IRTCVideoRoom-resumeforwardstreamtoallrooms)</li><li>[OnForwardStreamStateChangedEventHandler](191860#onforwardstreamstatechangedeventhandler)</li><li>[OnForwardStreamEventEventHandler](191860#onforwardstreameventeventhandler)</li></ul> |
| ^^ | 设置发流端音画同步。 | <ul><li>[SetMultiDeviceAVSync](191859#IRTCVideoRoom-setmultideviceavsync)</li><li>[OnAVSyncStateChangeCallback](191860#onavsyncstatechangecallback)</li></ul> |
| 视频处理 | 设置本端采集的视频帧的旋转角度。 | [SetVideoCaptureRotation](191859#IRTCVideo-setvideocapturerotation) |
| ^^ | 在指定视频流上添加、移除水印。 | <ul><li>[SetVideoWatermark](191859#IRTCVideo-setvideowatermark)</li><li>[ClearVideoWatermark](191859#IRTCVideo-clearvideowatermark)</li></ul> |
| ^^ | 开启、关闭基础美颜，调整美颜强度。 | <ul><li>[EnableEffectBeauty](191859#IRTCVideo-enableeffectbeauty)</li><li>[SetBeautyIntensity](191859#IRTCVideo-setbeautyintensity)</li></ul> |
| ^^ | 智能美化特效接口，对本地采集的视频添加美颜、滤镜、贴纸等特效。 | <ul><li>[GetAuthMessage](191859#IRTCVideo-getauthmessage)</li><li>[FreeAuthMessage](191859#IRTCVideo-freeauthmessage)</li><li>[InitCVResource](191859#IRTCVideo-initcvresource)</li><li>[EnableVideoEffect](191859#IRTCVideo-enablevideoeffect)</li><li>[DisableVideoEffect](191859#IRTCVideo-disablevideoeffect)</li><li>[SetEffectNodes](191859#IRTCVideo-seteffectnodes)</li><li>[UpdateEffectNode](191859#IRTCVideo-updateeffectnode)</li><li>[SetColorFilter](191859#IRTCVideo-setcolorfilter)</li><li>[SetColorFilterIntensity](191859#IRTCVideo-setcolorfilterintensity)</li><li>[EnableVirtualBackground](191859#IRTCVideo-enablevirtualbackground)</li><li>[DisableVirtualBackground](191859#IRTCVideo-disablevirtualbackground)</li><li>[VideoSDKEnableFaceDetection](191859#IRTCVideo-videosdkenablefacedetection)</li><li>[VideoSDKDisableFaceDetection](191859#IRTCVideo-videosdkdisablefacedetection)</li><li>[OnFaceDetectResultEventHandler](191860#onfacedetectresulteventhandler)</li></ul> |
| ^^ | 本地摄像头数码变焦设置。 | <ul><li>[SetVideoDigitalZoomConfig](191859#IRTCVideo-setvideodigitalzoomconfig)</li><li>[SetVideoDigitalZoomControl](191859#IRTCVideo-setvideodigitalzoomcontrol)</li><li>[StartVideoDigitalZoomControl](191859#IRTCVideo-startvideodigitalzoomcontrol)</li><li>[StopVideoDigitalZoomControl](191859#IRTCVideo-stopvideodigitalzoomcontrol)</li></ul> |
| 音频处理 | 设置音频变声、变调、均衡、混响等效果。 | <ul><li>[SetVoiceChangerType](191859#IRTCVideo-setvoicechangertype)</li><li>[SetLocalVoicePitch](191859#IRTCVideo-setlocalvoicepitch)</li><li>[SetLocalVoiceEqualization](191859#IRTCVideo-setlocalvoiceequalization)</li><li>[SetLocalVoiceReverbParam](191859#IRTCVideo-setlocalvoicereverbparam)</li><li>[EnableLocalVoiceReverb](191859#IRTCVideo-enablelocalvoicereverb)</li></ul> |


## 3.57

该版本于 2024 年 1 月 5 日发布。此次升级包含的客户端系统有：Android、iOS、macOS、Windows、Linux、Electron。
Flutter SDK 3.57 版本于 2024 年 2 月 4 日发布。新增特性和升级指南参看 [Changelog for Flutter](https://pub.dev/packages/volc_engine_rtc/changelog)。

### 升级必看

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看[升级指南](70007)。

### 新增特性

1. 自 3.57 版本起，RTC SDK 支持动态加载除主库外的 `.so` 文件，SDK 在 `EngineConfig` 类中提供 `nativeLoadPath` 属性，支持在 App 运行时从指定的私有目录动态加载所需的 `.so` 文件，从而减小 App 的安装包体积。如需动态加载 `.so` 文件，参看[按需集成插件](https://www.volcengine.com/docs/6348/1108726#%E7%A6%BB%E7%BA%BF%E9%9B%86%E6%88%90)。

1. 该版本提供 SAMI 音频技术动态库插件、VP8 编解码插件、AAC 软件编解码插件、APM 稳定性监控插件，详情参看[按需集成插件以缩小应用体积](https://www.volcengine.com/docs/6348/1108726)。

1. Android 和 iOS 端支持将摄像头画面旋转为指定角度，适用于**无重力感应设备**的视频采集画面适配，例如，金融行业的人脸采集设备等。参看：

   | 功能简述| Android | iOS |
   |--|--|--|
   | 旋转采集画面| [`setVideoCaptureRotation`](70080#RTCVideo-setvideocapturerotation) | [`setVideoCaptureRotation:`](70086#ByteRTCVideo-setvideocapturerotation) |

   > 对于手机和平板等具备重力感应的设备，旋转视频采集画面应使用 `setVideoRotationMode`，参看 [移动端视频采集旋转方向](https://www.volcengine.com/docs/6348/106458)。

1. PC 端提供视频增强处理能力，当视频采集处于在暗光环境下时，开启本功能，可提高画面亮度。参看：

   | 功能简述| macOS | Windows | Electron |
   |--|--|--|--|
   | 设置视频暗光增强处理| [`setLowLightAdjusted`](70092#ByteRTCVideo-setlowlightadjusted) | [`setLowLightAdjusted`](70095#IRTCVideo-setlowlightadjusted) | [`setLowLightAdjusted`](85532#rtcvideo-setlowlightadjusted) |

1. 各端支持定向物联网卡通信。

1. Linux 端音频编码器全链路支持 G722。

1. 自定义渲染支持回调本端采集后的视频帧和远端解码后的视频帧。对远端流进行自定义渲染时，支持将远端流镜像渲染、将旋转角旋转为 0 度。

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 将本地视频流与自定义渲染器绑定 | [`setLocalVideoRender`](70080#RTCVideo-setlocalvideorender) | [`setLocalVideoRender:withSink:withLocalRenderConfig:`](70086#ByteRTCVideo-setlocalvideorender-withsink-withlocalrenderconfig) | [`setLocalVideoRender:withSink:withLocalRenderConfig:`](70092#ByteRTCVideo-setlocalvideorender-withsink-withlocalrenderconfig) | [`setLocalVideoRender`](70095#IRTCVideo-setlocalvideorender) | [`setLocalVideoRender`](85516#IRTCVideo-setlocalvideorender) |
   | 将远端视频流与自定义渲染器绑定 | [`setRemoteVideoRender`](70080#RTCVideo-setremotevideorender) | [`setRemoteVideoRender:withSink:withRemoteRenderConfig:`](70086#ByteRTCVideo-setremotevideorender-withsink-withremoterenderconfig) | [`setRemoteVideoRender:withSink:withRemoteRenderConfig:`](70092#ByteRTCVideo-setremotevideorender-withsink-withremoterenderconfig) | [`setRemoteVideoRender`](70095#IRTCVideo-setremotevideorender) | [`setRemoteVideoRender`](85516#IRTCVideo-setremotevideorender) |

1. 对远端流进行内部渲染时，支持将某一路远端流镜像渲染。

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 使用内部渲染时，为远端流开启镜像 | [`setRemoteVideoMirrorType`](70080#RTCVideo-setremotevideomirrortype) | [`setRemoteVideoMirrorType:withMirrorType:`](70086#ByteRTCVideo-setremotevideomirrortype-withmirrortype) | [`setRemoteVideoMirrorType:withMirrorType:`](70092#ByteRTCVideo-setremotevideomirrortype-withmirrortype) | [`setRemoteVideoMirrorType`](70095#IRTCVideo-setremotevideomirrortype) | [`setRemoteVideoMirrorType`](85516#IRTCVideo-setremotevideomirrortype) |

1. 转推直播功能新增以下特性：

   | 功能简述 | Android | iOS | macOS | windows |
   | --- | --- | --- | --- | --- |
   | 支持在房间内无用户发布流的场景下，发起转推直播任务 | [`MixedStreamServerControlConfig.setPushStreamMode`](70083#MixedStreamServerControlConfig-setpushstreammode) | [`ByteRTCMixedStreamServerControlConfig.pushStreamMode`](70088#ByteRTCMixedStreamServerControlConfig-pushstreammode) | [`ByteRTCMixedStreamServerControlConfig.pushStreamMode`](70089#ByteRTCMixedStreamServerControlConfig-pushstreammode) | [`MixedStreamServerControlConfig.push_stream_mode`](70098#MixedStreamServerControlConfig-push_stream_mode)  |
   | 支持使用占位图代替视频流发起转推直播任务，并设置占位图的填充模式 | <ul><li>[`MixedStreamLayoutRegionConfig.setAlternateImageURL`](70083#MixedStreamLayoutRegionConfig-setalternateimageurl)</li><li>[`MixedStreamLayoutRegionConfig.setAlternateImageFillMode`](70083#MixedStreamLayoutRegionConfig-setalternateimagefillmode)</li></ul> |<ul><li>[`ByteRTCMixedStreamLayoutRegionConfig.alternateImageUrl`](70088#ByteRTCMixedStreamLayoutRegionConfig-alternateimageurl)</li><li>[`ByteRTCMixedStreamLayoutRegionConfig.alternateImageFillMode`](70088#ByteRTCMixedStreamLayoutRegionConfig-alternateimagefillmode)</li></ul> | <ul><li>[`ByteRTCMixedStreamLayoutRegionConfig.alternateImageUrl`](70089#ByteRTCMixedStreamLayoutRegionConfig-alternateimageurl)</li><li>[`ByteRTCMixedStreamLayoutRegionConfig.alternateImageFillMode`](70089#ByteRTCMixedStreamLayoutRegionConfig-alternateimagefillmode)</li></ul>  | <ul><li>[`MixedStreamLayoutRegionConfig.alternate_image_url`](70098#MixedStreamLayoutRegionConfig-alternate_image_url)</li><li>[`MixedStreamLayoutRegionConfig.alternate_image_fill_mode`](70098#MixedStreamLayoutRegionConfig-alternate_image_fill_mode)</li></ul>  |
   | 合流推到 CDN 时支持推送纯音频流 | [`MixedStreamServerControlConfig.setMediaType`](70083#MixedStreamServerControlConfig-setmediatype) | [`ByteRTCMixedStreamServerControlConfig.mediaType`](70088#ByteRTCMixedStreamServerControlConfig-mediatype) | [`ByteRTCMixedStreamServerControlConfig.mediaType`](70089#ByteRTCMixedStreamServerControlConfig-mediatype) | [`MixedStreamServerControlConfig.media_type`](70098#MixedStreamServerControlConfig-media_type)  |
   | 支持设置合流后整体画布的背景图片 | [`MixedStreamLayoutConfig.setBackgroundImageURL`](70083#MixedStreamLayoutConfig-setbackgroundimageurl) | [`ByteRTCMixedStreamLayoutConfig.backgroundImageUrl`](70088#ByteRTCMixedStreamLayoutConfig-backgroundimageurl) | [`ByteRTCMixedStreamLayoutConfig.backgroundImageUrl`](70089#ByteRTCMixedStreamLayoutConfig-backgroundimageurl) | [`IMixedStreamConfig.setBackgroundImageURL`](70098#IMixedStreamConfig-setbackgroundimageurl) |

1. Electron 新增特性

   1. 支持自定义音频、视频采集。参看：

      | 功能简述| Electron |
      |---|---|
      | 设置向 SDK 输入的视频源| [`setVideoSourceType`](85532#rtcvideo-setvideosourcetype) | 
      | 推送外部视频帧 | [`pushExternalVideoFrame`](85532#rtcvideo-pushexternalvideoframe) | 
      | 切换音频采集方式 | [`setAudioSourceType`](85532#rtcvideo-setaudiosourcetype) |
      | 推送自定义采集的音频数据到 RTC SDK | [`pushExternalAudioFrame`](85532#rtcvideo-pushexternalaudioframe) |
      | 启动音频裸数据混音 | [`openWithCustomSource`](#rtcmediaplayer-openwithcustomsource) |
      | 推送用于混音的 PCM 音频帧数据 | [`pushExternalAudioFrame`](#rtcmediaplayer-pushexternalaudioframe) |

   2. 获取时间戳。参看：

      | 功能简述| Electron |
      |---|---|
      | 获取时间戳, 单位毫秒 | [`getTimestampMs`](#static-rtcvideo-gettimestampms) |
      | 获取时间戳, 单位微秒 | [`getTimestampUs`](#static-rtcvideo-gettimestampus) |

1. 转推直播配置新增服务端合流控制参数

	1. 支持在合流转推发送 SEI 时设置 PayLoadType，以适配特定播放器作为接收端时接收 SEI 信息。参看：

		| 功能简述 | Android | iOS | macOS | Windows |
		| --- | --- | --- | --- | --- |
		| 设置合流转推 SEI 信息的 payload type | [`setSeiPayloadType`](70083#MixedStreamServerControlConfig-setseipayloadtype) | [`seiPayloadType`](70088#ByteRTCMixedStreamServerControlConfig-seipayloadtype) | [`seiPayloadType`](70089#ByteRTCMixedStreamServerControlConfig-seipayloadtype) | [`sei_payload_type`](70098#MixedStreamServerControlConfig-sei_payload_type)  |
		| 设置合流转推 SEI 信息的 Payload UUID | [`setSeiPayloadUuid`](70083#MixedStreamServerControlConfig-setseipayloaduuid) | [`seiPayloadUUID`](70088#ByteRTCMixedStreamServerControlConfig-seipayloaduuid) | [`seiPayloadUUID`](70089#ByteRTCMixedStreamServerControlConfig-seipayloaduuid) |  [`sei_payload_uuid`](70098#MixedStreamServerControlConfig-sei_payload_uuid) |

   2. 支持控制 SEI 发送内容。此前服务端合流默认发送全量 SEI 信息，新版本支持单独发送音量提示 SEI，在需要高频发送音量信息的场景下，大幅减少性能开销。参看：

		| 功能简述 | Android | iOS | macOS | Windows |
		| --- | --- | --- | --- | --- |
		| 设置是否开启单独发送声音提示 SEI 的功能 | [`setEnableVolumeIndication`](70083#MixedStreamServerControlConfig-setenablevolumeindication) | [`enableVolumeIndication`](70088#ByteRTCMixedStreamServerControlConfig-enablevolumeindication) | [`enableVolumeIndication`](70089#ByteRTCMixedStreamServerControlConfig-enablevolumeindication) | [`enable_volume_indication`](70098#MixedStreamServerControlConfig-enable_volume_indication) |
      | 设置 SEI 内容 | [`setSeiContentMode`](70083#MixedStreamServerControlConfig-setseicontentmode) | [`seiContentMode`](70088#ByteRTCMixedStreamServerControlConfig-seicontentmode) | [`seiContentMode`](70089#ByteRTCMixedStreamServerControlConfig-seicontentmode) | [`sei_content_mode`](70098#MixedStreamServerControlConfig-sei_content_mode) |
      | 设置声音信息 SEI 是否包含音量值 | [`setIsAddVolumeValue`](70083#MixedStreamServerControlConfig-setisaddvolumevalue) | [`isAddVolumeValue`](70088#ByteRTCMixedStreamServerControlConfig-isaddvolumevalue) | [`isAddVolumeValue`](70089#ByteRTCMixedStreamServerControlConfig-isaddvolumevalue) | [`is_add_volume_value`](70098#MixedStreamServerControlConfig-is_add_volume_value) |
      | 设置声音信息提示间隔 | [`setVolumeIndicationInterval`](70083#MixedStreamServerControlConfig-setvolumeindicationinterval) | [`volumeIndicationInterval`](70088#ByteRTCMixedStreamServerControlConfig-volumeindicationinterval) | [`volumeIndicationInterval`](70089#ByteRTCMixedStreamServerControlConfig-volumeindicationinterval) | [`volume_indication_interval`](70098#MixedStreamServerControlConfig-volume_indication_interval) |
      | 设置有效音量大小 | [`setTalkVolume`](70083#MixedStreamServerControlConfig-settalkvolume) | [`talkVolume`](70088#ByteRTCMixedStreamServerControlConfig-talkvolume) | [`talkVolume`](70089#ByteRTCMixedStreamServerControlConfig-talkvolume) | [`talk_volume`](70098#MixedStreamServerControlConfig-talk_volume) |

1. Android 端新增功能，支持插入多个外接摄像头，用户可以根据需要切换选择摄像头。具体参看 API：
   - 创建视频设备管理实例：[`getVideoDeviceManager`](70080#RTCVideo-getvideodevicemanager)
   - 获取当前系统内视频采集设备列表：[`enumerateVideoCaptureDevices`](70080#IVideoDeviceManager-enumeratevideocapturedevices)
   - 设置当前视频采集设备：[`setVideoCaptureDevice`](70080#IVideoDeviceManager-setvideocapturedevice)

### 功能优化

1. 硬件耳返功能新增支持了 OPPO，VIVO，XIAOMI 等多个机型。

1. 客户端字幕翻译功能新增支持同时显示原文和译文字幕。

1. 新增了 `onActiveVideoLayer` 回调。在使用自定义视频编解码功能时，发送端可以根据此回调，按需编码，节约编码消耗的性能资源。

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 视频流可发送状态发生变化时的回调 | [`onActiveVideoLayer`](70081#IExternalVideoEncoderEventHandler-onactivevideolayer) | [`onActiveVideoLayer`](70087#ByteRTCExternalVideoEncoderEventHandler-onactivevideolayer-withvideoindex-withactive) | [`onActiveVideoLayer`](70093#ByteRTCExternalVideoEncoderEventHandler-onactivevideolayer-withvideoindex-withactive) | [`onActiveVideoLayer`](70096#IExternalVideoEncoderEventHandler-onactivevideolayer) | [`onActiveVideoLayer`](85517#IExternalVideoEncoderEventHandler-onactivevideolayer) |

1. 优化了自定义视频编解码功能，支持在音频自定义订阅场景下使用。如果你要在音频自定义订阅场景下使用自定义视频编解码功能，你应在解码端，通过 `setVideoDecoderConfig` 接口，将任意远端主流/屏幕流的解码参数设置为自定义编解码。

1. 增加了客户端截取视频画面时的报错场景：超过 1s 时没有截取到视频画面会收到错误码。参看：
      
   | 功能简述 | Android | iOS | macOS | Windows |
   | --- | --- | --- | --- | --- |
   | 截取本地视频画面时的回调 | [`onTakeLocalSnapshotResult`](70081#ISnapshotResultCallback-ontakelocalsnapshotresult) | [`onTakeLocalSnapshotResult:streamIndex:image:errorCode:`](70087#ByteRTCVideoSnapshotCallbackDelegate-ontakelocalsnapshotresult-streamindex-image-errorcode) | [`onTakeLocalSnapshotResult:streamIndex:image:errorCode:`](70093#ByteRTCVideoSnapshotCallbackDelegate-ontakelocalsnapshotresult-streamindex-image-errorcode) | [`onTakeLocalSnapshotResult`](70096#ISnapshotResultCallback-ontakelocalsnapshotresult) |
   | 截取远端视频画面时的回调 | [`onTakeRemoteSnapshotResult`](70081#ISnapshotResultCallback-ontakeremotesnapshotresult) | [`onTakeRemoteSnapshotResult:streamKey:image:errorCode:`](70087#ByteRTCVideoSnapshotCallbackDelegate-ontakeremotesnapshotresult-streamkey-image-errorcode) | [`onTakeRemoteSnapshotResult:streamKey:image:errorCode:`](70093#ByteRTCVideoSnapshotCallbackDelegate-ontakeremotesnapshotresult-streamkey-image-errorcode) | [`onTakeRemoteSnapshotResult`](70096#ISnapshotResultCallback-ontakeremotesnapshotresult) |

1. Android 端应用在使用 RTC SDK 进行视频内部采集时，长时间退后台（>1min）后再次进入前台时，RTC 将自动恢复视频采集，无需额外操作。

1. 在通过回调获取本地音频信息时，支持获取人声基频信息。参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 启用音频信息提示 | [`enableAudioPropertiesReport`](70080#RTCVideo-enableaudiopropertiesreport) | [`enableAudioPropertiesReport:`](70086#ByteRTCVideo-enableaudiopropertiesreport) | [`enableAudioPropertiesReport:`](70092#ByteRTCVideo-enableaudiopropertiesreport) | [`enableAudioPropertiesReport`](70095#IRTCVideo-enableaudiopropertiesreport) | [`enableAudioPropertiesReport`](85516#IRTCVideo-enableaudiopropertiesreport) |
   | 获取本地音频信息 | [`onLocalAudioPropertiesReport`](70081#IRTCVideoEventHandler-onlocalaudiopropertiesreport) | [`rtcEngine:onLocalAudioPropertiesReport:`](70087#ByteRTCVideoDelegate-rtcengine-onlocalaudiopropertiesreport) | [`rtcEngine:onLocalAudioPropertiesReport:`](70093#ByteRTCVideoDelegate-rtcengine-onlocalaudiopropertiesreport) | [`onLocalAudioPropertiesReport`](70096#IRTCVideoEventHandler-onlocalaudiopropertiesreport) | [`onLocalAudioPropertiesReport`](85517#IRTCVideoEventHandler-onlocalaudiopropertiesreport) |

1. 支持自定义本地日志文件名前缀，最终的日志文件名为 `前缀 + "_" + 文件创建时间 + "_rtclog".log`。

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 设置本地日志文件名前缀 | [`RTCLogConfig.logFilenamePrefix`](70083#RTCLogConfig-logfilenameprefix) | [`ByteRTCLogConfig.logFilenamePrefix`](70088#ByteRTCLogConfig-logfilenameprefix) | [`ByteRTCLogConfig.logFilenamePrefix`](70089#ByteRTCLogConfig-logfilenameprefix) | [`LogConfig.log_filename_prefix`](70098#LogConfig-log_filename_prefix) | [`LogConfig.log_filename_prefix`](85519#LogConfig-log_filename_prefix) |

1. 基础美颜新增清晰子项，并优化美颜参数默认值。使用清晰子项需要集成 v4.4.2+ 版本的特效 SDK。各基础美颜子项的默认强度调整为：美白 0.7，磨皮 0.8，锐化 0.5，清晰 0.7。

   | 功能简述 | Android | iOS | macOS | Windows |
   | --- | --- | --- | --- | --- |
   | 开启/关闭基础美颜 | [`enableEffectBeauty`](70080#RTCVideo-enableeffectbeauty) | [`enableEffectBeauty:`](70086#ByteRTCVideo-enableeffectbeauty) | [`enableEffectBeauty:`](70092#ByteRTCVideo-enableeffectbeauty) | [`enableEffectBeauty`](70095#IRTCVideo-enableeffectbeauty) |
   | 调整基础美颜强度 | [`setBeautyIntensity`](70080#RTCVideo-setbeautyintensity) | [`setBeautyIntensity:withIntensity:`](70086#ByteRTCVideo-setbeautyintensity-withintensity) | [`setBeautyIntensity:withIntensity:`](70092#ByteRTCVideo-setbeautyintensity-withintensity) | [`setBeautyIntensity`](70095#IRTCVideo-setbeautyintensity) |

## 3.55 (Unity)

该版本于 2023 年 10 月 27 日发布。

### 新增特性

| 功能模块 | 说明 | 相关文档 |
| --- | --- | --- |
| 音频路由 |  <ul><li>支持将默认的音频播放设备设置为听筒或扬声器。</li><li> 支持获取当前的音频路由设置。 </li></ul>|  <ul><li> [SetDefaultAudioRoute](191859#IRTCVideo-setdefaultaudioroute)</li><li> [GetAudioRoute](191859#IRTCVideo-getaudioroute)</li></ul> |
| 音频回调 | 支持开启和关闭指定的音频数据帧回调。  | <ul><li>[EnableAudioFrameCallback](191859#IRTCVideo-enableaudioframecallback) </li><li> [DisableAudioFrameCallback](191859#IRTCVideo-disableaudioframecallback) </li><li> [OnRemoteUserAudioFrameEventHandler](191860#onremoteuseraudioframeeventhandler) </li><li> [OnMixedAudioFrameEventHandler](191860#onmixedaudioframeeventhandler) </li><li> [OnRecordAudioFrameEventHandler](191860#onrecordaudioframeeventhandler) </li><li> [OnPlaybackAudioFrameEventHandler](191860#onplaybackaudioframeeventhandler)</li></ul> |
| 音频录制 | 新增录制本地通话的功能。 | <ul><li>[StartAudioRecording](191859#IRTCVideo-startaudiorecording) </li><li> [StopAudioRecording](191859#IRTCVideo-stopaudiorecording) </li><li> [OnAudioRecordingStateUpdateEventHandler](191860#onaudiorecordingstateupdateeventhandler)</li></ul> |
| 音视频传输 | 支持订阅所有用户和取消订阅所有用户。在上麦人数固定的场景中，可以快速实现麦位切换。 | <ul><li> [SubscribeAllStreams](191859#IRTCVideoRoom-subscribeallstreams) </li><li> [UnsubscribeAllStreams](191859#IRTCVideoRoom-unsubscribeallstreams) </li></ul>|
| 范围语音 | <ul><li>增加音量衰减模式的选择接口，可根据场景需要，选择音量根据距离线性衰减或非线形衰减。音量随距离增大进行非线性衰减更符合真实世界中声音的表现。 </li><li>支持在启用范围语音功能时，设置相互通话不受衰减影响的小队。</li></ul> | <ul><li>[SetAttenuationModel](191859#IRangeAudio-setattenuationmodel) </li><li>[SetNoAttenuationFlags](191859#IRangeAudio-setnoattenuationflags)</li></ul> |
| 空间音频 | 新增关闭本地用户朝向对本地用户发声效果影响的接口。 |  [DisableRemoteOrientation](191859#ISpatialAudio-disableremoteorientation) |
| 房间管理 | 新增创建房间失败回调。 |  [OnCreateRoomStateChangedEventHandler](191860#oncreateroomstatechangedeventhandler) |
| 消息 | 新增消息发送和接收回调。  | <ul><li> [OnUserMessageSendResultEventHandler](191860#onusermessagesendresulteventhandler) </li><li> [OnRoomMessageSendResultEventHandler](191860#onroommessagesendresulteventhandler) </li><li> [OnRoomMessageReceivedEventHandler](191860#onroommessagereceivedeventhandler) </li><li> [OnUserMessageReceivedEventHandler](191860#onusermessagereceivedeventhandler) </li></ul>|

### 升级必看

| 功能模块 | 说明 | 相关文档 |
| --- | --- | --- |
| <ul><li>  音频管理 </li><li> 自定义流处理 </li></ul>| 返回值由 `void` 变为 `int`。  | <ul><li>  [EnableAudioPropertiesReport](191859#IRTCVideo-enableaudiopropertiesreport) </li><li> [SetRemoteAudioPlaybackVolume](191859#IRTCVideo-setremoteaudioplaybackvolume) </li><li> [EnableAudioProcessor](191859#IRTCVideo-enableaudioprocessor) </li><li> [DisableAudioProcessor](191859#IRTCVideo-disableaudioprocessor)</li></ul> |


## 3.54
该版本于 2023 年 9 月 1 日发布。

### 升级必看

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70007)。
### 新增特性
1. 该版本 iOS、Windows、macOS、Linux 端新增音频编解码器插件、视频编解码器插件，iOS 端新增视频锐化插件。各端插件详情参看[按需集成插件](1108726)文档。

2. 支持获取房间 ID。参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 获取房间 ID | [`getRoomId`](70080#RTCRoom-getroomid) | [`getRoomId`](70086#ByteRTCRoom-getroomid) | [`getRoomId`](70092#ByteRTCRoom-getroomid) | [`getRoomId`](70095#IRTCRoom-getroomid) | [`getRoomId`](85516#IRTCRoom-getroomid) |

3. 在 Android，iOS 和 macOS 平台上，支持获取 C++ 层的 `IRTCVideo`。在一些场景下，获取 C++ 层 `IRTCVideo`，并通过其完成操作，相较于通过 Java / OC 封装层完成有显著更高的执行效率。典型的场景有：视频/音频帧自定义处理，音视频通话加密等。参看：

   | 功能简述 | Android | iOS | macOS |
   | --- | --- | --- | --- |
   | 获取 C++ 层 IRTCVideo 句柄 | [`getNativeHandle`](70080#RTCVideo-getnativehandle) | [`getNativeHandle`](70086#ByteRTCVideo-getnativehandle) | [`getNativeHandle`](70092#ByteRTCVideo-getnativehandle) |

4. 在 Android 和 iOS 平台上，在通过 RTC SDK 内部机制采集视频时，支持关闭人脸自动曝光功能和动态采集帧率功能。参看：

   | 功能简述 | Android | iOS |
   | --- | --- | --- |
   | 开启/关闭人脸自动曝光功能 | [`enableCameraAutoExposureFaceMode`](70080#RTCVideo-enablecameraautoexposurefacemode) | [`enableCameraAutoExposureFaceMode`](70086#ByteRTCVideo-enablecameraautoexposurefacemode) |
   | 设置动态采集帧率下限 | [`setCameraAdaptiveMinimumFrameRate`](70080#RTCVideo-setcameraadaptiveminimumframerate) | [`setCameraAdaptiveMinimumFrameRate`](70086#ByteRTCVideo-setcameraadaptiveminimumframerate) |

5. 支持设置本地日志级别、存储路径、可使用的最大缓存空间，参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux | Electron |
   | --- | --- | --- | --- | --- | --- | --- |
   | 配置本地日志参数 | [`setLogConfig`](70080#RTCVideo-setlogconfig) | [`setLogConfig`](70086#ByteRTCVideo-setlogconfig:) | [`setLogConfig`](70092#setlogconfig:) | [`setLogConfig`](70095#setlogconfig) | [`setLogConfig`](85516#setlogconfig) | [`setLogConfig`](85532#rtcvideo-static-setlogconfig) |


6. PC 端新增支持耳返功能。参看：

   | 功能简述 | Windows | macOS | Electron |
   | --- | --- | --- | --- |
   | 开启耳返功能 | [`setEarMonitorMode`](70095#IRTCVideo-setearmonitormode) | [`setEarMonitorMode:`](70092#ByteRTCVideo-setearmonitormode) | [`setEarMonitorMode`](85532#rtcvideo-setearmonitormode) |
   | 调节耳返音量 | [`setEarMonitorVolume`](70095#IRTCVideo-setearmonitorvolume) | [`setEarMonitorVolume:`](70092#ByteRTCVideo-setearmonitorvolume) | [`setEarMonitorVolume`](85532#rtcvideo-setearmonitorvolume) |

7. 调用 `enableAudioProcessor` 开启音频裸数据回调时，支持设置每个音频帧中的采样点数。参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux |
   | --- | --- | --- | --- | --- | --- |
   | 单次回调的音频帧中包含的采样点数 | [`samplesPerCall`](70083#AudioFormat-samplespercall) | [`samplesPerCall`](70088#ByteRTCAudioFormat-samplespercall) | [`samplesPerCall`](70089#ByteRTCAudioFormat-samplespercall) | [`samples_per_call`](70098#AudioFormat-samples_per_call) | [`samples_per_call`](85519#AudioFormat-samples_per_call) |

8. 调用 `setLocalVideoSink`/`setRemoteVideoSink` 进行自定义视频渲染时，视频帧格式新增 RGBA 格式的支持。参看：

   | 功能简述 | Android | iOS | macOS | Windows | Electron |
   | --- | --- | --- | --- | --- | --- |
   | 视频帧数据格式 | [`PixelFormat`](70083#pixelformat) | [`ByteRTCVideoSinkPixelFormat`](70088#bytertcvideosinkpixelformat) | [`ByteRTCVideoSinkPixelFormat`](70089#bytertcvideosinkpixelformat) | [`PixelFormat`](70098#pixelformat) | [`PixelFormat`](85535#pixelformat) |

9. 新增设置用户可见性结果回调，参看：

   | 功能简述 | Android | iOS | macOS | Windows | Linux | Electron |
   | --- | --- | --- | --- | --- | --- | --- |
   | 用户可见性回调 | [`onUserVisibilityChanged`](70081#IRTCRoomEventHandler-onuservisibilitychanged) | [`rtcRoom:onUserVisibilityChanged:errorCode:`](70087#ByteRTCRoomDelegate-rtcroom-onuservisibilitychanged-errorcode) | [`rtcRoom:onUserVisibilityChanged:errorCode:`](70093#ByteRTCRoomDelegate-rtcroom-onuservisibilitychanged-errorcode) | [`onUserVisibilityChanged`](70096#IRTCRoomEventHandler-onuservisibilitychanged) | [`onUserVisibilityChanged`](85517#IRTCRoomEventHandler-onuservisibilitychanged) | [`onUserVisibilityChanged`](85533#rtcroomcallback-onuservisibilitychanged) |

10. Linux 端支持对本地采集和接收到的远端音频进行自定义处理。参看：

   | 功能简述 | API/Callback |
   | --- | --- |
   | 注册自定义音频处理器 | [`registerAudioProcessor`](85516#IRTCVideo-registeraudioprocessor) |
   | 设置并开启指定的音频帧回调，进行自定义处理 | [`enableAudioProcessor`](85516#IRTCVideo-enableaudioprocessor) |
   | 关闭自定义音频处理 | [`disableAudioProcessor`](85516#IRTCVideo-disableaudioprocessor) |
   | 回调远端音频混音的音频帧地址，供自定义音频处理 | [`onProcessPlayBackAudioFrame`](85517#IAudioFrameProcessor-onprocessplaybackaudioframe) |
   | 回调单个远端用户的音频帧地址，供自定义音频处理 | [`onProcessRemoteUserAudioFrame`](85517#IAudioFrameProcessor-onprocessremoteuseraudioframe) |
   | 回调本地采集的音频帧地址，供自定义音频处理 | [`onProcessRecordAudioFrame`](85517#IAudioFrameProcessor-onprocessrecordaudioframe) |
   | 回调屏幕共享的音频帧地址，供自定义处理音频 | [`onProcessScreenAudioFrame`](85517#IAudioFrameProcessor-onprocessscreenaudioframe) |

11. Electron 端新增了视频插件管理器。你可以通过添加和注册插件，对视频进行自定义处理，例如第三方美颜插件。接口说明参看：

   | 功能简述 | API |
   | --- | --- |
   | 初始化插件管理器 | [`initializePluginManager`](85532#rtcvideo-initializepluginmanager) |
   | 释放插件管理器 | [`releasePluginManager`](85532#rtcvideo-releasepluginmanager) |
   | 注册插件 | [`registerPlugin`](85532#rtcvideo-registerplugin) |
   | 获取插件实例 | [`getPlugin`](85532#rtcvideo-getplugin) |
   | 卸载插件 | [`unregisterPlugin`](85532#rtcvideo-unregisterplugin) |

12. Electron 端新增了以下 PC 端已有的功能，包括视频自定义渲染、获取音频数据等。参看：

- 视频自定义渲染

   | 功能简述 | API |
   | --- | --- |
   | 获取本地视频流 | [`setLocalVideoSink`](85532#rtcvideo-setlocalvideosink) |
   | 停止获取本地视频流 | [`unsetLocalVideoSink`](85532#rtcvideo-unsetlocalvideosink) |
   | 获取远端视频流 | [`setRemoteVideoSink`](85532#rtcvideo-setremotevideosink) |
   | 停止获取远端视频流 | [`unsetRemoteVideoSink`](85532#rtcvideo-unsetremotevideosink) |
   | 设置渲染类型 | [`setRenderType`](85532#rtcvideo-static-setrendertype}) |

- 获取音频裸数据

   | 功能简述 | API/Callback |
   | --- | --- |
   | 设置并开启指定的音频数据帧回调 | [`enableAudioFrameCallback`](85532#rtcvideo-enableaudioframecallback) |
   | 关闭音频数据帧回调 | [`disableAudioFrameCallback`](85532#rtcvideo-disableaudioframecallback) |
   | 远端用户音频数据帧回调 | [`onRemoteUserAudioFrame`](85533#rtcvideocallback-onremoteuseraudioframe) |
   | 屏幕音频数据帧回调 | [`onRecordScreenAudioFrame`](85533#rtcvideocallback-onrecordscreenaudioframe) |

- 获取设备状态警告

   | 功能简述 | Callback |
   | --- | --- |
   | 音频设备警告回调 | [`onAudioDeviceWarning`](85533#rtcvideocallback-onaudiodevicewarning) |
   | 视频设备警告回调 | [`onVideoDeviceWarning`](85533#rtcvideocallback-onvideodevicewarning) |

- 在音频流中发送 SEI 后，感知黑帧发布状态

   | 功能简述 | Callback |
   | --- | --- |
   | 黑帧视频流发布状态回调 | [`onSEIStreamUpdate`](85533#rtcvideocallback-onseistreamupdate) |

- 支持外置声卡

   | 功能简述 | API |
   | --- | --- |
   | 启用匹配外置声卡的音频处理模式 | [`enableExternalSoundCard`](85532#rtcvideo-enableexternalsoundcard) |

- 音频录制设备测试

   | 功能简述 | API |
   | --- | --- |
   | 开始音频采集设备和音频播放设备测试 | [`startAudioDeviceRecordTest`](85532#rtcvideo-startaudiodevicerecordtest) |
   | 停止采集本地音频，并开始播放采集到的声音。 | [`stopAudioDeviceRecordAndPlayTest`](85532#rtcvideo-stopaudiodevicerecordandplaytest) |
   | 停止音频播放测试 | [`stopAudioDevicePlayTest`](85532#rtcvideo-stopaudiodeviceplaytest) |

- 支持音量闪避

   | 功能简述 | API |
   | --- | --- |
   | 开启/关闭音量闪避功能 | [`enablePlaybackDucking`](85532#rtcvideo-enableplaybackducking) |

- 用于 K 歌打分的获取数据方法

   | 功能简述 | API |
   | --- | --- |
   | 获取歌词句子总数 | [`getStandardPitchCount`](85532#rtcvideo-getstandardpitchcount) |
   | 获取标准音高数据 | [`getStandardPitchInfo`](85532#rtcvideo-getstandardpitchinfo) |


### 功能优化

1. 将混音类拆分为音效管理类和音乐管理类。在实现音效控制等功能时，API 调用更灵活。新增类参看下表，新旧接口对应详情参看各端[升级指南](70007)。

| 功能简述 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 音效管理类 | [`IAudioEffectPlayer`](70080#iaudioeffectplayer) | [`ByteRTCAudioEffectPlayer`](70086#bytertcaudioeffectplayer) | [`ByteRTCAudioEffectPlayer`](70092#bytertcaudioeffectplayer) | [`IAudioEffectPlayer`](70095#iaudioeffectplayer) | [`IAudioEffectPlayer`](85516#iaudioeffectplayer) | [`getAudioEffectPlayer`](85532#rtcvideo-getaudioeffectplayer) |
| 音乐管理类 | [`IMediaPlayer`](70080#imediaplayer) | [`ByteRTCMediaPlayer`](70086#bytertcmediaplayer) | [`ByteRTCMediaPlayer`](70092#bytertcmediaplayer) | [`IMediaPlayer`](70095#imediaplayer) | [`IMediaPlayer`](85516#imediaplayer) | [`getMediaPlayer`](85532#rtcvideo-getmediaplayer) |

2. 优化了枚举设备列表使用流程。音频设备枚举接口新增了等待超时机制，默认为 10 s。避免在设备任务繁重时，阻塞业务流程。当设备列表更新时，会收到回调通知，此时再调用以下接口获取新的设备列表。

| 功能简述 | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- |
| 枚举音频采集设备 | [`enumerateAudioCaptureDevices`](70092#ByteRTCAudioDeviceManager-enumerateaudiocapturedevices) | [`enumerateAudioCaptureDevices`](70095#IAudioDeviceManager-enumerateaudiocapturedevices) | [`enumerateAudioCaptureDevices`](85516#IAudioDeviceManager-enumerateaudiocapturedevices) | [`enumerateAudioCaptureDevices`](85532#rtcvideo-enumerateaudiocapturedevices) |
| 枚举音频播放设备 | [`enumerateAudioPlaybackDevices`](70092#ByteRTCAudioDeviceManager-enumerateaudioplaybackdevices) | [`enumerateAudioPlaybackDevices`](70095#IAudioDeviceManager-enumerateaudioplaybackdevices) | [`enumerateAudioPlaybackDevices`](85516#IAudioDeviceManager-enumerateaudioplaybackdevices) | [`enumerateAudioPlaybackDevices`](85532#rtcvideo-enumerateaudioplaybackdevices) |
| 设备列表通知枚举值 | `ByteRTCMediaDeviceListUpdated` | `kMediaDeviceListUpdated` | `ByteRTCMediaDeviceListUpdated` | `kMediaDeviceListUpdated` |

3. Linux NVIDIA Jetson 车机系统(平台)的外部视频源链路做了性能优化，支持在 pushExternalVideoFrame 时将视频帧设置为 NVIDIA Jetson 车机平台特有的 [DMA](85519#videoframetype) 格式，以减少视频帧转换过程中的 CPU 消耗，达到优化 CPU 占用的效果。

### 问题修复

1. 修复了 Electron 端已知问题：

- 公共流背景颜色无法修改。
- RemoteVideoConfig 中宽和高变量设置不正确。

## 3.52 (Unity)
该版本于 2023 年 9 月 8 日发布。

1. 自 3.52 版本起，正式提供包装原生平台 RTC SDK 接口的 Unity SDK，用于开发可以在 Android、iOS、Windows 端使用的实时音视频应用，开发环境要求参看[产品概述](66812)。

## 3.52
该版本于 2023 年 7 月 3 日发布。
此次升级包含的客户端系统有：Android、iOS、macOS、Windows、Linux、Electron。

### 重要说明

1. 应 Apple App Store 的要求，自此版本起，RTC SDK for iOS 不再支持 armv7 架构，兼容的最低版本为 iOS 11。
2. 自该版本起，RTC SDK 将逐步拆分为主库加功能插件的形式，以适应不同的业务场景和 App 体积缩减需求。详情参看[减小 App 体积](1108726)。
3. 该版本提供了用 Swift 开发的 iOS 快速开始 Demo 项目。参考[跑通 iOS Swift 快速开始](70128)。

### 升级必看

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看[升级指南](70007)。

### 新增特性

1. Linux 端支持使用 RTC SDK 内部采集方式进行屏幕音频采集，用于屏幕共享。 参看 [`startScreenAudioCapture`](85516#IRTCVideo-startscreenaudiocapture) 。
2. Android 和 iOS 端新增支持启用蜂窝网络辅助增强通信效果。参看：

| 平台 | Android | iOS |
| --- | --- | --- |
| 接口 | [`setCellularEnhancement`](70080#RTCVideo-setcellularenhancement) | [`setCellularEnhancement:`](70086#ByteRTCVideo-setcellularenhancement) |

3. Android 和 Linux 端支持关闭音频相关功能，在纯视频场景下减小音频功能对 CPU 的占用。要使用此功能，联系技术支持人员。
4. 新增支持设置本地代理。接口参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 接口 | [`setLocalProxy`](70080#RTCVideo-setlocalproxy) | [`setLocalProxy:`](70086#ByteRTCVideo-setlocalproxy) | [`setLocalProxy:`](70092#ByteRTCVideo-setlocalproxy) | [`setLocalProxy`](70095#IRTCVideo-setlocalproxy) | [`setLocalProxy`](85516#IRTCVideo-setlocalproxy) | [`setLocalProxy`](85532#rtcvideo-setlocalproxy) |
| 回调 | [`onLocalProxyStateChanged`](70081#IRTCVideoEventHandler-onlocalproxystatechanged) | [`rtcEngine:onLocalProxyStateChanged:withProxyState:withProxyError:`](70087#ByteRTCVideoDelegate-rtcengine-onlocalproxystatechanged-withproxystate-withproxyerror) | [`rtcEngine:onLocalProxyStateChanged:withProxyState:withProxyError:`](70093#ByteRTCVideoDelegate-rtcengine-onlocalproxystatechanged-withproxystate-withproxyerror) | [`onLocalProxyStateChanged`](70096#IRTCVideoEventHandler-onlocalproxystatechanged) | [`onLocalProxyStateChanged`](85517#IRTCVideoEventHandler-onlocalproxystatechanged) | [`onLocalProxyStateChanged`](85533#rtcvideocallback-onlocalproxystatechanged) |

5. 新增支持开启或关闭字幕，可对房间内说话人的语音进行识别，转成文字或者进行翻译。使用该功能前，你需要[开通机器翻译服务](https://www.volcengine.com/docs/4640/130262)并前往 [RTC 控制台](https://console.volcengine.com/rtc/cloudRTC?tab=subtitle)，在功能配置页面开启字幕功能。接口参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 接口 | - [`startSubtitle`](70080#RTCRoom-startsubtitle) | - [`startSubtitle:`](70086#ByteRTCRoom-startsubtitle) | - [`startSubtitle:`](70092#ByteRTCRoom-startsubtitle ) | - [`startSubtitle`](70095#IRTCRoom-startsubtitle) |- [`startSubtitle`](70095#IRTCRoom-startsubtitle) | - [`startSubtitle`](85516#rtcroom-startsubtitle) |\
|| - [`stopSubtitle`](70080#RTCRoom-stopsubtitle) | - [`stopSubtitle`](70086#ByteRTCRoom-stopsubtitle) | - [`stopSubtitle`](70092#ByteRTCRoom-stopsubtitle) | - [`stopSubtitle`](70095#IRTCRoom-stopsubtitle) |- [`stopSubtitle`](85516#IRTCRoom-stopsubtitle) | - [`stopSubtitle`](85532#rtcroom-stopsubtitle) |
| 回调 | - [`onSubtitleStateChanged`](70081#IRTCRoomEventHandler-onsubtitlestatechanged) | - [`rtcRoom:onSubtitleStateChanged:errorCode:errorMessage:`](70087#ByteRTCRoomDelegate-rtcroom-onsubtitlestatechanged-errorcode-errormessage) | - [`rtcRoom:onSubtitleStateChanged:errorCode:errorMessage:`](70093#ByteRTCRoomDelegate-rtcroom-onsubtitlestatechanged-errorcode-errormessage) | - [`onSubtitleStateChanged`](70096#IRTCRoomEventHandler-onsubtitlestatechanged) | - [`onSubtitleStateChanged`](85517#IRTCRoomEventHandler-onsubtitlestatechanged) | - [`onSubtitleStateChanged`](85533#rtcroomcallback-onsubtitlestatechanged) |\
|| - [`onSubtitleMessageReceived`](70081#IRTCRoomEventHandler-onsubtitlemessagereceived) | - [`rtcRoom:onSubtitleMessageReceived:`](70087#ByteRTCRoomDelegate-rtcroom-onsubtitlemessagereceived) | - [`rtcRoom:onSubtitleMessageReceived:`](70093#ByteRTCRoomDelegate-rtcroom-onsubtitlemessagereceived) | - [`onSubtitleMessageReceived`](70096#IRTCRoomEventHandler-onsubtitlemessagereceived) | - [`onSubtitleMessageReceived`](85517#IRTCRoomEventHandler-onsubtitlemessagereceived) | - [`onSubtitleMessageReceived`](85533#rtcroomcallback-onsubtitlemessagereceived) |

6. 新增设置房间附加消息 API，支持设置房间相关的业务属性。具体参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 接口 | [`setRoomExtraInfo`](70080#RTCRoom-setroomextrainfo) | [`setRoomExtraInfo:value:`](70086#ByteRTCRoom-setroomextrainfo-value) | [`setRoomExtraInfo:value:`](70092#ByteRTCRoom-setroomextrainfo-value) | [`setRoomExtraInfo`](70095#IRTCRoom-setroomextrainfo) | [`setRoomExtraInfo`](85516#IRTCRoom-setroomextrainfo) | [`setRoomExtraInfo`](85532#rtcroom-setroomextrainfo) |
| 回调 | - [`onSetRoomExtraInfoResult`](70081#IRTCRoomEventHandler-onsetroomextrainforesult) | - [`rtcRoom:onSetRoomExtraInfoResult:error`](70087#ByteRTCRoomDelegate-rtcroom-onsetroomextrainforesult-error) | - [`rtcRoom:onSetRoomExtraInfoResult:error`](70093#ByteRTCRoomDelegate-rtcroom-onsetroomextrainforesult-error) | - [`onSetRoomExtraInfoResult`](70096#IRTCRoomEventHandler-onsetroomextrainforesult) | - [`onSetRoomExtraInfoResult`](85517#IRTCRoomEventHandler-onsetroomextrainforesult) | - [`onSetRoomExtraInfoResult`](85533#rtcroomcallback-onsetroomextrainforesult) |\
|| 	 | - [`rtcRoom:onRoomExtraInfoUpdate:value:lastUpdateUserId:lastUpdateTimeMs:`](70087#ByteRTCRoomDelegate-rtcroom-onroomextrainfoupdate-value-lastupdateuserid-lastupdatetimems) | - [`rtcRoom:onRoomExtraInfoUpdate:value:lastUpdateUserId:lastUpdateTimeMs:`](70093#ByteRTCRoomDelegate-rtcroom-onroomextrainfoupdate-value-lastupdateuserid-lastupdatetimems) | 	 | 	 | - [`onRoomExtraInfoUpdate`](85533#rtcroomcallback-onroomextrainfoupdate) |\
|| - [`onRoomExtraInfoUpdate`](70081#IRTCRoomEventHandler-onroomextrainfoupdate) ||| - [`onRoomExtraInfoUpdate`](70096#IRTCRoomEventHandler-onroomextrainfoupdate) | - [`onRoomExtraInfoUpdate`](85517#IRTCRoomEventHandler-onroomextrainfoupdate) |

7. 新增支持会前/会中音频设备回声抑制功能检测。接口参看：

| 平台 | Android | iOS | macOS | Windows | Electron |\
|||||||\
|||||||
| --- | --- | --- | --- | --- | --- |
	| 接口 | - [`startHardwareEchoDetection`](70080#RTCVideo-starthardwareechodetection) | - [`startHardwareEchoDetection:`](70086#ByteRTCVideo-starthardwareechodetection) | - [`startHardwareEchoDetection:`](70092#ByteRTCVideo-starthardwareechodetection) | - [`startHardwareEchoDetection`](70095#IRTCVideo-starthardwareechodetection) | - [`startHardwareEchoDetection`](85532#rtcvideo-starthardwareechodetection) |\
|| - [`stopHardwareEchoDetection`](70080#RTCVideo-stophardwareechodetection) | - [`stopHardwareEchoDetection`](70086#ByteRTCVideo-stophardwareechodetection) | - [`stopHardwareEchoDetection`](70092#ByteRTCVideo-stophardwareechodetection) | - [`stopHardwareEchoDetection`](70095#IRTCVideo-stophardwareechodetection) | - [`stopHardwareEchoDetection`](85532#rtcvideo-stophardwareechodetection) |
| 回调 | [`onHardwareEchoDetectionResult`](70081#IRTCVideoEventHandler-onhardwareechodetectionresult) | [`rtcEngine:onHardwareEchoDetectionResult:`](70087#ByteRTCVideoDelegate-rtcengine-onhardwareechodetectionresult) | [`rtcEngine:onHardwareEchoDetectionResult:`](70093#ByteRTCVideoDelegate-rtcengine-onhardwareechodetectionresult) | [`onHardwareEchoDetectionResult`](70096#IRTCVideoEventHandler-onhardwareechodetectionresult) | [`onHardwareEchoDetectionResult`](85533#rtcvideocallback-onhardwareechodetectionresult) |

8. 新增通过数码变焦控制摄像头画面的能力，实现画面的上、下、左、右平移以及放大、缩小。接口参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |\
||||||||\
||||||||
| --- | --- | --- | --- | --- | --- | --- |
| 接口 | - [`setVideoDigitalZoomConfig`](70080#RTCVideo-setvideodigitalzoomconfig) | - [`setVideoDigitalZoomConfig:size:`](70086#ByteRTCVideo-setvideodigitalzoomconfig-size) | - [`setVideoDigitalZoomConfig:size:`](70092#ByteRTCVideo-setvideodigitalzoomconfig-size) | - [`setVideoDigitalZoomConfig`](70095#IRTCVideo-setvideodigitalzoomconfig) | - [`setVideoDigitalZoomConfig`](85516#IRTCVideo-setvideodigitalzoomconfig) | - [`setVideoDigitalZoomConfig`](85532#rtcvideo-setvideodigitalzoomconfig) |\
|| - [`setVideoDigitalZoomControl`](70080#RTCVideo-setvideodigitalzoomcontrol) | - [`setVideoDigitalZoomControl:`](70086#ByteRTCVideo-setvideodigitalzoomcontrol) | - [`setVideoDigitalZoomControl:`](70092#ByteRTCVideo-setvideodigitalzoomcontrol) | - [`setVideoDigitalZoomControl`](70095#IRTCVideo-setvideodigitalzoomcontrol) | - [`setVideoDigitalZoomControl`](85516#IRTCVideo-setvideodigitalzoomcontrol) | - [`setVideoDigitalZoomControl`](85532#rtcvideo-setvideodigitalzoomcontrol) |\
|| - [`startVideoDigitalZoomControl`](70080#RTCVideo-startvideodigitalzoomcontrol) | - [`startVideoDigitalZoomControl:`](70086#ByteRTCVideo-startvideodigitalzoomcontrol) | - [`startVideoDigitalZoomControl:`](70092#ByteRTCVideo-startvideodigitalzoomcontrol) | - [`startVideoDigitalZoomControl`](70095#IRTCVideo-startvideodigitalzoomcontrol) | - [`startVideoDigitalZoomControl`](85516#IRTCVideo-startvideodigitalzoomcontrol) | - [`startVideoDigitalZoomControl`](85532#rtcvideo-startvideodigitalzoomcontrol) |\
|| - [`stopVideoDigitalZoomControl`](70080#RTCVideo-stopvideodigitalzoomcontrol) | - [`stopVideoDigitalZoomControl`](70086#ByteRTCVideo-stopvideodigitalzoomcontrol) | - [`stopVideoDigitalZoomControl`](70092#ByteRTCVideo-stopvideodigitalzoomcontrol) | - [`stopVideoDigitalZoomControl`](70095#IRTCVideo-stopvideodigitalzoomcontrol) | - [`stopVideoDigitalZoomControl`](85516#IRTCVideo-stopvideodigitalzoomcontrol) | - [`stopVideoDigitalZoomControl`](85532#rtcvideo-stopvideodigitalzoomcontrol) |

9. PC 端支持将摄像头画面旋转为指定角度，包括 Windows、macOS 和 Electron。接口参看：

| 平台 | Windows | macOS | Electron |\
|||||\
|||||
| --- | --- | --- | --- |
| 接口 | [`setVideoCaptureRotation`](70095#IRTCVideo-setvideocapturerotation) | [`setVideoCaptureRotation:`](70092#ByteRTCVideo-setvideocapturerotation) | [`setVideoCaptureRotation`](85532#rtcvideo-setvideocapturerotation) |

10. 根据进房时选择的业务场景自动适配音频降噪算法，满足多种场景下不同的降噪需求。支持通话过程中手动设置音频降噪模式。接口参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| API | [`setAnsMode`](70080#RTCVideo-setansmode) | [`setAnsMode:`](70086#ByteRTCVideo-setansmode) | [`setAnsMode:`](70092#ByteRTCVideo-setansmode) | [`setAnsMode`](70095#IRTCVideo-setansmode) | [`setAnsMode`](85516#IRTCVideo-setansmode) | [`setAnsMode`](85532#rtcvideo-setansmode) |

11. 调节远端公共音频在本地播放的音量。接口参看：

| 平台 | Android | iOS | macOS | Windows | Linux | ELectron |\
||||||||\
||||||||
| --- | --- | --- | --- | --- | --- | --- |
| API | [`setPublicStreamAudioPlaybackVolume`](70080#RTCVideo-setpublicstreamaudioplaybackvolume) | [`setPublicStreamAudioPlaybackVolume:volume:`](70086#ByteRTCVideo-setpublicstreamaudioplaybackvolume-volume) | [`setPublicStreamAudioPlaybackVolume:volume:`](70092#ByteRTCVideo-setpublicstreamaudioplaybackvolume-volume) | [`setPublicStreamAudioPlaybackVolume`](70095#IRTCVideo-setpublicstreamaudioplaybackvolume) | [`setPublicStreamAudioPlaybackVolume`](85516#IRTCVideo-setpublicstreamaudioplaybackvolume) | [`setPublicStreamAudioPlaybackVolume`](85532#rtcvideo-setpublicstreamaudioplaybackvolume) |

12. 新增支持打开或关闭 AGC 功能。 接口参看：
| 平台 | macOS | Windows | Linux | ELectron |
| --- | --- | --- | --- | --- |
| API | [`enableAGC:`](70092#ByteRTCVideo-enableagc) | [`enableAGC`](70095#IRTCVideo-enableagc) | [`enableAGC`](85516#IRTCVideo-enableagc) | [`enableAGC`](85532#rtcvideo-enableagc) |

13. 该版本起，部分功能从 SDK 中拆分出来封装成独立插件。新增 [`onExtensionAccessError`](70081#IRTCVideoEventHandler-onextensionaccesserror) 回调，你可以通过该回调定位访问失败的插件，并判断是否需要集成。


### 功能优化

1. 优化千人会议体验，开启[音频选路](https://console.volcengine.com/rtc/cloudRTC?tab=roomMode)后，支持发布端设置不参与选路，适用于要求指定用户的发言能一直被收听到的场景，例如，有固定的主持人麦位。对于每个 appId，只区分是否开启音频选路功能，不再区分房间模式。详见[千人会议和音频选路](113547)。具体参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 接口 | [`setAudioSelectionConfig`](70081#setaudioselectionconfig) | [`setAudioSelectionConfig:`](70086#setaudioselectionconfig) | [`setAudioSelectionConfig:`](70092#setaudioselectionconfig) | [`setAudioSelectionConfig`](70095#setaudioselectionconfig) | [`setAudioSelectionConfig`](85516#setaudioselectionconfig) | [`setAudioSelectionConfig`](85532#rtcroom-setaudioselectionconfig) |

2. 公共流功能优化，SEI 相关的信息回调功能，支持与 vp8、单流转封装功能同时使用。订阅端可以感知发布状态变化。
3. 优化本地用户空间音频体验，支持本地用户设置自己和指定远端用户在空间音频坐标系中的位置和朝向，同时支持本地用户设置指定或全部远端用户不参与空间音频。具体参看：

| 平台 | Android | iOS | macOS | Windows | Electron |
| --- | --- | --- | --- | --- | --- |
| 接口 | - [`updateSelfPosition`](70080#ISpatialAudio-updateselfposition) | - [`updateSelfPosition:`](70086#ByteRTCSpatialAudio-updateselfposition) | - [`updateSelfPosition:`](70092#ByteRTCSpatialAudio-updateselfposition) | - [`updateSelfPosition`](70095#ISpatialAudio-updateselfposition) | - [`updateSelfPosition`](85532#rtcroom-updateselfposition) |\
|| 	 | - [`updateRemotePosition:positionInfo:`](70086#ByteRTCSpatialAudio-updateremoteposition-positioninfo) | - [`updateRemotePosition:positionInfo:`](70092#ByteRTCSpatialAudio-updateremoteposition-positioninfo) | - [`updateRemotePosition`](70095#ISpatialAudio-updateremoteposition) ||\
|| - [`updateRemotePosition`](70080#ISpatialAudio-updateremoteposition) | 	 | 	 | - [`removeRemotePosition`](70095#ISpatialAudio-removeremoteposition) | - [`updateRemotePosition`](85532#rtcroom-updateremoteposition) |\
|| 	 | - [`removeRemotePosition:`](70086#ByteRTCSpatialAudio-removeremoteposition) | - [`removeRemotePosition:`](70092#ByteRTCSpatialAudio-removeremoteposition) | 	 ||\
|| - [`removeRemotePosition`](70080#ISpatialAudio-removeremoteposition) | 	 | 	 | - [`removeAllRemotePosition`](70095#ISpatialAudio-removeallremoteposition) | - [`removeRemotePosition`](85532#rtcroom-removeremoteposition) |\
|| 	 | - [`removeAllRemotePosition`](70086#ByteRTCSpatialAudio-removeallremoteposition) | - [`removeAllRemotePosition`](70092#ByteRTCSpatialAudio-removeallremoteposition) |||\
|| - [`removeAllRemotePosition`](70080#ISpatialAudio-removeallremoteposition) |||| - [`removeAllRemotePosition`](85532#rtcroom-removeallremoteposition) |

4. 在客户端进行视频编码时，优化了自适应码率的策略。针对内容自适应，在复杂场景下更清晰，在简单场景下更省带宽。要使用此功能，请联系技术支持人员。


## 3.51
Flutter 插件升级 RTC SDK 至 3.51 版本，于 2023 年 7 月 3 日发布。详情参看[升级指南](https://pub.dev/packages/volc_engine_rtc/changelog)。

## 3.50
该版本于 2023 年 5 月 8 日发布，包含的客户端系统有：Android、iOS、macOS、Windows、Linux、Electron。若无特殊说明，本次发版说明中提及的变动适用于上述所有平台。

### 重要说明
1. 该版本首次发布可原生支持搭载 ARM 架构芯片设备应用开发的 macOS SDK，如有需要请至[资源获取](75707#下载-sdk)下载。
2. 该版本对部分 API 的命名、参数等进行了统一和规范。请根据[升级指南](70007)按需修改工程文件。

### 新增特性
1. MediaDeviceWarning 新增[啸叫检测警告](70083#MediaDeviceWarning-media_device_warning_capture_detect_howling)。以下情形将触发该警告：
	- 不支持啸叫抑制的房间模式下，检测到啸叫；
	- 支持啸叫抑制的房间模式下，检测到未被抑制的啸叫。
2. 适配 iPadOS 16 和 macOS Ventura 多任务台前调度（Stage Manager）功能。丰富了可以通过  [`onVideoDeviceStateChanged`](70087#ByteRTCVideoDelegate-rtcengine-onvideodevicestatechanged-device_type-device_state-device_error)  回调感知的系统摄像头状态信息，详见 [通话打断和恢复](111590)。

| 平台 | iOS |
| --- | --- |
| 枚举值 | [`ByteRTCMediaDeviceError`](70088#bytertcmediadeviceerror) ：<ul><li>`ByteRTCMediaDeviceErrorNotAvailableInBackground`</li></ul><ul><li>`ByteRTCMediaDeviceErrorVideoInUseByAnotherClient`</li></ul><ul><li>`ByteRTCMediaDeviceErrorNotAvailableWithMultipleForegroundApps`</li></ul><ul><li>`ByteRTCMediaDeviceErrorNotAvailableDueToSystemPressure`</li></ul>|
3. 支持在 CDN 推流时，将一些窗口设定为圆角矩形。参看 [`setCornerRadius`](70083#Region-setcornerradius)。
4. 支持在关闭摄像头后，上传静态图片填充本地推送的视频流。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| API | [`setDummyCaptureImagePath`](70080#RTCVideo-setdummycaptureimagepath) | [`setDummyCaptureImagePath:`](70086#ByteRTCVideo-setdummycaptureimagepath) |[`setDummyCaptureImagePath:`](70092#ByteRTCVideo-setdummycaptureimagepath) | [`setDummyCaptureImagePath`](70095#IRTCVideo-setdummycaptureimagepath) | [`setDummyCaptureImagePath`](85516#IRTCVideo-setdummycaptureimagepath) | [`setDummyCaptureImagePath`](85532#setdummycaptureimagepath) |

5. PC 端支持在屏幕共享时，共享双声道的屏幕音频流。具体参看 API：

| 平台 | macOS | Windows | Electron |
| --- | --- | --- | --- |
| API |[`setScreenAudioChannel`](70092#ByteRTCVideo-setscreenaudiochannel) | [`setScreenAudioChannel`](70095#IRTCVideo-setscreenaudiochannel) | [`setScreenAudioChannel`](85532#setscreenaudiochannel) |

6. 对于已支持硬件耳返的 Android 机型，当你开启耳返功能时，会默认使用硬件耳返。
7. 在纯媒体音频场景下，支持切换 iOS 设备与耳机之间的蓝牙传输协议。参看 [`setBluetoothMode:`](70086#ByteRTCVideo-setbluetoothmode)。
8. 多房间场景下，支持调节某个远端房间内的所有用户的音量。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| API | [`setRemoteRoomAudioPlaybackVolume`](70080#RTCRoom-setremoteroomaudioplaybackvolume) | [`setRemoteRoomAudioPlaybackVolume:`](70086#ByteRTCRoom-setremoteroomaudioplaybackvolume) | [`setRemoteRoomAudioPlaybackVolume:`](70092#ByteRTCRoom-setremoteroomaudioplaybackvolume) | [`setRemoteRoomAudioPlaybackVolume`](70095#IRTCRoom-setremoteroomaudioplaybackvolume) | [`setRemoteRoomAudioPlaybackVolume`](85516#IRTCRoom-setremoteroomaudioplaybackvolume) | [`setRemoteRoomAudioPlaybackVolume`](85532#setremoteroomaudioplaybackvolume) |

9. 全链路支持 VP8 编码。当你有大量用户在 Web 端使用 RTC 时，请联系技术支持人员，打开 VP8 编码的选项，使 Web 端用户获得最佳的兼容性体验。
10. macOS 和 Windows 平台新增接口 [`setOriginalScreenVideoInfo`](70095#IRTCVideo-setoriginalscreenvideoinfo)，可在自定义采集时将采集能力边界告知 RTC，RTC 会据此做出最佳采集策略推荐，并通过 [`onExternalScreenFrameUpdate`](70096#IRTCVideoEventHandler-onexternalscreenframeupdate) 回调告知用户调整采集参数。
11. 客户端合流支持设置回调的视频帧格式，其中安卓支持回调纹理格式的视频，可以解决客户端合流在某些安卓设备上的性能问题。具体参看：

| 平台 | Android | iOS | macOS | Windows |
| --- | --- | --- | --- | --- |
| Keytype | [`TranscoderClientMixVideoFormat`](70083#transcoderclientmixvideoformat) | [`ByteRTCClientMixVideoFormat`](70088#bytertcclientmixvideoformat) | [`ByteRTCClientMixVideoFormat`](70089#bytertcclientmixvideoformat) | [`TranscoderClientMixVideoFormat`](70098#transcoderclientmixvideoformat) |

12. 支持在启用范围语音功能时，设置相互通话不受衰减影响的小队。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Electron |
| --- | --- | --- | --- | --- | --- |
| API | [`setNoAttenuationFlags`](70080#IRangeAudio-setnoattenuationflags) | [`setNoAttenuationFlags:`](70086#ByteRTCRangeAudio-setnoattenuationflags) | [`setNoAttenuationFlags:`](70092#ByteRTCRangeAudio-setnoattenuationflags) | [`setNoAttenuationFlags`](70095#IRangeAudio-setnoattenuationflags) |[`setNoAttenuationFlags`](85532#setnoattenuationflags) |

13. Windows、Linux、Electron 新增支持屏幕音频首帧发送和播放状态的回调。具体参看：

| 平台 | Windows | Linux | Electron |
| --- | --- | --- | --- |
| 屏幕音频首帧发送状态回调 | [`onScreenAudioFrameSendStateChanged`](70096#IRTCVideoEventHandler-onscreenaudioframesendstatechanged) | [`onScreenAudioFrameSendStateChanged`](85517#IRTCVideoEventHandler-onscreenaudioframesendstatechanged) | [`onScreenAudioFrameSendStateChanged`](85533#onscreenaudioframesendstatechanged) |
| 屏幕音频首帧播放状态回调 | [`onScreenAudioFramePlayStateChanged`](70096#IRTCVideoEventHandler-onscreenaudioframeplaystatechanged) | [`onScreenAudioFramePlayStateChanged`](85517#IRTCVideoEventHandler-onscreenaudioframeplaystatechanged) | [`onScreenAudioFramePlayStateChanged`](85533#onscreenaudioframeplaystatechanged) |

14. 在 Android，iOS，macOS，Windows 端上，支持检测背景声中的音乐，并保护音乐的音质。要使用此功能，请联系技术支持人员开启。
15. 新增 Token 的发布/订阅权限即将过期的回调，用于提示用户及时更新 Token 相关权限，以保证正常的音视频通话。该功能默认关闭，如有需要开启请联系技术支持开启。具体参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 发布权限 Token 即将过期的回调 | [`onPublishPrivilegeTokenWillExpire`](70081#IRTCRoomEventHandler-onpublishprivilegetokenwillexpire) | [`onPublishPrivilegeTokenWillExpire:`](70087#ByteRTCRoomDelegate-onpublishprivilegetokenwillexpire:) | [`onPublishPrivilegeTokenWillExpire:`](70093#ByteRTCRoomDelegate-onpublishprivilegetokenwillexpire:) | [`onPublishPrivilegeTokenWillExpire`](70096#IRTCRoomEventHandler-onpublishprivilegetokenwillexpire) | [`onPublishPrivilegeTokenWillExpire`](85517#IRTCRoomEventHandler-onpublishprivilegetokenwillexpire) | [`onPublishPrivilegeTokenWillExpire`](85533#onpublishprivilegetokenwillexpire) |
| 订阅权限 Token 即将过期的回调 | [`onSubscribePrivilegeTokenWillExpire`](70081#IRTCRoomEventHandler-onsubscribeprivilegetokenwillexpire) | [`onSubscribePrivilegeTokenWillExpire:`](70087#ByteRTCRoomDelegate-onsubscribeprivilegetokenwillexpire:) | [`onSubscribePrivilegeTokenWillExpire:`](70093#ByteRTCRoomDelegate-onsubscribeprivilegetokenwillexpire:) | [`onSubscribePrivilegeTokenWillExpire`](70096#IRTCRoomEventHandler-onsubscribeprivilegetokenwillexpire) | [`onSubscribePrivilegeTokenWillExpire`](85517#IRTCRoomEventHandler-onsubscribeprivilegetokenwillexpire) | [`onSubscribePrivilegeTokenWillExpire`](85533#onsubscribeprivilegetokenwillexpire) |

16. 新增多种混响音效：录音棚，虚拟立体声，空旷，3D 人声等。关于现在支持的所有混响音效，参看 [`VoiceReverbType`](70083#voicereverbtype)。
17. 新增录制本地通话的功能。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| API | [`startAudioRecording`](70080#RTCVideo-startaudiorecording) | [`startAudioRecording`](70086#ByteRTCVideo-startAudioRecording) | [`startAudioRecording`](70092#ByteRTCVideo-startAudioRecording) | [`startAudioRecording`](70095#IRTCVideo-startaudiorecording) | [`startAudioRecording`](85516#IRTCVideo-startaudiorecording) | [`startAudioRecording`](85532#startaudiorecording) |

18. 新增对本地采集的音频添加音量均衡效果和混响参数。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Electron |
| --- | --- | --- | --- | --- | --- |
| 添加音量均衡效果 | [`setLocalVoiceEqualization`](70080#RTCVideo-setlocalvoiceequalization) | [`setLocalVoiceEqualization`](70086#ByteRTCVideo-setLocalVoiceEqualization) | [`setLocalVoiceEqualization`](70092#ByteRTCVideo-setLocalVoiceEqualization) | [`setLocalVoiceEqualization`](70095#IRTCVideo-setLocalVoiceEqualization) | [`setLocalVoiceEqualization`](85532#setLocalVoiceEqualization) |
| 添加混响参数 | [`setLocalVoiceReverbParam`](70080#RTCVideo-setlocalvoicereverbparam) | [`setLocalVoiceReverbParam`](70086#ByteRTCVideo-setlocalvoicereverbparam) | [`setLocalVoiceReverbParam`](70092#ByteRTCVideo-setlocalvoicereverbparam) | [`setLocalVoiceReverbParam`](70095#IRTCVideo-setlocalvoicereverbparam) | [`setLocalVoiceReverbParam`](85532#setlocalvoicereverbparam) |
| 启用混响参数 | [`enableLocalVoiceReverb`](70080#RTCVideo-enablelocalvoicereverb) | [`enableLocalVoiceReverb`](70086#ByteRTCVideo-enablelocalvoicereverb) | [`enableLocalVoiceReverb`](70092#ByteRTCVideo-enablelocalvoicereverb) | [`enableLocalVoiceReverb`](70095#IRTCVideo-enablelocalvoicereverb) | [`enableLocalVoiceReverb`](85532#enablelocalvoicereverb) |

19. 新增停止、暂停、恢复播放所有音频文件及混音的功能。具体参看 API：

| 平台 | Android | iOS | macOS | Windows | Electron |
| --- | --- | --- | --- | --- | --- |
| 停止播放所有音频文件及混音 | [`stopAllAudioMixing`](70080#IAudioMixingManager-stopallaudiomixing) | [`stopAllAudioMixing`](70086#ByteRTCAudioMixingManager-stopallaudiomixing) | [`stopAllAudioMixing`](70092#ByteRTCAudioMixingManager-stopallaudiomixing) | [`stopAllAudioMixing`](70095#IAudioMixingManager-stopallaudiomixing) | [`stopAllAudioMixing`](85532#stopallaudiomixing) |
| 暂停播放所有音频文件及混音 | [`pauseAllAudioMixing`](70080#IAudioMixingManager-pauseallaudiomixing) | [`pauseAllAudioMixing`](70086#ByteRTCAudioMixingManager-pauseallaudiomixing) | [`pauseAllAudioMixing`](70092#ByteRTCAudioMixingManager-pauseallaudiomixing) | [`pauseAllAudioMixing`](70095#IAudioMixingManager-pauseallaudiomixing) | [`pauseAllAudioMixing`](85532#pauseallaudiomixing) |
| 恢复播放所有音频文件及混音 | [`resumeAllAudioMixing`](70080#IAudioMixingManager-resumeallaudiomixing) | [`resumeAllAudioMixing`](70086#ByteRTCAudioMixingManager-resumeallaudiomixing) | [`resumeAllAudioMixing`](70092#ByteRTCAudioMixingManager-resumeallaudiomixing) | [`resumeAllAudioMixing`](70095#IAudioMixingManager-resumeallaudiomixing) | [`resumeAllAudioMixing`](85532#resumeallaudiomixing) |

20. SDK for Linux 另新增以下功能：
	- 支持屏幕共享，参看 [桌面端屏幕共享](70144)。
	- 支持使用音频文件进行混音，参看 [`startAudioMixing`](85516#IAudioMixingManager-startaudiomixing)。
	- 支持网络状态监控，参看 [`onConnectionStateChanged`](85517#IRTCVideoEventHandler-onconnectionstatechanged) 和 [`onNetworkTypeChanged`](85517#IRTCVideoEventHandler-onnetworktypechanged)。
	- 支持通过回调 [`onSysStats`](85517#IRTCVideoEventHandler-onsysstats) 获取 CPU 和内存信息。
	- 支持视频特效，参看 [`getVideoEffectInterface`](85516#IRTCVideo-getvideoeffectinterface)。
### 功能优化

1. 优化实时信令线程与组件，降低消息到达时延。
2. 3D 空间音频立体声效果升级，支持球面立体声渲染。能模拟头部球面区域立体声场，音频将随虚拟形象的头部位置朝向，与声源的距离，上下高度等渲染出不同的效果，使用户感受到更为接近真实世界的听感。
3. 提升合流转推功能易用性，统一 RTC SDK 与 OpenAPI 的合流转推音视频参数限制范围及默认值，并在 SDK 层面进行参数校验。优化部分合流转推参数不合法时的处理方式，实现自动修正为默认值。具体参看：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| Keytype | [`LiveTranscoding`](70083#livetranscoding) | [`ByteRTCLiveTranscoding`](70088#bytertclivetranscoding) | [`ByteRTCLiveTranscoding`](70089#bytertclivetranscoding) | [`ITranscoderParam`](70098#itranscoderparam) | [`ITranscoderParam`](85519#itranscoderparam) | [`ITranscoderParam`](85519#itranscoderparam) |

4. 在使用音频信息提示获取本地和远端的音量信息时，支持开启音量平滑功能。参看传入参数中新增的 `smooth` 参数和 `audio_report_mode` 参数：

| 平台 | Android | iOS | macOS | Windows | Linux | Electron |
| --- | --- | --- | --- | --- | --- | --- |
| 参数 | [`smooth`](70083#AudioPropertiesConfig-smooth) | [`smooth`](70088#ByteRTCAudioPropertiesConfig-smooth) | [`smooth`](70089#ByteRTCAudioPropertiesConfig-smooth) | [`smooth`](70098#AudioPropertiesConfig-smooth) | [`smooth`](85519#AudioPropertiesConfig-smooth) | [`smooth`](85519#AudioPropertiesConfig) |

## 3.45.7
该版本于 2023 年 3 月 22 日发布，包含的客户端系统有：Android、iOS、macOS、Windows、Linux。
此次升级优化了移动端设备性能不足时的用户音视频体验。如有需要，请联系技术支持开启。

## 3.45.6
该版本于 2023 年 3 月 1 日发布。
此次升级包含的客户端系统有：Android、iOS、macOS、Windows、Linux。若无特殊说明，本次发版说明中提及的变动适用于上述所有平台。
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 自定义流处理
- 音频管理
- 高级功能

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。
### 新增特性

1. 新增回调获取屏幕共享的音频帧地址，供自定义音频处理。具体参见：

| 平台 | Android | iOS | macOS | Windows |
| --- | --- | --- | --- | --- |
| 回调 | [`onProcessScreenAudioFrame`](70081#IAudioFrameProcessor-onprocessscreenaudioframe) | [`onProcessScreenAudioFrame:`](70087#ByteRTCAudioFrameProcessor-onprocessscreenaudioframe) |[`onProcessScreenAudioFrame:`](70093#ByteRTCAudioFrameProcessor-onprocessscreenaudioframe) | [`onProcessScreenAudioFrame`](70096#IAudioFrameProcessor-onprocessscreenaudioframe) |

2. 桌面端新增回调通知麦克风和扬声器的音量调整和静音状态变化。具体参见：

| 平台 | macOS | Windows | Linux |
| --- | --- | --- | --- |
| 回调 | [`rtcEngine:onAudioDeviceVolumeChanged:volume:muted:`](70093#ByteRTCVideoDelegate-rtcengine-onaudiodevicevolumechanged-volume-muted) | [`onAudioDeviceVolumeChanged`](70096#IRTCVideoEventHandler-onaudiodevicevolumechanged) | [`onAudioDeviceVolumeChanged`](85517#IRTCVideoEventHandler-onaudiodevicevolumechanged) |

3. 支持在客户端截取本地/远端视频截图。参看：

| 平台 | Android | iOS | macOS | Windows |
| --- | --- | --- | --- | --- |
| 截取本地视频图片 | [`takeLocalSnapshot`](70080#RTCVideo-takeLocalSnapshot) | [`takeLocalSnapshot:callback:`](70086#ByteRTCVideo#takeLocalSnapshot-callback) | [`takeLocalSnapshot:callback:`](70092#ByteRTCVideo#takeLocalSnapshot-callback) | [`takeLocalSnapshot`](70095#IRTCVideo-takeLocalSnapshot) |
| 截取远端视频图片 | [`takeRemoteSnapshot`](70080#RTCVideo-takeRemoteSnapshot) |[`takeRemoteSnapshot:callback:`](70086#ByteRTCVideo#takeRemoteSnapshot-callback) | [`takeRemoteSnapshot:callback:`](70092#ByteRTCVideo#takeRemoteSnapshot-callback) | [`takeRemoteSnapshot`](70095#IRTCVideo-takeRemoteSnapshot) |

### 功能优化

1. 丰富通过网络质量回调获取到的网络状态，支持获取网络断开状态。

| 平台 | Android | iOS | macOS | Windows | Linux |
| --- | --- | --- | --- | --- | --- |
| 类型 | [`NetworkQuality`](70083#networkquality) 增加 `NETWORK_QUALITY_DOWN = 6` | [`ByteRTCNetworkQuality`](70088#bytertcnetworkquality) 增加 `ByteRTCNetworkQualityDown` | [`ByteRTCNetworkQuality`](70089#bytertcnetworkquality) 增加 `ByteRTCNetworkQualityDown` | [`NetworkQuality`](70098#networkquality) 增加 `kNetworkQualityDown` | [`NetworkQuality`](85519#networkquality) 增加 `kNetworkQualityDown` |

2. 设备成功连接蓝牙耳机但 sco 连接开启失败后，设备音频播放模式将由通话模式切换为媒体模式，即使用蓝牙耳机播放声音，优化听感体验。
3. Android Target 31 API 环境下，语音通话中设备连接蓝牙时，无需向系统申请蓝牙权限，实现无感连接。

## 3.45.4

该版本于 2023 年 1 月 17 日发布。
此次升级包含的客户端系统有：Android、iOS、macOS、Windows、Linux（版本号为 3.45.2）

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 音频管理
- 视频管理
- CDN 推流
- 自定义流处理
- 混音
- 音视频处理
- 音视频传输

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。
如果开发目标平台为 Android 12(targetSdkVersion>=31) 及以上版本的应用，请先参考 [OpenCL 库 Android 12 适配说明](1155036#opencl-%E5%BA%93-android-12-%E9%80%82%E9%85%8D%E8%AF%B4%E6%98%8E)。

### 新增特性

1. 在调用 [enableAudioPropertiesReport](70080#RTCVideo-enableaudiopropertiesreport)，获取本地音频信息时，支持设置获取本地混音音频信息。
2. 支持单流直播功能。你可以使用纯 RTC 的能力，实现更低延迟，更低成本的直播功能。参看：

| 平台 | Android | iOS/macOS | Windows |
| --- | --- | --- | --- |
| API | [`startPushSingleStreamToCDN`](70080#RTCVideo-startpushsinglestreamtocdn) | [`startPushSingleStreamToCDN:singleStream:observer:`](70086#ByteRTCVideo-startpushsinglestreamtocdn-singlestream-observer) | [`startPushSingleStreamToCDN`](70095#IRTCVideo-startpushsinglestreamtocdn) |
3. 在移动端使用软件耳返功能时，包含混响变声的效果。另外，支持通过回调获取并自定义处理软件耳返的音频帧，具体参看：

| 平台 | Android | iOS |
| --- | --- | --- |
| 回调 | [`onProcessEarMonitorAudioFrame`](70081#IAudioFrameProcessor-onprocessearmonitoraudioframe) | [`onProcessEarMonitorAudioFrame:`](70087#ByteRTCAudioFrameProcessor-onprocessearmonitoraudioframe) |
4. 支持获取混音音频文件的实际播放时长，即歌曲不受停止、跳转、倍速、卡顿影响的播放时长。参看：

| 平台 | <div style="width: 180pt">Android</div>  | <div style="width: 180pt">iOS/macOS</div>  | <div style="width: 180pt">Windows</div>  |
| --- | --- | --- | --- |
| API | [`getAudioMixingPlaybackDuration`](70080#IAudioMixingManager-getaudiomixingplaybackduration) | [`getAudioMixingPlaybackDuration:`](70086#ByteRTCAudioMixingManager-getaudiomixingplaybackduration) | [`getAudioMixingPlaybackDuration`](70095#IAudioMixingManager-getaudiomixingplaybackduration) |
5. 各端支持通过 RTC SDK 中的接口调用 SAMI 能力实现 K 歌打分。参看：

| 平台 | Android | iOS/macOS | Windows |
| --- | --- | --- | --- |
| API | [`getSingScoringManager`](70080#RTCVideo-getsingscoringmanager) | [`getSingScoringManager`](70086#ByteRTCVideo-getsingscoringmanager) | [`getSingScoringManager`](70095#IRTCVideo-getsingscoringmanager) |
6. 新增接口支持订阅所有用户和取消订阅所有用户。对上麦人数固定的场景中，可以使用以下接口快速实现麦位切换。参看：

| 平台 | <div style="width: 140pt">Android</div> | <div style="width: 250pt">iOS/macOS</div> | <div style="width: 140pt">Windows/Linux</div> |
| --- | --- | --- | --- |
| API | - [`subscribeAllStreams`](70080#RTCRoom-subscribeallstreams) | - [`subscribeAllStreamsWithMeidaStreamType:`](70086#ByteRTCRoom-subscribeallstreamswithmeidastreamtype) | - [`subscribeAllStreams`](70095#IRTCRoom-subscribeallstreams) |\
|| - [`unsubscribeAllStreams`](70080#RTCRoom-unsubscribeallstreams) | - [`unsubscribeAllStreamsWithMeidaStreamType`](70086#ByteRTCRoom-unsubscribeallstreamswithmeidastreamtype) | - [`unsubscribeAllStreams`](70095#IRTCRoom-unsubscribeallstreams) |
7. 移动端支持通过一次接口调用，统一设置全局混音文件音量。参看：

| 平台 | Android | iOS |
| --- | --- | --- |
| API | [`setAllAudioMixingVolume`](70080#IAudioMixingManager-setallaudiomixingvolume) | [`setAllAudioMixingVolume:`](70086#ByteRTCAudioMixingManager-setallaudiomixingvolume-type) |

### 功能优化

1. iOS 端混音支持 iTunes 本地音乐文件。
2. Android 端启用耳返时，自适应启用硬件耳返。参看 [`setEarMonitorMode`](70080#RTCVideo-setearmonitormode)。

### 问题修复

1. 修复了 VP8 编码时，iOS 屏幕共享相关的问题。
2. 修复了部分安卓机型回声消除失效问题。
## 3.45.2

该版本于 2022 年 12 月 9 日发布。
此次升级包含的客户端系统有：Android、iOS、macOS、Windows

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 音视频处理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

## 3.45.1

该版本于 2022 年 12 月 9 日发布。
此次升级包含的客户端系统有：Linux、Flutter、Electron

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 音视频处理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

### 新增特性

1. Linux 平台 SDK 新增视频水印功能。你可以调用 [setVideoWatermark](85516#IRTCVideo-setvideowatermark) 为指定的视频流添加水印，调用 [clearVideoWatermark](85516#IRTCVideo-clearvideowatermark) 移除水印。

## 3.44

该版本于 2022 年 8 月 5 日发布。

### 重要说明

1. 自 3.44 版本起，正式提供 RTC SDK for macOS，提供原生 Objective-C 接口，此 SDK 可以在 macOS 10.10+ 版本集成使用。
2. 自 3.44 版本起，正式提供 RTC SDK for Linux(x86)。此 SDK 可以在支持 glibc 2.27+ 的 Linux 版本配合 x86 处理器架构的硬件上使用。
3. 自 3.44 版本起，正式提供包装原生平台 RTC SDK 接口的 Flutter 插件，用于进行跨平台开发时，接入实时音视频功能。此插件可以在 Android API Level 19+ 或 iOS 9.0+ 版本使用。
4. 自 3.44 版本起，正式提供包装原生平台 RTC SDK 接口的 Electron SDK，用于开发可以在 macOS 和 Windows 端上使用的实时音视频 Electron 应用。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 消息
- 自定义流处理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

### 新增特性

1. 支持移动端在自定义视频处理和编码环节之前，将视频帧中的旋转角处理为 0，并在整个 RTC 链路中传递调整后的视频帧。适用于单流转推、使用视频特效贴纸或自定义视频前处理等场景，具体参看：

| |Android |iOS |
|---|---|---|
|设置视频帧朝向 |[setVideoOrientation](70080#RTCVideo-setvideoorientation) |[setVideoOrientation:](70086#ByteRTCVideo-setvideoorientation) |

### 问题修复

1. 调用 joinRoom 加入房间时，由于 UserID、Token 等参数错误导致进房失败后，可以直接再次调用 joinRoom 重新发起进房，无需先调用 leaveRoom 离开房间后再进房。

## 3.43

该版本于 2022 年 7 月 21 日发布。

### 升级必看

为提升接口易用性，该版本引入了 SDK 整体架构的重大变更，具体表现为去除了引擎类和房间类中的重复 API，并根据 API 的作用域明确划分所属类，接口变更详情参看：[升级指南](70423)。
基于旧架构的 API 将会在本版本后停止更新，因此强烈建议升级到新架构版本。如果你依旧需要使用旧架构，[历史版本 API 文档归档](70068)中提供了 3.43.1 版本旧架构下的参考文档。
各个平台上另有 API/回调/数据结构发生了变化。变化范围包括：
- CDN 推流
- 高级功能

### 新增特性

1. 扩展了转推直播配置参数结构体，支持图片合流。可以通过`startLiveTranscoding`和`updateLiveTranscoding`进行设置，具体参数结构参看：
| |Android |iOS |Windows |
|---|---|---|---|
|转推直播配置参数 |[LiveTranscoding](70083#livetranscoding) |[ByteRTCLiveTranscoding](70088#bytertclivetranscoding) |[ITranscoderParam](70098#itranscoderparam) |
|单个图片或视频流在合流中的布局信息 |[Region](70083#region) |[ByteRTCVideoCompositingRegion](70088#bytertcvideocompositingregion) |[TranscoderLayoutRegion](70098#transcoderlayoutregion) |

### 功能优化

1. 范围语音功能增加了音量衰减模式的选择接口，可根据场景需要，选择音量根据距离线性衰减或非线形衰减。音量随距离增大进行非线性衰减更符合真实世界中声音的表现。具体参看：

| |Android |iOS |Windows |
|---|---|---|---|
|设置范围语音的音量衰减模式 |[setAttenuationModel](70080#IRangeAudio-setattenuationmodel) |[setAttenuationModel:coefficient:](70086#ByteRTCRangeAudio-setattenuationmodel-coefficient) |[setAttenuationModel](70095#IRangeAudio-setattenuationmodel) |

## 3.42

该版本于 2022 年 7 月 8 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 音视频传输：明确 `LocalVideoStats` 和 `RtcRoomStats` 中部分成员变量的含义
- 音视频处理
- 网络管理
- 消息
- 多房间

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。
**注意：此版本不提供多房间能力，如果需要使用多房间功能，请使用 3.41 版本。**

### 新增特性

1. 当使用外置声卡进行音频采集时，支持设置对应的音频处理模式，以获得最佳的音质。具体参看：

| | Android | iOS | Windows |
|---|---|---|---|
| 启用匹配外置声卡的音频处理模式 | [enableExternalSoundCard](70080#RTCEngine-enableexternalsoundcard) | [enableExternalSoundCard:](70086#ByteRTCEngineKit-enableexternalsoundcard) | [enableExternalSoundCard](70095#IRtcEngine-enableexternalsoundcard) |

2. 向所有用户提供包括美白、磨皮、锐化的基础美颜功能，无需额外鉴权。基础美颜接口不能与高级视频特效接口共用，如已购买高级视频特效，建议调用原接口使用高级特效、贴纸功能等。具体参看：

| | Android | iOS | Windows |
|---|---|---|---|
| 开启/关闭基础美颜 | [enableEffectBeauty](70080#RTCEngine-enableeffectbeauty) | [enableEffectBeauty:](70086#ByteRTCEngineKit-enableeffectbeauty) | [enableEffectBeauty](70095#IRtcEngine-enableeffectbeauty) |
|调整基础美颜强度 | [setBeautyIntensity](70080#RTCEngine-setbeautyintensity) | [setBeautyIntensity:withIntensity:](70086#ByteRTCEngineKit-setbeautyintensity-withintensity) | [setBeautyIntensity](70095#IRtcEngine-setbeautyintensity) |

3. 新增音频采集和播放设备测试功能，在通话前进行录音和播放测试，确保通话顺利进行。或者在通话中遇到无声问题时，发起音频设备检测，快速排查和定位问题。具体参看：

| | Windows |
|---|---|
| 开始播放测试 | [startAudioPlaybackDeviceTest](70095#IAudioDeviceManager-startaudioplaybackdevicetest) |
| 停止播放测试 | [stopAudioPlaybackDeviceTest](70095#IAudioDeviceManager-stopaudioplaybackdevicetest) |
| 开启录播测试 | [startAudioDeviceRecordTest](70095#IAudioDeviceManager-startaudiodevicerecordtest) |
| 停止录制，并开始播放测试语音 | [stopAudioDeviceRecordAndPlayTest](70095#IAudioDeviceManager-stopaudiodevicerecordandplaytest) |
| 停止录播测试 | [stopAudioDevicePlayTest](70095#IAudioDeviceManager-stopaudiodeviceplaytest) |

4. 新增 P2P 音视频传输接口和回调，适合游戏串流业务及其他 IOT 局域网中的实时音视频通话。由于串流场景的建联以及数据流的传输路径都与常规音视频通话有较大不同，使用一套独立的接口。使用该功能前，请联系售前或技术支持获取包含 P2P 音视频传输功能的 SDK 包。
5. 支持在音视频通话前进行通话回路测试，包括对音视频采集/播放设备，以及上下行网络的测试，以便在通话开始前确认设备可用性及音视频流回路是否通畅，保证通话链路的整体连通性，具体参看：
| | Android | iOS | Windows |
|---|---|---|---|
| 开启音视频回路测试 | [startEchoTest](70080#RTCEngine-startechotest) | [startEchoTest:playDelay:](70086#ByteRTCEngineKit-startechotest-playdelay) | [startEchoTest](70095#IRtcEngine-startechotest) |

6. 房间内点对点消息、房间外点对点消息、房间广播消息均支持超低延时传输。
7. 支持对在本地采集的音频和收到的来自远端的音频进行自定义处理。丰富了适用的音频场景范围，具体参看：
| | Android | iOS | Windows |
|---|---|---|---|
| 注册自定义音频处理器 | [registerAudioProcessor](70080#RTCEngine-registeraudioprocessor) | [registerAudioProcessor:](70086#ByteRTCEngineKit-registeraudioprocessor) | [registerAudioProcessor](70095#IRtcEngine-registeraudioprocessor) |
8. 各端支持 VP8 编码。

### 功能优化

1. 移动端音频路由设置优化，`setDefaultAudioRoute` 选择设备的听筒或扬声器作为默认音频路由。`setAudioRoute` 支持更多音频设备类型，例如有线耳机、蓝牙耳机等，但只支持在 `AUDIO_SCENARIO_COMMUNICATION` 通话场景下调用生效。
2. PC 端屏幕共享能力扩展，增加了枚举共享对象缩略图、应用图标和应用名称等信息，用于对应用进行分类展示，方便用户选取屏幕共享对象。
3. 增强了 PC 端的音视频设备管理能力，提供了更多设备信息，例如是设备连接类型，是否为虚拟设备等。新增部分为对原有逻辑的扩展，之前使用方式不受影响。
4. 提升音频属性设置接口易用性，丰富了音频场景 `roomProfile` 和音质选项 `AudioProfileType`，满足更多不同场景的需要。 `roomProfile` 既可以在客户端设置，也可以通过配置下发。在选定的音频场景 `roomProfile` 基础上，调用 `AudioProfileType` 切换音质档位。
5. 细化了转推直播的任务状态回调，具体参看：
| | Android | iOS | Windows |
|---|---|---|---|
| 转推直播任务状态 | [ByteRTCStreamMixingEvent](70083#bytertcstreammixingevent) | [ByteRTCStreamMixingEvent](70088#bytertcstreammixingevent) | [StreamMixingEvent](70098#streammixingevent) |
| 转推直播错误码 | [ByteRTCTranscoderErrorCode](70082#bytertctranscodererrorcode) | [ByteRtcTranscoderErrorCode](70085#bytertctranscodererrorcode) | [StreamMixingErrorCode](70097#streammixingerrorcode) |

### 缺陷修复

1. 修复某些情况下退后台采集停止及音画不同步等问题。

## 3.41

该版本于 2022 年 6 月 18 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 视频管理
- 高级功能

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

### 新增特性

1. 移动端支持手动对焦、曝光功能，具体参看：

| |Android |iOS |
|---|---|---|
|检查当前使用的摄像头是否支持手动对焦 |[isCameraFocusPositionSupported();](70080#iscamerafocuspositionsupported) |[isCameraFocusPositionSupported;](70086#iscamerafocuspositionsupported) |
|设置当前使用的摄像头的对焦点 |[setCameraFocusPosition](70080#setcamerafocusposition) |[setCameraFocusPosition:](70086#setcamerafocusposition) |
|检查当前使用的摄像头是否支持手动设置曝光点 |[isCameraExposurePositionSupported();](70080#iscameraexposurepositionsupported) |[isCameraExposurePositionSupported;](70086#iscameraexposurepositionsupported) |
|设置当前使用的摄像头的曝光点 |[setCameraExposurePosition](70080#setcameraexposureposition) |[setCameraExposurePosition:](70086#setcameraexposureposition) |
|设置当前使用的摄像头的曝光补偿 |[setCameraExposureCompensation](70080#setcameraexposurecompensation) |[setCameraExposureCompensation:](70086#setcameraexposurecompensation) |

2. 优化了空间音频的朝向体验。在通话过程中，RTC 将根据通话用户各自的朝向渲染音频，收听者可以感受到发言者朝向改变带来的空间音频效果。具体参看[空间音频](93903)。

3. 支持云代理功能。能够在有防火墙限制的情况下，通过云代理实现正常的音视频通话。具体参看：
| |Android |iOS |Windows |
|---|---|---|---|
|开启云代理 |[startCloudProxy](70080#startcloudproxy) |[startCloudProxy:](70086#ByteRTCEngineKit-startcloudproxy) |[StartCloudProxy](70095#startcloudproxy) |

## 3.40

该版本于 2022 年 6 月 3 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

- 音视频传输
- 转推直播
- 高级功能

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

### 新增特性

1. 发流端同时使用两个设备分别采集音频和视频时，支持设置音画同步，具体参看 [setMultiDeviceAVSync](70080#RTCEngine-setmultideviceavsync)。
2. 支持范围语音能力，同一房间中设定范围内的音源音量随距离增加呈衰减效果，具体参看[范围语音](114727)文档。使用该功能需持有 Room 对象。

### 功能优化

1. 支持在同一个音视频通话中，音频采集和渲染方式相互独立。对于收到的音频流，无论是通过 SDK 内部采集得到的，还是自定义采集得到的，在进行渲染播放时，都可以采用内部音频渲染或自定义音频渲染。

| |Android |iOS |Windows |
|---|---|---|---|
|设置音频采集方式 |[setAudioSourceType](70080#RTCEngine-setaudiosourcetype) |[setAudioSourceType:](70086#ByteRTCEngineKit-setaudiosourcetype) |[SetAudioSourceType](70095#IRtcEngineLite-setaudiosourcetype) |
|设置音频渲染方式 |[setAudioRenderType](70080#RTCEngine-setaudiorendertype) |[setAudioRenderType:](70086#ByteRTCEngineKit-setaudiorendertype) |[SetAudioRenderType](70095#IRtcEngineLite-setaudiorendertype) |

2. 优化服务端合流转推的默认音频参数。

| |Android |iOS |Windows |
|---|---|---|---|
|获取默认的转推直播配置参数 |[getDefualtLiveTranscode](70083#LiveTranscoding-getdefualtlivetranscode) |[defaultTranscoding](70088#ByteRTCLiveTranscoding-defaulttranscoding) |[defaultTranscoding](70098#ITranscoderParam-defaulttranscoding) |

## 3.39.102

该版本于 2022 年 5 月 27 日发布。

此版本是 hotFix 版本，修复了在 Android， iOS 平台上使用共享屏幕功能时，可能发生闪退的问题。

## 3.39.101

该版本于 2022 年 5 月 18 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

*   取消订阅逻辑变化：
	- 3.39 以前版本：调用 `unsubscribeStream` 后，如果目标用户退房重进或切换隐身 状态，取消订阅的状态失效。
	- 3.39 及以后版本：调用 `unsubscribeStream` 后，在本地用户退房前，取消订阅的状态有效，即使目标用户退房重进或切换隐身状态。
- 即时消息
- 音视频处理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70423)。

### 新增特性

1. 大会模式和音频选路功能正式上线。支持容纳高达千人的音视频互动。功能详细介绍和使用信息参看[大会模式和音频选路](113547)。
2. 在 RTC 客户端向应用服务端发送实时消息时，可以通过相应回调获取来自应用服务端的 response 消息。

| |Android |iOS |Windows |
|---|---|---|---|
|回调 |[onServerMessageSendResult](70081#IRTCEngineEventHandler-onservermessagesendresult) |[rtcEngine:onServerMessageSendResult:error:message](70087#ByteRTCEngineDelegate-rtcengine-onservermessagesendresult-error-message) |[OnServerMessageSendResult](70096#IRtcEngineLiteEventHandler-onservermessagesendresult) |

3. 支持视频水印功能

| |Android |iOS |Windows |
|---|---|---|---|
|在指定视频流上添加水印 |[setVideoWatermark](70080#RTCEngine-setvideowatermark) | [SetVideoWatermark:WithImagePath:WithRTCWatermarkConfig:](70086#ByteRTCEngineKit-setvideowatermark-withimagepath-withrtcwatermarkconfig) | [SetVideoWatermark](70095#IRtcEngineLite-setvideowatermark) |
|移除指定视频流的水印 |[clearVideoWatermark](70080#RTCEngine-clearvideowatermark) |[ClearVideoWatermark:](70086#ByteRTCEngineKit-clearvideowatermark) |[ClearVideoWatermark](70095#IRtcEngineLite-clearvideowatermark) |

## 3.38

该版本于 2022 年 5 月 6 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

*   视频管理
*   混音
*   房间管理
*   音频设备管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增特性

1. 当通话被系统电话、锁屏或合盖等打断时，支持暂停采集音视频，并在打断结束后自动恢复。具体参看[通话打断和恢复](111590)。
2. 在 Android 和 iOS 平台上，支持获取当前的音频路由设置。参考 [getAudioRoute](70080#RTCEngine-getaudioroute)。
3. 在 Windows 平台上，支持音频播放和采集路由跟随系统的路由设置。参看 [FollowSystemPlaybackDevice](70095#IAudioDeviceManager-followsystemplaybackdevice) 和 [FollowSystemCaptureDevice](70095#IAudioDeviceManager-followsystemcapturedevice)。
4. 支持调整音视频通话中使用的音频文件的播放速度，参看 [setAudioMixingPlaybackSpeed](70080#IAudioMixingManager-setaudiomixingplaybackspeed)。
5. 音视频通话外的系统音频支持根据远端音量进行闪避，参看 [enablePlaybackDucking](70080#RTCEngine-enableplaybackducking)

### 缺陷修复

1.	修复 iOS 成功集成 CV SDK 后返回值仍为未集成的问题。

## 3.37

该版本于 2022 年 4 月 22 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：

*   视频管理
*   视频特效
*   音视频回退
*   音频数据回调

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增特性

1.  支持公共流的发布和订阅，用户发布公共流后，使用同一个 `appID` 的用户无需进房即可订阅。详见[发布和订阅公共流](108930)。
2.  支持在音频数据回调中获取订阅的远端每个用户混音前的音频数据回调，音频回调方法在`method`中进行设置。具体参看 API 文档：

| 接口功能 | Android | iOS | Windows |
| --- | --- | --- | --- |
| 开启音频回调 | [enableAudioFrameCallback](70080#enableaudioframecallback) | [enableAudioFrameCallback:format:](70086#enableaudioframecallback-format) | [EnableAudioFrameCallback](70095#enableaudioframecallback) |
| 返回远端单个用户的音频数据 | [onRemoteUserAudioFrame](70081#onremoteuseraudioframe) | [onRemoteUserAudioFrame:audioFrame:](70087#onremoteuseraudioframe-audioframe) | [OnRemoteUserAudioFrame](70096#onremoteuseraudioframe) |

3.  支持关闭音频回调。具体参看 API 文档：

| 接口功能 | Android | iOS | Windows |
| --- | --- | --- | --- |
| 关闭音频回调 | [disableAudioFrameCallback](70080#disableaudioframecallback) | [disableAudioFrameCallback:](70086#disableaudioframecallback) | [DisableAudioFrameCallback](70095#disableaudioframecallback) |

### 性能优化

1.	优化视频采集模块，提升逆光、纯色光下白平衡和曝光准确度。升级后 Android 须在 gradle 里引入kotlin，iOS 须申请摄像头权限。

## 3.36

该版本于 2022 年 4 月 2 日发布。

### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
*   混音
*   房间管理
*   屏幕共享
*   转推直播

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增特性

1.  新增 `setVideoRotationMode` 支持设置内部视频采集旋转模式，满足不同业务场景需求，详见[视频采集旋转方向](106458)。

2.  本地/远端视频流渲染能力增强：
*   支持 `Fill` 模式：在此模式下，视频帧会非等长宽比缩放并填满画布。
*   支持在视频帧未填满画布时，空缺区域设置背景颜色。
*   渲染时，支持调用 `updateLocalVideoCanvas` 和 `UpdateRemoteStreamVideoCanvas` 进行渲染设置调整。

3.  支持通过 `onNetworkQuality` 回调监测本端和已订阅用户的网络质量评分，详见[通话质量监测](106866)。

4.  移动端支持更新屏幕内部采集的媒体类型，参看：

| 接口功能 | Android | iOS |
| --- | --- | --- |
| 更新屏幕内部采集的媒体类型 | [updateScreenCapture](70080#RTCEngine-updatescreencapture) | [updateScreenCapture:](70086#ByteRTCEngineKit-updatescreencapture) |

5.  使用 RTC SDK 中包含的 CV 特效时，可以通过 `onFaceDetectResult` 获取人脸检测结果。

6.  支持单个用户在同一房间内发起多个转推直播任务，具体参看 API 文档：

| 接口功能 | Android | iOS | Windows | macOS |
| --- | --- | --- | --- | --- |
|  新增转推直播任务  |  [startLiveTranscoding](70080#RTCEngine-startlivetranscoding)  | [startLiveTranscoding:transcoding:observer:](70086#ByteRTCEngineKit-startlivetranscoding-transcoding-observer) |  [StartLiveTranscoding](70095#IRtcRoom-startlivetranscoding)  |  /  |

7.  收到用户离开房间回调 `onUserLeave` 时，支持区分用户主动离房行为和用户切换隐身身份。

8.  支持通过 `onActiveSpeaker` 获取房间内最活跃用户（Active Speaker）的信息。本地和远端音量回调（`onLocalAudioPropertiesReport` 和 `onRemoteAudioPropertiesReport` ）支持同时返回线性和非线性音量值。

9.  增强混音功能：
*   全平台支持在线音频文件混音，参看 `startAudioMixing`。
*   Android 平台混音时，支持传入 URI 或 以 `/assets/` 开头的本地文件。

### 功能优化

1.  移动端支持屏幕音频内部采集，参看：

| 接口功能 | Android | iOS |
| --- | --- | --- |
| 设置屏幕音频采集方式 | [setScreenAudioSourceType](70080#RTCEngine-setscreenaudiosourcetype) | [setScreenAudioSourceType:](70086#ByteRTCEngineKit-setscreenaudiosourcetype) |

2.  重新设计媒体流的控制接口，实现了摄像头/麦克风采集的媒体流与屏幕共享媒体流的分离控制，同时支持灵活控制媒体流的发布/取消发布、订阅/取消订阅，具体接口变更参看[升级指南](70019)。

3. 优化视频大小流的发布订阅流程，发布端开启发送多路流模式后，订阅端可自行设置期望订阅的视频参数，由发布端根据订阅端的设置自动匹配参数相近的流进行发送，具体参看 [推送多路流](70139)。

4. 丰富性能回退场景下视频的降级档位，具体参看[音视频回退](70137)

### 缺陷修复
1. 各端修复在手动订阅模式下，仍会在进房时自动订阅远端屏幕流的问题。

## 3.35

该版本于 2022 年 3 月 21 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 混音
- 音频管理
- 视频管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。


### 性能优化

1. 本地视频采集支持设置采集模式，包括自动设置采集参数（默认）、手动设置采集参数、与编码参数保持一致三种模式供用户灵活配置，具体参看 [`VideoCaptureConfig`](70083#videocaptureconfig)。默认模式采集的本地预览视频清晰度和帧率较之前版本均有提高，但在美颜特效等场景下性能会受一定影响，如若介意，则将采集模式设置为与编码参数保持一致即可。
2. 优化现有空间音频功能，在游戏的小队模式中支持开启空间音频。

### 缺陷修复

1. 原 [OnFirstRemoteVideoFrameRendered](70096#onfirstremotevideoframerendered) 回调名称与行为不一致，回调时机为第一帧远端视频解码后渲染前。新版本中该回调改为于渲染成功后触发，而第一帧远端视频解码后渲染前改为触发 [OnFirstRemoteVideoFrameDecoded](70096#onfirstremotevideoframedecoded)回调。

### 新增特性

1. 移动端支持均衡混音中音频与人声的音量，避免混音音频或人声出现音量过大或过小的情况，导致听感体验下降，具体参看 API 文档：

| **功能简述** | **Android** | **iOS** |
| --- | --- | --- |
| 开启/关闭音量均衡功能 | [enableVocalInstrumentBalance](70080#RTCEngine-enablevocalinstrumentbalance) | [enableVocalInstrumentBalance:](70086#ByteRTCEngineKit-enablevocalinstrumentbalance) |
| 传入混音音频原始响度 | [setAudioMixingLoudness](70080#IAudioMixingManager-setaudiomixingloudness) | [setAudioMixingLoudness:loudness:](70086#ByteRTCAudioMixingManager-setaudiomixingloudness-loudness) |

2. 移动端新增音量闪避功能，当检测到远端人声时，本地播放音频音量自动减弱，从而保证远端人声清晰可辨，具体参看 API 文档：

| **功能简述** | **Android** | **iOS** |
| --- | --- | --- |
| 打开/关闭音量闪避功能 | [enablePlaybackDucking](70080#enableplaybackducking) | [enablePlaybackDucking:](70086#ByteRTCEngineKit-enableplaybackducking) |

## 3.34

该版本于 2022 年 3 月 7 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 混音
- 跨房间推流
- 屏幕共享
- 引擎管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 功能优化

1. 自定义视频前处理节点由采集后移至编码前，可以针对镜像、CV 等处理后的视频画面进行二次加工，使得远端可以正常接收二次加工后的视频效果
2. 屏幕采集回调中清晰定义启动、暂停、恢复、错误、停止五个状态，使用户能够通过回调感知采集状态变化，并进行相应操作，具体参看[startScreenVideoCapture](70080#RTCEngine-startscreenvideocapture)
3. 优化 RTC SDK for Android 混淆规则，避免了因混淆配置疏漏而导致的崩溃问题
### 新增特性

1. 支持周期性回调混音伴奏播放进度，具体参看 [setAudioMixingProgressInterval](70080#setaudiomixingprogressinterval)
2. 支持获取混音音频文件音轨索引，并指定当前音频文件的播放音轨，具体参看[getAudioTrackCount](70080#getaudiotrackcount), [selectAudioTrack](70080#selectaudiotrack)
3. 支持对混音伴奏或人声进行升降调调节，具体参看[SetAudioMixingPitch](70080#setaudiomixingpitch), [setLocalVoicePitch](70080#setlocalvoicepitch)
4. 支持跨房间推拉流能力，具体参看[跨房间转发媒体流](104398)

## 3.33

该版本于 2022 年 2 月 21 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 混音；
- 使用了 `RTCVideoFrame` 相关参数的接口；
- 媒体设备相关回调。

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。


### 功能优化

1. 提升了视频帧格式转换的效率。


### 新增特性

1. 移动端支持视频通话时将视频中人像与背景分离，实现如虚拟背景等功能（桌面端已在上个版本中支持）。具体参看：[背景分割](97293)。
2. 在播放 PCM 音频数据时，支持调节音量。具体参看[SetAudioMixingVolume](70080#IAudioMixingManager-setaudiomixingvolume)。
3. 支持进行人声提示（VAD）和音频频谱检测。具体参看[enableAudioPropertiesReport](70080#RTCEngine-enableaudiopropertiesreport)。

## 3.32

该版本于 2022 年 1 月 26 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 混音
- 视频特效
- 视频管理
- 美声特效管理
- 通话前网络检测

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。


### 功能优化

1. 支持纯音频场景下，通过屏幕流进行信息同步。


### 新增特性

1. 支持对音乐文件的声道进行设置，具体参看 API 文档：

| 方法简述 | Android | iOS | Windows | macOS |
| --- | --- | --- | --- | --- |
| 设置当前音频文件的声道模式 | [setaudiomixingdualmonomode](70080#setaudiomixingdualmonomode) |[setAudioMixingDualMonoMode:mode:](70086#setaudiomixingdualmonomode-mode) | [SetAudioMixingDualMonoMode](70095#setaudiomixingdualmonomode) | / |

同时新增部分支持播放的音频格式，目前各平台支持的音频格式如下：

|  | mp3 | aac | m4a | 3gp | wav | mp4 | wma | ts | ogg |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Windows | √ | √ | √ | √ | √ | √ | √ | √ |
| Android | √ | √ | √ | √ | √ | √ | | | √ |
| iOS/macOS | √ | √ | √ | √ | √ | √ |

2. 移动端支持摄像头变焦和开启闪光灯功能，具体参看 API 文档：

| 方法简述 | Android | iOS |
| --- | --- | --- |
| 检测当前使用的摄像头（前置/后置），是否支持变焦（数码/光学变焦） | [isCameraZoomSupported](70080#iscamerazoomsupported) |[isCameraZoomSupported](70086#iscamerazoomsupported) |
| 设置当前使用的摄像头（前置/后置）的变焦倍数 | [setCameraZoomRatio](70080#setcamerazoomratio) | [setCameraZoomRatio:](70086#setcamerazoomratio) |
| 获取当前使用的摄像头（前置/后置）的最大变焦倍数 | [getCameraZoomMaxRatio](70080#getcamerazoommaxratio) | [getCameraZoomMaxRatio](70086#getcamerazoommaxratio) |
| 检测当前使用的摄像头（前置/后置），是否支持闪光灯 | [isCameraTorchSupported](70080#iscameratorchsupported) | [isCameraTorchSupported](70086#iscameratorchsupported) |
| 打开/关闭当前使用的摄像头（前置/后置）的闪光灯 | [setCameraTorch](70080#setcameratorch) | [setCameraTorch:](70086#setcameratorch) |

3. 支持音视频通话前进行网络质量检测，具体参看：[通话前网络检测（Native）](97200)
4. 桌面端支持视频通话时将视频中人像与背景分离，实现如虚拟背景等功能，具体参看：[背景分割](97293)
5. 新增美声和混响特效，支持改变通话音频声色和音效，具体参看 API 文档：

| 方法简述 | Android | iOS |
| --- | --- | --- |
| 设置变声特效类型 | [setVoiceChangerType](70080#RTCEngine-setvoicechangertype) |[setVoiceChangerType:](70086#ByteRTCEngineKit-setvoicechangertype) |
| 设置混响特效类型 | [setVoiceReverbType](70080#setvoicereverbtype) | [setVoiceReverbType:](70086#setvoicereverbtype) |

## 3.30

该版本于 2022 年 1 月 4 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 音频管理
- 视频管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 功能优化

1. 支持根据业务场景需要选择合适的音质档位，具体参看 API 文档：

| 方法简述 | Android | iOS | Windows | macOS |
| --- | --- | --- | --- | --- |
| 设置音质档位 | [setAudioProfile](70080#setaudioprofile) |[setAudioProfile:](70086#setaudioprofile) | [SetAudioProfile](70095#setaudioprofile) | / |

2. 支持纯音频场景下，发送音频流同步信息，具体参看 API 文档：

| 方法简述 | Android | iOS | Windows | macOS |
| --- | --- | --- | --- | --- |
| 发送音频流同步信息 | [sendStreamSyncInfo](70080#sendstreamsyncinfo) |[sendStreamSyncInfo:config:](70086#sendstreamsyncinfo-config) | [SendStreamSyncInfo](70095#sendstreamsyncinfo) | / |

3. 支持视频采集和编码参数分开设置，具体参看 API 文档：

| 方法简述 | Android | iOS | Windows | macOS |
| --- | --- | --- | --- | --- |
| 设置视频采集参数 | [setVideoCaptureConfig](70080#setvideocaptureconfig) |[setVideoCaptureConfig:](70086#setvideocaptureconfig) | [SetVideoCaptureConfig](70095#setvideocaptureconfig) | / |

### 新增特性
1. 支持多房间模式下端云一体合流转推。
2. 移动设备音视频订阅端支持空间音频效果，具体功能实现参看[空间音频](93903)。

## 3.29

该版本于 2021 年 12 月 20 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 音频管理
- 房间管理
- 视频管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增特性

1. 移动端（Android，iOS）支持使用耳返功能，并且可以设置耳返音量，满足互娱音频相关场景下，用户感知自身声音变化的需求，详情参看具体的 API 文档：

| 方法简述 | Android | iOS |
| --- | --- | --- |
| 开启/关闭耳返功能 | [setEarMonitorMode](70080#setearmonitormode) | [SetEarMonitorMode:](70086#setearmonitormode) |
| 设置耳返音量 | [setEarMonitorVolume](70080#setearmonitorvolume) | [SetEarMonitorVolume:](70086#setearmonitorvolume) |

2. 支持本地采集画面在编码传输时做镜像处理，使远端用户与本地用户看到的本地画面一致，具体功能实现参看[镜像](70143)。
3. 支持自定义视频编解码，具体功能实现参看[自定义视频编解码](82921)。
4. 支持通话前音量检测。

### 功能优化
1. iOS 端新增离开房间回调，用户调用 `leaveRoom` 并成功离开房间后，会收到 [rtcEngine:onLeaveRoomWithStats:](70087#rtcengine-onleaveroomwithstats) 回调。
2. 全平台增加进房参数校验，并统一进房相关错误提示。

## 3.28

该版本于 2021 年 12 月 6 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 音频处理
- 视频管理
- 音频事件回调

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增特性

支持将 SDK 采集到的音频数据进行自定义加工（如美声、变声、音效、混响等处理等），并返回给 RTC 进行编码和发送，详情参看文档 [自定义音频处理](80635)

## 3.27

该版本于 2021 年 11 月 26 日发布。
    
### 升级必看

各个平台上的 API/回调/数据结构发生了变化。变化范围包括：
- 屏幕共享
- 视频管理
- 音频管理
- 引擎管理

如果你需要将应用中使用的旧版本 RTC SDK 升级为最新版，参看：[升级指南](70019)。

### 新增接口

1. 各平台新增全套**多房间**接口，同一用户可同时加入多个房间，新增接口详情参看：

| **Android** | **iOS** | **Windows** | **Mac** |
| --- | --- | --- | --- |
| [多房间](70079#多房间) | [多房间](70084#多房间) | [多房间](70094#多房间) | / |

### 新增特性

1. 支持推送自定义采集的屏幕共享音频流，参看具体的 API 文档：

| **方法简述** | **Android** | **iOS** | **Windows** | **Mac** |
| --- | --- | --- | --- | --- |
| 使用自定义屏幕共享音频流采集| [setScreenAudioSourceType](70080#setscreenaudiosourcetype) | [setScreenAudioSourceType](70086#setscreenaudiosourcetype) | [SetScreenAudioSourceType](70095#setscreenaudiosourcetype) | / |
| 推送自定义采集的屏幕共享音频流 | [pushScreenAudioFrame](70080#pushscreenaudioframe) | [pushScreenAudioFrame](70086#pushscreenaudioframe) | [PushScreenAudioFrame](70095#pushscreenaudioframe) | / |

2. 实现屏幕共享时麦克风采集音频流和屏幕音频流分两路发送，参看具体的 API 文档：

| **方法简述** | **Android** | **iOS** | **Windows** | **Mac** |
| --- | --- | --- | --- | --- |
| 设置屏幕音频流和麦克风采集音频流的混流方式 | [setScreenAudioStreamIndex](70080#setscreenaudiostreamindex) | [setScreenAudioStreamIndex](70086#setscreenaudiostreamindex) | [SetScreenAudioStreamIndex](70095#setscreenaudiostreamindex) | / |

3. 支持多房间模式下端云一体合流转推


### 接口功能优化

1. 解耦屏幕流的采集与发布，支持编码参数的动态变更
2. 补充用户反馈类型，解耦问题类型与问题描述，用户可对任何问题类型添加描述
3. 对 SEI 信息的发送/接收逻辑进行了整合，以 Android 为例：

| **方法简述** | **326.1** | **327.1** |
| --- | --- | --- |
| 发送/接收 SEI 信息 | 通过 `registerMetadataObserver` 注册回调，在 `onReadyToSendMetadata`/`onMetadataReceived` 回调中进行 SEI 信息的发送和接收 | 通过 [sendSEIMessage](70080#sendseimessage)/[onSEIMessageReceived](70081#onseimessagereceived) 发送/接收 SEI 信息 |

4. 支持在 RTC 内部采集的前提下，对采集后的视频数据进行自定义加工（如美颜等），并返回给 RTC 进行渲染、编码和发送，参看[自定义视频处理](79888)。
