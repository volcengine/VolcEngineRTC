---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
keywords: 实时音视频, macOS, 集成    # use ',' as separator
---

## RTC SDK 找不到依赖库问题

在集成 RTC SDK 时，需要将 SDK 包引入到 app 中。若 SDK 包文件未放在默认目录下，会出现 RTC SDK 找不到依赖库（如 libbytenn、libbytevc0 等）的问题，从而引发卡死等问题。

### 名词解释

- `@rpath` (runpath): 是一个保存着一个或多个路径的变量，告诉连接器到什么路径找库。
- `@executable_path`: 表示可执行程序所在的目录。
- `@loader_path`: 表示每一个被加载的 binary（包括 App, dylib, framework, plugin 等）所在的目录。


### SDK 包文件推荐路径

APP 默认的 `@rpath` 为 `app/Contents/Frameworks`，RTC SDK 的 `@rpath` 为当前目录，建议 SDK 包文件统一放在默认目录。

### 特殊情况处理

如果由于一些原因无法将 SDK 包文件统一放在默认目录下，而是需要放在自定义目录下，则应修改 `@rpath` 进行 SDK 依赖重定向，保证 RTC SDK 能正常找到依赖库。

**示例**：

1. Custom Folder 中存放了 RTC SDK 的相关文件以及依赖库，现在高亮的 VolcEngineRTC 需要依赖于 libAGFX.dylib, libbytenn.dylib, libbytevc0.dylib, libeffect.dylib 文件。

    ![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_6366af79e2fc59b146eaa9009ce9d239.png)

2. 在该文件路径下打开终端，通过命令 `otool -L VolcEngineRTC` 查看该可执行文件的依赖库及库路径。

    ![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_c004b59d8df1e5a43b72e2b67d714068.png)

3. 依次使用命令 `install_name_tool -change @rpath/libAGFX.dylib @loader_path/../../../libAGFX.dylib VolcEngineRTC` 将依赖库的 `@rpath` 路径改成以 `@loader_path` 为基础的相对路径。

## 如何在 macOS 上安装 Qt？

1. 下载 [Qt 在线安装程序](https://download.qt.io/archive/online\_installers/4.6/)。
	
2. 打开安装程序，输入 Qt 账号及密码。如果你没有账号，请前往 [Qt 官网](https://login.qt.io/login)注册。
	
	![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_299ee9b499873d5a8d4d109c64c3efaf.png =600x)
	
3. 设置你的安装路径。
	
	![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_14f820e9f99f3b98f80038a151a411e9.png =600x)
	
4. 选择要安装的 Qt 版本，建议选择最新版本，等待安装完成。
	
	![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_ae4f198644eff053d794f11289950602.png =600x)
	
5. 设置 Qt 环境变量。在终端运行 `vim ~/.bash_profile`，然后将以下内容复制到文件开头，保存退出后运行 `source ~/.bash_profile` 使环境变量生效。
	
	```bash
	export QTDIR=/Users/Username/QT/6.5.2/macos # 设置成自己的安装路径
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$QTDIR/lib
	export PATH=$PATH:$QTDIR/bin
	```
	

	你可以在终端中运行 `qmake --version` 检查安装情况，如果显示之前安装的 Qt 版本，则表示安装成功。
