---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
useHub: 1    # 0 by default for using Doc Repo; 1 for using APIHub / SDKHub.
keywords: 实时音视频    # use ',' as separator
---

在在线课堂、视频会议等场景中，你可能需要将指定页面的音视频流转推到 RTC 房间供房间内用户观看，并后续使用云端录制、抽帧截图等高级功能，你可以使用此接口来实现这一功能。
## 使用说明
1. ### 接口行为
你可以调用 `StartWebcast`接口，将指定网页中的内容转推到 RTC 房间内。
在首帧发送完成和任务结束时，你在[控制台](https://console.volcengine.com/rtc/cloudRTC?tab=callback)上设置的回调地址会收到相关回调。有关回调结果的详细说明，参看 [Webcast](75125#webcast)

## 注意事项
请求频率：QPS 不得超过 150。
## 请求说明
- 请求方式：**POST**
- 请求地址：**https://rtc.volcengineapi.com?Action=StartWebcast&Version=2020-12-01**
## 调试

<APILink link="https://api.volcengine.com/api-explorer/debug?action=StartWebcast&serviceCode=rtc&version=2020-12-01&groupName=云录屏" />

## 请求参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
### Query
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "15%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "15%"
  },
  {
    "title": "是否必选",
    "dataIndex": "required",
    "width": "10%"
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "20%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "description",
    "width": "40%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "Action",
    "type": "String",
    "required": "是",
    "example": "<code>StartWebcast</code>",
    "description": "接口名称。当前 API 的名称为 <code>StartWebcast</code>。",
    "key": "Action"
  },
  {
    "name": "Version",
    "type": "String",
    "required": "是",
    "example": "<code>2020-12-01</code>",
    "description": "接口版本。当前 API 的版本为 <code>2020-12-01</code>。",
    "key": "Version"
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
### Body
```mixin-react
const columns = [
  {
    "title": "参数",
    "dataIndex": "name",
    "width": "20%"
  },
  {
    "title": "类型",
    "dataIndex": "type",
    "width": "10%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "是否必选",
    "dataIndex": "required",
    "width": "10%"
  },
  {
    "title": "示例值",
    "dataIndex": "example",
    "width": "15%",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  },
  {
    "title": "描述",
    "dataIndex": "title",
    "render": (val) => <span dangerouslySetInnerHTML={{ __html: val }} />
  }
];
    
const data = [
  {
    "name": "AppId",
    "key": "0-0",
    "title": "应用的唯一标志",
    "example": "<code>Your_AppId</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "BusinessId",
    "key": "0-1",
    "title": "业务标识",
    "example": "<code>Your_BusinessId</code>",
    "required": "否",
    "type": "String"
  },
  {
    "name": "RoomId",
    "key": "0-2",
    "title": "向指定 RTC 房间推送网页音视频内容，房间 ID 是房间的唯一标志",
    "example": "<code>Your_RoomId</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "TaskId",
    "key": "0-3",
    "title": "<p>任务 ID。你必须对每个云录屏任务设定 TaskId，且在后续结束任务时也须使用该 TaskId。</p>\n<p><code>TaskId</code> 是任务的标识，在一个 <code>AppId</code> 的 <code>RoomId</code> 下 <code>taskId</code> 是唯一的，不同 <code>AppId</code> 或者不同 <code>RoomId</code> 下 <code>TaskId</code> 可以重复，因此 <code>AppId</code> + <code>RoomId</code> + <code>TaskId</code> 是任务的唯一标识，可以用来标识指定 <code>AppId</code> 下某个房间内正在运行的任务，从而能在此任务运行中进行更新或者停止此任务。</p>\n关于 TaskId 及以上 Id 字段的命名规则符合正则表达式：<code>[a-zA-Z0-9_@\\-\\.]{1,128}</code>",
    "example": "<code>Your_TaskId</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "UserId",
    "key": "0-4",
    "title": "推送网页音视频内容的用户对应的 UserId。不能与房间中其他用户的 ID 重复，否则先进房的用户会被移出房间。 建议添加有规律的前缀，避免重复。例如， <code>webcast_</code>。",
    "example": "<code>Your_UserId</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "SourceURL",
    "key": "0-5",
    "title": "需要转推的网页地址，可以携带自定义的 queryParams 来鉴权等，总体长度不超过 1024。",
    "example": "<code>https://xxx.xxx.xxx</code>",
    "required": "是",
    "type": "String"
  },
  {
    "name": "VideoSolutions",
    "key": "0-6",
    "title": "<p>输出流的视频参数。网页渲染分辨率为输入最大视频流的分辨率。该值为空时按默认值填充一路。</p>\n<ul>\n<li>当设置一路流时，不会输出多路流，输出流参数与设置值相同。</li>\n<li>当设置两路流时， RTC 会启动<a href=\"70139\">推送多路流</a>功能，设置的两路分辨率相当于分辨率等级划分中的大流和中流的上限。</li>\n</ul>",
    "example": "<code>-</code>",
    "required": "否",
    "type": "Object[]",
    "children": [
      {
        "name": "Width",
        "key": "0-6-0",
        "title": "视频宽度，单位为像素，范围为 <code>[50,1920]</code>，默认值为 <code>1280</code>。必须是偶数，值为奇数时自动调整为偶数。",
        "example": "<code>1280</code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "Height",
        "key": "0-6-1",
        "title": "视频高度，单位为像素，范围为 <code>[50,1080]</code>，默认值为 <code>720</code>。必须是偶数，值为奇数时自动调整为偶数。",
        "example": "<code>720</code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "FrameRate",
        "key": "0-6-2",
        "title": "发送帧率，单位为 帧/秒，范围为<code>[1,60]</code>，默认值为 <code>15</code>。帧率和码率设置建议参照<a href=\"70122#param\">视频发布参数对照表</a>以获取最佳体验。",
        "example": "<code>15</code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "Bitrate",
        "key": "0-6-3",
        "title": "最大发送码率，取值范围为<code>[0,10000]</code>，单位为 Kbps，默认值 <code>0</code>，为 <code>0</code> 时表示自适应码率。",
        "example": "<code>0</code>",
        "required": "否",
        "type": "Integer"
      }
    ]
  },
  {
    "name": "MaxRunningTime",
    "key": "0-7",
    "title": "最大运行时间，超过此时间后，任务自动终止。单位为秒。取值范围为 [10,86400]，默认值为 <code>86400</code>。不填时自动调整为默认值。",
    "example": "<code>3600</code>",
    "required": "否",
    "type": "Integer"
  },
  {
    "name": "MonitorConfig",
    "key": "0-8",
    "title": "页面可用性监控配置",
    "example": "<code>-</code>",
    "required": "否",
    "type": "Object",
    "children": [
      {
        "name": "FreezeCheckInterval",
        "key": "0-8-0",
        "title": "<p>对页面内容是否无变化的检测间隔。取值范围为<code>[2,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n<ul>\n<li>当连续两次出现检测命中时，将对页面进行刷新，并回调<code>Status=4，Reason=&quot;PageFreeze&quot;</code>。</li>\n<li>再次出现连续两次检测命中时，将进行任务重调度，并回调<code>Status=5，Reason=&quot;PageFreeze&quot;</code>。</li>\n</ul>\n<strong>注意</strong>：页面无变化可能是您业务的正常场景，请谨慎评估页面实际内容情况后再开启此功能，以免任务提前退出。",
        "example": "<code>5 </code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "BlankCheckInterval",
        "key": "0-8-1",
        "title": "<p>对页面是否白屏的检测间隔。取值范围为<code>[2,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n<ul>\n<li>当连续两次出现检测命中时，将对页面进行刷新，并回调<code>Status=4，Reason=&quot;PageBlank&quot;</code> 。</li>\n<li>再次出现连续两次检测命中时将进行任务重调度，并回调<code>Status=5，Reason=&quot;PageBlank&quot;</code>。</li>\n</ul>\n<strong>注意</strong>：页面全白可能是您业务的正常场景，请谨慎评估页面实际内容情况后再开启此功能，以免任务提前退出。",
        "example": "<code> 5</code>",
        "required": "否",
        "type": "Integer"
      },
      {
        "name": "CrashCheckInterval",
        "key": "0-8-2",
        "title": "<p>对页面 JS 线程是否崩溃/卡死的检测间隔。 取值范围为<code>[0,30]</code>，单位为秒。默认值为<code>0</code>，表示不启用。</p>\n当出现检测命中时将进行任务重调度，并回调 <code>Status=5，Reason=&quot;PageCrash&quot;</code>。",
        "example": "<code>5</code>",
        "required": "否",
        "type": "Integer"
      }
    ]
  },
  {
    "name": "EventNotifyConfig",
    "key": "0-9",
    "title": "页面事件通知配置。若需要避免未载入完成时的不完整页面被采集，可以启用此配置。",
    "example": "<code>-</code>",
    "required": "否",
    "type": "Object",
    "children": [
      {
        "name": "EnableEventNotify",
        "key": "0-9-0",
        "title": "<p>是否启用页面主动事件通知, 默认值为<code>false</code>。</p>\n<ul>\n<li><code>false</code>：页面在打开后就会开始采集，在收到 <code>StopWebCast</code> openAPI 请求后结束采集。</li>\n<li><code>true</code>：在页面中注入两个 JS 函数：<code>onWebcastStart()</code>和 <code>onWebcastEnd()</code>。</li>\n</ul>\n<p>当页面判断资源加载完成之后调用<code> onWebcastStart()</code>，控制程序才会开始进行页面内容的采集。当页面判断本次任务内容已完成时调用<code>onWebcastEnd()</code> 通知控制程序结束本次任务。<code>StopWebCast</code> openAPI 效果不变，业务可提前结束任务。其他页面内容、JS 线程的检测（若启用），将在收到 <code>onWebcastStart()</code>事件后才开始。</p>\n<p>当启用页面主动事件通知后，你可以参考以下示例代码来通知采集开始。</p>\n<pre class=\"hljs\"><code class=\"language-html volc-pre-code\">&lt;script&gt;\n    if (ready() &amp;&amp; typeof onWebcastStart === 'function')\n        onWebcastStart();\n&lt;/script&gt;\n</code></pre>",
        "example": "<code>true</code>",
        "required": "否",
        "type": "Boolean"
      },
      {
        "name": "StartTimeout",
        "key": "0-9-1",
        "title": "<p>启用页面主动事件通知后，等待开始事件的超时时间。取值范围为<code>[0,60]</code>，单位为秒。默认值为<code>0</code>，表示不启用。仅当 <code>EnableEventNotify</code> 为 <code>true</code> 时，此参数有效。</p>\n<ul>\n<li>当在超时时间内收到开始事件，采集功能正常运行，用户将收到 <code>Status=1</code>的回调。</li>\n<li>当超时时间内未收到开始事件，将进行刷新，等待时间被重置，再次发生超时后将进行任务重调度。刷新时将回调 <code>Status=4，Reason=&quot; StartEventTimeout&quot;</code>。重调度时将回调 <code>Status=5，Reason=&quot;StartEventTimeout&quot;</code>。</li>\n</ul>",
        "example": "<code>2</code>",
        "required": "否",
        "type": "Integer"
      }
    ]
  }
];

return (<Table
  defaultExpandAllRows={true}
  columns={columns}
  data={data}
  border={{ cell: true, wrapper: true }}
  pagination={false}
/>);
```
## 返回参数
本接口无特有的返回参数。公共返回参数请见[返回结构](1178322)。
其中返回值 `Result` 仅在请求成功时返回 `ok`,失败时为空。
## 请求示例
```json
POST https://rtc.volcengineapi.com?Action=StartWebcast&Version=2020-12-01
{
    "AppId": "Your_AppId",
    "RoomId": "Your_RoomId",
    "TaskId": "Your_TaskId",
    "UserId": "Your_UserId",
    "SourceURL": "https://xxx.xxx.xxx",
    "VideoSolutions": [
        {
            "Width": 1280,
            "Height": 720,
            "FrameRate": 30
        }
    ],
    "MonitorConfig": {
        "FreezeCheckInterval": 3,
        "BlankCheckInterval": 5,
        "CrashCheckInterval": 5
    },
    "EventNotifyConfig": {
        "EnableEventNotify": false,
        "StartTimeout": 0
    },
    "MaxRunningTime": 60
}
```
## 返回示例
```json
{
    "ResponseMetadata": {
        "RequestId": "Your_RequestId",
        "Action": "StartWebcast",
        "Version": "2020-12-01",
        "Service": "rtc",
        "Region": "cn-north-1"
    },
    "Result": "ok"
}
```

## 错误码
您可访问[公共错误码](https://www.volcengine.com/docs/6348/70426)，获取更多错误码信息。
<div data-source="api-doc-hub" style="display: none"></div>
