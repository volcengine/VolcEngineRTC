---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---

## 3.2.0

该版本于 2024 年 5 月 24 日发布。

### 新增特性

如果你需要区分不同的业务场景，可通过 [`setBusinessId`](78567#setbusinessid) 设置业务 ID，并在控制台配置接收对应的消息回调。此后，你可以接收到关联了这些业务 ID 的通话在微信小程序端触发的消息回调。

## 3.1.1

该版本于 2024 年 2 月 5 日发布。

### 功能优化

[`STREAM_ADDED`](78566#stream-added) 事件可通过新增参数 `e.streamPublishState` 区分远端的音、视频的发布状态。

## 3.1.0

该版本于 2023 年 11 月 15 日发布。

### 新增特性

新增客户端多种事件上报，有助于快速定位错误、解决问题，以及了解应用的性能指标。

### 升级必看

| 变更详情	|  方法	| 备注 |
| --- | --- | --- |
| 参数含义变更 | [`muteLocal`](78567#mutelocal)，[`muteRemote`](78567#muteremote) | 参数 `options` 中，代表每个选项开关的布尔值含义互换。`true` 为禁用，`false` 为启用。  | 

## 3.0.1
该版本于 2023 年 5 月 29 日发布。
### 缺陷修复
修复了 3.0.0 版本中，客户端仅订阅音频/视频无法订阅成功的问题。
## 3.0.0
该版本于 2023 年 3 月 31 日发布。
### 新增特性
1. 如果你希望更多用户通过微信小程序端进入同一房间使用 RTC 服务，使用 [`setUserVisibility`](78567#setuservisibility)，控制房间内的可见用户人数。同一房间内，通过微信小程序端进房的可见用户最多为 8 人，静默用户 2000 人。
2. 监听发布和订阅媒体流的状态改变事件，并进行相应操作。
  - [`UPDATE_URL`](78566#update-url)：在获取到更新后的已发布/订阅媒体流 URL 地址后，将该地址传给 `live-pusher` 或 `live-player`。
  - [`STREAM_FAILED`](78566#stream-failed)：发布/订阅媒体流失败。你可以尝试重新发布/订阅，或者通知用户发布/订阅失败。
### 已知问题
1. 房间内用户到达上限后，用户进房提示失败。同一房间内，通过微信小程序端进房的可见用户最多为 8 人。
2. 可订阅流数到达上限后，用户继续订阅提示失败。通过微信小程序端进房的同一用户最多订阅 8 路媒体流。
3. 通过同一安卓设备的微信小程序端订阅 6 路及以上的媒体流，可能出现推拉流无声、黑屏等异常。为保证用户体验，建议通过安卓设备的微信小程序端进房的用户不要订阅超过 5 路媒体流。
## 2.1.1
该版本于 2022 年 3 月 9 日发布。
### 缺陷修复
修复了一个退房信令问题。
## 2.1.0
该版本于 2022 年 1 月 7 日发布。
### 功能优化
- 小程序 SDK 可以感知推拉流状态。推拉流后，根据业务侧的 `live-pusher` 和 `live-player` 的回调中的 code 判断推拉流状态，并上报到 RTC 服务端。
- 小程序 SDK 可以感知 mute 媒体流操作失败。
## 2.0.0

该版本于 2021 年 11 月 11 日发布。
### 包含功能
*   支持音视频通话与互通直播场景
*   最多支持 8 个视频画面
*   支持微信小程序 SDK 与 客户端 SDK 、Web SDK 之间的双向互通
*   监听远端用户的媒体状态变化并触发相应事件
*   提供收集上、下行媒体流状态和数据的接口，由 SDK 整理后上报给服务器
### 已知问题

经测试，以下问题为微信小程序的固有问题，后续可能随微信小程序版本升级而得到解决：

*   如果用户（iOS）在发布音视频流期间插拔有线耳机，观看该视频流的远端用户此时可能察觉到卡顿。
*   本地订阅远端发布的音视频流，此时调用 muteRemote 暂停接收远端音视频后又恢复，之后本地观看到的远端音视频流可能出现花屏，持续时间约 1 秒。
*   本地订阅远端发布的音视频流，并在媒体流渲染前调用 muteRemote 暂停接收远端音视频，小概率出现设置失败。
*   弱网状态下，音视频播放可能有异常，由于微信小程序环境下媒体流只能使用 RTMP 协议，建议用户切换到更稳定的网络环境后使用，例如连接Wi-Fi。
*   iOS 端微信小程序在多人通信场景下偶现微信小程序异常退出，微信 App 崩溃。
*   音视频或纯语音通话场景下，不建议用户播放背景音乐，可能出现背景音乐卡顿，音量忽高忽低等现象。
