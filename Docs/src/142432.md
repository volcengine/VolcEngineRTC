---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---

## 客户端向业务服务器发送消息

RTC 客户端可以向业务服务器发送文本或二进制消息。可用于客户端向业务服务器同步状态、上报数据等场景。

| 客户端接口 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |
| 设置业务服务器参数 | [`setServerParams`](70080#RTCVideo-setserverparams) | [`setServerParams:url:`](70086#ByteRTCVideo-setserverparams-url) | [`setServerParams:url:`](70092#ByteRTCVideo-setserverparams-url) | [`setServerParams`](70095#IRTCVideo-setserverparams) | [`setServerParams:url:`](70092#ByteRTCVideo-setserverparams-url) | [`setServerParams`](85516#IRTCVideo-setserverparams) | [`setServerParams`](104478#rtcengine-setserverparams) | [`setServerParams`](85532#rtcvideo-setserverparams) | [`setServerParams`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/setServerParams.html) |
| 客户端给业务服务器发送文本消息（P2Server） | [`sendServerMessage`](70080#RTCVideo-sendservermessage) | [`sendServerMessage:`](70086#ByteRTCVideo-sendservermessage) | [`sendServerMessage:`](70092#ByteRTCVideo-sendservermessage) | [`sendServerMessage`](70095#IRTCVideo-sendservermessage) | [`sendServerMessage`](85516#IRTCVideo-sendservermessage) | [`sendServerMessage`](104478#rtcengine-sendservermessage) | [`sendServerMessage`](85532#rtcvideo-sendservermessage) | [`sendServerMessage`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/sendServerMessage.html) | 
| 客户端给业务服务器发送二进制消息（P2Server） | [`sendServerBinaryMessage`](70080#RTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage:`](70086#ByteRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage:`](70092#ByteRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](70095#IRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](85516#IRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](104478#rtcengine-sendserverbinarymessage) | [`sendServerBinaryMessage`](85532#rtcvideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/sendServerBinaryMessage.html) |

客户端通过上述接口成功发送消息后，业务服务器将通过来自 RTC 服务器的 `HTTP`/`HTTPS` `POST` 请求收到消息，示例如下：

```json
{"message":"xxxx","binary":false,"signature":"00160af4c8dcb758d00ce35adb3EQD24BQDeruMYfoMjmEDAGh5ZiAARgps6T5ZgcTz9bw5DewuRkzxBmTgnGEk+ZBv3mW5n58="}
```
以上示例所含字段解释如下：
| 字段名 | 含义	| 类型 | 合法性 |
| --- | --- | --- | --- |
| `message` | 消息内容	| `string` | / |
| `binary` | 是否二进制	| `bool` | 非空 |
| `signature` | 签名包含消息发送用户用于发送实时信令的 `用户 ID`、 `AppID` 信息，用于鉴权	| `string` | 非空 |

## 业务服务器向客户端发送消息

业务服务器可以向已登录或已进房的用户发送消息。可用于业务服务器向客户端同步状态、广播公告等场景。

### 服务端发送房间内点对点消息

业务服务器可以通过 [`SendRoomUnicast`](1164062) 或 [`BatchSendRoomUnicast`](1164064) 接口向房间内指定用户发送文本或二进制消息，已进房用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | Unity |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内点对点文本消息内容| [`onUserMessageReceived`](70081#onusermessagereceived) | [`rtcRoom:onUserMessageReceived:message:`](70087#ByteRTCRoomDelegate-rtcroom-onusermessagereceived-message) | [`rtcRoom:onUserMessageReceived:message:`](70093#ByteRTCRoomDelegate-rtcroom-onusermessagereceived-message) | [`onUserMessageReceived`](70096#IRTCRoomEventHandler-onusermessagereceived) | [`onUserMessageReceived`](85517#IRTCRoomEventHandler-onusermessagereceived) | [`onUserMessageReceived`](104479#engineevents-onusermessagereceived) | [`onUserMessageReceived`](85533#rtcroomcallback-onusermessagereceived) | [`onUserMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onUserMessageReceived.html) | [`OnUserMessageReceivedEventHandler`](191860#onusermessagereceivedeventhandler) |
| 接收到业务服务器发送的房间内点对点二进制消息内容 | [`onUserBinaryMessageReceived`](70081#onuserbinarymessagereceived) | [`rtcRoom:onUserBinaryMessageReceived:message:`](70087#ByteRTCRoomDelegate-rtcroom-onuserbinarymessagereceived-message) | [`rtcRoom:onUserBinaryMessageReceived:message:`](70093#ByteRTCRoomDelegate-rtcroom-onuserbinarymessagereceived-message) | [`onUserBinaryMessageReceived`](70096#IRTCRoomEventHandler-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](85517#IRTCRoomEventHandler-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](104479#engineevents-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](85533#rtcroomcallback-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onUserBinaryMessageReceived.html) | 无 |

### 服务端发送房间内广播消息

业务服务器可以通过 [`SendBroadcast`](1164063) 接口向客户端发送房间内文本或二进制广播消息，已进房用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | Unity |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内文本广播消息内容 | [`onRoomMessageReceived`](70081#IRTCRoomEventHandler-onroommessagereceived) | [`rtcRoom:onRoomMessageReceived:message:`](70087#ByteRTCRoomDelegate-rtcroom-onroommessagereceived-message) | [`rtcRoom:onRoomMessageReceived:message:`](70093#ByteRTCRoomDelegate-rtcroom-onroommessagereceived-message) | [`onRoomMessageReceived`](70096#IRTCRoomEventHandler-onroommessagereceived) | [`onRoomMessageReceived`](85517#IRTCRoomEventHandler-onroommessagereceived) | [`onRoomMessageReceived`](104479#engineevents-onroommessagereceived) | [`onRoomMessageReceived`](85533#rtcroomcallback-onroommessagereceived) | [`onRoomMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onRoomMessageReceived.html) | [`OnRoomMessageReceivedEventHandler`](191860#onroommessagereceivedeventhandler) |
| 接收到业务服务器发送的房间内二进制广播消息内容 | [`onRoomBinaryMessageReceived`](70081#IRTCRoomEventHandler-onroombinarymessagereceived) | [`rtcRoom:onRoomBinaryMessageReceived:message:`](70087#ByteRTCRoomDelegate-rtcroom-onroombinarymessagereceived-message) | [`rtcRoom:onRoomBinaryMessageReceived:message:`](70093#ByteRTCRoomDelegate-rtcroom-onroombinarymessagereceived-message) | [`onRoomBinaryMessageReceived`](70096#IRTCRoomEventHandler-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](85517#IRTCRoomEventHandler-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](104479#engineevents-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](85533#rtcroomcallback-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onRoomBinaryMessageReceived.html) | 无 |


### 服务端发送房间外点对点消息

业务服务器可以通过 [`SendUnicast`](1164061) 接口向房间外指定用户发送文本或二进制消息，已登录用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | 
| --- | --- | --- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内点对点文本消息内容| [`onUserMessageReceivedOutsideRoom`](70081#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`rtcEngine:onUserMessageReceivedOutsideRoom:message:`](70087#ByteRTCVideoDelegate-rtcengine-onusermessagereceivedoutsideroom-message) |[`rtcEngine:onUserMessageReceivedOutsideRoom:message:`](70093#ByteRTCVideoDelegate-rtcengine-onusermessagereceivedoutsideroom-message) | [`onUserMessageReceivedOutsideRoom`](70096#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](85517#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](104479#engineevents-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](85533#rtcvideocallback-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_event_handler/RTCVideoEventHandler/onUserMessageReceivedOutsideRoom.html) |
| 接收到业务服务器发送的房间内点对点二进制消息内容 | [`onUserBinaryMessageReceivedOutsideRoom`](70081#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`rtcEngine:onUserBinaryMessageReceivedOutsideRoom:message:`](70087#ByteRTCVideoDelegate-rtcengine-onuserbinarymessagereceivedoutsideroom-message) | [`rtcEngine:onUserBinaryMessageReceivedOutsideRoom:message:`](70093#ByteRTCVideoDelegate-rtcengine-onuserbinarymessagereceivedoutsideroom-message) | [`onUserBinaryMessageReceivedOutsideRoom`](70096#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](85517#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](104479#engineevents-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](85533#rtcvideocallback-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_event_handler/RTCVideoEventHandler/onUserBinaryMessageReceivedOutsideRoom.html) |
