---
is_dir: False    # True for dir; False for doc
status: 1    # 1 for online; 0 for offline
keywords: 实时音视频    # use ',' as separator
---

## 客户端向业务服务器发送消息

RTC 客户端可以向业务服务器发送文本或二进制消息。可用于客户端向业务服务器同步状态、上报数据等场景。

| 客户端接口 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |
| 设置业务服务器参数 | [`setServerParams`](Android-api#RTCVideo-setserverparams) | [`setServerParams:url:`](iOS-api#ByteRTCVideo-setserverparams-url) | [`setServerParams:url:`](macOS-api#ByteRTCVideo-setserverparams-url) | [`setServerParams`](Windows-api#IRTCVideo-setserverparams) | [`setServerParams:url:`](macOS-api#ByteRTCVideo-setserverparams-url) | [`setServerParams`](Linux-api#IRTCVideo-setserverparams) | [`setServerParams`](Web-api#rtcengine-setserverparams) | [`setServerParams`](Electron-api#rtcvideo-setserverparams) | [`setServerParams`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/setServerParams.html) |
| 客户端给业务服务器发送文本消息（P2Server） | [`sendServerMessage`](Android-api#RTCVideo-sendservermessage) | [`sendServerMessage:`](iOS-api#ByteRTCVideo-sendservermessage) | [`sendServerMessage:`](macOS-api#ByteRTCVideo-sendservermessage) | [`sendServerMessage`](Windows-api#IRTCVideo-sendservermessage) | [`sendServerMessage`](Linux-api#IRTCVideo-sendservermessage) | [`sendServerMessage`](Web-api#rtcengine-sendservermessage) | [`sendServerMessage`](Electron-api#rtcvideo-sendservermessage) | [`sendServerMessage`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/sendServerMessage.html) | 
| 客户端给业务服务器发送二进制消息（P2Server） | [`sendServerBinaryMessage`](Android-api#RTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage:`](iOS-api#ByteRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage:`](macOS-api#ByteRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](Windows-api#IRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](Linux-api#IRTCVideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](Web-api#rtcengine-sendserverbinarymessage) | [`sendServerBinaryMessage`](Electron-api#rtcvideo-sendserverbinarymessage) | [`sendServerBinaryMessage`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_api/RTCVideo/sendServerBinaryMessage.html) |

客户端通过上述接口成功发送消息后，业务服务器将通过来自 RTC 服务器的 `HTTP`/`HTTPS` `POST` 请求收到消息，示例如下：

```json
{"message":"xxxx","binary":false,"signature":"00160af4c8dcb758d00ce35adb3EQD24BQDeruMYfoMjmEDAGh5ZiAARgps6T5ZgcTz9bw5DewuRkzxBmTgnGEk+ZBv3mW5n58="}
```
以上示例所含字段解释如下：
| 字段名 | 含义	| 类型 | 合法性 |
| --- | --- | --- | --- |
| `message` | 消息内容	| `string` | / |
| `binary` | 是否二进制	| `bool` | 非空 |
| `signature` | 签名包含消息发送用户用于发送实时信令的 `用户 ID`、 `AppID` 信息，用于鉴权	| `string` | 非空 |

## 业务服务器向客户端发送消息

业务服务器可以向已登录或已进房的用户发送消息。可用于业务服务器向客户端同步状态、广播公告等场景。

### 服务端发送房间内点对点消息

业务服务器可以通过 [`SendRoomUnicast`](1164062) 或 [`BatchSendRoomUnicast`](1164064) 接口向房间内指定用户发送文本或二进制消息，已进房用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | Unity |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内点对点文本消息内容| [`onUserMessageReceived`](Android-callback#onusermessagereceived) | [`rtcRoom:onUserMessageReceived:message:`](iOS-callback#ByteRTCRoomDelegate-rtcroom-onusermessagereceived-message) | [`rtcRoom:onUserMessageReceived:message:`](macOS-callback#ByteRTCRoomDelegate-rtcroom-onusermessagereceived-message) | [`onUserMessageReceived`](Windows-callback#IRTCRoomEventHandler-onusermessagereceived) | [`onUserMessageReceived`](Linux-callback#IRTCRoomEventHandler-onusermessagereceived) | [`onUserMessageReceived`](Web-event#engineevents-onusermessagereceived) | [`onUserMessageReceived`](Electron-event#rtcroomcallback-onusermessagereceived) | [`onUserMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onUserMessageReceived.html) | [`OnUserMessageReceivedEventHandler`](191860#onusermessagereceivedeventhandler) |
| 接收到业务服务器发送的房间内点对点二进制消息内容 | [`onUserBinaryMessageReceived`](Android-callback#onuserbinarymessagereceived) | [`rtcRoom:onUserBinaryMessageReceived:message:`](iOS-callback#ByteRTCRoomDelegate-rtcroom-onuserbinarymessagereceived-message) | [`rtcRoom:onUserBinaryMessageReceived:message:`](macOS-callback#ByteRTCRoomDelegate-rtcroom-onuserbinarymessagereceived-message) | [`onUserBinaryMessageReceived`](Windows-callback#IRTCRoomEventHandler-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](Linux-callback#IRTCRoomEventHandler-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](Web-event#engineevents-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](Electron-event#rtcroomcallback-onuserbinarymessagereceived) | [`onUserBinaryMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onUserBinaryMessageReceived.html) | 无 |

### 服务端发送房间内广播消息

业务服务器可以通过 [`SendBroadcast`](1164063) 接口向客户端发送房间内文本或二进制广播消息，已进房用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | Unity |
| --- | --- | --- |--- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内文本广播消息内容 | [`onRoomMessageReceived`](Android-callback#IRTCRoomEventHandler-onroommessagereceived) | [`rtcRoom:onRoomMessageReceived:message:`](iOS-callback#ByteRTCRoomDelegate-rtcroom-onroommessagereceived-message) | [`rtcRoom:onRoomMessageReceived:message:`](macOS-callback#ByteRTCRoomDelegate-rtcroom-onroommessagereceived-message) | [`onRoomMessageReceived`](Windows-callback#IRTCRoomEventHandler-onroommessagereceived) | [`onRoomMessageReceived`](Linux-callback#IRTCRoomEventHandler-onroommessagereceived) | [`onRoomMessageReceived`](Web-event#engineevents-onroommessagereceived) | [`onRoomMessageReceived`](Electron-event#rtcroomcallback-onroommessagereceived) | [`onRoomMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onRoomMessageReceived.html) | [`OnRoomMessageReceivedEventHandler`](191860#onroommessagereceivedeventhandler) |
| 接收到业务服务器发送的房间内二进制广播消息内容 | [`onRoomBinaryMessageReceived`](Android-callback#IRTCRoomEventHandler-onroombinarymessagereceived) | [`rtcRoom:onRoomBinaryMessageReceived:message:`](iOS-callback#ByteRTCRoomDelegate-rtcroom-onroombinarymessagereceived-message) | [`rtcRoom:onRoomBinaryMessageReceived:message:`](macOS-callback#ByteRTCRoomDelegate-rtcroom-onroombinarymessagereceived-message) | [`onRoomBinaryMessageReceived`](Windows-callback#IRTCRoomEventHandler-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](Linux-callback#IRTCRoomEventHandler-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](Web-event#engineevents-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](Electron-event#rtcroomcallback-onroombinarymessagereceived) | [`onRoomBinaryMessageReceived`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_room_event_handler/RTCRoomEventHandler/onRoomBinaryMessageReceived.html) | 无 |


### 服务端发送房间外点对点消息

业务服务器可以通过 [`SendUnicast`](1164061) 接口向房间外指定用户发送文本或二进制消息，已登录用户可以通过以下回调接收消息。

| 客户端回调 | Android | iOS | macOS | Windows | Linux | Web | Electron | Flutter | 
| --- | --- | --- |--- |--- |--- |--- |--- |--- |
| 接收到业务服务器发送的房间内点对点文本消息内容| [`onUserMessageReceivedOutsideRoom`](Android-callback#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`rtcEngine:onUserMessageReceivedOutsideRoom:message:`](iOS-callback#ByteRTCVideoDelegate-rtcengine-onusermessagereceivedoutsideroom-message) |[`rtcEngine:onUserMessageReceivedOutsideRoom:message:`](macOS-callback#ByteRTCVideoDelegate-rtcengine-onusermessagereceivedoutsideroom-message) | [`onUserMessageReceivedOutsideRoom`](Windows-callback#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](Linux-callback#IRTCVideoEventHandler-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](Web-event#engineevents-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](Electron-event#rtcvideocallback-onusermessagereceivedoutsideroom) | [`onUserMessageReceivedOutsideRoom`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_event_handler/RTCVideoEventHandler/onUserMessageReceivedOutsideRoom.html) |
| 接收到业务服务器发送的房间内点对点二进制消息内容 | [`onUserBinaryMessageReceivedOutsideRoom`](Android-callback#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`rtcEngine:onUserBinaryMessageReceivedOutsideRoom:message:`](iOS-callback#ByteRTCVideoDelegate-rtcengine-onuserbinarymessagereceivedoutsideroom-message) | [`rtcEngine:onUserBinaryMessageReceivedOutsideRoom:message:`](macOS-callback#ByteRTCVideoDelegate-rtcengine-onuserbinarymessagereceivedoutsideroom-message) | [`onUserBinaryMessageReceivedOutsideRoom`](Windows-callback#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](Linux-callback#IRTCVideoEventHandler-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](Web-event#engineevents-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](Electron-event#rtcvideocallback-onuserbinarymessagereceivedoutsideroom) | [`onUserBinaryMessageReceivedOutsideRoom`](https://pub.dev/documentation/volc_engine_rtc/latest/api_bytertc_video_event_handler/RTCVideoEventHandler/onUserBinaryMessageReceivedOutsideRoom.html) |
