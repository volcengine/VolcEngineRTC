---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
useHub: 1    # 0 by default for using Doc Repo; 1 for using APIHub / SDKHub.
keywords: 实时音视频    # use ',' as separator
---

为了在白板互动中共享文件，你可能需要将文档转为静态图片或动态的 HTML5 页面。通过调用服务端 OpenAPI `WbTranscodeCreate` 发起文档转码任务。<br>
转码的任务处理是异步的，你可以通过 [`WbTranscodeQuery`](1217292) 查询到转码任务完成后，调用 [`WbTranscodeGet`](1217293) 获取转换好的链接集合。

> 调用服务端接口完成文档转码后，你还需要调用客户端接口，将转码后的文档共享到白板房间。文件上传的完整流程参见 [文档上传](https://www.volcengine.com/docs/6348/164753)。

## 接口行为
`WbTranscodeCreate` 发起一个文档转码任务。

- 静态转码：可将 PPT、PPTX、DOC、DOCX、PDF 格式文件转为 PNG、JPG/JPEG 的静态图片。文档中的每个页面转换为一张图片。
- 动态转码：可将 PPT、PPTX 格式文件转换为 HTML5 页面，支持实时交互，动态展示动画或多媒体。对照[动态转码文件要求](https://www.volcengine.com/docs/6348/1119987)检查文件，以确保动态文档转码任务顺利执行。

> - 调用本接口前，你需要先将文件上传到 TOS。
> - 如果你需要对多个文件进行转码，请分别调用 `WbTranscodeCreate` 传入相应的文件和参数设置。

## 前提条件

- 在 RTC 控制台[开通转码服务](https://console.volcengine.com/rtc/cloudRTC?tab=whiteboard)
- 在火山引擎或其他 TOS 服务商开通了 [TOS 服务](https://www.volcengine.com/product/tos)

### 调用接口
关于调用接口的请求结构、公共参数、签名算法和返回结构，参看[调用方法](1178320)。
## 注意事项
请求频率：单用户请求频率限制为 **10 次/秒**。
## 请求说明
- 请求方式：**POST**
- 请求地址：**https://rtc.volcengineapi.com?Action=WbTranscodeCreate&Version=2020-12-01**
## 请求参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
### Query
| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| Action | String | 是 | `WbTranscodeCreate` | 接口名称。当前 API 的名称为 `WbTranscodeCreate`。 |
| Version | String | 是 | `2020-12-01` | 接口版本。当前 API 的版本为 `2020-12-01`。 |
### Body
| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| app_id | String | 是 | `600000000000000000000000` | 应用的唯一标志。你可以通过[控制台](https://console.volcengine.com/rtc/listRTC)查看和复制你的 app\_id。或通过调用 [ListApps](https://www.volcengine.com/docs/6348/74489) 接口获取。 |
| resource | String | 是 | `https://resource.com` | 需要转换为图片的文档链接地址。每次调用接口只能请求处理一份文档。 |
| resource_attr | Object of [Resource_attr](#resource-attr) | 否 | `https://resource.com` | 动态转码文件设置。动态转码必填，静态转码无需填写 |
| operator | String | 是 | `your_user_id` | 用户 ID |
| transcode_config | Object of [Transcode_config](#transcode-config) | 否 | `-` | 转码参数设置 |
| storage_config | Object of [Storage_config](#storage-config) | 否 | `-` | 对象存储属性。使用火山引擎的对象存储服务，且本次传入的参数与控制台设置的属性有差异，则以传入参数为准。 |\
|  |  |  |  | - 使用第三方的对象存储服务：必填 |\
|  |  |  |  | - 使用火山引擎的对象存储服务，并已经在控制台设置了图片存储属性，则此参数选填 |
| transcode_mode | Integer | 否 | `0` | 转码类型 |\
|  |  |  |  | - `0`: 静态转码 |\
|  |  |  |  | - `1`: 动态转码 |\
|  |  |  |  | 默认值为 `0`。 |
| priority | Integer | 否 | `0` | 静态转码的转码优先级 |\
|  |  |  |  | - `0`: 非实时转码 |\
|  |  |  |  | - `1`: 实时转码 |\
|  |  |  |  | 默认值为 `0`。 |
| pre_sign_duration | Integer | 否 | `5000` | 转码成功后返回的 URL 预签名有效期，单位为秒，取值范围为：`[0,604800]`。默认值为 `0`。 |\
|  |  |  |  | `0`表示无限期。为 `0` 时，你需要在 TOS 服务的 bucket 为公共读。 |

### Resource_attr

| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| file_name | String | 是 | `cs.pptx` | 文件名 |
| size | Integer | 是 | `20` | 文件大小，单位：byte |

### Transcode_config

| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| input_format | Integer | 是 | `1` | 输入文件类型 |\
|  |  |  |  | `1`: ppt |\
|  |  |  |  | `2`: pptx |\
|  |  |  |  | `3`: doc |\
|  |  |  |  | `4`: docx |\
|  |  |  |  | `5`: pdf |
| output_format | Integer | 是 | `1` | 输出文件类型 |\
|  |  |  |  | `1`: png |\
|  |  |  |  | `2`: jpg/jpeg |
| force_use_resolution | Boolean | 否 | `false` | 是否按照指定分辨率拉伸页面 |\
|  |  |  |  | 默认为 `false`，按照文件的原始宽高比适配指定分辨率。 |
| output_width | Integer | 是 | `1080` | 转码后的页面宽度，单位为像素 |
| output_height | Integer | 是 | `720` | 转码后的页面高度，单位为像素 |
| thumbnail | Boolean | 否 | `false` | 是否生成缩略图，默认为 `false` |
| thumbnail_width | Integer | 否 | `320` | 缩略图分辨率宽，默认为 `320` |
| thumbnail_height | Integer | 否 | `180` | 缩略图分辨率高，默认为 `180` |

### Storage_config

| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| type | Integer | 是 | `0` | 存储类型 |\
|  |  |  |  | 【默认值】`0`: Tos |\
|  |  |  |  | `1`: 第三方对象存储接口，支持阿里云和亚马逊 |
| tos_config | Object of [Tos_config](#tos-config) | 否 | `-` | 火山引擎的对象存储服务参数设置 |
| custom_config | Object of [Custom_config](#custom-config) | 否 | `-` | 第三方对象存储服务参数设置 |

### Tos_config

| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| account_id | String | 是 | `xxx` | Bucket 所属的火山引擎账号 ID。在登录火山引擎后，可在头像的悬浮菜单中找到**账号 ID**。 |\
|  |  |  |  | ![](https://portal.volccdn.com/obj/volcfe/cloud-universal-doc/upload_0819c44c6aadff358a7dfc52c5daab57.png) |
| region | Integer | 是 | `0` | - 0： cn-beijing，华北 2（北京） |\
|  |  |  |  | - 1：cn-guangzhou，华南 1（广州） |\
|  |  |  |  | - 2：cn-shanghai，华东 2（上海） |
| bucket | String | 是 | `xxx` | 桶名称。登录 [TOS 控制台](https://console.volcengine.com/tos/bucket) 开通和获取。 |

### Custom_config

| 参数 | 类型 | 是否必选 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- | ---- |
| vendor | Integer | 是 | `0` | 第三方存储供应商 |\
|  |  |  |  | `0`: Amazon 亚马逊 |\
|  |  |  |  | `1`: Alicloud 阿里云 |
| region | Integer | 是 |  | 不同存储平台支持的 Region 不同，具体参看 [Region对照表](1217553) |
| bucket | String | 是 |  | 桶名称 |
| access_key | String | 是 |  | Access Key |
| secret_key | String | 是 |  | Secret Key |\
|  |  |  |  | AK/SK建议只开通写权限，关闭读权限。 |
## 返回参数
下表仅列出该接口特有的请求参数和部分公共参数。更多信息请见[公共参数](1178321)。
| 参数 | 类型 | 示例值 | 描述 |
| ---- | ---- | ---- | ---- |
| task_id | String | `xxx` | task_id 为查询任务进度和获取转码后链接的必填参数 |
## 请求示例
```json
POST https://rtc.volcengineapi.com?Action=WbTranscodeCreate&Version=2020-12-01
{
    "app_id":"600000000000000000000000",
    "oprator":"your_user_id",
    "resource":"https://resource.com",
    "priority":0,
    "transcode_config":{
        "input_format":1,
        "output_format":1,
        "output_width":1080,
        "output_height":720
    },
    "storage_config":{
        "type":0,
        "tos_config":{
            "account_id":"xxx",
            "region":0,
            "bucket":"xxx"
        }
    }
}
```
## 返回示例
```json
{
    "ResponseMetadata": {
        "RequestId": "your_request_id",
        "Service": "rtc",
        "Region": "cn-north-1",
        "Action": "WbTranscodeCreate",
        "Version": "2020-12-01"
    },
    "Result": {
        "task_id": "xxx"
    }
}
```

## 错误码
您可访问[公共错误码](https://www.volcengine.com/docs/6348/70426)，获取更多错误码信息。
