## veRTCRoom

类型: `class`

- **API**

  | 名称 | 描述 |
  | -- | -- |
  | [createRTCRoom()](#creatertcroom) | 创建房间实例 |
  | [getRoomId()](#getroomid) | 获取房间 ID |
  | [destroy()](#destroy) | 退出并销毁房间。 |
  | [joinRoom()](#joinroom) | 加入房间。 |
  | [leaveRoom()](#leaveroom) | 离开房间。 |
  | [setUserVisibility()](#setuservisibility) | 设置用户可见性。默认可见。 |
  | [setMultiDeviceAVSync()](#setmultideviceavsync) | 设置发流端音画同步。 |
  | [updateToken()](#updatetoken) | 更新 Token。 |
  | [setRemoteVideoConfig()](#setremotevideoconfig) | 设置期望订阅的远端视频流的参数。 |
  | [publishStream()](#publishstream) | 在当前所在房间内发布本地通过摄像头/麦克风采集的媒体流 |
  | [unpublishStream()](#unpublishstream) | 停止将本地摄像头/麦克风采集的媒体流发布到当前所在房间中 |
  | [publishScreen()](#publishscreen) | 在当前所在房间内发布本地屏幕共享音视频流 |
  | [unpublishScreen()](#unpublishscreen) | 停止将本地屏幕共享音视频流发布到当前所在房间中 |
  | [subscribeStream()](#subscribestream) | 订阅房间内指定的通过摄像头/麦克风采集的媒体流，或更新对指定远端用户的订阅选项 |
  | [unsubscribeStream()](#unsubscribestream) | 取消订阅房间内指定的通过摄像头/麦克风采集的媒体流。该方法对自动订阅和手动订阅模式均适用。 |
  | [subscribeScreen()](#subscribescreen) | 订阅房间内指定的远端屏幕共享音视频流，或更新对指定远端用户的订阅选项 |
  | [unsubscribeScreen()](#unsubscribescreen) | 取消订阅房间内指定的远端屏幕共享音视频流。<br>该方法对自动订阅和手动订阅模式均适用。 |
  | [pauseAllSubscribedStream()](#pauseallsubscribedstream) | 暂停接收来自远端的媒体流。 |
  | [resumeAllSubscribedStream()](#resumeallsubscribedstream) | 恢复接收来自远端的媒体流 |
  | [sendUserMessage()](#sendusermessage) | 给房间内指定的用户发送点对点文本消息 |
  | [sendUserBinaryMessage()](#senduserbinarymessage) | 给房间内指定的用户发送点对点二进制消息。 |
  | [sendRoomMessage()](#sendroommessage) | 给房间内的所有其他用户群发文本消息。 |
  | [sendRoomBinaryMessage()](#sendroombinarymessage) | 给房间内的所有其他用户群发二进制消息。 |
  | [startForwardStreamToRooms()](#startforwardstreamtorooms) | 开始跨房间转发媒体流。 |
  | [updateForwardStreamToRooms()](#updateforwardstreamtorooms) | 更新跨房间媒体流转发信息。 |
  | [stopForwardStreamToRooms()](#stopforwardstreamtorooms) | 停止跨房间媒体流转发。 |
  | [pauseForwardStreamToAllRooms()](#pauseforwardstreamtoallrooms) | 暂停跨房间媒体流转发。 |
  | [resumeForwardStreamToAllRooms()](#resumeforwardstreamtoallrooms) | 恢复跨房间媒体流转发。 |
  | [enableRangeAudio()](#enablerangeaudio) | 开启/关闭范围语音功能。 |
  | [updateReceiveRange()](#updatereceiverange) | 更新本地用户的音频收听范围。 |
  | [updateRangePosition()](#updaterangeposition) | 更新本地用户在房间内空间直角坐标系中的位置坐标。 |
  | [registerRangeAudioObserver()](#registerrangeaudioobserver) | 设置范围语音衰减系数监测器。 |
  | [setAttenuationModel()](#setattenuationmodel) | 设置范围语音的音量衰减模式。 |
  | [enableSpatialAudio()](#enablespatialaudio) | 开启/关闭空间音频功能。 |
  | [updateSpatialPosition()](#updatespatialposition) | 更新本地用户在房间内空间直角坐标系中的位置坐标。 |
  | [updateSelfOrientation()](#updateselforientation) | 更新本地用户在空间音频坐标系下的朝向。 |
  | [disableRemoteOrientation()](#disableremoteorientation) | 参与通话的各端调用本接口后，将忽略远端用户的朝向，认为所有远端用户都面向本地用户。 |


### new veRTCRoom()

### createRTCRoom()

创建房间实例

- **类型**

  ```ts
  (room_id: string) => 0 | -1
  ```

- **注意**

  + 调用此方法仅返回一个房间实例，你仍需调用 [joinRoom](#joinroom) 才能真正地创建/加入房间。
  + 多次调用此方法以创建多个 RTCRoom 实例。分别调用各 RTCRoom 实例中的 [joinRoom](#joinroom) 方法，同时加入多个房间。
  + 多房间模式下，用户可以同时订阅各房间的音视频流。
  + 如果需要加入的房间已存在，你仍需先调用本方法来获取 RTCRoom 实例，再调用 [joinRoom](#joinroom) 加入房间。
  + 多房间模式下，创建多个房间实例需要使用不同的 roomId，否则新创建的房间实例会替换旧房间实例。
  + 如果你需要在多个房间发布音视频流，无须创建多房间，直接调用 [startForwardStreamToRooms](#startforwardstreamtorooms) 开始跨房间转发媒体流。

- **参数**

  - **room_id**

    类型: <code>string</code>

    标识通话房间的房间 ID，最大长度为 128 字节的非空字符串。支持的字符集范围为:<br>• 26个大写字母 A ~ Z<br>• 26个小写字母 a ~ z<br>• 10个数字 0 ~ 9<br>• 下划线 "_", at 符 "@", 减号 "-"<br>多房间模式下，调用创建房间接口后，请勿调用同样的 roomID 创建房间，否则会导致创建房间失败。

- **返回值**

  + `0`: 成功
  + `-1`: 失败

### getRoomId()

获取房间 ID

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  房间 ID

### destroy()

退出并销毁房间。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  关于创建房间，参见 [createRTCRoom](#creatertcroom)。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### joinRoom()

加入房间。

- **类型**

  ```ts
  (token: string, user_info: UserInfo, config: RTCRoomConfig) => number
  ```

- **注意**

  + 多房间场景下，调用 [createRTCRoom](#creatertcroom) 创建房间后，调用此方法加入房间，同房间内其他用户进行音视频通话。
  + 同一个 App ID 的同一个房间内，每个用户的用户 ID 必须是唯一的。如果两个用户的用户 ID 相同，则后进房的用户会将先进房的用户踢出房间，并且先进房的用户会收到 [onError](85533#onerror) 回调通知，错误类型详见 [ErrorCode](85534.md#errorcode) 中的 kErrorCodeDuplicateLogin。
  + 本地用户调用此方法加入房间成功后，会收到 [onRoomStateChanged](85533.md#onroomstatechanged) 回调通知。
  + 本地用户调用 [setUserVisibility](#setuservisibility) 将自身设为可见后加入房间，远端用户会收到 [onUserJoined](85533.md#onuserjoined) 回调通知。
  + 用户加入房间成功后，在本地网络状况不佳的情况下，SDK 可能会与服务器失去连接，此时 SDK 将会自动重连。重连成功后，本地会收到 [onRoomStateChanged](85533.md#onroomstatechanged) 回调通知；如果加入房间的用户是主播角色，远端用户会收到 [onUserJoined](#onuserjoined) 回调通知。

- **参数**

  - **token**

    类型: <code>string</code>

    动态密钥。用于对进房用户进行鉴权验证。<br>进入房间需要携带 Token。测试时可使用控制台生成临时 Token，正式上线需要使用密钥 SDK 在你的服务端生成并下发 Token。<br>使用不同 AppID 的 App 是不能互通的。<br>请务必保证生成 Token 使用的 AppID 和创建引擎时使用的 AppID 相同，否则会导致加入房间失败。

  - **user_info**

    类型: <code>UserInfo</code>

    用户信息

  - **config**

    类型: <code>[RTCRoomConfig](85535.md#rtcroomconfig)</code>

    房间参数配置，设置房间模式以及是否自动发布或订阅流。

- **返回值**

  类型: <code>number</code>

  + 0：方法调用成功。
  + -1：roomID / userInfo.uid 包含了无效的参数。
  + -2：已经在房间内。接口调用成功后，只要收到返回值为 0 ，且未调用 [leaveRoom](#leaveroom) 成功，则再次调用进房接口时，无论填写的房间 ID 和用户 ID 是否重复，均触发此返回值。
  + -3：room 为空。

### leaveRoom()

离开房间。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 用户调用此方法离开房间，结束通话过程，释放所有通话相关的资源。
  + 调用 [joinRoom](#joinroom) 方法加入房间后，必须调用此方法结束通话，否则无法开始下一次通话。无论当前是否在房间内，都可以调用此方法。重复调用此方法没有负面影响。
  + 此方法是异步操作，调用返回时并没有真正退出房间。真正退出房间后，本地会收到 [onLeaveRoom](85533.md#onleaveroom) 回调通知。+ 调用 [setUserVisibility](#rtcroom#setuservisibility) 将自身设为可见的用户离开房间后，房间内其他用户会收到 [onUserLeave](85533.md#onuserleave) 回调通知。
  + 如果调用此方法后立即销毁引擎，SDK 将无法触发 [onLeaveRoom](85533.md#onleaveroom) 回调。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### setUserVisibility()

设置用户可见性。默认可见。

- **类型**

  ```ts
  (enable: Boolean) => number
  ```

- **注意**

  + 在加入房间前后，用户均可调用此方法设置用户可见性。
  + 在房间内，调用此方法成功切换用户可见性后，房间内其他用户会收到相应的回调通知：
      - 从可见换至不可见时，房间内其他用户会收到 [onUserJoined](85533.md#onuserjoined)；
      - 从不可见切换至可见时，房间内其他用户会收到 [onLeaveRoom](85533.md#onleaveroom) 。
  + 若调用该方法将可见性设为 false，此时尝试发布流会收到 `WARNING_CODE_PUBLISH_STREAM_FORBIDEN` 警告。

- **参数**

  - **enable**

    类型: <code>Boolean</code>

    设置用户是否对房间内其他用户可见：<br>+ true: 可以在房间内发布音视频流，房间中的其他用户将收到用户的行为通知，例如进房、开启视频采集和退房。<br>+ false: 不可以在房间内发布音视频流，房间中的其他用户不会收到用户的行为通知，例如进房、开启视频采集和退房。

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + < 0: 方法调用失败

### setMultiDeviceAVSync()

设置发流端音画同步。

- **类型**

  ```ts
  (audio_user_id: string) => number
  ```

- **注意**

  + 当同一用户同时使用两个通话设备分别采集发送音频和视频时，有可能会因两个设备所处的网络环境不一致而导致发布的流不同步，此时你可以在视频发送端调用该接口，SDK 会根据音频流的时间戳自动校准视频流，以保证接收端听到音频和看到视频在时间上的同步性。
  + 该方法在进房前后均可调用。
  + 进行音画同步的音频发布用户 ID 和视频发布用户 ID 须在同一个 RTC 房间内。
  + 调用该接口后音画同步状态发生改变时，你会收到 [onAVSyncStateChange](#onavsyncstatechange) 回调。
  + 同一 RTC 房间内允许存在多个音视频同步关系，但需注意单个音频源不支持与多个视频源同时同步。
  + 如需更换同步音频源，再次调用该接口传入新的 `audioUserId` 即可；如需更换同步视频源，需先解除当前的同步关系，后在新视频源端开启同步。

- **参数**

  - **audio_user_id**

    类型: <code>string</code>

    音频发送端的用户 ID，将该参数设为空则可解除当前音视频的同步关系。

- **返回值**

  类型: <code>number</code>

  方法调用结果：

  + 0：成功
  + !0：失败

### updateToken()

更新 Token。

- **类型**

  ```ts
  (token: string) => number
  ```

- **注意**

  + 如果传入的 Token 无效，回调错误码为 [ErrorCode](85534.md#errorcode) 中的 `ERROR_CODE_UPDATE_TOKEN_WITH_INVALID_TOKEN`。
  + 当 Token 过期时，用户将被移出房间并将收到 [onStreamStateChanged](85533.md#onstreamstatechanged) 回调，错误码为 `ERROR_CODE_EXPIRED_TOKEN`，此时需要重新获取 Token，并调用 [joinRoom](#joinroom) 重新加入房间。
  + 用于加入房间的 Token 有一定的有效期。在 Token 过期前 30 秒，会收到 [onTokenWillExpire](#ontokenwillexpire) 回调，此时需要重新获取 Token，并调用此方法更新 Token，否则用户将因为 Token 过期被移出房间。
  + 调用 [joinRoom](#joinroom) 方法加入房间或断网重连进入房间时，如果 Token 过期或无效，将导致加入房间失败，并会收到 [onRoomStateChanged](#onRoomStateChanged) 回调通知，回调错误码为 [ErrorCode](85534.md#errorcode) 中的 `ERROR_CODE_INVALID_TOKEN`。此时需要重新获取 Token，并调用此方法更新 Token。

- **参数**

  - **token**

    类型: <code>string</code>

    获取的新的有效 Token。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### setRemoteVideoConfig()

设置期望订阅的远端视频流的参数。

- **类型**

  ```ts
  (user_id: string, remote_video_config: RemoteVideoConfig) => number
  ```

- **注意**

  + 若使用 1.5.0 及以前版本的 SDK，调用该方法前请联系技术支持人员通过配置下发开启按需订阅功能。
  + 该方法仅在发布端调用 [enableSimulcastMode](#enablesimulcastmode) 开启了发送多路视频流的情况下生效，此时订阅端将收到来自发布端与期望设置的参数最相近的一路流；否则订阅端只会收到一路参数为分辨率 640px × 360px、帧率 15fps 的视频流。
  + 若发布端开启了推送多路流功能，但订阅端不对流参数进行设置，则默认接受发送端设置的分辨率最大的一路视频流。
  + 该方法需在进房后调用，若想进房前设置，你需调用 [joinRoom](#joinroom)，并对 `roomConfig` 中的 `remoteVideoConfig` 进行设置。
  + SDK 会根据发布端和所有订阅端的设置灵活调整视频流的参数，具体调整策略详见[推送多路流](https://www.volcengine.com/docs/6348/70139)文档。

- **参数**

  - **user_id**

    类型: <code>string</code>

    期望订阅的远端视频流发布用户的 ID。

  - **remote_video_config**

    类型: <code>[RemoteVideoConfig](85535.md#remotevideoconfig)</code>

    期望订阅的远端视频流参数

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### publishStream()

在当前所在房间内发布本地通过摄像头/麦克风采集的媒体流

- **类型**

  ```ts
  (type: MediaStreamType) => number
  ```

- **注意**

  + 如果你已经在用户进房时通过调用 [joinRoom](#joinroom) 成功选择了自动发布，则无需再调用本接口。
  + 调用 [setUserVisibility](#rtcroom#setuservisibility) 方法将自身设置为不可见后无法调用该方法，需将自身切换至可见后方可调用该方法发布摄像头音视频流。
  + 如果你需要发布屏幕共享流，调用 [publishScreen](#publishscreen)。
  + 如果你需要向多个房间发布流，调用 [startForwardStreamToRooms](#startforwardstreamtorooms)。
  + 调用此方法后，房间中的所有远端用户会收到 [onUserPublishStream](85533.md#onuserpublishstream) 回调通知，其中成功收到了音频流的远端用户会收到 [onFirstRemoteAudioFrame](85533.md#onFirstRemoteAudioFrame) 回调，订阅了视频流的远端用户会收到 [onFirstRemoteVideoFrameDecoded](#onfirstremotevideoframedecoded) 回调。
  + 调用 [unpublishStream](#unpublishstream) 取消发布。

- **参数**

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定发布音频/视频

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### unpublishStream()

停止将本地摄像头/麦克风采集的媒体流发布到当前所在房间中

- **类型**

  ```ts
  (type: MediaStreamType) => number
  ```

- **注意**

  + 调用 [publishStream](#publishstream) 手动发布摄像头音视频流后，你需调用此接口停止发布。
  + 调用此方法停止发布音视频流后，房间中的其他用户将会收到 [onUserUnpublishStream](85533.md#onuserunpublishstream) 回调通知。

- **参数**

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定停止发布音频/视频

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### publishScreen()

在当前所在房间内发布本地屏幕共享音视频流

- **类型**

  ```ts
  (type: MediaStreamType) => number
  ```

- **注意**

  + 即使你已经在用户进房时通过调用 [joinRoom](#joinroom) 成功选择了自动发布，也需要调用本接口发布屏幕流。
  + 调用 [setUserVisibility](#rtcroom#setuservisibility) 方法将自身设置为不可见后无法调用该方法，需将自身切换至可见后方可调用该方法发布屏幕流。
  + 调用该方法后，房间中的所有远端用户会收到 [onUserPublishScreen](85533.md#onuserpublishscreen) 回调，其中成功收到音频流的远端用户会收到 [onFirstRemoteAudioFrame](85533.md#onFirstRemoteAudioFrame) 回调，订阅了视频流的远端用户会收到 [onFirstRemoteVideoFrameDecoded](#onfirstremotevideoframedecoded) 回调。
  + 如果你需要向多个房间发布流，调用 [startForwardStreamToRooms](#startforwardstreamtorooms)。
  + 调用 [unpublishScreen](#unpublishscreen) 取消发布。

- **参数**

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定发布屏幕音频/视频

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### unpublishScreen()

停止将本地屏幕共享音视频流发布到当前所在房间中

- **类型**

  ```ts
  (type: MediaStreamType) => number
  ```

- **注意**

  + 调用 [publishScreen](#publishscreen) 发布屏幕流后，你需调用此接口停止发布。
  + 调用此方法停止发布屏幕音视频流后，房间中的其他用户将会收到 [onUserUnpublishScreen](85533.md#onUserUnpublishScreen) 回调。

- **参数**

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定停止发布屏幕音频/视频

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### subscribeStream()

订阅房间内指定的通过摄像头/麦克风采集的媒体流，或更新对指定远端用户的订阅选项

- **类型**

  ```ts
  (user_id: string, type: MediaStreamType) => number
  ```

- **注意**

  + 当调用本接口时，当前用户已经订阅该远端用户，不论是通过手动订阅还是自动订阅，都将根据本次传入的参数，更新订阅配置。
  + 你必须先通过 [onUserPublishStream](85533.md#onuserpublishstream) 回调获取当前房间里的远端摄像头音视频流信息，然后调用本方法按需订阅。
  + 调用该方法后，你会收到 [onStreamSubscribed](85533.md#onstreamsubscribed) 通知方法调用结果。
  + 成功订阅远端用户的媒体流后，订阅关系将持续到调用 [unsubscribeStream](#unsubscribestream) 取消订阅或本端用户退房。
  + 关于其他调用异常，你会收到 [onStreamStateChanged](85533#onstreamstatechanged) 回调通知，具体异常原因参看 [ErrorCode](85534.md#errorcode)。

- **参数**

  - **user_id**

    类型: <code>string</code>

    指定订阅的远端发布音视频流的用户 ID。

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定订阅音频/视频。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### unsubscribeStream()

取消订阅房间内指定的通过摄像头/麦克风采集的媒体流。该方法对自动订阅和手动订阅模式均适用。

- **类型**

  ```ts
  (user_id: string, type: MediaStreamType) => number
  ```

- **注意**

  + 调用该方法后，你会收到 [onStreamSubscribed](#onstreamsubscribed) 通知流的退订结果。
  + 关于其他调用异常，你会收到 [onStreamStateChanged](85533#onstreamstatechanged) 回调通知，具体失败原因参看 [ErrorCode](85534.md#errorcode)。

- **参数**

  - **user_id**

    类型: <code>string</code>

    指定取消订阅的远端发布音视频流的用户 ID。

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定取消订阅音频/视频。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### subscribeScreen()

订阅房间内指定的远端屏幕共享音视频流，或更新对指定远端用户的订阅选项

- **类型**

  ```ts
  (user_id: string, type: MediaStreamType) => number
  ```

- **注意**

  + 当调用本接口时，当前用户已经订阅该远端用户，不论是通过手动订阅还是自动订阅，都将根据本次传入的参数，更新订阅配置。
  + 你必须先通过 [onUserPublishScreen](#onuserpublishscreen) 回调获取当前房间里的远端屏幕流信息，然后调用本方法按需订阅。
  + 调用该方法后，你会收到 [onStreamSubscribed](#onstreamsubscribed) 通知流的订阅结果。
  + 成功订阅远端用户的媒体流后，订阅关系将持续到调用 [unsubscribeScreen](#unsubscribescreen) 取消订阅或本端用户退房。
  + 关于其他调用异常，你会收到 [onStreamStateChanged](85533#onstreamstatechanged) 回调通知，具体异常原因参看 [ErrorCode](85534.md#errorcode)。

- **参数**

  - **user_id**

    类型: <code>string</code>

    指定订阅的远端发布屏幕流的用户 ID。

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定订阅音频/视频。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### unsubscribeScreen()

取消订阅房间内指定的远端屏幕共享音视频流。<br>该方法对自动订阅和手动订阅模式均适用。

- **类型**

  ```ts
  (user_id: string, type: MediaStreamType) => number
  ```

- **注意**

  + 调用该方法后，你会收到 [onStreamSubscribed](#onstreamsubscribed) 通知流的退订结果。
  + 关于其他调用异常，你会收到 [onStreamStateChanged](85533#onstreamstatechanged) 回调通知，具体失败原因参看 [ErrorCode](85534.md#errorcode)。

- **参数**

  - **user_id**

    类型: <code>string</code>

    指定取消订阅的远端发布屏幕流的用户 ID。

  - **type**

    类型: <code>[MediaStreamType](85535.md#mediastreamtype)</code>

    媒体流类型，用于指定取消订阅音频/视频。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### pauseAllSubscribedStream()

暂停接收来自远端的媒体流。

- **类型**

  ```ts
  (media_type: PauseResumeControlMediaType) => number
  ```

- **注意**

  + 该方法仅暂停远端流的接收，并不影响远端流的采集和发送；
  + 该方法不改变用户的订阅状态以及订阅流的属性。
  + 若想恢复接收远端流，需调用 [resumeAllSubscribedStream](#resumeallsubscribedstream)。
  + 多房间场景下，仅暂停接收发布在当前所在房间的流。

- **参数**

  - **media_type**

    类型: <code>[PauseResumeControlMediaType](85535.md#pauseresumecontrolmediatype)</code>

    媒体流类型，指定需要暂停接收音频还是视频流，参看 [pauseResumeControlMediaType](#pauseresumecontrolmediatype)。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### resumeAllSubscribedStream()

恢复接收来自远端的媒体流

- **类型**

  ```ts
  (media_type: PauseResumeControlMediaType) => number
  ```

- **注意**

  + 该方法仅恢复远端流的接收，并不影响远端流的采集和发送；
  + 该方法不改变用户的订阅状态以及订阅流的属性。

- **参数**

  - **media_type**

    类型: <code>[PauseResumeControlMediaType](85535.md#pauseresumecontrolmediatype)</code>

    媒体流类型，指定需要暂停接收音频还是视频流，参看 [pauseResumeControlMediaType](#pauseresumecontrolmediatype)

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### sendUserMessage()

给房间内指定的用户发送点对点文本消息

- **类型**

  ```ts
  (uid: string, message: string, config: MessageConfig) => number
  ```

- **注意**

  + 在发送房间内文本消息前，必须先调用 [joinRoom](#joinroom) 加入房间。
  + 调用后，会收到 [onUserMessageSendResult](85533.md#onUserMessageSendResult) 回调，通知消息发送成功或失败；
  + 若消息发送成功，则 userId 所指定的用户会收到 [onUserMessageReceived](85533.md#onusermessagereceived) 回调。

- **参数**

  - **uid**

    类型: <code>string</code>

    消息接收用户的 ID

  - **message**

    类型: <code>string</code>

    发送的文本消息内容<br>消息不超过 64 KB。

  - **config**

    类型: <code>[MessageConfig](85535.md#messageconfig)</code>

    消息发送的可靠/有序类型

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### sendUserBinaryMessage()

给房间内指定的用户发送点对点二进制消息。

- **类型**

  ```ts
  (uid: string, length: number, message: Uint8Array, config: MessageConfig) => number
  ```

- **注意**

  + 在发送房间内二进制消息前，必须先调用 [joinRoom](#joinroom) 加入房间。
  + 调用后，会收到 [onUserMessageSendResult](85533.md#onUserMessageSendResult) 回调，通知消息发送成功或失败；
  + 若消息发送成功，则 userId 所指定的用户会收到 [onUserBinaryMessageReceived](#onuserbinarymessagereceived) 回调。

- **参数**

  - **uid**

    类型: <code>string</code>

    消息接收用户的 ID

  - **length**

    类型: <code>number</code>

    二进制字符串的长度

  - **message**

    类型: <code>Uint8Array</code>

    发送的二进制消息内容<br>消息不超过 64KB。

  - **config**

    类型: <code>[MessageConfig](85535.md#messageconfig)</code>

    消息类型

- **返回值**

  类型: <code>number</code>

  + > `0`: 成功。这次发送消息的编号，从 1 开始递增。
  + `-1`: 失败

### sendRoomMessage()

给房间内的所有其他用户群发文本消息。

- **类型**

  ```ts
  (message: string) => number
  ```

- **注意**

  + 在房间内广播文本消息前，必须先调用 [joinRoom](#joinroom) 加入房间。
  + 调用后，会收到 [onRoomMessageSendResult](85533.md#onroommessagesendresult) 回调；
  + 同一房间内的其他用户会收到 [onRoomMessageReceived](85533.md#onroommessagereceived) 回调。

- **参数**

  - **message**

    类型: <code>string</code>

    发送的文本消息内容<br>消息不超过 64 KB。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功。这次发送消息的编号，从 1 开始递增。
  + `-1`: 失败

### sendRoomBinaryMessage()

给房间内的所有其他用户群发二进制消息。

- **类型**

  ```ts
  (size: number, message: Uint8Array) => number
  ```

- **注意**

  + 在房间内广播二进制消息前，必须先调用 [joinRoom](#joinroom) 加入房间。
  + 调用后，会收到 [onRoomMessageSendResult](85533.md#onroommessagesendresult) 回调；
  + 同一房间内的其他用户会收到 [onRoomBinaryMessageReceived](85533.md#onroombinarymessagereceived) 回调。

- **参数**

  - **size**

    类型: <code>number</code>

    发送的二进制消息长度

  - **message**

    类型: <code>Uint8Array</code>

    发送的二进制消息内容，消息不超过 46 KB。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功。这次发送消息的编号，从 1 开始递增。
  + `-1`: 失败

### startForwardStreamToRooms()

开始跨房间转发媒体流。

- **类型**

  ```ts
  (configuration: ForwardStreamConfiguration) => number
  ```

- **注意**

  + 在用户进入房间后调用本接口，实现向多个房间转发媒体流，适用于跨房间连麦等场景。
  + 调用本方法后，将在本端触发 [onForwardStreamStateChanged](85533.md#onForwardStreamStateChanged) 回调。
  + 调用本方法后，你可以通过监听 [onForwardStreamEvent](#onforwardstreamevent) 回调来获取各个目标房间在转发媒体流过程中的相关事件。
  + 开始转发后，目标房间中的用户将接收到本地用户进房 [onUserJoined](85533.md#onuserjoined) 和发流 [onUserPublishStream](85533.md#onuserpublishstream) / [onUserPublishScreen](#onuserpublishscreen) 的回调。
  + 调用本方法后，可以调用 [updateForwardStreamToRooms](#updateforwardstreamtorooms) 更新目标房间信息，例如，增加或减少目标房间等。
  + 调用本方法后，可以调用 [stopForwardStreamToRooms](#stopforwardstreamtorooms) 停止向所有房间转发媒体流。
  + 调用本方法后，可以调用 [pauseForwardStreamToAllRooms](#pauseforwardstreamtoallrooms) 暂停向所有房间转发媒体流。

- **参数**

  - **configuration**

    类型: <code>[ForwardStreamConfiguration](85535.md#forwardstreamconfiguration)</code>

    跨房间媒体流转发指定房间的信息。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### updateForwardStreamToRooms()

更新跨房间媒体流转发信息。

- **类型**

  ```ts
  (configuration: ForwardStreamConfiguration) => number
  ```

- **注意**

  + 通过 [startForwardStreamToRooms](#startforwardstreamtorooms) 发起媒体流转发后，可调用本方法增加或者减少目标房间，或更新房间密钥。
  + 调用本方法增加或删减房间后，将在本端触发 [onForwardStreamStateChanged](85533.md#onForwardStreamStateChanged) 回调，包含发生了变动的目标房间中媒体流转发状态。
  + 增加目标房间后，新增目标房间中的用户将接收到本地用户进房 [onUserJoined](#onuserjoined) 和发布 [onUserPublishStream](85533.md#onuserpublishstream)/ [onUserPublishScreen](85533.md#onuserpublishscreen) 的回调。
  + 删减目标房间后，原目标房间中的用户将接收到本地用户停止发布 [onUserUnpublishStream](85533.md#onuserunpublishstream) / [onUserUnpublishScreen](85533.md#onUserUnpublishScreen) 和退房 [onUserLeave](85533.md#onuserleave) 的回调。

- **参数**

  - **configuration**

    类型: <code>[ForwardStreamConfiguration](85535.md#forwardstreamconfiguration)</code>

    跨房间媒体流转发目标房间信息。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### stopForwardStreamToRooms()

停止跨房间媒体流转发。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 通过 [startForwardStreamToRooms](#startforwardstreamtorooms) 发起媒体流转发后，可调用本方法停止向所有目标房间转发媒体流。
  + 调用本方法后，将在本端触发 [onForwardStreamStateChanged](85533.md#onForwardStreamStateChanged) 回调。
  + 调用本方法后，原目标房间中的用户将接收到本地用户停止发布 [onUserUnpublishStream](85533.md#onuserunpublishstream) / [onUserUnpublishScreen](85533.md#onUserUnpublishScreen) 和退房 [onUserLeave](85533.md#onuserleave) 的回调。
  + 如果需要停止向指定的房间转发媒体流，请调用 [updateForwardStreamToRooms](#updateforwardstreamtorooms) 更新房间信息。
  + 如果需要暂停转发，请调用 [pauseForwardStreamToAllRooms](#pauseforwardstreamtoallrooms)，并在之后随时调用 resumeForwardStreamToAllRooms(#resumeforwardstreamtoallrooms) 快速恢复转发。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### pauseForwardStreamToAllRooms()

暂停跨房间媒体流转发。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 通过 [startForwardStreamToRooms](#startforwardstreamtorooms) 发起媒体流转发后，可调用本方法暂停向所有目标房间转发媒体流。
  + 调用本方法暂停向所有目标房间转发后，你可以随时调用 resumeForwardStreamToAllRooms(#resumeforwardstreamtoallrooms) 快速恢复转发。
  + 调用本方法后，目标房间中的用户将接收到本地用户停止发布 [onUserUnpublishStream](85533.md#onuserunpublishstream)/[onUserUnpublishScreen](85533.md#onUserUnpublishScreen) 和退房 [onUserLeave](85533.md#onuserleave) 的回调。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### resumeForwardStreamToAllRooms()

恢复跨房间媒体流转发。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  目标房间中的用户将接收到本地用户进房 [onUserJoined](#onuserjoined) 和发布 [onUserPublishStream](85533.md#onuserpublishstream)/[onUserPublishScreen](#onuserpublishscreen) 的回调。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败
  调用 [pauseForwardStreamToAllRooms](#pauseforwardstreamtoallrooms) 暂停转发之后，调用本方法恢复向所有目标房间转发媒体流。

### enableRangeAudio()

开启/关闭范围语音功能。

- **类型**

  ```ts
  (enable: boolean) => number
  ```

- **注意**

  + 范围语音是指，在同一 RTC 房间中设定的音频接收距离范围内，本地用户收听到的远端用户音频音量会随着远端用户的靠近/远离而放大/衰减；若远端用户在房间内的位置超出设定范围，则本地用户无法接收其音频。音频接收范围设置参看 [updateReceiveRange](#updatereceiverange)。
  + 如果开启区域语音，非队友之间在收发世界模式下语音会根据用户之间的距离衰减，超过收听范围就听不到，如果关闭区域语音，非队友之间在收发世界模式下，语音不会随距离衰减
  + 该方法进房前后都可调用，为保证进房后范围语音效果的平滑切换，你需在该方法前先调用 [updateRangePosition](#updaterangeposition) 设置自身位置坐标，然后开启该方法收听范围语音效果。

- **参数**

  - **enable**

    类型: <code>boolean</code>

    是否开启范围语音功能：<br>1. true 表示开启，<br>2. false 表示关闭

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### updateReceiveRange()

更新本地用户的音频收听范围。

- **类型**

  ```ts
  (range: ReceiveRange) => number
  ```

- **注意**

  若此前你已调用 [registerRangeAudioObserver](#registerrangeaudioobserver) 注册了范围语音衰减系数监测器，房间内有任何用户调用该接口更新音频收听范围后，你都会收到 [onRangeAudioInfo](85533.md#onrangeaudioinfo) 回调。

- **参数**

  - **range**

    类型: <code>ReceiveRange</code>

    音频收听范围

- **返回值**

  类型: <code>number</code>

  方法调用结果：

  + 0：成功；
  + !0: 失败。

### updateRangePosition()

更新本地用户在房间内空间直角坐标系中的位置坐标。

- **类型**

  ```ts
  (pos: Position) => number
  ```

- **注意**

  + 调用该接口更新坐标后，你需调用 [enableRangeAudio](#enablerangeaudio) 开启范围语音功能以收听范围语音效果。
  + 若此前你已调用 [registerRangeAudioObserver](#registerrangeaudioobserver) 注册了范围语音衰减系数监测器，房间内有任何用户调用该接口更新自身位置坐标后，你都会收到 [onRangeAudioInfo](85533.md#onrangeaudioinfo) 回调。

- **参数**

  - **pos**

    类型: <code>Position</code>

    三维坐标的值，默认为 [0, 0, 0]

- **返回值**

  类型: <code>number</code>

  方法调用结果：

  + 0：成功；
  + !0：失败。

### registerRangeAudioObserver()

设置范围语音衰减系数监测器。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 该方法仅适用于手动订阅模式，自动订阅无需设置。
  + 设置后，SDK 会在监测到房间内有用户更新自身位置坐标或音频收听范围后，触发 [onRangeAudioInfo](85533.md#onrangeaudioinfo) 回调。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### setAttenuationModel()

设置范围语音的音量衰减模式。

- **类型**

  ```ts
  (type: AttenuationType, coefficient: number) => number
  ```

- **注意**

  + 衰减模式更改后，[onRangeAudioInfo](85533.md#onrangeaudioinfo) 回调将根据最后设置的衰减模式进行计算并返回音量衰减数值
  + 音量衰减范围通过 [updateReceiveRange](#updatereceiverange) 进行设置。

- **参数**

  - **type**

    类型: <code>[AttenuationType](85535.md#attenuationtype)</code>

    音量衰减模式。默认为线性衰减。

  - **coefficient**

    类型: <code>number</code>

    指数衰减模式下的音量衰减系数，默认值为 1。范围 [0.1,100]，推荐设置为 `50`。数值越大，音量的衰减速度越快。

- **返回值**

  类型: <code>number</code>

  调用是否成功

  + `0`:调用成功
  + `-1`:调用失败。失败原因为，在调用 [enableRangeAudio](#enablerangeaudio) 开启范围语音前或进房前调用本接口

### enableSpatialAudio()

开启/关闭空间音频功能。

- **类型**

  ```ts
  (enable: boolean) => number
  ```

- **注意**

  该方法仅开启空间音频功能，你须调用 [updateSpatialPosition](#updatespatialposition) 设置自身位置坐标后方可收听空间音频效果。空间音频相关 API 和调用时序详见[空间音频](https://www.volcengine.com/docs/6348/93903)。

- **参数**

  - **enable**

    类型: <code>boolean</code>

    是否开启空间音频功能：<br>+ true：开启<br>+ false：关闭（默认）

- **返回值**

  类型: <code>number</code>

  0：支持空间音频 -1:不支持

### updateSpatialPosition()

更新本地用户在房间内空间直角坐标系中的位置坐标。

- **类型**

  ```ts
  (pos: Position) => number
  ```

- **注意**

  调用该接口更新坐标前，你需调用 [enableSpatialAudio](#enablespatialaudio) 开启空间音频功能。 空间音频相关 API 和调用时序详见[空间音频](https://www.volcengine.com/docs/6348/93903)。

- **参数**

  - **pos**

    类型: <code>Position</code>

    三维坐标的值，默认为 [0, 0, 0]。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### updateSelfOrientation()

更新本地用户在空间音频坐标系下的朝向。

- **类型**

  ```ts
  (orientation: HumanOrientation) => number
  ```

- **注意**

  + 空间音频相关 API 和调用时序详见[空间音频](https://www.volcengine.com/docs/6348/93903)。
  + 调用 [disableRemoteOrientation](#disableremoteorientation) 可忽略远端用户朝向。

- **参数**

  - **orientation**

    类型: <code>[HumanOrientation](85535.md#humanorientation)</code>

    自身朝向信息

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### disableRemoteOrientation()

参与通话的各端调用本接口后，将忽略远端用户的朝向，认为所有远端用户都面向本地用户。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 如果此后调用 [updateSelfOrientation](#updateselforientation) 更新本地用户朝向，远端用户无法感知这些变化，但本地用户接收音频时可以感知自身朝向改变带来的音频效果变化。
  + 进房前后都可以调用该接口。
  + 调用本接口关闭朝向功能后，在当前的空间音频实例的生命周期内无法再次开启。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败


## veRTCVideo

类型: `class`

- **API**

  | 名称 | 描述 |
  | -- | -- |
  | [createRTCVideo()](#creatertcvideo) | 创建引擎对象 |
  | [createRTCRoom()](#creatertcroom) | 创建房间 |
  | [destroyRTCVideo()](#destroyrtcvideo) | 销毁引擎实例对象 |
  | [feedback()](#feedback) | 本次通话质量打分评价 |
  | [getErrorDescription()](#geterrordescription) | 获取错误码的描述 |
  | [setBusinessId()](#setbusinessid) | 设置业务标识参数 |
  | [setEncryptInfo()](#setencryptinfo) | 设置传输时使用内置加密的方式 |
  | [startAudioCapture()](#startaudiocapture) | 开启内部音频采集。默认为关闭状态。 |
  | [stopAudioCapture()](#stopaudiocapture) | 关闭内部音频采集。默认为关闭状态。 |
  | [enumerateAudioPlaybackDevices()](#enumerateaudioplaybackdevices) | 获取当前系统内音频播放设备列表。如果后续设备有变更，你会收到 `onAudioDeviceStateChanged`] 回调通知，然后需要重新调用本接口以获得新的设备列表。 |
  | [enumerateAudioCaptureDevices()](#enumerateaudiocapturedevices) | 获取当前系统内音频采集设备列表。如果后续设备有变更，你需要重新调用本接口以获得新的设备列表。 |
  | [setAudioPlaybackDevice()](#setaudioplaybackdevice) | 设置音频播放设备。 |
  | [setAudioCaptureDevice()](#setaudiocapturedevice) | 设置音频采集设备。 |
  | [getAudioPlaybackDevice()](#getaudioplaybackdevice) | 获取当前音频播放设备 ID。 |
  | [getAudioCaptureDevice()](#getaudiocapturedevice) | 获取当前音频采集设备 ID。 |
  | [setAudioPlaybackDeviceVolume()](#setaudioplaybackdevicevolume) | 设置当前音频播放设备音量 |
  | [getAudioPlaybackDeviceVolume()](#getaudioplaybackdevicevolume) | 获取当前音频播放设备音量 |
  | [setAudioCaptureDeviceVolume()](#setaudiocapturedevicevolume) | 设置当前音频采集设备音量 |
  | [getAudioCaptureDeviceVolume()](#getaudiocapturedevicevolume) | 获取当前音频采集设备音量 |
  | [setAudioPlaybackDeviceMute()](#setaudioplaybackdevicemute) | 设置当前音频播放设备静音状态，默认为非静音。 |
  | [getAudioPlaybackDeviceMute()](#getaudioplaybackdevicemute) | 获取当前音频播放设备是否静音的信息。 |
  | [setAudioCaptureDeviceMute()](#setaudiocapturedevicemute) | 设置当前音频采集设备静音状态，默认为非静音。 |
  | [getAudioCaptureDeviceMute()](#getaudiocapturedevicemute) | 获取当前音频采集设备是否静音的信息。 |
  | [setCaptureVolume()](#setcapturevolume) | 调节音频采集音量 |
  | [setPlaybackVolume()](#setplaybackvolume) | 调节本地播放的所有远端用户混音后的音量。播放音频前或播放音频时，你都可以使用此接口设定播放音量。 |
  | [setRemoteAudioPlaybackVolume()](#setremoteaudioplaybackvolume) | 调节来自远端用户的音频播放音量 |
  | [muteAudioPlayback()](#muteaudioplayback) | 控制本地音频流播放状态：播放/不播放 |
  | [stopAudioPlaybackDeviceTest()](#stopaudioplaybackdevicetest) | 停止音频播放设备测试。 |
  | [setVoiceChangerType()](#setvoicechangertype) | 设置变声特效类型 |
  | [setVoiceReverbType()](#setvoicereverbtype) | 设置混响特效类型 |
  | [setAudioProfile()](#setaudioprofile) | 设置音质档位。 |
  | [startAudioPlaybackDeviceTest()](#startaudioplaybackdevicetest) | 启动音频播放设备测试。  该方法测试播放设备是否能正常工作。SDK 播放指定的音频文件，测试者如果能听到声音，说明播放设备能正常工作。 |
  | [startEchoTest()](#startechotest) | 开始音频设备回路测试。 |
  | [stopEchoTest()](#stopechotest) | 停止音频设备回路测试。 |
  | [initAudioPlaybackDeviceForTest()](#initaudioplaybackdevicefortest) | 尝试初始化音频播放设备，可检测出设备不存在、权限被拒绝/禁用等异常问题。 |
  | [initAudioCaptureDeviceForTest()](#initaudiocapturedevicefortest) | 尝试初始化音频播放设备，可检测出设备不存在、权限被拒绝/禁用等异常问题。 |
  | [enableAudioPropertiesReport()](#enableaudiopropertiesreport) | 启用音频信息提示。 |
  | [enableVocalInstrumentBalance()](#enablevocalinstrumentbalance) | 开启/关闭音量均衡功能。 |
  | [stopVideoCapture()](#stopvideocapture) | 关闭内部视频采集。默认为关闭状态。 |
  | [enumerateVideoCaptureDevices()](#enumeratevideocapturedevices) | 获取当前系统内视频采集设备列表。 |
  | [followSystemPlaybackDevice()](#followsystemplaybackdevice) | 设置音频播放路由是否跟随系统，默认跟随系统。 |
  | [followSystemCaptureDevice()](#followsystemcapturedevice) | 设置音频采集路由是否跟随系统。 |
  | [setVideoCaptureDevice()](#setvideocapturedevice) | 设置当前视频采集设备 |
  | [getVideoCaptureDevice()](#getvideocapturedevice) | 获取当前 SDK 正在使用的视频采集设备 ID |
  | [setVideoEncoderConfig()](#setvideoencoderconfig) | 视频发布端设置期望发布的最大分辨率视频流参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。 |
  | [setMaxVideoEncoderConfig()](#setmaxvideoencoderconfig) | 视频发布端设置期望发布的最大分辨率视频流参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。 |
  | [setLocalVideoMirrorType()](#setlocalvideomirrortype) | 为采集到的视频流开启镜像 |
  | [checkLicense()](#checklicense) | 视频特效许可证检查 |
  | [getAuthMessage()](#getauthmessage) | 从 CV SDK 获取授权消息，用于获取在线许可证。 |
  | [enableEffect()](#enableeffect) | 开启关闭视频特效 |
  | [enableEffectBeauty()](#enableeffectbeauty) | 开启/关闭基础美颜 |
  | [setBeautyIntensity()](#setbeautyintensity) | 调整基础美颜强度 |
  | [setAlgoModelPath()](#setalgomodelpath) | 设置视频特效算法模型路径 |
  | [setEffectNodes()](#seteffectnodes) | 设置视频特效素材包，支持同时设置多个素材包 |
  | [updateNode()](#updatenode) | 设置特效强度 |
  | [setColorFilter()](#setcolorfilter) | 设置颜色滤镜 |
  | [setColorFilterIntensity()](#setcolorfilterintensity) | 设置已启用颜色滤镜的强度 |
  | [startLiveTranscoding()](#startlivetranscoding) | 开启转推直播，并设置合流的视频视图布局和音频属性。 |
  | [stopLiveTranscoding()](#stoplivetranscoding) | 停止转推直播。 |
  | [updateLiveTranscoding()](#updatelivetranscoding) | 更新转推直播参数。 |
  | [startPushSingleStreamToCDN()](#startpushsinglestreamtocdn) | 新增单流转推直播任务。 |
  | [stopPushStreamToCDN()](#stoppushstreamtocdn) | 停止转推直播。 |
  | [setPublicStreamVideoSink()](#setpublicstreamvideosink) | 为指定公共流绑定自定义渲染器。 |
  | [startPushPublicStream()](#startpushpublicstream) | 发布一路公共流。 |
  | [stopPushPublicStream()](#stoppushpublicstream) | 停止发布当前用户发布的公共流 |
  | [updatePublicStreamParam()](#updatepublicstreamparam) | 更新公共流参数 |
  | [startPlayPublicStream()](#startplaypublicstream) | 订阅指定公共流。无论用户是否在房间内，都可以调用本接口获取和播放指定的公共流。 |
  | [stopPlayPublicStream()](#stopplaypublicstream) | 取消订阅指定公共流 |
  | [startScreenAudioCapture()](#startscreenaudiocapture) | 在屏幕共享时，开始使用 RTC SDK 内部采集方式，采集屏幕音频 |
  | [startScreenVideoCapture()](#startscreenvideocapture) | 采集屏幕视频流，用于共享。屏幕视频流包括：屏幕上显示的内容，应用窗口中显示的内容，或虚拟屏幕中显示的内容。其中，虚拟屏幕中显示的内容仅在 Windows 平台上支持。 |
  | [stopScreenAudioCapture()](#stopscreenaudiocapture) | 在屏幕共享时，停止使用 RTC SDK 内部采集方式，采集屏幕音频。 |
  | [stopScreenVideoCapture()](#stopscreenvideocapture) | 停止屏幕视频流采集。 |
  | [updateScreenCaptureRegion()](#updatescreencaptureregion) | 更新屏幕共享区域。 |
  | [updateScreenCaptureHighlightConfig()](#updatescreencapturehighlightconfig) | 通过 RTC SDK 提供的采集模块采集屏幕视频流时，更新边框高亮设置。默认展示表框。 |
  | [updateScreenCaptureMouseCursor()](#updatescreencapturemousecursor) | 通过 RTC SDK 提供的采集模块采集屏幕视频流时，更新对鼠标的处理设置。默认采集鼠标。 |
  | [updateScreenCaptureFilterConfig()](#updatescreencapturefilterconfig) | 通过 RTC SDK 提供的采集模块采集屏幕视频流时，设置需要过滤的窗口。 |
  | [getScreenCaptureSourceList()](#getscreencapturesourcelist) | 获取屏幕采集对象列表。 |
  | [getThumbnail()](#getthumbnail) | 获取共享对象缩略图 |
  | [getWindowAppIcon()](#getwindowappicon) | 获取应用窗体所属应用的图标。 |
  | [setScreenAudioStreamIndex()](#setscreenaudiostreamindex) | 在屏幕共享时，设置屏幕音频流和麦克风采集到的音频流的混流方式 |
  | [setScreenVideoEncoderConfig()](#setscreenvideoencoderconfig) | 为发布的屏幕共享视频流设置期望的编码参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。 |
  | [login()](#login) | 必须先登录，才能发送房间外点对点消息和向应用服务器发送消息 |
  | [logout()](#logout) | 调用本接口登出后，无法调用房间外消息以及端到服务器消息相关的方法或收到相关回调。 |
  | [updateLoginToken()](#updatelogintoken) | 更新用户用于登录的 Token。 |
  | [setServerParams()](#setserverparams) | 设置业务服务器参数。 |
  | [getPeerOnlineStatus()](#getpeeronlinestatus) | 查询对端用户或本端用户的登录状态 |
  | [sendUserMessageOutsideRoom()](#sendusermessageoutsideroom) | 给房间外指定的用户发送文本消息（P2P） |
  | [sendUserBinaryMessageOutsideRoom()](#senduserbinarymessageoutsideroom) | 给房间外指定的用户发送二进制消息（P2P） |
  | [sendServerMessage()](#sendservermessage) | 客户端给业务服务器发送文本消息（P2Server） |
  | [sendServerBinaryMessage()](#sendserverbinarymessage) | 客户端给业务服务器发送二进制消息（P2Server） |
  | [sendSEIMessage()](#sendseimessage) | 通过视频帧发送 SEI 数据。 |
  | [setVideoCaptureConfig()](#setvideocaptureconfig) | 设置 RTC SDK 内部采集时的视频采集参数。指定视频采集参数包括模式、分辨率、帧率。 |
  | [startAudioMixing()](#startaudiomixing) | 开始播放音乐文件及混音 |
  | [stopAudioMixing()](#stopaudiomixing) | 停止播放音乐文件及混音 |
  | [pauseAudioMixing()](#pauseaudiomixing) | 暂停播放音乐文件及混音 |
  | [resumeAudioMixing()](#resumeaudiomixing) | 恢复播放音乐文件及混音 |
  | [preloadAudioMixing()](#preloadaudiomixing) | 预加载指定音乐文件到内存中，以避免频繁播放同一文件时的重复加载，减少 CPU 占用。 |
  | [unloadAudioMixing()](#unloadaudiomixing) | 卸载指定音乐文件 |
  | [setAudioMixingVolume()](#setaudiomixingvolume) | 调节音乐文件在本地和远端播放的音量大小 |
  | [getAudioMixingDuration()](#getaudiomixingduration) | 获取音乐文件时长 |
  | [getAudioMixingCurrentPosition()](#getaudiomixingcurrentposition) | 获取音乐文件播放进度 |
  | [setAudioMixingPosition()](#setaudiomixingposition) | 设置音乐文件的播放位置 |
  | [setAudioMixingDualMonoMode()](#setaudiomixingdualmonomode) | 设置当前音频文件的声道模式 |
  | [setAudioMixingPitch()](#setaudiomixingpitch) | 开启本地播放音乐文件变调功能，多用于 K 歌场景。 |
  | [setAudioMixingPlaybackSpeed()](#setaudiomixingplaybackspeed) | 设置混音时音频文件的播放速度 |
  | [setAudioMixingLoudness()](#setaudiomixingloudness) | 如果你需要使用 enableVocalInstrumentBalance 对混音使音频文件/PCM 音频数据进行音量调整，你必须通过此接口传入其原始响度。 |
  | [setAudioMixingProgressInterval()](#setaudiomixingprogressinterval) | 设置混音时音频文件播放进度回调的间隔 |
  | [getAudioTrackCount()](#getaudiotrackcount) | 获取当前音频文件的音轨索引 |
  | [selectAudioTrack()](#selectaudiotrack) | 指定当前音频文件的播放音轨 |
  | [setLocalVoicePitch()](#setlocalvoicepitch) | 开启本地语音变调功能，多用于 K 歌场景。使用该方法，你可以对本地语音的音调进行升调或降调等调整。 |
  | [startASR()](#startasr) | 开启自动语音识别服务。 |
  | [stopASR()](#stopasr) | 关闭语音识别服务 |
  | [startFileRecording()](#startfilerecording) | 该方法将通话过程中的音视频数据录制到本地的文件中。 |
  | [stopFileRecording()](#stopfilerecording) | 停止本地录制 |
  | [setPublishFallbackOption()](#setpublishfallbackoption) | 设置发布的音视频流回退选项 。你可以调用这个接口来设置网络情况不佳或设备性能不足时只发送小流，以保证通话质量。 |
  | [setSubscribeFallbackOption()](#setsubscribefallbackoption) | 设置订阅的音视频流回退选项。 你可以通过调用该接口来设置网络情况不佳或性能不足时只订阅小流或音频流，以保证通话质量。 |
  | [setRemoteUserPriority()](#setremoteuserpriority) | 设置用户优先级 |
  | [startNetworkDetection()](#startnetworkdetection) | 开启通话前网络探测 |
  | [stopNetworkDetection()](#stopnetworkdetection) | 停止通话前网络探测 |
  | [setBackgroundSticker()](#setbackgroundsticker) | 将摄像头采集画面中的人像背景替换为指定图片或纯色背景。 |
  | [setVideoWatermark()](#setvideowatermark) | 在指定视频流上添加水印。 |
  | [clearVideoWatermark()](#clearvideowatermark) | 移除指定视频流的水印。 |
  | [setupLocalVideo()](#setuplocalvideo) | 为本地采集到的视频流绑定本地渲染视图 |
  | [removeLocalVideo()](#removelocalvideo) | 解绑本地视频流已绑定的渲染视图 |
  | [setupRemoteVideo()](#setupremotevideo) | 为远端视频流绑定本地渲染视图 |
  | [removeRemoteVideo()](#removeremotevideo) | 解绑指定远端视频流已绑定的本地视图 |
  | [removeAllRemoteVideo()](#removeallremotevideo) | 解绑所有已绑定本地视图的指定远端视频流 |
  | [setupLocalScreen()](#setuplocalscreen) | 为本地屏幕共享流绑定视图 |
  | [removeLocalScreen()](#removelocalscreen) | 解绑屏幕共享流已绑定的视图 |
  | [setupRemoteScreen()](#setupremotescreen) | 为远端屏幕共享流绑定本地视图 |
  | [removeRemoteScreen()](#removeremotescreen) | 解绑远端屏幕共享流已绑定的本地视图 |
  | [setupPublicStreamVideo()](#setuppublicstreamvideo) | 为公共流绑定本地视图 |
  | [removePublicStreamVideo()](#removepublicstreamvideo) | 为公共流解绑本地视图 |
  | `static` [getSDKVersion()](#static-getsdkversion) | 获取当前 SDK 版本信息 |
  | `static` [getCurrentProcessId()](#static-getcurrentprocessid) | 获取加载引擎进程的 ID 方便调试 |


### new veRTCVideo()

### createRTCVideo()

创建引擎对象

- **类型**

  ```ts
  (app_id: string, document_path: string, parameters: string) => number
  ```

- **注意**

  + 你应注意保持 handler 的生命周期必须大于 `veRTCVideo` 的生命周期，即 handler 必须在调用 [createRTCVideo](#creatertcvideo) 之前创建，在调用 [destroyRTCVideo](#destroyrtcvideo) 之后销毁。
  + 通常不建议在移动端设备上创建多于 2 个引擎实例。
  + 如果当前线程中未创建引擎实例，那么你必须先使用此方法，以使用 RTC 提供的各种音视频能力。
  + 如果当前线程中已创建了引擎实例，再次调用此方法时，会返回已创建的引擎实例。

- **参数**

  - **app_id**

    类型: <code>string</code>

    每个应用的唯一标识符，由 RTC 控制台随机生成的。不同的 AppId 生成的实例在 RTC 中进行音视频通话完全独立，无法互通。

  - **document_path**

    类型: <code>string</code>

    存放日志路径
    指向一个可写文件夹的绝对路径。推荐为当前应用的子目录。你可以通过 Electron 提供的 app.getPath() 获取到当前应用的目录路径。

  - **parameters**

    类型: <code>string</code>

    用以覆盖默认参数的本引擎实例参数。JSON 字符串格式。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### createRTCRoom()

创建房间

- **类型**

  ```ts
  (room_id: string) => veRTCRoom
  ```

- **注意**

  多次调用此方法以创建多个 `veRTCRoom` 实例。分别调用各实例中的 joinRoom 方法，同时加入多个房间。多房间模式下，用户可以同时订阅各房间的音视频流。

- **参数**

  - **room_id**

    类型: <code>string</code>

    标识通话房间的房间 ID，最大长度为 128 字节的非空字符串。支持的字符集范围为:
<br>• 26个大写字母 A ~ Z
<br>• 26个小写字母 a ~ z
<br>• 10个数字 0 ~ 9
<br>• 下划线 "_", at 符 "@", 减号 "-"
<br>多房间模式下，调用创建房间接口后，请勿调用同样的 roomID 创建房间，否则会导致创建房间失败。

- **返回值**

  类型: <code>veRTCRoom</code>

  + `0`: 成功
  + `-1`: 失败

### destroyRTCVideo()

销毁引擎实例对象

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 请确保和需要销毁的 `veRTCVideo`  实例相关的业务场景全部结束后，才调用此方法
  + 该方法在调用之后，会销毁所有和此 `veRTCVideo`  实例相关的内存，并且停止与媒体服务器的任何交互
  + 调用本方法会启动 SDK 退出逻辑。引擎线程会保留，直到退出逻辑完成。因此，不要在回调线程中直接调用此 API，也不要在回调中等待主线程的执行，并同时在主线程调用本方法。不然会造成死锁。

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### feedback()

本次通话质量打分评价

- **类型**

  ```ts
  (types: ProblemFeedbackOption[], problem_desc: string) => number
  ```

- **注意**

  + 如果用户上报时在房间内，那么问题会定位到用户当前所在的一个或多个房间；
  + 如果用户上报时不在房间内，那么问题会定位到引擎此前退出的房间。

- **参数**

  - **types**

    类型: <code>[ProblemFeedbackOption](85535.md#problemfeedbackoption)[]</code>

    反馈问题类型

  - **problem_desc**

    类型: <code>string</code>

    上报的数据。JSON 格式，必须包含以下 4 个字段: <li>types: 预设的问题类型集合，可多选。具体的类型参考 [ProblemFeedbackOption](70098.md#problemfeedbackoption) </li><li>problem_desc: 预设问题以外的其他问题的具体描述 </li><li>os_version: 系统版本  </li><li>network_type: 网络类型：包括 WiFi, 2g, 3g, 4g, 5g。如果是台式机，填写 pc 。</li>

- **返回值**

  类型: <code>number</code>

  +  0: 上报成功
  + `-1`: 上报失败，还没加入过房间
  + `-2`: 上报失败，传入 JSON 解析失败
  + `-3`: 上报失败，传入 JSON 字段缺失

### getErrorDescription()

获取错误码的描述

- **类型**

  ```ts
  (code: number) => string
  ```

- **注意**

  该接口是通用功能，调用时不需要依赖引擎对象。

- **参数**

  - **code**

    类型: <code>number</code>

    需要获取描述的错误码

- **返回值**

  类型: <code>string</code>

  错误码的描述

### setBusinessId()

设置业务标识参数

- **类型**

  ```ts
  (business_id: string) => number
  ```

- **注意**

  可通过 businessId 区分不同的业务场景。businessId 由客户自定义，相当于一个“标签”，可以分担和细化现在 AppId 的逻辑划分的功能，但不需要鉴权。

- **参数**

  - **business_id**

    类型: <code>string</code>

    用户设置的自己的 business_id 值。business_id 相当于一个 sub AppId，可以分担和细化现在 AppId 的逻辑划分的功能， 但不需要鉴权。business_id 只是一个标签，颗粒度需要用户自定义。

- **返回值**

  类型: <code>number</code>

  + 0： 成功。
  + <0： 失败
  + -6001： 用户已经在房间中。
  + -6002： 输入非法，合法字符包括所有小写字母、大写字母和数字，除此外还包括四个独立字符分别是：英文句号，短横线，下划线和 `@`。

### setEncryptInfo()

设置传输时使用内置加密的方式

- **类型**

  ```ts
  (encrypt_type: number, key: string) => number
  ```

- **注意**

  该方法必须在进房之前调用，可重复调用，以最后调用的参数作为生效参数。

- **参数**

  - **encrypt_type**

    类型: <code>number</code>

    加密算法 <li>`0`: 不使用内置加密</li><li>`1`:AES-128-CBC 加密算法</li><li>`2`:AES-256-CBC 加密算法</li><li>`3`:AES-128-ECB 加密算法</li><li>`4`:AES-256-ECB 加密算法</li>

  - **key**

    类型: <code>string</code>

    加密密钥，长度限制为 36 位，超出部分将会被截断

- **返回值**

  类型: <code>number</code>

  + `0`: 成功
  + `-1`: 失败

### startAudioCapture()

开启内部音频采集。默认为关闭状态。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 进房前调用该方法，本地用户会收到 [onAudioDeviceStateChanged](85533.md#onaudiodevicestatechanged) 的回调。
  + 若未取得当前设备的麦克风权限，调用该方法后会触发 onWarning 回调。
  + 调用 stopAudioCapture 可以关闭音频采集设备，否则，SDK 只会在销毁引擎的时候自动关闭设备。
  + 由于不同硬件设备初始化响应时间不同，频繁调用 stopAudioCapture 和本接口闭麦/开麦可能出现短暂无声问题，建议使用 publishStream/unpublishStream 实现临时闭麦和重新开麦。
  + 创建引擎后，无论是否发布音频数据，你都可以调用该方法开启音频采集，并且调用后方可发布音频。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopAudioCapture()

关闭内部音频采集。默认为关闭状态。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 进房前调用该方法，本地用户会收到 [onAudioDeviceStateChanged](85533.md#onaudiodevicestatechanged) 的回调。
  + 非隐身用户进房后调用该方法后，房间中的其他用户会收到 [onUserStopAudioCapture](#onuserstopaudiocapture) 的回调。
  + 调用 [startAudioCapture](85532.md#startaudiocapture) 可以开启音频采集设备。
  + 如果不调用本方法停止内部视频采集，则只有当销毁引擎实例时，内部音频采集才会停止。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### enumerateAudioPlaybackDevices()

获取当前系统内音频播放设备列表。如果后续设备有变更，你会收到 `onAudioDeviceStateChanged`] 回调通知，然后需要重新调用本接口以获得新的设备列表。

- **类型**

  ```ts
  () => { device_name: string; device_id: string;}[]
  ```

- **返回值**

  类型: <code>{ device_name: string; device_id: string; }[]</code>

  包含系统中所有音频播放设备的列表和相关信息

### enumerateAudioCaptureDevices()

获取当前系统内音频采集设备列表。如果后续设备有变更，你需要重新调用本接口以获得新的设备列表。

- **类型**

  ```ts
  () => { device_name: string; device_id: string;}[]
  ```

- **返回值**

  类型: <code>{ device_name: string; device_id: string; }[]</code>

  包含系统中所有音频采集设备列表和相关信息

### setAudioPlaybackDevice()

设置音频播放设备。

- **类型**

  ```ts
  (device_id: string) => number
  ```

- **注意**

  当你调用 followSystemPlaybackDevice 设置音频播放设备跟随系统后，将无法调用此接口设置音频播放设备。

- **参数**

  - **device_id**

    类型: <code>string</code>

    音频播放设备 ID，可通过 [enumerateAudioPlaybackDevices](#enumerateaudioplaybackdevices) 获取。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### setAudioCaptureDevice()

设置音频采集设备。

- **类型**

  ```ts
  (device_id: string) => number
  ```

- **注意**

  当你调用 followSystemCaptureDevice 设置音频采集设备跟随系统后，将无法调用此接口设置音频采集设备。

- **参数**

  - **device_id**

    类型: <code>string</code>

    音频采集设备 ID，可通过 [enumerateAudioPlaybackDevices](#enumerateaudioplaybackdevices) 获取。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### getAudioPlaybackDevice()

获取当前音频播放设备 ID。

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  当前音频播放设备 ID

### getAudioCaptureDevice()

获取当前音频采集设备 ID。

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  当前音频采集设备 ID

### setAudioPlaybackDeviceVolume()

设置当前音频播放设备音量

- **类型**

  ```ts
  (volume: number) => number
  ```

- **参数**

  - **volume**

    类型: <code>number</code>

    音频播放设备音量，取值范围为 [0,255], 超出此范围设置无效。
<br>+ [0,25] 接近无声；
<br>+ [25,75] 为低音量；
<br>+ [76,204] 为中音量；
<br>+ [205,255] 为高音量。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### getAudioPlaybackDeviceVolume()

获取当前音频播放设备音量

- **类型**

  ```ts
  () => number
  ```

- **返回值**

  类型: <code>number</code>

  音频播放设备音量，范围应在 [0,255] 内。

  + [0,25] 接近无声；
  + [25,75] 为低音量；
  + [76,204] 为中音量；
  + [205,255] 为高音量。

### setAudioCaptureDeviceVolume()

设置当前音频采集设备音量

- **类型**

  ```ts
  (volume: number) => number
  ```

- **参数**

  - **volume**

    类型: <code>number</code>

    音频采集设备音量，取值范围为 [0,255], 超出此范围设置无效。
<br>+ [0,25] 接近无声；
<br>+ [25,75] 为低音量；
<br>+ [76,204] 为中音量；
<br>+ [205,255] 为高音量。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### getAudioCaptureDeviceVolume()

获取当前音频采集设备音量

- **类型**

  ```ts
  () => number
  ```

- **返回值**

  类型: <code>number</code>

  范围应在 [0,255] 内。

  + [0,25] 接近无声；
  + [25,75] 为低音量；
  + [76,204] 为中音量；
  + [205,255] 为高音量。

### setAudioPlaybackDeviceMute()

设置当前音频播放设备静音状态，默认为非静音。

- **类型**

  ```ts
  (mute: boolean) => number
  ```

- **参数**

  - **mute**

    类型: <code>boolean</code>

    <li>true：静音</li><li>false：非静音  </li>

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### getAudioPlaybackDeviceMute()

获取当前音频播放设备是否静音的信息。

- **类型**

  ```ts
  () => boolean
  ```

- **返回值**

  类型: <code>boolean</code>

  mute  <li>true：静音</li><li>false：非静音  </li>

### setAudioCaptureDeviceMute()

设置当前音频采集设备静音状态，默认为非静音。

- **类型**

  ```ts
  (mute: boolean) => number
  ```

- **参数**

  - **mute**

    类型: <code>boolean</code>

    <li>true：静音</li><li>false：非静音  </li>

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### getAudioCaptureDeviceMute()

获取当前音频采集设备是否静音的信息。

- **类型**

  ```ts
  () => boolean
  ```

- **返回值**

  类型: <code>boolean</code>

  + true：静音
  + false：非静音

### setCaptureVolume()

调节音频采集音量

- **类型**

  ```ts
  (index: number, volume: number) => number
  ```

- **注意**

  在开启音频采集前后，你都可以使用此接口设定采集音量。

- **参数**

  - **index**

    类型: <code>number</code>

    流索引，指定调节主流还是调节屏幕流的音量<li>主流。包括：由摄像头/麦克风通过内部采集机制，采集到的视频/音频。</li><li>屏幕流。屏幕共享时共享的视频流，或来自声卡的本地播放音频流。</li>

  - **volume**

    类型: <code>number</code>

    采集的音量值和原始音量的比值，范围是 [0, 400]，单位为 %，自带溢出保护。只改变音频数据的音量信息，不涉及本端硬件的音量调节。
<br>为保证更好的通话质量，建议将 volume 值设为 [0,100]。
<br>+ 0：静音
<br>+ 100：原始音量
<br>+ 400: 最大可为原始音量的 4 倍(自带溢出保护)

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setPlaybackVolume()

调节本地播放的所有远端用户混音后的音量。播放音频前或播放音频时，你都可以使用此接口设定播放音量。

- **类型**

  ```ts
  (volume: number) => number
  ```

- **参数**

  - **volume**

    类型: <code>number</code>

    音频播放音量，取值范围： [0,400]。只改变音频数据的音量信息，不涉及本端硬件的音量调节。为保证更好的通话质量，建议将 volume 值设为 [0,100]。
<br>+ 0: 静音
<br>+ 100: 原始音量
<br>+ 400: 最大可为原始音量的 4 倍(自带溢出保护)

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setRemoteAudioPlaybackVolume()

调节来自远端用户的音频播放音量

- **类型**

  ```ts
  (room_id: string, user_id: string, volume: number) => number
  ```

- **参数**

  - **room_id**

    类型: <code>string</code>

    音频来源用户所在的房间 ID

  - **user_id**

    类型: <code>string</code>

    音频来源的远端用户 ID

  - **volume**

    类型: <code>number</code>

    播放音量，只改变音频数据的音量信息，不涉及本端硬件的音量调节。取值范围： [0,400]  <li> 0: 静音 </li> <li> 100: 原始音量 </li> <li> 400: 最大可为原始音量的 4 倍(自带溢出保护)  </li>

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### muteAudioPlayback()

控制本地音频流播放状态：播放/不播放

- **类型**

  ```ts
  (mute_state: number) => number
  ```

- **注意**

  本方法仅控制本地收到音频流的播放状态，并不影响本地音频播放设备。

- **参数**

  - **mute_state**

    类型: <code>number</code>

    播放状态，标识是否播放本地音频流

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopAudioPlaybackDeviceTest()

停止音频播放设备测试。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  调用 [startAudioPlaybackDeviceTest](#startaudioplaybackdevicetest) 后，需调用本方法停止测试。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### setVoiceChangerType()

设置变声特效类型

- **类型**

  ```ts
  (change_type: number) => number
  ```

- **注意**

  + 在进房前后都可设置。
  + 对 RTC SDK 内部采集的音频和自定义采集的音频都生效。
  + 只对单声道音频生效。
  + 只在包含美声特效能力的 SDK 中有效。
  + 与 [setVoiceReverbType](#setvoicereverbtype) 互斥，后设置的特效会覆盖先设置的特效。
  + 使用本接口前，请联系 RTC 技术支持了解更多详情。

- **参数**

  - **change_type**

    类型: <code>number</code>

    变声特效类型。
<br>+ `0`:	原声，不含特效
<br>+ `1`:	巨人
<br>+ `2`:	花栗鼠
<br>+ `3`:	小黄人
<br>+ `4`:	颤音
<br>+ `5`:	机器人

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setVoiceReverbType()

设置混响特效类型

- **类型**

  ```ts
  (voice_reverb_type: number) => number
  ```

- **注意**

  + 在进房前后都可设置。
  + 只对单声道音频生效。
  + 只在包含美声特效能力的 SDK 中有效。
  + 与 [setVoiceChangerType](#setvoicechangertype) 互斥，后设置的特效会覆盖先设置的特效。
  + 使用本接口前，请联系 RTC 技术支持了解更多详情。

- **参数**

  - **voice_reverb_type**

    类型: <code>number</code>

    混响特效类型
<br>+ `0`:	原声，不含特效
<br>+ `1`:	回声
<br>+ `2`:	演唱会
<br>+ `3`:	空灵
<br>+ `4`:	KTV
<br>+ `5`:	录音棚

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioProfile()

设置音质档位。

- **类型**

  ```ts
  (audio_profile: number) => number
  ```

- **注意**

  + 设置音质档位。当所选的 audioProfile 中的音频参数无法满足你的场景需求时，调用本接口切换的音质档位。
  + 该方法在进房前后均可调用；
  + 支持通话过程中动态切换音质档位。

- **参数**

  - **audio_profile**

    类型: <code>number</code>

    音质档位
<br>+ `0`:	默认音质，服务器下发或客户端已设置的 RoomProfileType 的音质配置
<br>+ `1`: 流畅音质，单声道，采样率为 16 kHz，编码码率为 32 Kbps。流畅优先、低功耗、低流量消耗，适用于大部分游戏场景，如小队语音、组队语音、国战语音等。
<br>+ `2`: 单声道标准音质。采样率为 48 kHz，编码码率为 128 kbps。适用于对音质有一定要求的场景，同时延时、功耗和流量消耗相对适中，适合教育场景和狼人杀等游戏。
<br>+ `3`:	双声道音乐音质。采样率为 48kHz，编码码率为 128kbps。超高音质，同时延时、功耗和流量消耗相对较大，适用于连麦 PK 等音乐场景。游戏场景不建议使用。
<br>+ `4`:	双声道标准音质。采样率为 48 KHz，编码码率最大值为 80 Kbps。
<br>+ `5`:	单声道音乐音质。采样率为 48 kHz，编码码率最大值为 64 Kbps

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### startAudioPlaybackDeviceTest()

启动音频播放设备测试。  该方法测试播放设备是否能正常工作。SDK 播放指定的音频文件，测试者如果能听到声音，说明播放设备能正常工作。

- **类型**

  ```ts
  (test_audio_file_path: string, interval: number) => number
  ```

- **注意**

  + 该方法必须在 [joinRoom](#joinroom) 前调用，且不可与其它音频设备测试功能同时应用。
  + 你需调用 [stopAudioPlaybackDeviceTest](#stopaudioplaybackdevicetest) 停止测试。

- **参数**

  - **test_audio_file_path**

    类型: <code>string</code>

    音频文件的绝对路径，路径字符串使用 UTF-8 编码格式，支持以下音频格式: mp3，aac，m4a，3gp，wav。

  - **interval**

    类型: <code>number</code>

    设置 onAudioPlaybackDeviceTestVolume 音量回调的时间间隔，推荐设置为 200 毫秒或以上。单位为毫秒。最小值为 10 毫秒。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### startEchoTest()

开始音频设备回路测试。

- **类型**

  ```ts
  (config: EchoTestConfig, play_delay_time: number) => number
  ```

- **注意**

  + 在进房前，用户可调用该接口对音视频通话全链路进行检测，包括对音视频设备以及用户上下行网络的检测，从而帮助用户判断是否可以正常发布和接收音视频流。
  + 开始检测后，SDK 会录制你声音或视频。如果你在设置的延时范围内收到了回放，则视为音视频回路测试正常。
  + 调用该方法开始音视频回路检测后，你可以调用 [stopEchoTest](#stopechotest) 立即结束测试，也可等待测试 60s 后自动结束，以更换设备进行下一次测试，或进房。
  + 在该方法之前调用的所有跟设备控制、流控制相关的方法均在开始检测时失效，在结束检测后恢复生效。
  + 在调用 [startEchoTest](#startechotest) 和 [stopEchoTest](#stopechotest) 之间调用的所有跟设备采集、流控制、进房相关的方法均不生效，并会收到 [onWarning](85533.md#onwarning) 回调，提示警告码为 `kWarningCodeInEchoTestMode`。
  + 音视频回路检测的结果会通过 [onEchoTestResult](85533.md#onechotestresult) 回调通知。

- **参数**

  - **config**

    类型: <code>[EchoTestConfig](85535.md#echotestconfig)</code>

    回路测试参数设置

  - **play_delay_time**

    类型: <code>number</code>

    音视频延迟播放的时间间隔，用于指定在开始检测多长时间后期望收到回放。取值范围为 [2,10]，单位为秒，默认为 2 秒。

- **返回值**

  类型: <code>number</code>

  方法调用结果：

  + 0：成功
  + -1：失败，当前用户已经在检测中
  + -2：失败，用户已进房
  + -3：失败，音视频均未采集
  + -4：失败，参数异常
  + -5：失败，已经存在相同 roomId 的房间

### stopEchoTest()

停止音频设备回路测试。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 调用 [startEchoTest](#startechotest) 后，需调用本方法停止测试。
  + 音视频回路检测结束后，所有对系统设备及音视频流的控制均会恢复到开始检测前的状态。

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### initAudioPlaybackDeviceForTest()

尝试初始化音频播放设备，可检测出设备不存在、权限被拒绝/禁用等异常问题。

- **类型**

  ```ts
  (device_id: string) => number
  ```

- **注意**

  1. 该接口需在进房前调用；
  2. 检测成功不代表设备一定可以启动成功，还可能因设备被其他应用进程独占，或 CPU/内存不足等原因导致启动失败。

- **参数**

  - **device_id**

    类型: <code>string</code>

    设备索引号

- **返回值**

  类型: <code>number</code>

  设备状态错误码

  + 0: 设备检测结果正常
  + -1: 接口状态不正确，例如在正常启动采集后再调用该接口进行检测
  + -2: 采集设备无麦克风权限，尝试初始化设备失败
  + -3: 设备不存在，当前没有设备或设备被移除时返回
  + -4: 设备音频格式不支持
  + -5: 其它原因错误

### initAudioCaptureDeviceForTest()

尝试初始化音频播放设备，可检测出设备不存在、权限被拒绝/禁用等异常问题。

- **类型**

  ```ts
  (device_id: string) => number
  ```

- **注意**

  1. 该接口需在进房前调用；
  2. 检测成功不代表设备一定可以启动成功，还可能因设备被其他应用进程独占，或 CPU/内存不足等原因导致启动失败。

- **参数**

  - **device_id**

    类型: <code>string</code>

    设备索引号

- **返回值**

  类型: <code>number</code>

  设备状态错误码

  + 0: 设备检测结果正常
  + -1: 接口状态不正确，例如在正常启动采集后再调用该接口进行检测
  + -2: 采集设备无麦克风权限，尝试初始化设备失败
  + -3: 设备不存在，当前没有设备或设备被移除时返回
  + -4: 设备音频格式不支持
  + -5: 其它原因错误

### enableAudioPropertiesReport()

启用音频信息提示。

- **类型**

  ```ts
  (interval: number, enable_spectrum: boolean, enable_vad: boolean) => number
  ```

- **注意**

  开启提示后，你可以：

  + 通过 onLocalAudioPropertiesReport 回调获取本地麦克风和屏幕音频流采集的音频信息；
  + 通过 onRemoteAudioPropertiesReport 回调获取订阅的远端用户的音频信息。
  + 通过 onActiveSpeaker 回调获取房间内的最活跃用户信息。

- **参数**

  - **interval**

    类型: <code>number</code>

    信息提示间隔，单位：ms
<br>+ `<= 0`: 关闭信息提示
<br>+ `(0,100]`: 开启信息提示，不合法的 interval 值，SDK 自动设置为 100ms
<br>+ `> 100`: 开启信息提示，并将信息提示间隔设置为此值

  - **enable_spectrum**

    类型: <code>boolean</code>

    是否开启音频频谱检测

  - **enable_vad**

    类型: <code>boolean</code>

    是否开启人声检测 (VAD)

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + <0: 调用失败

### enableVocalInstrumentBalance()

开启/关闭音量均衡功能。

- **类型**

  ```ts
  (enable_vad: boolean) => number
  ```

- **注意**

  开启音量均衡功能后，人声的响度会调整为 -16lufs。如果已调用 setAudioMixingLoudness 传入了混音音乐的原始响度，此音乐播放时，响度会调整为 -20lufs。（Linux 不支持）

- **参数**

  - **enable_vad**

    类型: <code>boolean</code>

    是否开启音量均衡功能：

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + <0: 调用失败

### stopVideoCapture()

关闭内部视频采集。默认为关闭状态。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 内部视频采集指：使用 RTC SDK 内置视频采集模块，进行采集。
  + 调用该方法后，本地用户会收到 onVideoDeviceStateChanged 的回调。
  + 非隐身用户进房后调用该方法，房间中的其他用户会收到 onUserStopVideoCapture 的回调。
  + 调用 startVideoCapture 可以开启内部视频采集。
  + 如果不调用本方法停止内部视频采集，则只有当销毁引擎实例时，内部视频采集才会停止。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### enumerateVideoCaptureDevices()

获取当前系统内视频采集设备列表。

- **类型**

  ```ts
  () => { device_name: string; device_id: string;}[]
  ```

- **返回值**

  类型: <code>{ device_name: string; device_id: string; }[]</code>

  包含系统中所有视频采集设备的列表和相关信息

### followSystemPlaybackDevice()

设置音频播放路由是否跟随系统，默认跟随系统。

- **类型**

  ```ts
  (followed: boolean) => number
  ```

- **参数**

  - **followed**

    类型: <code>boolean</code>

    音频播放路由是否跟随系统
<br>+ true: 跟随。此时，调用 [setAudioPlaybackDevice](#setaudioplaybackdevice) 会失败。
<br>+ false: 不跟随系统。此时，可以调用 [setAudioPlaybackDevice](#setaudioplaybackdevice) 进行设置。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### followSystemCaptureDevice()

设置音频采集路由是否跟随系统。

- **类型**

  ```ts
  (followed: boolean) => number
  ```

- **参数**

  - **followed**

    类型: <code>boolean</code>

    音频采集路由是否跟随系统
<br>+ true: 跟随。此时，调用 [setAudioCaptureDevice](#setaudiocapturedevice) 会失败。
<br>+ false: 不跟随系统。此时，可以调用 [setAudioCaptureDevice](#setaudiocapturedevice) 进行设置。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setVideoCaptureDevice()

设置当前视频采集设备

- **类型**

  ```ts
  (device_id: string) => number
  ```

- **参数**

  - **device_id**

    类型: <code>string</code>

    视频设备 ID，可以通过 [EnumerateVideoCaptureDevices](#enumeratevideocapturedevices) 获取

- **返回值**

  类型: <code>number</code>

  + 0：方法调用成功
  + !0：方法调用失败

### getVideoCaptureDevice()

获取当前 SDK 正在使用的视频采集设备 ID

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  当前 SDK 正在使用的视频采集设备 ID

### setVideoEncoderConfig()

视频发布端设置期望发布的最大分辨率视频流参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。

- **类型**

  ```ts
  (solutions: VideoEncoderConfig[]) => number
  ```

- **注意**

  + 该方法是否生效取决于是否同时调用了 [enableSimulcastMode](#enablesimulcastmode) 开启发布多路参数不同的视频流模式。若未开启推送多路流模式，但调用本方法设置了多个分辨率，SDK 默认发布分辨率最大的一条流，多个分辨率的设置会在开启推送多路流模式之后生效。
  + 调用该方法设置多路视频流参数前，SDK 默认仅发布一条分辨率为 640px × 360px，帧率为 15fps 的视频流。
  + 调用该方法设置分辨率不同的多条流后，SDK 会根据订阅端设置的期望订阅参数自动匹配发送的流，具体规则参看[推送多路流](https://www.volcengine.com/docs/6348/70139)文档。
  + 该方法适用于摄像头采集的视频流，设置屏幕共享视频流参数参看 [setScreenVideoEncoderConfig](#setscreenvideoencoderconfig)

- **参数**

  - **solutions**

    类型: <code>[VideoEncoderConfig](85535.md#videoencoderconfig)[]</code>

    视频参数数组首地址。要推送的多路视频流的参数需注意，所设置的分辨率是各路流的最大分辨率。 最多支持 3 路参数。当设置了多路参数时，分辨率和帧率必须是依次减小，从大到小排列的。 最大分辨率没有限制。但是如果设置的分辨率无法编码，就会导致编码推流失败。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setMaxVideoEncoderConfig()

视频发布端设置期望发布的最大分辨率视频流参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。

- **类型**

  ```ts
  (max_solution: VideoEncoderConfig) => any
  ```

- **注意**

  + 若调用该方法设置了期望发布的最大分辨率的流参数之前，已调用 [enableSimulcastMode](#enablesimulcastmode) 开启发布多路视频流的模式，SDK 会根据订阅端的设置自动调整发布的流数以及各路流的参数，其中最大分辨率为设置的分辨率，流数最多 4 条，具体参看[推送多路流](https://www.volcengine.com/docs/6348/70139)文档；否则仅发布该条最大分辨率的视频流。
  + 调用该方法设置多路视频流参数前，SDK 默认仅发布一条分辨率为 640px × 360px，帧率为 15fps 的视频流。
  + 该方法适用于摄像头采集的视频流，设置屏幕共享视频流参数参看 [setScreenVideoEncoderConfig](#setscreenvideoencoderconfig)

- **参数**

  - **max_solution**

    类型: <code>[VideoEncoderConfig](85535.md#videoencoderconfig)</code>

    期望发布的最大分辨率视频流参数。

- **返回值**

  + 0：成功
  + !0：失败

### setLocalVideoMirrorType()

为采集到的视频流开启镜像

- **类型**

  ```ts
  (room_id: string, mirror_type: MirrorType) => number
  ```

- **注意**

  + 切换视频源不影响镜像设置。
  + 屏幕视频流始终不受镜像设置影响。
  + 使用外部渲染器时，`mirror_type` 支持设置为 `0`（无镜像）和 `3`（本地预览和编码传输镜像），不支持设置为 `1`（编码传输镜像）。
  + 该接口调用前，各视频源的初始状态如下：
  <table>
     <tr><th></th><th>前置摄像头</th><th>后置摄像头</th><th>自定义采集视频源</th> <th>桌面端摄像头</th> </tr>
     <tr><td>移动端</td><td>本地预览镜像，编码传输不镜像</td><td> 本地预览不镜像，编码传输不镜像 </td><td> 本地预览不镜像，编码传输不镜像 </td><td>/</td></tr>
     <tr><td>桌面端</td><td>/</td><td>/</td><td> 本地预览不镜像，编码传输不镜像 </td><td> 本地预览镜像，编码传输不镜像 </td></tr>
  </table>

- **参数**

  - **room_id**

    类型: <code>string</code>

    房间 ID

  - **mirror_type**

    类型: <code>[MirrorType](85535.md#mirrortype)</code>

    镜像类型

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### checkLicense()

视频特效许可证检查

- **类型**

  ```ts
  (license_path: string) => number
  ```

- **注意**

  开始使用视频特效前，你必须先调用这个方法进行许可证验证

- **参数**

  - **license_path**

    类型: <code>string</code>

    许可证文件绝对路径

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本版本不支持 CV 功能
  + <0: 调用失败，具体错误码请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### getAuthMessage()

从 CV SDK 获取授权消息，用于获取在线许可证。

- **类型**

  ```ts
  () => string
  ```

- **注意**

  + 使用视频特效的功能前，你必须获取特效 SDK 的在线许可证。
  + 使用背景分割或视频特效的功能前，你必须自行实现获取智能美化特效产品在线许可证的业务逻辑，参考 [在线授权说明](https://www.volcengine.com/docs/6705/102012)。
  + 获取许可证后，建议调用 [checkLicense](#checklicense) 确认许可证有效，再开始使用背景分割或视频特效功能。

- **返回值**

  类型: <code>string</code>

  授权消息字符串

### enableEffect()

开启关闭视频特效

- **类型**

  ```ts
  (enabled: boolean) => number
  ```

- **注意**

  在调用 [checkLicense](#checklicense) 和 [setAlgoModelPath](#setaigomodelpath) 后调用此方法

- **参数**

  - **enabled**

    类型: <code>boolean</code>

    是否开启特效，true: 开启，false: 关闭

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + <0: 调用失败，具体错误码，参看 [错误码表](https://www.volcengine.com/docs/6705/102042)。

### enableEffectBeauty()

开启/关闭基础美颜

- **类型**

  ```ts
  (enabled: boolean) => number
  ```

- **注意**

  + 本方法不能与高级视频特效接口共用。如已购买高级视频特效，建议调用 [enableVideoEffect](#enablevideoeffect) 使用高级特效、贴纸功能等。
  + 使用此功能需要集成特效 SDK，建议使用特效 SDK V4.3.1+ 版本。
  + 调用 [setBeautyIntensity](#setbeautyintensity) 设置基础美颜强度。若在调用本方法前没有设置美颜强度，则初始美白、磨皮、锐化强度均为 0.5。
  + 本方法仅适用于视频源，不适用于屏幕源

- **参数**

  - **enabled**

    类型: <code>boolean</code>

    是否开启基础美颜强度，true: 开启，false: 关闭

- **返回值**

  类型: <code>number</code>

  + 0: 开启/关闭成功。
  + 1000: 未集成特效 SDK。
  + 1001: RTC SDK 版本不支持此功能。
  + 1002: 特效 SDK 当前版本不支持此功能，建议使用特效 SDK V4.3.1 版本。
  + 1003: 联系技术支持人员。
  + 1004: 正在下载相关资源，下载完成后生效。
  + <0: 调用失败，特效 SDK 内部错误，具体错误码请参考[错误码表](https://www.volcengine.com/docs/6705/102042)。

### setBeautyIntensity()

调整基础美颜强度

- **类型**

  ```ts
  (beauty_mode: EffectBeautyMode, intensity: number) => any
  ```

- **注意**

  + 获取许可证后，建议调用 [checkLicense](#checklicense) 确认许可证有效，再开始使用背景分割或视频特效功能。
  + 若在调用 [enableEffect](#enableeffect) 前设置美颜强度，则对应美颜功能的强度初始值会根据设置更新。
  + 销毁引擎后，美颜功能强度恢复默认值。

- **参数**

  - **beauty_mode**

    类型: <code>[EffectBeautyMode](85535.md#effectbeautymode)</code>

    基础美颜模式

  - **intensity**

    类型: <code>number</code>

    美颜强度，取值范围为 [0,1]。强度为 0 表示关闭，默认强度为 0.5。

- **返回值**

  + `0`: 调用成功
  + `-1000`: 未集成 CV SDK
  + `-1001`: 本版本不支持 CV 功能
  + `<0`: 调用失败，具体错误码请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

- **注意**

  + 获取许可证后，建议调用 [initCVResource](#initcvresource) 确认许可证有效，再开始使用背景分割或视频特效功能。
  + 若在调用 [enableEffectBeauty](#enableeffectbeauty) 前设置美颜强度，则对应美颜功能的强度初始值会根据设置更新。
  + 销毁引擎后，美颜功能强度恢复默认值。

### setAlgoModelPath()

设置视频特效算法模型路径

- **类型**

  ```ts
  (model_path: string) => number
  ```

- **参数**

  - **model_path**

    类型: <code>string</code>

    模型路径

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setEffectNodes()

设置视频特效素材包，支持同时设置多个素材包

- **类型**

  ```ts
  (effect_node_paths: string[]) => number
  ```

- **参数**

  - **effect_node_paths**

    类型: <code>string[]</code>

    特效素材包路径数组。取消当前视频特效，将此参数设置为 null。

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本 RTC 版本不支持 CV 功能
  + <0: 调用失败，具体错误码，请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### updateNode()

设置特效强度

- **类型**

  ```ts
  (node_path: string, node_key: string, node_value: number) => number
  ```

- **参数**

  - **node_path**

    类型: <code>string</code>

    特效素材包路径

  - **node_key**

    类型: <code>string</code>

    需要设置的素材 key 名称，取值请参考 [素材 key 对应说明](https://www.volcengine.com/docs/6705/102040)。

  - **node_value**

    类型: <code>number</code>

    需要设置的强度值 取值范围 [0,1]，超出范围时设置无效。

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本 RTC 版本不支持 CV 功能
  + <0: 调用失败，具体错误码，请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### setColorFilter()

设置颜色滤镜

- **类型**

  ```ts
  (res_path: string) => number
  ```

- **参数**

  - **res_path**

    类型: <code>string</code>

    滤镜资源包绝对路径。

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本 RTC 版本不支持 CV 功能
  + <0: 调用失败，具体错误码，请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### setColorFilterIntensity()

设置已启用颜色滤镜的强度

- **类型**

  ```ts
  (intensity: number) => number
  ```

- **参数**

  - **intensity**

    类型: <code>number</code>

    滤镜强度。取值范围 [0,1]，超出范围时设置无效。

- **返回值**

  类型: <code>number</code>

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本 RTC 版本不支持 CV 功能
  + <0: 调用失败，具体错误码，请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### startLiveTranscoding()

开启转推直播，并设置合流的视频视图布局和音频属性。

- **类型**

  ```ts
  (task_id: string, param: TranscoderParam) => number
  ```

- **注意**

  + 同一个任务中转推多路直播流时，SDK 会先将多路流合成一路流，然后再进行转推。
  + 调用该方法后，关于启动结果和推流过程中的错误，会收到 onStreamMixingEvent(85533#onstreammixingevent) 回调。
  + 调用 [stopLiveTranscoding](#stoplivetranscoding) 停止转推直播。

- **参数**

  - **task_id**

    类型: <code>string</code>

    转推直播任务 ID。你可以在同一房间内发起多个转推直播任务，并用不同的任务 ID 加以区分。当你需要发起多个转推直播任务时，应使用多个 ID；当你仅需发起一个转推直播任务时，建议使用空字符串。

  - **param**

    类型: <code>[TranscoderParam](85535.md#transcoderparam)</code>

    转推直播配置参数

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopLiveTranscoding()

停止转推直播。

- **类型**

  ```ts
  (task_id: string) => number
  ```

- **注意**

  + 会收到 [onStreamMixingEvent](85533.md#onStreamMixingEvent) 回调。
  + 关于启动转推直播，参看 [startLiveTranscoding](#startlivetranscoding)。

- **参数**

  - **task_id**

    类型: <code>string</code>

    转推直播任务 ID。指定想要停止的转推直播任务。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### updateLiveTranscoding()

更新转推直播参数。

- **类型**

  ```ts
  (task_id: string, param: TranscoderParam) => number
  ```

- **注意**

  + 会收到 onStreamMixingEvent(85533#onstreammixingevent) 回调。
  + 使用 [startLiveTranscoding](#startlivetranscoding) 启用转推直播功能后，使用此方法更新功能配置参数。

- **参数**

  - **task_id**

    类型: <code>string</code>

    转推直播任务 ID。指定想要更新参数设置的转推直播任务。

  - **param**

    类型: <code>[TranscoderParam](85535.md#transcoderparam)</code>

    配置参数。除特殊说明外，均支持过程中更新。调用时，结构体中没有传入值的属性，会被更新为默认值。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### startPushSingleStreamToCDN()

新增单流转推直播任务。

- **类型**

  ```ts
  (task_id: string, param: PushSingleStreamParam) => number
  ```

- **注意**

  + 调用该方法后，关于启动结果和推流过程中的错误，会收到 [`onStreamPushEvent`](85533.md#onstreampushevent) 回调。
  + 调用 [`stopPushStreamToCDN`](85532.md#stoppushstreamtocdn) 停止任务。

- **参数**

  - **task_id**

    类型: <code>string</code>

    任务 ID。你可以发起多个转推直播任务，并用不同的任务 ID 加以区分。当你需要发起多个转推直播任务时，应使用多个 ID；当你仅需发起一个转推直播任务时，建议使用空字符串。

  - **param**

    类型: <code>[PushSingleStreamParam](85535.md#pushsinglestreamparam)</code>

    转推直播配置参数

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopPushStreamToCDN()

停止转推直播。

- **类型**

  ```ts
  (task_id: string) => number
  ```

- **注意**

  关于启动转推直播，参看 [`startPushStreamToCDN`](85532.md#startpushstreamtocdn) 和 [`startPushSingleStreamToCDN`](85532.md#startPushSingleStreamToCDN)。

- **参数**

  - **task_id**

    类型: <code>string</code>

    转推直播任务 ID。指定想要停止的转推直播任务。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setPublicStreamVideoSink()

为指定公共流绑定自定义渲染器。

- **类型**

  ```ts
  (stream_id: string, video_sink?: null) => any
  ```

- **注意**

  详见[自定义视频渲染](https://www.volcengine.com/docs/6348/81201)。

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID

  - **video_sink**

    类型: <code>null</code>

    绑定自定义视频渲染器时无需传入本参数。
    要求视频帧编码格式为 YUV I420。
    需要释放渲染器资源时，将 videoSink 设置为 `null`。

- **返回值**

  + 0：成功
  + !0：失败

### startPushPublicStream()

发布一路公共流。

- **类型**

  ```ts
  (stream_id: string, public_stream: IPublicStreamParam) => number
  ```

- **注意**

  + 用户可以指定房间内多个用户发布的媒体流合成一路公共流。使用同一 `appID` 的用户，可以调用 [`startPlayPublicStream`](#startplaypublicstream) 获取和播放指定的公共流。
  + 同一用户使用同一公共流 ID 多次调用本接口无效。如果你希望更新公共流参数，调用 [`updatePublicStreamParam`](#updatepublicstreamparam) 接口。
  + 不同用户使用同一公共流 ID 多次调用本接口时，RTC 将使用最后一次调用时传入的参数更新公共流。
  + 使用不同的 ID 多次调用本接口可以发布多路公共流。
  + 调用 [`stopPushPublicStream`](#stoppushpublicstream) 停止发布公共流。
  + 关于公共流功能的介绍，详见[发布和订阅公共流](https://www.volcengine.com/docs/6348/108930)

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID。

  - **public_stream**

    类型: <code>[IPublicStreamParam](85535.md#ipublicstreamparam)</code>

    公共流参数。
<br>一路公共流可以包含多路房间内的媒体流，按照指定的布局方式进行聚合。
<br>如果指定的媒体流还未发布，则公共流将在指定流开始发布后实时更新。

- **返回值**

  类型: <code>number</code>

  + 0: 成功。同时将收到 [`onPushPublicStreamResult`](85533.md#onpushpublicstreamresult) 回调。
  + !0: 失败。当参数不合法或参数为空，调用失败。

### stopPushPublicStream()

停止发布当前用户发布的公共流

- **类型**

  ```ts
  (stream_id: string) => number
  ```

- **注意**

  关于发布公共流，查看 [`startPushPublicStream`](#startpushpublicstream)。

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID
<br>指定的流必须为当前用户所发布。

- **返回值**

  类型: <code>number</code>

  + 0: 成功
  + !0: 失败

### updatePublicStreamParam()

更新公共流参数

- **类型**

  ```ts
  (stream_id: string, param: IPublicStreamParam) => number
  ```

- **注意**

  关于发布公共流，查看 [`startPushPublicStream`](#startpushpublicstream)。

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID

  - **param**

    类型: <code>[IPublicStreamParam](85535.md#ipublicstreamparam)</code>

    公共流参数。
<br>指定的流必须为当前用户所发布的。

- **返回值**

  类型: <code>number</code>

  + 0: 成功
  + !0: 失败

### startPlayPublicStream()

订阅指定公共流。无论用户是否在房间内，都可以调用本接口获取和播放指定的公共流。

- **类型**

  ```ts
  (stream_id: string) => number
  ```

- **注意**

  + 在调用本接口之前，建议先绑定渲染视图。
        - 调用 [`setupPublicStreamVideo`](#setuppublicstreamvideo) 绑定内部渲染视图：
        - 调用 [`setPublicStreamVideoSink`](#setpublicstreamvideosink) 绑定自定义渲染视图：
  + 调用本接口后，可以通过 [`onFirstPublicStreamVideoFrameDecoded`](85533.md#onfirstpublicstreamvideoframedecoded) 和 [`onFirstPublicStreamAudioFrame`](85533.md#onfirstpublicstreamaudioframe) 回调公共流的视频和音频首帧解码情况。
  + 调用本接口后，可以通过 [`onPublicStreamSEIMessageReceived`](85533.md#onpublicstreamseimessagereceived) 回调公共流中包含的 SEI 信息。
  + 订阅公共流之后，可以通过调用 [`stopPlayPublicStream`](#stopplaypublicstream) 接口取消订阅公共流。

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID，如果指定流暂未发布，则本地客户端将在其开始发布后接收到流数据。

- **返回值**

  类型: <code>number</code>

  + 0: 成功。同时将收到 [`onPlayPublicStreamResult`](85533.md#onplaypublicstreamresult) 回调。
  + !0: 失败。当参数不合法或参数为空，调用失败。

### stopPlayPublicStream()

取消订阅指定公共流

- **类型**

  ```ts
  (stream_id: string) => number
  ```

- **注意**

  关于订阅公共流，查看 [`startPlayPublicStream`](#startplaypublicstream)。

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### startScreenAudioCapture()

在屏幕共享时，开始使用 RTC SDK 内部采集方式，采集屏幕音频

- **类型**

  ```ts
  (device_id?: string) => number
  ```

- **注意**

  + 采集后，你还需要调用 [publishScreen](#publishscreen) 将采集到的屏幕音频推送到远端。
  + 要关闭屏幕音频内部采集，调用 [stopScreenAudioCapture](#stopscreenaudiocapture)。

- **参数**

  - **device_id**

    类型: <code>string</code>

    设备 ID。Mac下需要传入虚拟的声卡id，windows 下不用传入

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### startScreenVideoCapture()

采集屏幕视频流，用于共享。屏幕视频流包括：屏幕上显示的内容，应用窗口中显示的内容，或虚拟屏幕中显示的内容。其中，虚拟屏幕中显示的内容仅在 Windows 平台上支持。

- **类型**

  ```ts
  (info: ScreenCaptureSourceInfo, params: ScreenCaptureParameters) => number
  ```

- **注意**

  + 调用此方法仅开启屏幕流视频采集，不会发布采集到的视频。发布屏幕流视频需要调用 [publishScreen](#publishscreen) 。
  + 要关闭屏幕视频源采集，调用 [stopScreenVideoCapture](#stopscreenvideocapture)。
  + 本地用户通过 [onVideoDeviceStateChanged](85533.md#onvideodevicestatechanged) 的回调获取屏幕采集状态，包括开始、暂停、恢复、错误等。
  + 调用成功后，本端会收到 [onFirstLocalVideoFrameCaptured](85533.md#onfirstlocalvideoframecaptured) 回调。然后通过调用 [setupLocalScreen](#setuplocalscreen) 设置本地屏幕共享视图。
  + 调用此接口前，你可以调用 [setVideoEncoderConfig](#setvideoencoderconfig) 设置屏幕视频流的采集帧率和编码分辨率。
  + 监听 [onLocalScreenFrame](85533.md#onLocalScreenFrame) 本地屏幕视频回调事件

- **参数**

  - **info**

    类型: <code>[ScreenCaptureSourceInfo](85535.md#screencapturesourceinfo)</code>

    待共享的屏幕源，你可以调用 [getScreenCaptureSourceList](#getscreencapturesourcelist) 获得所有可以共享的屏幕源。

  - **params**

    类型: <code>[ScreenCaptureParameters](85535.md#screencaptureparameters)</code>

    共享参数

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopScreenAudioCapture()

在屏幕共享时，停止使用 RTC SDK 内部采集方式，采集屏幕音频。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  要开始屏幕音频内部采集，调用 [startScreenAudioCapture](#startscreenaudiocapture)。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopScreenVideoCapture()

停止屏幕视频流采集。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 要开始屏幕音频内部采集，调用 [startScreenAudioCapture](#startscreenaudiocapture)。
  + 调用后，本地用户会收到 [onVideoDeviceStateChanged](85533.md#onvideodevicestatechanged) 的回调。
  + 调用此接口不影响屏幕视频流发布。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### updateScreenCaptureRegion()

更新屏幕共享区域。

- **类型**

  ```ts
  (region_rect: Rectangle) => number
  ```

- **注意**

  调用此接口前，必须已通过调用 [startScreenVideoCapture](#startscreenvideocapture) 开启了内部屏幕流采集。

- **参数**

  - **region_rect**

    类型: <code>[Rectangle](85535.md#rectangle)</code>

    <li>当共享屏幕时，指定待共享区域相对于虚拟屏幕的位置</li><li>当共享窗口时，指定待共享区域相对于整个窗口的位置</li>
<br>此参数描述了调用此接口后的采集区域，和 [startScreenVideoCapture](#startscreenvideocapture) 中 `source_info` 设定区域的相对关系。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### updateScreenCaptureHighlightConfig()

通过 RTC SDK 提供的采集模块采集屏幕视频流时，更新边框高亮设置。默认展示表框。

- **类型**

  ```ts
  (highlight_config: HighlightConfig) => number
  ```

- **注意**

  调用此接口前，必须已通过调用 [startScreenVideoCapture](#startscreenvideocapture) 开启了内部屏幕流采集。

- **参数**

  - **highlight_config**

    类型: <code>[HighlightConfig](85535.md#highlightconfig)</code>

    边框高亮设置

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### updateScreenCaptureMouseCursor()

通过 RTC SDK 提供的采集模块采集屏幕视频流时，更新对鼠标的处理设置。默认采集鼠标。

- **类型**

  ```ts
  (state: MouseCursorCaptureState) => number
  ```

- **注意**

  调用此接口前，必须已通过调用 [startScreenVideoCapture](#startscreenvideocapture) 开启了内部屏幕流采集。

- **参数**

  - **state**

    类型: <code>[MouseCursorCaptureState](85535.md#mousecursorcapturestate)</code>

    内部采集屏幕视频流时，是否采集鼠标信息

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### updateScreenCaptureFilterConfig()

通过 RTC SDK 提供的采集模块采集屏幕视频流时，设置需要过滤的窗口。

- **类型**

  ```ts
  (screen_filter_config: number[]) => number
  ```

- **注意**

  + 调用此接口前，必须已通过调用 [startScreenVideoCapture](#startscreenvideocapture) 开启了内部屏幕流采集。
  + 本函数在屏幕源类别是屏幕而非应用窗体时才起作用。

- **参数**

  - **screen_filter_config**

    类型: <code>number[]</code>

    窗口过滤设置

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### getScreenCaptureSourceList()

获取屏幕采集对象列表。

- **类型**

  ```ts
  () => ScreenCaptureSourceInfo[]
  ```

- **注意**

  不同的平台上，对最小化的窗口的处理方式不同：在 Windows 平台上，最小化的窗口也会包含在返回列表中；在 macOS 和 Linux 平台上，最小化的窗口不会包含在返回列表中。

- **返回值**

  类型: <code>[ScreenCaptureSourceInfo](85535.md#screencapturesourceinfo)[]</code>

  屏幕采集对象列表，包括应用窗口和屏幕。由用户选择其中一个共享对象，并在调用 [startScreenVideoCapture](#startscreenvideocapture) 时作为参数传给 RTC SDK。

### getThumbnail()

获取共享对象缩略图

- **类型**

  ```ts
  (type: ScreenCaptureSourceType, source_id: number, max_width: number, max_height: number) => ThumbnailInfo
  ```

- **参数**

  - **type**

    类型: <code>[ScreenCaptureSourceType](85535.md#screencapturesourcetype)</code>

    屏幕采集对象的类型

  - **source_id**

    类型: <code>number</code>

    屏幕共享对象的 ID，可通过 [getScreenCaptureSourceList](#getscreencapturesourcelist) 枚举共享对象列表中获取。

  - **max_width**

    类型: <code>number</code>

    最大宽度。保持采集对象本身的宽高比不变，将缩略图缩放到指定范围内的最大宽高。如果给出的尺寸与共享对象比例不同，得到的缩略图会有黑边。

  - **max_height**

    类型: <code>number</code>

    最大高度。参见 `maxWidth` 的说明。

- **返回值**

  类型: <code>ThumbnailInfo</code>

  共享对象缩略图

### getWindowAppIcon()

获取应用窗体所属应用的图标。

- **类型**

  ```ts
  (source_id: number, max_width: number, max_height: number) => AppIconInfo
  ```

- **参数**

  - **source_id**

    类型: <code>number</code>

    屏幕共享对象的 ID，可通过 [getScreenCaptureSourceList](#getscreencapturesourcelist) 枚举共享对象列表中获取。

  - **max_width**

    类型: <code>number</code>

    最大宽度。返回的图标将是宽高相等的，输入宽高不等时，取二者较小值。宽高范围为 [32,256]，超出该范围将返回 nullptr，默认输出 100 x 100 的图像。

  - **max_height**

    类型: <code>number</code>

    最大高度。参见 `maxWidth` 的说明。

- **返回值**

  类型: <code>AppIconInfo</code>

  应用窗体所属应用的图标。当屏幕共享对象为应用窗体时有效，否则返回 nullptr。

### setScreenAudioStreamIndex()

在屏幕共享时，设置屏幕音频流和麦克风采集到的音频流的混流方式

- **类型**

  ```ts
  (index: number) => number
  ```

- **注意**

  你应该在 [publishScreen](#publishscreen) 之前，调用此方法。否则，你将收到 [onWarning](85533.md#onwarning) 的报错：kWarningCodeSetScreenAudioStreamIndexFailed`

- **参数**

  - **index**

    类型: <code>number</code>

    混流方式 <li> `0`: 将屏幕音频流和麦克风采集到的音频流混流 </li><li> `1`: 将屏幕音频流和麦克风采集到的音频流分为两路音频流</li>

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setScreenVideoEncoderConfig()

为发布的屏幕共享视频流设置期望的编码参数，包括分辨率、帧率、码率、网络不佳时的回退策略等。

- **类型**

  ```ts
  (screen_solution: VideoEncoderConfig) => any
  ```

- **注意**

  调用该方法之前，屏幕共享视频流默认的编码参数为：分辨率 1920px × 1080px，帧率 15fps。

- **参数**

  - **screen_solution**

    类型: <code>[VideoEncoderConfig](85535.md#videoencoderconfig)</code>

    屏幕共享视频流参数。

- **返回值**

  + 0：成功
  + !0：失败

### login()

必须先登录，才能发送房间外点对点消息和向应用服务器发送消息

- **类型**

  ```ts
  (token: string, uid: string) => number
  ```

- **注意**

  + 在调用本接口登录后，如果想要登出，需要调用 [Logout](#logout)。
  + 本地用户调用此方法登录后，会收到 [onLoginResult](85533.md#onloginresult) 回调通知登录结果，远端用户不会收到通知。

- **参数**

  - **token**

    类型: <code>string</code>

    动态密钥。  用户登录必须携带的 Token，用于鉴权验证。  本 Token 与加入房间时必须携带的 Token 不同。测试时可使用控制台生成临时 Token，正式上线需要使用密钥 SDK 在你的服务端生成并下发 Token。

  - **uid**

    类型: <code>string</code>

    用户 ID  用户 ID 在 appid 的维度下是唯一的。

- **返回值**

  类型: <code>number</code>

  + `0`：成功
  + `-1`：失败。无效参数
  + `-2`：无效调用。用户已经登录。成功登录后再次调用本接口将收到此返回值

### logout()

调用本接口登出后，无法调用房间外消息以及端到服务器消息相关的方法或收到相关回调。

- **类型**

  ```ts
  () => number
  ```

- **注意**

  + 调用本接口登出前，必须先调用 [login](85532.md#login) 登录。
  + 本地用户调用此方法登出后，会收到 [onLogout](85533.md#onlogout) 回调通知结果，远端用户不会收到通知。

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### updateLoginToken()

更新用户用于登录的 Token。

- **类型**

  ```ts
  (token: string) => number
  ```

- **注意**

  + 调用 [login](85532#login) 方法登录时，如果使用了过期的 Token 将导致登录失败，并会收到 [onLoginResult](85533.md#onloginresult) 回调通知，错误码为 kLoginErrorCodeInvalidToken。此时需要重新获取 Token，并调用此方法更新 Token。
  + 如果 Token 无效导致登录失败，则调用此方法更新 Token 后，SDK 会自动重新登录，而用户不需要自己调用 [login](85532.md#login) 方法。
  + Token 过期时，如果已经成功登录，则不会受到影响。Token 过期的错误会在下一次使用过期 Token 登录时，或因本地网络状况不佳导致断网重新登录时通知给用户。

- **参数**

  - **token**

    类型: <code>string</code>

    Token 有一定的有效期，当 Token 过期时，需调用此方法更新登录的 Token 信息。

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### setServerParams()

设置业务服务器参数。

- **类型**

  ```ts
  (signature: string, url: string) => number
  ```

- **注意**

  + 客户端调用 [sendServerMessage](#sendservermessage) 或 [sendServerBinaryMessage](#sendserverbinarymessage) 发送消息给业务服务器之前，必须设置有效签名和业务服务器地址。
  + 用户必须调用 [login](85532.md#login) 登录后，才能调用本接口。
  + 调用本接口后，SDK 会使用 [onServerParamsSetResult](85533.md#onserverparamssetresult) 返回相应结果。

- **参数**

  - **signature**

    类型: <code>string</code>

    动态签名  业务服务器会使用该签名对请求进行鉴权验证。

  - **url**

    类型: <code>string</code>

    业务服务器的地址

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### getPeerOnlineStatus()

查询对端用户或本端用户的登录状态

- **类型**

  ```ts
  (peer_user_id: string) => number
  ```

- **注意**

  + 必须调用 [login](85532.md#login) 登录后，才能调用本接口。
  + 调用本接口后，SDK 会使用 [onGetPeerOnlineStatus](85533.md#ongetpeeronlinestatus) 回调通知查询结果。
  + 在发送房间外消息之前，用户可以通过本接口了解对端用户是否登录，从而决定是否发送消息。也可以通过本接口查询自己查看自己的登录状态。

- **参数**

  - **peer_user_id**

    类型: <code>string</code>

    需要查询的用户 ID

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### sendUserMessageOutsideRoom()

给房间外指定的用户发送文本消息（P2P）

- **类型**

  ```ts
  (uid: string, message: string, config: MessageConfig) => number
  ```

- **注意**

  + 在发送房间外文本消息前，必须先调用 [login](85532.md#login) 完成登录。
  + 用户调用本接口发送文本信息后，会收到一次 [onUserMessageSendResultOutsideRoom](85533.md#onusermessagesendresultoutsideroom) 回调，得知消息是否成功发送。
  + 若文本消息发送成功，则 uid 所指定的用户会通过 [onUserMessageReceivedOutsideRoom](85533.md#onusermessagereceivedoutsideroom) 回调收到该消息。

- **参数**

  - **uid**

    类型: <code>string</code>

    消息接收用户的 ID

  - **message**

    类型: <code>string</code>

    发送的文本消息内容，消息不超过 64 KB。

  - **config**

    类型: <code>[MessageConfig](85535.md#messageconfig)</code>

    消息类型

- **返回值**

  类型: <code>number</code>

  + `>0`：发送成功，返回这次发送消息的编号，从 1 开始递增
  + `-1`：发送失败，RtcEngine 实例未创建
  + `-2`：发送失败，uid 为空

### sendUserBinaryMessageOutsideRoom()

给房间外指定的用户发送二进制消息（P2P）

- **类型**

  ```ts
  (uid: string, length: number, message: Uint8Array, config: MessageConfig) => number
  ```

- **注意**

  + 在发送房间外二进制消息前，必须先调用 [login](85532.md#login) 完成登录。
  + 用户调用本接口发送二进制消息后，会收到一次 [onUserMessageSendResultOutsideRoom](85533.md#onusermessagesendresultoutsideroom) 回调，通知消息是否发送成功。
  + 若二进制消息发送成功，则 uid 所指定的用户会通过 [onUserMessageReceivedOutsideRoom](85533.md#onusermessagereceivedoutsideroom) 回调收到该条消息。

- **参数**

  - **uid**

    类型: <code>string</code>

    消息接收用户的 ID

  - **length**

    类型: <code>number</code>

    二进制字符串的长度

  - **message**

    类型: <code>Uint8Array</code>

    发送的二进制消息内容，每条消息不超过 64 KB。

  - **config**

    类型: <code>[MessageConfig](85535.md#messageconfig)</code>

    消息类型

- **返回值**

  类型: <code>number</code>

  + `>0`：发送成功，返回这次发送消息的编号，从 1 开始递增
  + `-1`：发送失败，RtcEngine 实例未创建
  + `-2`：发送失败，uid 为空

### sendServerMessage()

客户端给业务服务器发送文本消息（P2Server）

- **类型**

  ```ts
  (message: string) => number
  ```

- **注意**

  + 在向业务服务器发送文本消息前，必须先调用 [login](85532.md#login) 完成登录，随后调用 [setServerParams](85532.md#setserverparams) 设置业务服务器。
  + 调用本接口后，会收到一次 [onServerMessageSendResult](85533.md#onservermessagesendresult) 回调，通知消息发送方是否发送成功。
  + 若文本消息发送成功，则之前调用 [setServerParams](85532.md#setserverparams) 设置的业务服务器会收到该条消息。

- **参数**

  - **message**

    类型: <code>string</code>

    发送的文本消息内容，消息不超过 64 KB。

- **返回值**

  类型: <code>number</code>

  + `>0`：发送成功，返回这次发送消息的编号，从 1 开始递增
  + `-1`：发送失败，Video 实例未创建

### sendServerBinaryMessage()

客户端给业务服务器发送二进制消息（P2Server）

- **类型**

  ```ts
  (length: number, message: Uint8Array) => number
  ```

- **注意**

  + 在向业务服务器发送二进制消息前，必须先调用 [login](85532.md#login) 完成登录，随后调用 [setServerParams](85532.md#setserverparams) 设置业务服务器。
  + 调用本接口后，会收到一次 [onServerMessageSendResult](85533.md#onservermessagesendresult) 回调，通知消息发送方发送成功或失败。
  + 若二进制消息发送成功，则之前调用 [setServerParams](85532.md#setserverparams) 设置的业务服务器会收到该条消息。

- **参数**

  - **length**

    类型: <code>number</code>

    二进制字符串的长度

  - **message**

    类型: <code>Uint8Array</code>

    发送的二进制消息内容，消息不超过 64KB。

- **返回值**

  类型: <code>number</code>

  + `>0`：发送成功，返回这次发送消息的编号，从 1 开始递增
  + `-1`：发送失败，RtcEngine 实例未创建

### sendSEIMessage()

通过视频帧发送 SEI 数据。

- **类型**

  ```ts
  (stream_index: number, message: Uint8Array, repeat_count: number) => number
  ```

- **注意**

  + 在视频通话场景下，SEI 数据会随视频帧发送；在语音通话场景下，SDK 会自动生成一路 16px × 16px 的黑帧视频流用来发送 SEI 数据，帧率为 15 fps。。
  + 每秒发送的 SEI 消息数量建议不超过当前的视频帧率。
  + 如果调用此接口之后的 2s 内，没有可带 SEI 的视频帧（比如没有开启视频采集和传输），那么，SEI 数据不会被加进视频帧中。
  + 消息发送成功后，远端会收到 [onSEIMessageReceived](85533.md#onseimessagereceived) 回调。
  + 视频通话场景中，使用自定义采集并通过 pushExternalVideoFrame 推送至 SDK 的视频帧，若本身未携带 SEI 数据，也可通过本接口发送 SEI 数据。
  + 语音通话切换至视频通话时，会停止 SEI 数据发送，你需再次调用该接口方可恢复发送。

- **参数**

  - **stream_index**

    类型: <code>number</code>

    媒体流类型<li>主流。包括：由摄像头/麦克风通过内部采集机制，采集到的视频/音频。</li><li>屏幕流。屏幕共享时共享的视频流，或来自声卡的本地播放音频流。</li>

  - **message**

    类型: <code>Uint8Array</code>

    SEI 消息。长度不超过 4 kB。

  - **repeat_count**

    类型: <code>number</code>

    消息发送重复次数。取值范围是 [0, max{29, %{视频帧率}-1}]。推荐范围 [2,4]。调用此接口后，SEI 数据会添加到当前视频帧开始的连续 `repeatCount` 个视频帧中。

- **返回值**

  类型: <code>number</code>

  + \>=0: 将被添加到视频帧中的 SEI 的数量
  + < 0: 发送失败

### setVideoCaptureConfig()

设置 RTC SDK 内部采集时的视频采集参数。指定视频采集参数包括模式、分辨率、帧率。

- **类型**

  ```ts
  (config: VideoCaptureConfig) => any
  ```

- **注意**

  + 本接口在引擎创建后即可调用，建议在调用 [startVideoCapture](85532.md#startvideocapture) 前调用本接口。
  + 建议同一设备上的不同 Engine 使用相同的视频采集参数。
  + 如果调用本接口前使用内部模块开始视频采集，采集参数默认为 Auto 模式。

- **参数**

  - **config**

    类型: <code>VideoCaptureConfig</code>

    视频采集参数

- **返回值**

  方法调用结果：
  0：成功
  !0：失败

### startAudioMixing()

开始播放音乐文件及混音

- **类型**

  ```ts
  (id: number, file_path: string, mixing_config: AudioMixingConfig) => number
  ```

- **注意**

  + 调用本方法成功播放音乐文件后，SDK 会向本地回调当前的混音状态，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。
  + 开始播放音乐文件及混音后，可以调用 [stopAudioMixing](#stopaudiomixing) 方法停止播放音乐文件。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID，用于标识混音，请保证混音 ID 唯一性。  如果已经通过 [preloadAudioMixing](#preloadaudiomixing) 将音效加载至内存，确保此处的 ID 与 [preloadAudioMixing](#preloadaudiomixing) 设置的 ID 相同。  如果使用相同的 ID 重复调用本方法，前一次混音会停止，后一次混音开始，且 SDK 会使用 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged) 回调通知前一次混音已停止。

  - **file_path**

    类型: <code>string</code>

    指定需要混音的本地文件的绝对路径，支持音频文件格式有: mp3，aac，m4a，3gp，wav。  可以通过传入不同的 ID 和 file_path 多次调用本方法，以实现同时播放多个音乐文件，实现混音叠加。

  - **mixing_config**

    类型: <code>[AudioMixingConfig](85535.md#audiomixingconfig)</code>

    混音配置，设置混音的播放次数、是否本地播放混音、以及是否将混音发送至远端

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### stopAudioMixing()

停止播放音乐文件及混音

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  + 调用 [startAudioMixing](#startaudiomixing) 方法开始播放音乐文件及混音后，可以调用本方法停止播放音乐文件及混音。
  + 调用本方法停止播放音乐文件后，SDK 会向本地回调通知已停止混音，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。
  + 调用本方法停止播放音乐文件后，该音乐文件会被自动卸载。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### pauseAudioMixing()

暂停播放音乐文件及混音

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  + 调用 [startAudioMixing](#startaudiomixing) 方法开始播放音乐文件及混音后，可以通过调用本方法暂停播放音乐文件及混音。
  + 调用本方法暂停播放音乐文件及混音后，可调用 [resumeAudioMixing](#resumeaudiomixing) 方法恢复播放及混音。
  + 调用本方法暂停播放音乐文件后，SDK 会向本地回调通知已暂停混音，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### resumeAudioMixing()

恢复播放音乐文件及混音

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  + 调用 [pauseAudioMixing](#pauseaudiomixing) 方法暂停播放音乐文件及混音后，可以通过调用本方法恢复播放及混音。
  + 调用本方法恢复播放音乐文件及混音后，SDK 会向本地回调通知音乐文件正在播放中，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### preloadAudioMixing()

预加载指定音乐文件到内存中，以避免频繁播放同一文件时的重复加载，减少 CPU 占用。

- **类型**

  ```ts
  (id: number, file_path: string) => number
  ```

- **注意**

  + 需要频繁播放某个音乐文件的时候，调用本方法预加载该文件，在播放的时候可以只加载一次该文件，减少 CPU 占用。
  + 本方法只是预加载指定音乐文件，只有调用 [startAudioMixing](#startaudiomixing) 方法才开始播放指定音乐文件。
  + 调用本方法预加载音乐文件后，SDK 会回调通知音乐文件已加载，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。
  + 调用本方法预加载的指定音乐文件可以通过 [unloadAudioMixing](#unloadaudiomixing) 卸载。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID  应用调用者维护，请保证唯一性。  如果使用相同的 ID 调用本方法，后一次会覆盖前一次。 如果先调用 [startAudioMixing](#startaudiomixing) ，再使用相同的 ID 调用本方法 ，会先回调 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged) 上一个混音停止，然后加载后一个混音。  使用一个 ID 调用本方法预加载 A.mp3 后，如果需要使用相同的 ID 调用 [startAudioMixing](#startaudiomixing) 播放 B.mp3，请先调用 [unloadAudioMixing](#unloadaudiomixing) 卸载 A.mp3 ，否则会报错 kAudioMixingErrorLoadConflict。

  - **file_path**

    类型: <code>string</code>

    指定需要混音的本地文件的绝对路径，支持音频文件格式有: mp3，aac，m4a，3gp，wav。  预加载的文件长度不得超过 20s。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### unloadAudioMixing()

卸载指定音乐文件

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  不论音乐文件是否播放，调用本方法卸载该文件后，SDK 会回调通知混音已停止，见 [onAudioMixingStateChanged](85533.md#onaudiomixingstatechanged)。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingVolume()

调节音乐文件在本地和远端播放的音量大小

- **类型**

  ```ts
  (id: number, volume: number, type: number) => number
  ```

- **注意**

  + 调用本方法设置音量前，请先调用 [preloadAudioMixing](#preloadaudiomixing) 或 [startAudioMixing](#startaudiomixing)。
  + 为保证更好的音质，建议将 volume 值设为 [0,100]。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **volume**

    类型: <code>number</code>

    音乐文件播放音量范围为 0~400。 <li> 0：静音 </li> <li> 100：原始音量  </li><li> 400: 最大可调音量 (自带溢出保护)</li>

  - **type**

    类型: <code>number</code>

    混音播放类型 设置音乐文件是否本地播放、以及是否发送到远端，由此控制音乐文件本地或远端播放的音量
<br>+ `0`: 仅本地播放
<br>+ `1`: 仅发送到远端
<br>+ `2`: 在本地播放并发送到远端

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### getAudioMixingDuration()

获取音乐文件时长

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  调用本方法获取音乐文件时长前，需要先调用 [preloadAudioMixing](#preloadaudiomixing) 或 [startAudioMixing](#startaudiomixing)。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + `>0`: 成功, 音乐文件时长，单位为毫秒。
  + `<0`: 失败

### getAudioMixingCurrentPosition()

获取音乐文件播放进度

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  调用本方法获取音乐文件播放进度前，需要先调用 [startAudioMixing](#startaudiomixing) 开始播放音乐文件。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + `>0`: 成功, 音乐文件播放进度，单位为毫秒。
  + `<0`: 失败

### setAudioMixingPosition()

设置音乐文件的播放位置

- **类型**

  ```ts
  (id: number, pos: number) => number
  ```

- **注意**

  在播放在线文件时，调用此接口可能造成播放延迟的现象。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **pos**

    类型: <code>number</code>

    音频文件起始播放位置，单位为毫秒。
<br>你可以通过 [getAudioMixingDuration](#getaudiomixingduration) 获取音频文件总时长，position 的值应小于音频文件总时长。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingDualMonoMode()

设置当前音频文件的声道模式

- **类型**

  ```ts
  (id: number, mode: AudioMixingDualMonoMode) => number
  ```

- **注意**

  调用本方法设置音频文件的声道模式前，需要先调用 startAudioMixing 开始播放音频文件。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **mode**

    类型: <code>[AudioMixingDualMonoMode](85535.md#audiomixingdualmonomode)</code>

    声道模式。默认的声道模式和源文件一致，详见 AudioMixingDualMonoMode。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingPitch()

开启本地播放音乐文件变调功能，多用于 K 歌场景。

- **类型**

  ```ts
  (id: number, pitch: number) => number
  ```

- **注意**

  本方法需要在调用 [`startAudioMixing`](#startaudiomixing) 开始播放音频文件后、调用 [`stopAudioMixing`](#stopaudiomixing) 停止播放音频文件前使用，否则会触发 [`onAudioMixingStateChanged`](85533.md#onaudiomixingstatechanged) 回调报错

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **pitch**

    类型: <code>number</code>

    相对于音乐文件原始音调的升高/降低值，取值范围[-12，12]，默认值为 0，即不做调整。
<br>取值范围内每相邻两个值的音高距离相差半音，正值表示升调，负值表示降调，设置的绝对值越大表示音调升高或降低越多。
<br>超出取值范围则设置失败，并且会触发 onAudioMixingStateChanged 回调，提示 AudioMixingState 状态为 AUDIO_MIXING_STATE_FAILED 混音播放失败，AudioMixingError 错误码为 AUDIO_MIXING_ERROR_ID_TYPE_INVALID_PITCH 设置混音文件音调不合法

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingPlaybackSpeed()

设置混音时音频文件的播放速度

- **类型**

  ```ts
  (id: number, speed: number) => number
  ```

- **注意**

  + 你需要在调用 startAudioMixing 开始混音，并且收到onAudioMixingStateChanged 回调提示 AudioMixingState 状态为 kAudioMixingStatePlaying，AudioMixingError 错误码为 kAudioMixingErrorOk 之后调用该方法。
  + 在 [stopAudioMixing](#stopaudiomixing) 停止混音或 [unloadAudioMixing](#unloadaudiomixing) 卸载音频文件后调用该 API，会收到状态为 kAudioMixingStateFailed 错误码为 kAudioMixingErrorIdNotFound 的 onAudioMixingStateChanged 回调。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **speed**

    类型: <code>number</code>

    播放速度与原始文件速度的比例，单位：%，取值范围为 [50,200]，默认值为 100。
<br>超出取值范围则设置失败，你会收到 onAudioMixingStateChanged 回调，提示 AudioMixingState 状态为 kAudioMixingStateFailed 混音播放失败，AudioMixingError 错误码为 kAudioMixingErrorInValidPlaybackSpeed 设置混音文件的播放速度不合法。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingLoudness()

如果你需要使用 enableVocalInstrumentBalance 对混音使音频文件/PCM 音频数据进行音量调整，你必须通过此接口传入其原始响度。

- **类型**

  ```ts
  (id: number, loudness: number) => number
  ```

- **注意**

  建议在 startAudioMixing 开始播放音频文件之前调用该接口，以免播放过程中的音量突变导致听感体验下降。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **loudness**

    类型: <code>number</code>

    原始响度，单位：lufs，取值范围为 [-70.0, 0.0]。
<br>当设置的值小于 -70.0lufs 时，则默认调整为 -70.0lufs，大于 0.0lufs 时，则不对该响度做音均衡处理。默认值为 1.0lufs，即不做处理。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setAudioMixingProgressInterval()

设置混音时音频文件播放进度回调的间隔

- **类型**

  ```ts
  (id: number, interval: number) => number
  ```

- **注意**

  本方法需要在调用 [startAudioMixing](#startaudiomixing) 开始播放音频文件后、调用 [stopAudioMixing](#stopaudiomixing) 停止播放音频文件前使用，否则会触发 onAudioMixingStateChanged 回调报错。 若想在音乐文件开始播放前设置播放进度回调间隔，你需调用 startAudioMixing 在 AudioMixingConfig 中设置时间间隔，开始播放后可以通过此接口更新回调间隔。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID。可以通过多次调用本接口传入不同的 ID 对多个 ID 进行间隔设置。

  - **interval**

    类型: <code>number</code>

    音频文件播放进度回调的时间间隔，单位毫秒。
<br>•   interval 的值为大于 0 的 10 的倍数，当设置的值不能被 10 整除时，则默认向上取整 10，如设为 52ms 时会默认调整为 60ms。设置完成后 SDK 将会按照设置的时间间隔触发 onAudioMixingPlayingProgress 回调。
<br>• interval 的值小于等于 0 时，不会触发进度回调。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### getAudioTrackCount()

获取当前音频文件的音轨索引

- **类型**

  ```ts
  (id: number) => number
  ```

- **注意**

  调用本方法获取音频文件的音轨前，需要先调用 [startAudioMixing](#startaudiomixing) 开始播放音频文件。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

- **返回值**

  类型: <code>number</code>

  + ≥ 0：成功，返回当前音频文件的音轨索引
  + < 0：方法调用失败

### selectAudioTrack()

指定当前音频文件的播放音轨

- **类型**

  ```ts
  (id: number, audio_track_index: number) => number
  ```

- **注意**

  调用本方法设置音频文件的音轨前，需要先调用 [startAudioMixing](#startaudiomixing) 开始播放音频文件。

- **参数**

  - **id**

    类型: <code>number</code>

    混音 ID

  - **audio_track_index**

    类型: <code>number</code>

    指定的播放音轨
<br>设置的参数值需要小于或等于 [getAudioTrackCount](#getaudiotrackcount) 的返回值

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setLocalVoicePitch()

开启本地语音变调功能，多用于 K 歌场景。使用该方法，你可以对本地语音的音调进行升调或降调等调整。

- **类型**

  ```ts
  (pitch: number) => number
  ```

- **参数**

  - **pitch**

    类型: <code>number</code>

    相对于语音原始音调的升高/降低值，取值范围[-12，12]，默认值为 0，即不做调整。
<br>取值范围内每相邻两个值的音高距离相差半音，正值表示升调，负值表示降调，设置的绝对值越大表示音调升高或降低越多。
<br>超出取值范围则设置失败，并且会触发 [onWarning](85533.md#onwarning) 回调，提示码为 `WARNING_CODE_SET_SCREEN_STREAM_INVALID_VOICE_PITCH` 设置语音音调不合法

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### startASR()

开启自动语音识别服务。

- **类型**

  ```ts
  (asr_config: RTCASRConfig) => number
  ```

- **注意**

  该方法将识别后的用户语音转化成文字，并通过 [onMessage](85533.md#onmessage) 事件回调给用户。

- **参数**

  - **asr_config**

    类型: <code>[RTCASRConfig](85535.md#rtcasrconfig)</code>

    校验信息

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### stopASR()

关闭语音识别服务

- **类型**

  ```ts
  () => number
  ```

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### startFileRecording()

该方法将通话过程中的音视频数据录制到本地的文件中。

- **类型**

  ```ts
  (type: StreamIndex, config: RecordingConfig, recording_type: RecordingType) => number
  ```

- **注意**

  + 调用该方法后，你会收到 [onRecordingStateUpdate](85533.md#onrecordingstateupdate) 回调。
  + 如果录制正常，系统每秒钟会通过 [onRecordingProgressUpdate](85533.md#onrecordingprogressupdate) 回调通知录制进度。
  + 你需要在成功发流后才可以调用该方法进行录制。

- **参数**

  - **type**

    类型: <code>[StreamIndex](85535.md#streamindex)</code>

    流属性，指定录制主流还是屏幕流<li>主流。包括：由摄像头/麦克风通过内部采集机制，采集到的视频/音频。</li><li>屏幕流。屏幕共享时共享的视频流，或来自声卡的本地播放音频流。</li>

  - **config**

    类型: <code>[RecordingConfig](85535.md#recordingconfig)</code>

    本地录制参数配置

  - **recording_type**

    类型: <code>[RecordingType](85535.md#recordingtype)</code>

    录制存储文件格式

- **返回值**

  类型: <code>number</code>

  + 0: 正常
  + -1: 参数设置异常
  + -2: 当前版本 SDK 不支持该特性，请联系技术支持人员

### stopFileRecording()

停止本地录制

- **类型**

  ```ts
  (type: number) => number
  ```

- **注意**

  + 调用 [startFileRecording](#startfilerecording) 开启本地录制后，你必须调用该方法停止录制。
  + 调用该方法后，你会收到 [onRecordingStateUpdate](85533.md#onrecordingstateupdate) 回调提示录制结果。

- **参数**

  - **type**

    类型: <code>number</code>

    流属性，指定停止主流或者屏幕流录制<li>主流。包括：由摄像头/麦克风通过内部采集机制，采集到的视频/音频。</li><li>屏幕流。屏幕共享时共享的视频流，或来自声卡的本地播放音频流。</li>

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### setPublishFallbackOption()

设置发布的音视频流回退选项 。你可以调用这个接口来设置网络情况不佳或设备性能不足时只发送小流，以保证通话质量。

- **类型**

  ```ts
  (option: number) => number
  ```

- **注意**

  + 该方法仅在调用 [enableSimulcastMode](#enablesimulcastmode) 开启了发送多路视频流的情况下生效。
  + 你必须在进房前设置，进房后设置或更改设置无效。
  + 设置回退选项后，本端发布的音视频流发生回退或从回退中恢复时，订阅该音视频流的客户端会收到 [onSimulcastSubscribeFallback](85533.md#onsimulcastsubscribefallback) 回调通知。
  + 你可以调用 API 或者在服务端下发策略设置回退。当使用服务端下发配置实现时，下发配置优先级高于在客户端使用 API 设定的配置。

- **参数**

  - **option**

    类型: <code>number</code>

    本地发布的音视频流回退选项  <li>0：（默认）上行网络较弱或性能不佳时，不对音视频流作回退处理。  <li></li>>1：上行网络较弱或性能不佳时，只发送视频小流。</li>

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### setSubscribeFallbackOption()

设置订阅的音视频流回退选项。 你可以通过调用该接口来设置网络情况不佳或性能不足时只订阅小流或音频流，以保证通话质量。

- **类型**

  ```ts
  (option: number) => number
  ```

- **注意**

  + 你必须在进房前设置，进房后设置或更改设置无效。
  + 设置回退选项后，本端订阅的音视频流发生回退或从回退中恢复时,会收到 [onSimulcastSubscribeFallback](85533.md#onsimulcastsubscribefallback) 回调通知。
  + 设置回退选项后，本端订阅的视频流因为回退分辨率发生变化时,会收到 [onRemoteVideoSizeChanged](85533.md#onremotevideosizechanged) 回调通知。
  + 你可以调用 API 或者在服务端下发策略设置回退。当使用服务端下发配置实现时，下发配置优先级高于在客户端使用 API 设定的配置。

- **参数**

  - **option**

    类型: <code>number</code>

    远端订阅流回退处理选项<li>`0`: 关闭订阅音视频流时的性能回退功能 </li><li>`1`: 只接收视频小流</li><li>`2`: 先尝试只接收视频小流；如果网络环境无法显示视频，则再回退到只接收远端订阅的音频流</li>

- **返回值**

  类型: <code>number</code>

  方法调用结果

  + 0：方法调用成功
  + <0：方法调用失败

### setRemoteUserPriority()

设置用户优先级

- **类型**

  ```ts
  (room_id: string, user_id: string, priority: RemoteUserPriority) => number
  ```

- **注意**

  + 1. 该方法与 [setSubscribeFallbackOption](#setsubscribefallbackoption) 搭配使用。
  + 2. 如果开启了订阅流回退选项，弱网或性能不足时会优先保证收到的高优先级用户的流的质量。
  + 3. 该方法在进房前后都可以使用，可以修改远端用户的优先级。

- **参数**

  - **room_id**

    类型: <code>string</code>

    房间 ID

  - **user_id**

    类型: <code>string</code>

    远端用户的 ID

  - **priority**

    类型: <code>[RemoteUserPriority](85535.md#remoteuserpriority)</code>

    远端用户的需求优先级

- **返回值**

  类型: <code>number</code>

  + 0: 方法调用成功
  + <0: 方法调用失败

### startNetworkDetection()

开启通话前网络探测

- **类型**

  ```ts
  (is_test_uplink: boolean, expected_uplink_bitrate: number, is_test_downlink: boolean, expected_downlink_biterate: number) => number
  ```

- **注意**

  + 成功调用本接口后，会在 3s 内收到一次 [onNetworkDetectionResult](85533.md#onnetworkdetectionresult) 回调，此后每 2s 会收到一次该回调，通知探测结果；
  + 若探测停止，则会收到一次 [onNetworkDetectionStopped](85533.md#onnetworkdetectionstopped)  通知探测停止。

- **参数**

  - **is_test_uplink**

    类型: <code>boolean</code>

    是否探测上行带宽

  - **expected_uplink_bitrate**

    类型: <code>number</code>

    期望上行带宽，单位：kbps范围为 {0, [100-10000]}，其中， 0 表示由 SDK 指定最高码率。

  - **is_test_downlink**

    类型: <code>boolean</code>

    是否探测下行带宽

  - **expected_downlink_biterate**

    类型: <code>number</code>

    期望下行带宽，单位：kbps范围为 {0, [100-10000]}，其中， 0 表示由 SDK 指定最高码率。

- **返回值**

  类型: <code>number</code>

  + 0: 成功开启网络探测。
  + 1: 开始探测失败。参数错误，上下行探测均为 `false`，或期望带宽超过了范围 [100,10000]
  + 2: 开始探测失败。失败原因为，本地已经开始推拉流
  + 3: 已经开始探测，无需重复开启
  + 4: 不支持该功能

### stopNetworkDetection()

停止通话前网络探测

- **类型**

  ```ts
  () => number
  ```

- **注意**

  调用本接口后，会收到一次 [onNetworkDetectionStopped](85533.md#onnetworkdetectionstopped) 回调通知探测停止。

- **返回值**

  类型: <code>number</code>

  + 0：成功
  + !0：失败

### setBackgroundSticker()

将摄像头采集画面中的人像背景替换为指定图片或纯色背景。

- **类型**

  ```ts
  (model_path: string, source: VirtualBackgroundSource) => any
  ```

- **注意**

  + 调用此接口前需依次调用以下接口：
  1. 检查视频特效许可证 [checkLicense](#checklicense)；
  2. 设置视频特效算法模型路径 [setAlgoModelPath](#setaigomodelpath)；
  3. 开启视频特效 [enableEffect](#enableeffect)。
  4. 若要取消背景特效，将背景贴纸特效素材路径设置为null。

- **参数**

  - **model_path**

    类型: <code>string</code>

    传入背景贴纸特效素材路径。

  - **source**

    类型: <code>[VirtualBackgroundSource](85535.md#virtualbackgroundsource)</code>

    设置背景特效图片的本地路径。

- **返回值**

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本版本不支持 CV 功能
  + <0: 调用失败，具体错误码请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### setVideoWatermark()

在指定视频流上添加水印。

- **类型**

  ```ts
  (stream_index: number, image_path: string, config: RTCWatermarkConfig) => any
  ```

- **注意**

  + 调用 [clearVideoWatermark](#clearvideowatermark) 移除指定视频流的水印。
  + 同一路流只能设置一个水印，新设置的水印会代替上一次的设置。你可以多次调用本方法来设置不同流的水印。
  + 进入房间前后均可调用此方法。
  + 开启本地预览镜像，或本地预览和编码传输镜像时，远端水印均不镜像；开启本地预览镜像时，本端水印会镜像。
  + 开启大小流后，水印对大小流均生效，且针对小流进行等比例缩小。

- **参数**

  - **stream_index**

    类型: <code>number</code>

    需要添加水印的视频流属性，参看 [StreamIndex](85535.md#StreamIndex)。

  - **image_path**

    类型: <code>string</code>

    水印图片路径，支持本地文件绝对路径和Asset 资源路径（/assets/xx.png），长度限制为 512 字节。
<br>水印图片为 PNG 或 JPG 格式。

  - **config**

    类型: <code>[RTCWatermarkConfig](85535.md#rtcwatermarkconfig)</code>

    水印参数。

- **返回值**

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本版本不支持 CV 功能
  + <0: 调用失败，具体错误码请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### clearVideoWatermark()

移除指定视频流的水印。

- **类型**

  ```ts
  (stream_index: number) => any
  ```

- **参数**

  - **stream_index**

    类型: <code>number</code>

    需要移除水印的视频流属性，参看 StreamIndex。

- **返回值**

  + 0: 调用成功
  + 1000: 未集成 CV SDK
  + 1001: 本版本不支持 CV 功能
  + <0: 调用失败，具体错误码请参考 [CV SDK 文档](https://www.volcengine.com/docs/6705/102042)。

### setupLocalVideo()

为本地采集到的视频流绑定本地渲染视图

- **类型**

  ```ts
  (view: HTMLDivElement, room_id?: string, render_options?: RenderOptions) => number
  ```

- **参数**

  - **view**

    类型: <code>HTMLDivElement</code>

    视图

  - **room_id**

    类型: <code>string</code>

    房间 ID

  - **render_options**

    类型: <code>[RenderOptions](85535.md#renderoptions)</code>

    值: `' {
      render_mode: RenderMode.FIT,
      mirror: false,
    }'`

    渲染选项

- **返回值**

  类型: <code>number</code>

  + `0`：成功
  + `<0`: 失败

### removeLocalVideo()

解绑本地视频流已绑定的渲染视图

- **类型**

  ```ts
  (room_id?: string) => number
  ```

- **参数**

  - **room_id**

    类型: <code>string</code>

    房间 ID

- **返回值**

  类型: <code>number</code>

  `0`：成功
  `-1`: 失败

### setupRemoteVideo()

为远端视频流绑定本地渲染视图

- **类型**

  ```ts
  (user_id: string, room_id: string, view: HTMLDivElement, render_options?: RenderOptions) => number
  ```

- **参数**

  - **user_id**

    类型: <code>string</code>

    远端用户 ID

  - **room_id**

    类型: <code>string</code>

    房间 ID

  - **view**

    类型: <code>HTMLDivElement</code>

    视图

  - **render_options**

    类型: <code>[RenderOptions](85535.md#renderoptions)</code>

    值: `' {
      render_mode: RenderMode.FIT,
      mirror: false,
    }'`

    渲染选项

- **返回值**

  类型: <code>number</code>

  `0`：成功
  `-1`: 失败

### removeRemoteVideo()

解绑指定远端视频流已绑定的本地视图

- **类型**

  ```ts
  (user_id: string, room_id: string) => number
  ```

- **注意**

  停止接收远端视频流时应解绑视图

- **参数**

  - **user_id**

    类型: <code>string</code>

    远端用户 ID

  - **room_id**

    类型: <code>string</code>

    房间 ID

- **返回值**

  类型: <code>number</code>

  `0`：成功
  `-1`: 失败

### removeAllRemoteVideo()

解绑所有已绑定本地视图的指定远端视频流

- **类型**

  ```ts
  (room_id: string) => number
  ```

- **注意**

  停止接收远端视频流时应解绑视图

- **参数**

  - **room_id**

    类型: <code>string</code>

    房间 ID

- **返回值**

  类型: <code>number</code>

  0：成功
  -1: 失败

### setupLocalScreen()

为本地屏幕共享流绑定视图

- **类型**

  ```ts
  (view: HTMLDivElement, room_id: string, render_options?: RenderOptions) => number
  ```

- **注意**

  本地发起屏幕共享需要先绑定视图

- **参数**

  - **view**

    类型: <code>HTMLDivElement</code>

    视图

  - **room_id**

    类型: <code>string</code>

    房间 ID

  - **render_options**

    类型: <code>[RenderOptions](85535.md#renderoptions)</code>

    值: `' {
      render_mode: RenderMode.FIT,
      mirror: false,
    }'`

    渲染选项

- **返回值**

  类型: <code>number</code>

  0：成功
  -1: 失败

### removeLocalScreen()

解绑屏幕共享流已绑定的视图

- **类型**

  ```ts
  (roomId: string) => number
  ```

- **注意**

  本地停止屏幕共享时解绑视图

- **参数**

  - **room_id**

    类型: <code>string</code>

    房间 ID

- **返回值**

  类型: <code>number</code>

  0：成功
  !0: 失败

### setupRemoteScreen()

为远端屏幕共享流绑定本地视图

- **类型**

  ```ts
  (user_id: string, room_id: string, view: HTMLDivElement, render_options?: RenderOptions) => number
  ```

- **注意**

  接收屏幕共享流需要先绑定视图

- **参数**

  - **view**

    类型: <code>string</code>

    视图

  - **user_id**

    类型: <code>string</code>

    远端用户 ID

  - **room_id**

    类型: <code>HTMLDivElement</code>

    房间 ID

  - **render_options**

    类型: <code>[RenderOptions](85535.md#renderoptions)</code>

    值: `' {
      render_mode: RenderMode.FIT,
      mirror: false,
    }'`

    渲染选项

- **返回值**

  类型: <code>number</code>

  0：成功
  -1: 失败

### removeRemoteScreen()

解绑远端屏幕共享流已绑定的本地视图

- **类型**

  ```ts
  (user_id: string, room_id: string) => number
  ```

- **注意**

  停止接收屏幕共享流时应解绑视图

- **参数**

  - **user_id**

    类型: <code>string</code>

    远端用户 ID

  - **room_id**

    类型: <code>string</code>

    房间 ID

- **返回值**

  类型: <code>number</code>

  0：成功
  -1: 失败

### setupPublicStreamVideo()

为公共流绑定本地视图

- **类型**

  ```ts
  (stream_id: string, view: HTMLDivElement, renderOptions?: RenderOptions) => number
  ```

- **注意**

  接收公共流时需要先绑定视图

- **参数**

  - **stream_id**

    类型: <code>string</code>

    公共流 ID

  - **view**

    类型: <code>HTMLDivElement</code>

    视图

  - **renderOptions**

    类型: <code>[RenderOptions](85535.md#renderoptions)</code>

    值: `' {
      render_mode: RenderMode.FIT,
      mirror: false,
    }'`

    渲染选项

- **返回值**

  0：成功
  -1: 失败

### removePublicStreamVideo()

为公共流解绑本地视图

- **类型**

  ```ts
  (streamId: string) => number
  ```

- **注意**

  停止接收公共流时解绑视图。

- **参数**

  - **streamId**

    类型: <code>string</code>

    公共流 ID

- **返回值**

  0：成功
  -1: 失败

### `static` getSDKVersion()

获取当前 SDK 版本信息

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  当前 SDK 版本信息

### `static` getCurrentProcessId()

获取加载引擎进程的 ID 方便调试

- **类型**

  ```ts
  () => string
  ```

- **返回值**

  类型: <code>string</code>

  进程的 ID