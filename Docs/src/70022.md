如果你希望从此前版本的 Windows 客户端 SDK 升级到最新的客户端 SDK，请在工程文件中，替换最新的客户端 SDK 文件，并参考本文完成 API，回调，参数类型等的替换。

> 升级过程中，你可能需要参考[老版本 API 文档归档](70068)。

## 3.52
### 方法变更

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法 | 说明 |
| --- | --- | --- | --- | --- |
| 参数变更 | 引擎管理 | [`feedback`](Windows-api.md#IRTCVideo-feedback) || 参数数据类型变更 |
| 废弃 | CDN 推流 | `virtual int startLiveTranscoding(const char* task_id, ITranscoderParam* param, ITranscoderObserver* observer) = 0;` | [`virtual int startPushMixedStreamToCDN(const char* task_id, IMixedStreamConfig* config, IMixedStreamObserver* observer) = 0;`](Windows-api.md#IRTCVideo-startpushmixedstreamtocdn) | 合流转推直播接口/参数类型重命名，行为逻辑无变化，新旧版本类名对应关系参看该版本中“类型变更”。 |
| ^^ | ^^ | `virtual int stopLiveTranscoding(const char* task_id) = 0;` | [`virtual int stopPushStreamToCDN(const char* task_id) = 0;`](Windows-api.md#IRTCVideo-stoppushstreamtocdn) | ^^ |
| ^^ | ^^ | `virtual int updateLiveTranscoding(const char* task_id, ITranscoderParam* param) = 0;` | [`virtual int updatePushMixedStreamToCDN(const char* task_id, IMixedStreamConfig* config) = 0;`](Windows-api.md#IRTCVideo-updatepushmixedstreamtocdn) | ^^ |
| 合并 | 高级功能 | - `virtual int updatePosition(const Position& pos) = 0;` | [`virtual int updateSelfPosition(const PositionInfo& position_info) = 0;`](Windows-api.md#ISpatialAudio-updateselfposition) | 新接口支持本地用户同时设置自己的发声位置和发声朝向。 |\
||| - `virtual int updateSelfOrientation(const HumanOrientation& orientation) = 0;` |
| ^^ | ^^ | - `virtual int updateListenerPosition(const Position &pos) = 0;` | [`virtual int updateRemotePosition(const char* uid, const PositionInfo& position_info) = 0;`](Windows-api.md#ISpatialAudio-updateremoteposition) | 新接口支持本地用户设置远端用户的发声位置和发声朝向。 |\
||| - `virtual int updateListenerOrientation(const HumanOrientation& orientation) = 0;` |


### 回调变更

| 变更详情 | 方法 | 说明 |
| --- | --- | --- |
| 参数变更 | [`onPublicStreamSEIMessageReceived`](Windows-callback.md#IRTCVideoEventHandler-onpublicstreamseimessagereceived) | 参数 `sourceType` 的类型由 `SEIMessageSourceType` 变更为 `DataMessageSourceType` |\
||| 拆分为： |\
||||\
||| - [`onPublicStreamSEIMessageReceived`](Windows-callback.md#IRTCVideoEventHandler-onpublicstreamseimessagereceived)：接收客户端插入的 SEI 消息。 |\
||| - [`onPublicStreamDataMessageReceived`](Windows-callback.md#IRTCVideoEventHandler-onpublicstreamdatamessagereceived)：接收服务端插入的 SEI 消息和其他数据信息，例如音量信息。 |


### 类型变更

| 变更详情 | 类型 | 变更前 | 变更后 | 说明 |
| --- | --- | --- | --- | --- |
| 重命名 | 转推直播一级结构体 | `ITranscoderParam` | [`IMixedStreamConfig`](Windows-keytype.md#imixedstreamconfig) | 结构体中变量名称/方法名称均有变更，请至对应的类型详情中查看 |
| ^^ | 转推直播 Observer | `ITranscoderObserver` | [`IMixedStreamObserver`](Windows-callback.md#imixedstreamobserver) |  |
| ^^ | 转推直播二级结构体 | `TranscoderVideoParam` | [`MixedStreamVideoConfig`](Windows-keytype.md#mixedstreamvideoconfig) | 结构体中变量名称/方法名称均有变更，请至对应的类型详情中查看 |
| ^^ | ^^ | `TranscoderAudioParam` | [`MixedStreamAudioConfig`](Windows-keytype.md#mixedstreamaudioconfig) | ^^ |
| ^^ | ^^ | `TranscoderSpatialConfig` | [`MixedStreamSpatialAudioConfig`](Windows-keytype.md#mixedstreamspatialaudioconfig) | ^^ |
| ^^ | ^^ | `TranscoderClientMixParam` | [`MixedStreamClientMixConfig`](Windows-keytype.md#mixedstreamclientmixconfig) | ^^ |
| ^^ | ^^ | `TranscoderLayoutRegion` | [`MixedStreamLayoutRegionConfig`](Windows-keytype.md#mixedstreamlayoutregionconfig) | ^^ |
| ^^ | 转推直播相关枚举类型 | `TranscoderClientMixVideoFormat` | [`MixedStreamClientMixVideoFormat`](Windows-keytype.md#mixedstreamclientmixvideoformat) | 各枚举类中的枚举值名称均有变更，请至对应的类型详情中查看 |
| ^^ | ^^ | `TranscoderContentControlType` | [`MixedStreamMediaType`](Windows-keytype.md#mixedstreammediatype) | ^^ |
| ^^ | ^^ | `TranscoderRenderMode` | [`MixedStreamRenderMode`](Windows-keytype.md#mixedstreamrendermode) | ^^ |
| ^^ | ^^ | `TranscoderLayoutRegionType` | [`MixedStreamLayoutRegionType`](Windows-keytype.md#mixedstreamlayoutregiontype) | ^^ |
| ^^ | ^^ | `TranscoderAudioCodecProfile` | [`MixedStreamAudioProfile`](Windows-keytype.md#mixedstreamaudioprofile) | ^^ |
| ^^ | ^^ | `TranscoderVideoCodecType` | [`MixedStreamVideoCodecType`](Windows-keytype.md#mixedstreamvideocodectype) | ^^ |
| ^^ | ^^ | `TranscoderAudioCodecType` | [`MixedStreamAudioCodecType`](Windows-keytype.md#mixedstreamaudiocodectype) | ^^ |
| ^^ | ^^ | `StreamMixingType` | [`MixedStreamType`](Windows-keytype.md#mixedstreamtype) | ^^ |


### 错误码变更

| **变更详情** | **错误码** | **说明** |
| --- | --- | --- |
| 枚举值变更 | [`PublicStreamErrorCode`](Windows-keytype.md#publicstreamerrorcode) | 新增枚举值： |\
||||\
||| - `kPublicStreamErrorCodePullNoPushStream = 1300` |\
||||\
||| 名称变更： |\
||||\
||| - `kPublicStreamOK = 0` 更新为 `kPublicStreamErrorCodeOK = 0` |\
||| 	 |\
||| - `kPublicStreamPushInvalidParam = 1191` 更新为 `kPublicStreamErrorCodePushInvalidParam = 119` |\
||| 	 |\
||| - `kPublicStreamPushInvalidStatus = 1192` 更新为 `kPublicStreamErrorCodePushInvalidStatus = 1192` |\
||| 	 |\
||| - `kPublicStreamPushInternalError = 1193` 更新为 `kPublicStreamErrorCodePushInternalError = 1193` |\
||| 	 |\
||| - `kPublicStreamPushFailed = 1195` 更新为 `kPublicStreamErrorCodePushFailed = 1195` |\
||| 	 |\
||| - `kPublicStreamPushTimeout = 1196` 更新为 `kPublicStreamErrorCodePushTimeout = 1196` |
| ^^ | [`ErrorCode`](Windows-errorcode.md#errorcode) | 新增枚举值 `kErrorCodeJoinRoomRoomForbidden=-1025` 和 `kErrorCodeJoinRoomUserForbidden=-1026`。 |\
||| 当服务端在指定房间封禁指定用户，而此用户加入房间失败，或从房间中被踢出时收到。 |
| ^^ | ^^ | 废弃枚举值 `kErrorCodeOverScreenPublishLimit=-1081`，用 `kErrorCodeOverStreamPublishLimit=-1080` 代替。 |


## 3.50

### 头文件变更

原 bytertc_common_defines.h 文件拆分为 bytertc_media_defines.h 及 bytertc_rts_defines.h

### 方法变更

| **变更详情** | **功能模块** | **变动前方法** | **变动后方法** | **备注** |
| --- | --- | --- | --- | --- |
| 拆分 | 视频管理 | `virtual int registerFaceDetectionObserver(IFaceDetectionObserver* observer, int interval_ms) = 0;` | - [`virtual int enableFaceDetection(IFaceDetectionObserver* observer, unsigned int interval_ms, const char* faceModelPath) = 0;`](Windows-api.md#IVideoEffect-enablefacedetection) |  |\
|||| 	 ||\
|||| - [`virtual int disableFaceDetection() = 0;`](Windows-api.md#IVideoEffect-disablefacedetection) | 解除人脸识别与视频特效之间的耦合，提升接口易用性。 |\
|||| 	 ||\
|||||\
|||||
| 参数类型变更 | 屏幕共享 | `virtual int setScreenVideoEncoderConfig(const VideoEncoderConfig& screen_solution) = 0;` | [`virtual int setScreenVideoEncoderConfig(const ScreenVideoEncoderConfig& screen_solution) = 0;`](Windows-api.md#IRTCVideo-setscreenvideoencoderconfig) |  |\
||||||\
||||| 参数类型变更为新增的 `ScreenVideoEncoderConfig` |\
||||||
| 行为变更 | 屏幕共享 | - `setVideoSourceType`: 屏幕流默认为外部源 | - [`setVideoSourceType`](Windows-api.md#IStreamingRTCEngine-setvideosourcetype): 屏幕流默认为内部源 | 优化屏幕共享接口的行为 |\
||| 	 | 	 |\
||| - `setScreenAudioSourceType`: 当前设置为内部源时，且已开启了采集，调用该接口切换为外部源时，不会停止内部采集 | - [`setScreenAudioSourceType`](Windows-api.md#IRTCVideo-setscreenaudiosourcetype): 当前设置为内部源时，且已开启了采集，调用该接口切换为外部源时，自动停止内部采集 |\
||| 	 | 	 |\
||| - `startScreenAudioCapture`/ `startScreenVideoCapture`: 当前为外部源时，调用本接口将自动切换为内部源，并开启采集 | - [`startScreenAudioCapture`](Windows-api#IRTCVideo-startscreenaudiocapture)/ [`startScreenVideoCapture`](Windows-api#IRTCVideo-startscreenvideocapture): 当前为外部源时，调用本接口失败，并触发 [`onAudioDeviceWarning`](Windows-callback.md#IRTCVideoEventHandler-onaudiodevicewarning) 或 [`onVideoDeviceWarning`](Windows-callback.md#IRTCVideoEventHandler-onvideodevicewarning) |\
||| 	 | 	 |\
||| - `stopScreenAudioCapture`/ `stopScreenVideoCapture`: 当前为外部源时，调用本接口将关闭外部采集 | - [`stopScreenAudioCapture`](Windows-api#IRTCVideo-stopscreenaudiocapture)/ [`stopScreenVideoCapture`](Windows-api#IRTCVideo-stopscreenvideocapture): 当前为外部源时，调用本接口失败，并触发 [`onAudioDeviceWarning`](Windows-callback.md#IRTCVideoEventHandler-onaudiodevicewarning) 或 [`onVideoDeviceWarning`](Windows-callback.md#IRTCVideoEventHandler-onvideodevicewarning) |
| 名称和参数变更 | 音视频处理 | - `virtual int checkLicense(void* androidContext, void* jnienv, const char* licensePath) = 0;` | [`virtual int initCVResource(const char* license_file_path, const char* algo_model_dir) = 0;`](Windows-api.md#IVideoEffect-initcvresource) |  |\
||| 	 |||\
||| - `virtual void setAlgoModelPath(const char* modelPath) = 0;` |||\
||||||\
||||| 统一返回值 |
| ^^ | ^^ | `virtual int enableEffect(bool enabled) = 0;` | - [`virtual int enableVideoEffect() = 0;`](Windows-api.md#IVideoEffect-enablevideoeffect) | ^^ |\
|||| 	 |\
|||| - [`virtual int disableVideoEffect() = 0;`](Windows-api.md#IVideoEffect-disablevideoeffect) |\
|||| 	 |\
|||||\
|||||
| ^^ | ^^ | `virtual int updateNode(const char* nodePath, const char* nodeKey, float nodeValue) = 0;` | [`virtual int updateEffectNode(const char* effectNodePath, const char* nodeKey, float nodeValue) = 0;`](Windows-api.md#IVideoEffect-updateeffectnode) | ^^ |
| ^^ | ^^ | `virtual int setBackgroundSticker(const char* modelPath, const VirtualBackgroundSource& source) = 0;` | - [`virtual int enableVirtualBackground(const char* bg_sticker_path, const VirtualBackgroundSource& source) = 0;`](Windows-api.md#IVideoEffect-enablevirtualbackground) | ^^ |\
|||| 	 |\
|||| - [`virtual int disableVirtualBackground() = 0;`](Windows-api.md#IVideoEffect-disablevirtualbackground) |
| ^^ | 屏幕分享 | `virtual bool pushScreenFrame(IVideoFrame* frame)` | [`virtual int pushScreenVideoFrame(IVideoFrame* frame)`](Windows-api.md#IRTCVideo-pushscreenvideoframe) | - 返回值由 bool 变更为 int。 |\
||||| 	 |\
||||| - 名称由 `pushScreenFrame` 变更为 `pushScreenVideoFrame` |
| 参数变更 | 消息 | `virtual int sendSEIMessage(StreamIndex stream_index, const uint8_t* message, int length, int repeat_count) = 0;` | [`virtual int sendSEIMessage(StreamIndex stream_index, const uint8_t* message, int length, int repeat_count, SEICountPerFrame mode) = 0;`](Windows-api.md#IRTCVideo-sendseimessage) | 支持 SEI 多发模式，即在 1 帧间隔内多次发送 SEI 数据时，多个 SEI 随下个视频帧同时发送。 |\
||\
||\
||\
||\
||
| ^^ | 多个模块 | 返回值类型变化，例如： ||  |\
||||\
||| - 旧方法——`virtual void updateToken(const char* token) = 0;` |\
||| 	 |\
||| - 新方法——`virtual int updateToken(const char* token) = 0;` |\
||| 	 |\
||||\
||| ++以下接口返回值类型由 void 变为 int，具体 int 值含义参考新增数据结构++ ++[`ReturnStatus`](Windows-keytype.md#returnstatus)++++：++  |\
||| updateToken |\
||| setRemoteVideoConfig |\
||| subscribeStream |\
||| unsubscribeStream |\
||| subscribeScreen |\
||| unsubscribeScreen |\
||| setRemoteAudioPlaybackVolume |\
||| setPublicStreamVideoSink |\
||| ++以下接口返回值类型由 bool 变为 int，具体 int 值含义参考新增数据结构++ ++[`ReturnStatus`](Windows-keytype.md#returnstatus)++++：++  |\
||| pushExternalAudioFrame |\
||| pullExternalAudioFrame |\
||| pushExternalVideoFrame |\
||| pushExternalEncodedVideoFrame |\
||| pullAudioFrame |\
||| pushAudioFrame |\
||| pushVideoFrame |\
||| pushEncodedVideoFrame |\
||| ++以下接口返回值类型由 int 变为 void：++  |\
||| enableSimulcastMode |\
||| setPublishFallbackOption |\
||| setSubscribeFallbackOption |
| 名称变更 | 视频管理 | `setRemoteStreamVideoCanvas` | [`setRemoteVideoCanvas`](Windows-api.md#IRTCVideo-setremotevideocanvas) |  |
| 接口声明位置变更 | 视频管理 | 新版本中使用以下两个方法需要引入`bytertc_video_frame.h` 头文件 ||  |\
||||\
||| - [`BYTERTC_API IVideoFrame* buildVideoFrame(const VideoFrameBuilder& builder);`](Windows-api.md#buildvideoframe) |\
||| 	 |\
||| - [`BYTERTC_API IEncodedVideoFrame* buildEncodedVideoFrame(const EncodedVideoFrameBuilder& builder);`](Windows-api.md#buildencodedvideoframe) |


### 回调变更

| **变更详情** | **功能模块** | **变动前方法** | **变动后方法** |
| --- | --- | --- | --- |
| 废弃 | 音频管理 | `onLocalAudioStateChanged` 和 `onLocalVideoStateChanged` | 使用 [`onAudioDeviceStateChanged`](Windows-callback.md#IRTCVideoEventHandler-onaudiodevicestatechanged) 和 [`onVideoDeviceStateChanged`](Windows-callback.md#IRTCVideoEventHandler-onvideodevicestatechanged) 代替 |
| 参数变更 | 消息 | `virtual void onPublicStreamSEIMessageReceived(const char* public_stream_id, const uint8_t* message, int message_length) { (void)public_stream_id; (void)message; (void)message_length; }` | [`virtual void onPublicStreamSEIMessageReceived(const char* public_stream_id, const uint8_t* message, int message_length, SEIMessageSourceType source_type) { (void)public_stream_id; (void)message; (void)message_length; (void)source_type; }`](Windows-callback.md#IRTCVideoEventHandler-onpublicstreamseimessagereceived) |\
||||
| 删除回调类 | 范围语音 | [`IRangeAudioObserver`](Windows-callback.md#irangeaudioobserver) 类和相关的接口 | 此前，在手动订阅的场景下，如果你希望使用范围语音功能，你必须根据此回调获取的衰减系数，设定音量。 |\
|||| 自此版本起，无论是手动订阅还是自动订阅，衰减效果都由 SDK 实现，无需使用此接口。 |
| 名称变更 | CDN 推流 | `onStreamMixingVideoFrame` | [`onMixingVideoFrame`](Windows-callback.md#ITranscoderObserver-onmixingvideoframe) |  |
| ^^ | ^^ | `onStreamMixingAudioFrame` | [`onMixingAudioFrame`](Windows-callback.md#ITranscoderObserver-onmixingaudioframe) |  |
| ^^ | ^^ | `onStreamMixingDataFrame` | [`onMixingDataFrame`](Windows-callback.md#ITranscoderObserver-onmixingdataframe) |  |


### 类型变更

| **变更详情** | **数据类型** | **备注** |
| --- | --- | --- |
| 取值范围拓展 | [`TranscoderLayoutRegion`](Windows-keytype.md#transcoderlayoutregion) 中，`width` 和 `height` | 取值范围由 `(0.0, 1.0]` 拓展为 `[0.0, 1.0]`。 |
| 枚举值增删 | [`UserMessageSendResult`](Windows-keytype.md#usermessagesendresult) | 新增枚举值：`kUserMessageSendResultExceedQPS = 5` |
| ^^ | [`RoomMessageSendResult`](Windows-keytype.md#roommessagesendresult) | 新增枚举值：`kRoomMessageSendResultExceedQPS = 5` |
| ^^ | [`AudioProcessorMethod`](Windows-keytype.md#audioprocessormethod) | 新增枚举值：`kAudioFrameProcessorEarMonitor = 3` |
| 成员变量变更 | [`FaceDetectResult`](Windows-keytype.md#facedetectresult) | 新增成员变量：`frame_timestamp_us` |
| ^^ | [`ContentHint`](Windows-keytype.md#contenthint) | 废弃屏幕共享内部采集的变量`content_hint`。可通过 `VideoEncodePreference`设置视频流编码偏好，通过`ScreenVideoEncodePreference`设置屏幕流编码偏好。 |\
|||
| ^^ | [`AudioDeviceInfo`](Windows-keytype.md#audiodeviceinfo) | 增加成员变量 `device_short_name[MAX_DEVICE_ID_LENGTH]` |\
||||
| ^^ | [`ITranscoderParam`](Windows-keytype.md#itranscoderparam) | 新增成员变量：`TranscoderClientMixParam` |
| 变量类型变更 | 空间音频功能中表示空间坐标的 [`position`](Windows-keytype.md#position-2) 的 变量 `x`, `y`, `z` 类型由 `int` 更改为 `float`。 | 提升球面立体声渲染效果。 |
| 枚举值名称变更 | [`VideoSourceType`](Windows-keytype.md#videosourcetype) | 枚举值名称增加前缀 k，更改后的枚举值如下： |\
||| enum VideoSourceType { |\
||| *kVideoSourceTypeExternal = 0,*  |\
||| *kVideoSourceTypeInternal = 1,*  |\
||| *kVideoSourceTypeEncodedWithAutoSimulcast = 2,*  |\
||| kVideoSourceTypeEncodedWithoutAutoSimulcast = 3, |\
||| }; |
| 配置变更 | [`RoomProfileType`](Windows-keytype.md#roomprofiletype) | 房间属性的默认值 `kRoomProfileTypeCommunication = 0`，对应的由 `kRoomProfileTypeChatRoom = 6` 变更为 `kRoomProfileTypeMeeting = 16`。 |
| 新增 | [`PublicStreamErrorCode`](Windows-keytype.md#publicstreamerrorcode) | `onPlayPublicStreamResult` 和 `onPushPublicStreamResult` 中的 `errorCode` 参数类型由 int 改为 `PublicStreamErrorCode` |


### 错误码变更

| **变更详情** | **错误码** | **备注** |
| --- | --- | --- |
| 枚举值增删 | [`ErrorCode`](Windows-errorcode.md#errorcode) | 新增枚举值：`kErrorCodeUserIDDifferent = -1014` |


## 3.45.6
### 类型变更

以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增删 | [`AudioProcessorMethod`](Windows-keytype.md#audioprocessormethod) | 新增屏幕共享音频的枚举值： `kAudioFrameProcessorScreen = 4` |
| 枚举值增删 | [`MediaDeviceWarning`](Windows-keytype.md#mediadevicewarning) | 新增无声设备播放相关的错误码：`kMediaDeviceWarningRecordingUseSilentDevice` 和 `kMediaDeviceWarningPlayoutUseSilentDevice` |
| 枚举值增删 | [`SubscribeState`](Windows-keytype.md#subscribestate) | 新增无声设备采集相关的错误码：`kWarningCodeUseSilentRecordDevice` 和 `kWarningCodeUseSilentPlayOutDevice` |

## 3.45.4

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 |  <div style="width: 220pt">方法</div>| <div style="width: 150pt">备注</div> |
| --- | --- | --- | --- | --- |
| 参数数据结构改动 | 音频管理 |[`virtual void enableAudioPropertiesReport(const AudioPropertiesConfig& config) = 0;`](Windows-api#IRTCVideo-enableaudiopropertiesreport) | 数据结构中，新增参数：<li>[`AudioPropertiesMode`](Windows-keytype.md#audiopropertiesmode)</li><li>[`AudioReportMode`](Windows-keytype.md#audioreportmode)</li> |


### 类型变更

以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型  | 备注 |
| --- | --- | --- |
|枚举值增删 |[`DeviceTransportType`](Windows-keytype.md#devicetransporttype) |新增枚举值：`kDeviceTransportTypeUSB`，`kDeviceTransportTypePCI`，`kDeviceTransportTypeAirPlay` |


## 3.45.2

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 |  <div style="width: 220pt">变动前方法</div> | <div style="width: 220pt">变动后方法</div> | <div style="width: 150pt">备注</div> |
| --- | --- | --- | --- | --- |
| 废弃原方法 | 音频处理 | `virtual void muteAudioPlayback(MuteState mute_state) = 0;` | `virtual void setPlaybackVolume(const int volume) = 0;` | 设置远端用户音量为 0 即可停止播放本地收到的音频流 |


## 3.44

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 |  <div style="width: 210pt">变动前方法</div> | <div style="width: 210pt">变动后方法</div> | 备注 |
|---|---|---|---|---|

|合并、名称和参数变化 |音视频处理 |- `virtual int initVirtualBackground(void* androidContext, void* jnienv, const char* licensePath,const char* modelPath) = 0;`|[`virtual int setBackgroundSticker(const char* modelPath, const VirtualBackgroundSource& source) = 0;`](Windows-api.md#IVideoEffect-setbackgroundsticker) | \
|||- `virtual int enableVirtualBackground(const VirtualBackgroundSource& source) = 0;`\

|||- `virtual int disableVirtualBackground() = 0;` |


## 3.43

该版本部分头文件名称及路径发生变化，请参照下表在工程文件中进行调整：

|**平台** |**3.42** |**3.43** |**备注** |
|---|---|---|---|
|Windows |VolcEngineRTC/include/rtc/bytertc\_room\_interface.h |VolcEngineRTC/include/bytertc\_room.h |文件名变更，并迁移至上级目录 **include** 中 |
|^^|VolcEngineRTC/include/rtc/bytertc\_room\_event\_handler\_interface.h |VolcEngineRTC/include/bytertc\_room\_event\_handler.h |^^|
|^^|VolcEngineRTC/include/rtc/bytertc\_engine\_lite\_interface.h |VolcEngineRTC/include/bytertc\_video.h |^^|
|^^|VolcEngineRTC/include/rtc/bytertc\_engine\_lite\_event\_handler.h |VolcEngineRTC/include/bytertc\_video\_event\_handler.h |^^|


### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | <div style="width: 90pt">功能模块</div> | 变动前方法 | 变动后方法 | 备注 |
|---|---|---|---|---|
|基础类名变更 |所有模块 |class **IRtcEngine** |class **IRTCVideo** | |
|名称和参数变化 |引擎管理 |`BYTERTC_API bytertc::IRtcEngine* CreateRtcEngine(const char* app_id, bytertc::IRtcEngineEventHandler* event_handler, const char* parameters);` |[`BYTERTC_API bytertc::IRTCVideo* createRTCVideo(const char* app_id, bytertc::IRTCVideoEventHandler *event_handler, const char* parameters);`](Windows-api.md#creatertcvideo)|
|^^|^^|`BYTERTC_API void DestroyRtcEngine(bytertc::IRtcEngine* engine);` |[`BYTERTC_API void destroyRTCVideo(bytertc::IRTCVideo* engine);`](Windows-api.md#destroyrtcvideo) |
|^^|多房间 |`virtual IRtcRoom* CreateRtcRoom(const char* room_id) = 0;` |[`virtual IRTCRoom* createRTCRoom(const char* room_id) = 0;`](Windows-api.md#IRTCVideo-creatertcroom) |
|位置迁移，所属类型变更 |- 多房间|以下方法从 IRTCVideo（原 IRtcEngine）类下移除，使用 IRTCRoom 类中的同名方法代替：||\
||- 房间管理|- joinRoom||\
||- 音频管理|	||\
||- 转推直播|- publishStream||\
||- 公共流管理 |	||\
|||- unpublishStream||\
|||	||\
|||- publishScreen||\
|||	||\
|||- unpublishScreen||\
|||	||\
|||- startForwardStreamToRooms||\
|||	||\
|||- updateForwardStreamToRooms||\
|||	||\
|||- stopForwardStreamToRooms||\
|||	||\
|||- pauseForwardStreamToAllRooms||\
|||	||\
|||- resumeForwardStreamToAllRooms ||
|参数变更 |音频管理 |`virtual void setRemoteAudioPlaybackVolume(const char* user_id, int volume) = 0;` |[`virtual void setRemoteAudioPlaybackVolume(const char* room_id,const char* user_id, int volume) = 0;`](Windows-api.md#IRTCVideo-setremoteaudioplaybackvolume) | 新增 `room_id` 参数，且为必填。 |


### 回调变更

以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | <div style="width: 90pt">功能模块</div> | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
|基础类名变更 |所有模块 |class **IRtcEngineEventHandler** |class **IRTCVideoEventHandler** | |
|参数变更 |音频管理 |`virtual void OnUserStartAudioCapture(const char* user_id) {(void)user_id;}` |[`virtual void onUserStartAudioCapture(const char* room_id, const char* user_id) {(void)user_id;}`](Windows-callback.md#IRTCVideoEventHandler-onuserstartaudiocapture) |
|^^|^^|`virtual void OnUserStopAudioCapture(const char* user_id) {(void)user_id;}` |[`virtual void onUserStopAudioCapture(const char* room_id, const char* user_id) {(void)user_id;}`]() |
|^^|音视频传输 |`virtual void OnUserStartVideoCapture(const char* user_id) {(void)user_id;}` |[`virtual void onUserStartVideoCapture(const char* room_id, const char* user_id) {(void)user_id;}`](Windows-callback.md#IRTCVideoEventHandler-onuserstartvideocapture) |
|^^|^^|`virtual void OnUserStopVideoCapture(const char* user_id) {(void)user_id;}` |[`virtual void onUserStopVideoCapture(const char* room_id, const char* user_id) {(void)user_id;}`](Windows-callback.md#IRTCVideoEventHandler-onuserstopvideocapture) |
|^^|房间管理 |`virtual void OnAudioFrameSendStateChanged(const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}` |[`virtual void onAudioFrameSendStateChanged(const char* room_id, const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onaudioframesendstatechanged) |
|^^|^^|`virtual void OnVideoFrameSendStateChanged(const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}` |[`virtual void onVideoFrameSendStateChanged(const char* room_id, const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onvideoframesendstatechanged) |
|^^|^^|`virtual void OnScreenVideoFrameSendStateChanged(const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}` |[`virtual void onScreenVideoFrameSendStateChanged(const char* room_id, const RtcUser& user, FirstFrameSendState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onscreenvideoframesendstatechanged) |
|^^|^^|`virtual void OnAudioFramePlayStateChanged(const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}` |[`virtual void onAudioFramePlayStateChanged(const char* room_id, const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onaudioframeplaystatechanged) |
|^^|^^|`virtual void OnVideoFramePlayStateChanged(const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}` |[`virtual void onVideoFramePlayStateChanged(const char* room_id, const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onvideoframeplaystatechanged) |
|^^|^^|`virtual void OnScreenVideoFramePlayStateChanged(const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}` |[`virtual void onScreenVideoFramePlayStateChanged(const char* room_id, const RtcUser& user, FirstFramePlayState state) {(void)user;(void)state;}`](Windows-callback.md#IRTCVideoEventHandler-onscreenvideoframeplaystatechanged) |
|^^|公共流管理 |`virtual void OnPushPublicStreamResult(const char* public_stream_id, int errorCode) {(void)public_stream_id;(void)errorCode;}` |[`virtual void onPushPublicStreamResult(const char* room_id, const char* public_streamid, int errorCode) {(void)room_id;(void)public_streamid;(void)errorCode;}`](Windows-callback.md#IRTCVideoEventHandler-onpushpublicstreamresult) |


### 类型变更

以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型  | 备注 |
| --- | --- | --- |
|成员变量增删 |[`VideoSolution`](Windows-keytype.md#videosolution) |删除成员变量：`scale_mode` |
|^^|[`VideoEncoderConfig`](Windows-keytype.md#videoencoderconfig) |删除成员变量：`scaleMode` |
|枚举值增删 |[`ConnectionState`](Windows-keytype.md#connectionstate) |增加枚举值：`kConnectionStateFailed` |


### 错误码变更

以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
|枚举值增删 |[`ErrorCode`](Windows-errorcode.md#errorcode) |增加枚举值：`-1084` |


## 3.42

在此版本中，进行了接口命名风格的改动，由大驼峰变为小驼峰。此改动适用于所有 C++ SDK 中的主调接口和回调接口。

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法 | 备注 |
|---|---|---|---|---|
| 基础类名变更 | 所有模块 | class **IRtcEngineLite** | class **IRtcEngine** |  |
| ^^ | ^^ | class **IRtcRoom** | class **IRTCRoom** |  |
|位置迁移，所属类型变更|多房间|以下方法由 IRTCRoom（原 IRtcRoom）类迁移至 IRtcEngine（原 IRtcEngineLite）类下：<li>setRemoteAudioPlaybackVolume</li><li>startLiveTranscoding</li><li>stopLiveTranscoding</li><li>updateLiveTranscoding</li><li>startPushPublicStream</li><li>stopPushPublicStream</li><li>updatePublicStreamParam</li>|| 由于新方法变更为从引擎类上调用，因此增加了 roomId 相关的字段，且均为必填字段。 |
|名称和参数变化|引擎管理|`virtual int Feedback(const char* data) = 0;`|[`virtual int feedback(ProblemFeedbackOption *type, int count, const char* problem_desc) = 0;`](Windows-api.md#IRtcEngine-feedback)|
|^^|多房间|`virtual void SetRtcRoomEventHandler(IRTCRoomEventHandler* room_event_handler) = 0;`|[`virtual void setRTCRoomEventHandler(IRTCRoomEventHandler* room_event_handler) = 0;`](Windows-api.md#IRTCRoom-setrtcroomeventhandler)|
| 名称和参数变化，行为变化 | 音频设备管理 | `virtual int bytertc::IAudioDeviceManager::StartAudioPlaybackDeviceTest( const char* test_audio_file_path)` | `virtual int bytertc::IAudioDeviceManager::startAudioPlaybackDeviceTest( const char* test_audio_file_path, int indication_interval)` | 增加 `indication_interval` 参数设置回调音量频率 |
| ^^ | ^^ |  `virtual int bytertc::IAudioDeviceManager::StopAudioPlaybackDeviceTest()` | `virtual int bytertc::IAudioDeviceManager::stopAudioPlaybackDeviceTest()` | 名称变更 |
| ^^ | ^^ | `virtual int bytertc::IAudioDeviceManager::StartAudioCaptureDeviceTest(int indication_interval)` | `virtual int bytertc::IAudioDeviceManager::startAudioDeviceRecordTest( int indication_interval)` | 新方法不仅开启音量回调，还将在录音结束后开始自动播放 |
| ^^ | ^^ | `virtual int bytertc::IAudioDeviceManager::StopAudioCaptureDeviceTest()` | <li> `virtual int bytertc::IAudioDeviceManager::stopAudioDeviceRecordAndPlayTest()` </li> <li> `virtual int bytertc::IAudioDeviceManager::stopAudioDevicePlayTest()` </li>| 由于新的设备测试方法能启动麦克风和音频播放设备，因此停止方法也分为两个：<li> 停止录音并开始播放 </li><li> 终止设备测试，包括录音和回放</li>|
|参数变更|消息|`virtual int64_t SendUserMessageOutsideRoom(const char* uid, const char* message) = 0;`|[`virtual int64_t SendUserMessageOutsideRoom(const char* uid, const char* message, MessageConfig config) = 0;`](Windows-api.md#IRtcEngine-sendusermessageoutsideroom)| |
|^^|^^|`virtual int64_t SendUserBinaryMessageOutsideRoom(const char* uid, int length, const uint8_t* message) = 0;`|[`virtual int64_t SendUserBinaryMessageOutsideRoom(const char* uid, int length, const uint8_t* message, MessageConfig config) = 0;`](Windows-api.md#IRtcEngine-senduserbinarymessageoutsideroom)| |
|^^|^^|`virtual int64_t SendUserBinaryMessage(const char* uid, int length, const uint8_t* message) = 0;`|[`virtual int64_t SendUserBinaryMessage(const char* uid, int length, const uint8_t* message, MessageConfig config) = 0;`](Windows-api.md#IRtcEngine-senduserbinarymessage)| |
|^^|^^|`virtual int64_t SendUserMessage(const char* uid, const char* message) = 0;`|[`virtual int64_t SendUserMessage(const char* uid, const char* message, MessageConfig config) = 0;`](Windows-api.md#IRtcEngine-sendusermessage)| |
|返回值变更|音视频设备管理|`virtual IDeviceCollection* EnumerateVideoCaptureDevices() = 0;`|[`virtual IVideoDeviceCollection* EnumerateVideoCaptureDevices() = 0;`](Windows-api.md#IVideoDeviceManager-enumeratevideocapturedevices)|
|^^|^^|`virtual IDeviceCollection* EnumerateAudioPlaybackDevices() = 0;`|[`virtual IAudioDeviceCollection* EnumerateAudioPlaybackDevices() = 0;`](Windows-api.md#IAudioDeviceManager-enumerateaudioplaybackdevices)|
|^^|^^|`virtual IDeviceCollection* EnumerateAudioCaptureDevices() = 0;`|[`virtual IAudioDeviceCollection* EnumerateAudioCaptureDevices() = 0;`](Windows-api.md#IAudioDeviceManager-enumerateaudiocapturedevices)|
|方法重构|自定义音频处理|`virtual void RegisterLocalAudioProcessor(IAudioProcessor* processor, AudioFormat audioFormat) = 0;`|<li>[`virtual void registerAudioProcessor(IAudioFrameProcessor* processor) = 0; `](Windows-api.md#IRtcEngine-registeraudioprocessor)</li><li>[`virtual void enableAudioProcessor(AudioProcessorMethod method, AudioFormat format) = 0; `](Windows-api.md#IRtcEngine-enableaudioprocessor)</li><li>[`virtual void disableAudioProcessor(AudioProcessorMethod method) = 0;`](Windows-api.md#IRtcEngine-disableaudioprocessor)</li>| |


### 回调变更

以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 基础类名变更 | 所有模块 | class **IRtcEngineLiteEventHandler** | class **IRtcEngineEventHandler** |  |
|位置迁移，所属类型变更|<li>音频管理</li><li>网络管理</li><li>视频管理</li><li>音视频传输</li><li>房间管理|以下回调由 IRTCRoomEventHandler 类迁移至 IRtcEngineEventHandler（原 IRtcEngineLiteEventHandler）类下：<li>onUserStartAudioCapture</li><li>onUserStopAudioCapture</li><li>onFirstLocalAudioFrame</li><li>onFirstRemoteAudioFrame</li><li>onSimulcastSubscribeFallback</li><li>onFirstLocalVideoFrameCaptured</li><li>onLocalVideoSizeChanged</li><li>onRemoteVideoSizeChanged</li><li>onFirstRemoteVideoFrameRendered</li><li>onFirstRemoteVideoFrameDecoded</li><li>onUserStartVideoCapture</li><li>onUserStopVideoCapture</li><li>onLocalAudioStateChanged</li><li>onRemoteAudioStateChanged</li><li>onLocalVideoStateChanged</li><li>onRemoteVideoStateChanged</li><li>onAudioFrameSendStateChanged</li><li>onVideoFrameSendStateChanged</li><li>onScreenVideoFrameSendStateChanged</li><li>onAudioFramePlayStateChanged</li><li>onVideoFramePlayStateChanged</li><li>onScreenVideoFramePlayStateChanged</li>|| |
|回调重构|自定义音频处理|`class IAudioProcessor{ public: virtual int ProcessAudioFrame(const IAudioFrame& audioFrame) = 0; };`|`class IAudioFrameProcessor{ ` <br> [`virtual int onProcessRecordAudioFrame(IAudioFrame& audioFrame) = 0; `](Windows-callback.md#IAudioFrameProcessor-onprocessrecordaudioframe) <br> [`virtual int onProcessPlayBackAudioFrame(IAudioFrame& audioFrame) = 0; `](Windows-callback.md#IAudioFrameProcessor-onprocessplaybackaudioframe) <br> [`virtual int onProcessRemoteUserAudioFrame(const RemoteStreamKey& stream_info, IAudioFrame& audioFrame) = 0; `](Windows-callback.md#IAudioFrameProcessor-onprocessremoteuseraudioframe) <br> `};`| |


### 类型变更

以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型  | 备注 |
| --- | --- | --- |

|枚举值增删 |`RoomProfileType` |增加以下枚举值：\
|||- `kRoomProfileTypeChat = 5`\
|||- `kRoomProfileTypeChatRoom = 6`\
|||- `kRoomProfileTypeLwTogether = 7`\
|||- `kRoomProfileTypeGameHD = 8`\
|||- `kRoomProfileTypeCoHost = 9`\
|||- `kRoomProfileTypeInteractivePodcast = 10`\
|||- `kRoomProfileTypeKTV = 11`\
|||- `kRoomProfileTypeChorus = 12`\
|||- `kRoomProfileTypeVRChat = 13`\
|||- `kRoomProfileTypeGameStreaming = 14`\
|||- `kRoomProfileTypeLanLiveStreaming = 15`\
|||- `kRoomProfileTypeMeeting = 16`\
|||- `kRoomProfileTypeMeetingRoom = 17`\
|||- `kRoomProfileTypeClassroom = 18`\
|||删除了 `kRoomProfileTypeLiveBroadcasting = 1`，建议根据实际业务情况，替换为以下模式：\
|||- `kRoomProfileTypeChatRoom = 6`\
|||- `kRoomProfileTypeCoHost = 9`\
|||- `kRoomProfileTypeInteractivePodcast = 10`\
|||- `kRoomProfileTypeKTV = 11`\

|||- `kRoomProfileTypeChorus = 12` |

|枚举值增删 |[`AudioProfileType`](Windows-keytype.md#audioprofiletype) |增加以下枚举值：\
|||- `kAudioProfileTypeStandardStereo = 4`\

|||- `kAudioProfileTypeHDMono = 5` |

|成员变量增删 |[`LocalVideoStats`](Windows-keytype.md#localvideostats) |删除以下成员变量：\
|||- `target_kbitrate`\
|||	\

|||- `target_frame_rate` |

|成员变量增删 |[`RtcRoomStats`](Windows-keytype.md#rtcroomstats) |增加以下成员变量：\
|||- `rx_screen_kbitrate`\

|||- `tx_screen_kbitrate` |

|成员变量增删 |[`ScreenCaptureSourceInfo`](Windows-keytype.md#screencapturesourceinfo) |新增以下成员变量：\
|||- `application`\
|||- `pid`\
|||- `primaryMonitor`\

|||- `region_rect` |
|类型增删 |[`AudioAbilityType`](Windows-keytype.md#audioabilitytype) |新增枚举类 |
|类型增删 |[`AudioDeviceInfo`](Windows-keytype.md#audiodeviceinfo) |新增类型 |
|类型名称变化 |`IDeviceCollection` |变更为 [`IVideoDeviceCollection`](Windows-api.md#ivideodevicecollection) 和 [`IAudioDeviceCollection`](Windows-api.md#iaudiodevicecollection) |

|枚举值增删 |[`MediaDeviceState`](Windows-keytype.md#mediadevicestate) |增加以下枚举值：\
|||- `kMediaDeviceBecomeSystemDefault`\
|||	\

|||- `kMediaDeviceResignSystemDefault` |
|常量增删 |`MAX_DEVICE_ID_LENGTH`|新增常量 |
|类型增删 |[`DeviceTransportType`](Windows-keytype.md#devicetransporttype) |新增枚举类 |
|类型增删 |[`VideoDeviceInfo`](Windows-keytype.md#videodeviceinfo) |新增类型 |

|枚举值增删 |[`MediaDeviceWarning`](Windows-keytype.md#mediadevicewarning) |新增以下枚举值：\
|||- `kMediaDeviceWarningSetAudioRouteInvalidScenario = 20`\
|||- `*kMediaDeviceWarningSetAudioRouteNotExists = 21*`\
|||- `*kMediaDeviceWarningSetAudioRouteFailedByPriority = 22*`\
|||- `kMediaDeviceWarningSetAudioRouteNotVoipMode = 23`\

|||- `kMediaDeviceWarningSetAudioRouteDeviceNotStart = 24` |
|类型名称变化 |`AudioRouteDevice` |变更为[`AudioRoute`](Windows-keytype.md#audioroute)|


### 错误码变更

以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增删 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增枚举值：`-2014` |
| 枚举值增删 | [`ErrorCode`](Windows-errorcode.md#errorcode) | 删除枚举值：`-1008`|


## 3.41

### 回调变更

以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 合并或拆分 | 房间管理 | <li>`virtual void OnJoinRoomResult( const char* room_id, const char* uid, int error_code, JoinRoomType join_type, int elapsed) { (void)room_id; (void)error_code; (void)join_type; (void)elapsed; }`</li><li>`virtual void OnRoomWarning(int warn) { (void)warn; }`</li><li>`virtual void OnRoomError(int err) { (void)err; }` | <li>[`virtual void onRoomStateChanged( const char* room_id, const char* uid, int state, const char* extra_info) { (void)room_id; (void)state; (void)extra_info; }`](Windows-callback.md#onroomstatechanged)</li><li>[`virtual void onStreamStateChanged( const char* room_id, const char* uid, int state, const char* extra_info) { (void)room_id; (void)state; (void)extra_info; }`](Windows-callback.md#onstreamstatechanged) |


## 3.40

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 名称和参数变更 | 音频管理 | `virtual IPositionAudioRenderInterface* GetPositionAudioRender() = 0;` | [`virtual ISpatialAudio* GetSpatialAudio() = 0;`](Windows-api.md#IRtcRoom-getspatialaudio) | 接口由 IRtcEngineLite 类移动至 IRtcRoom 类 |
| 名称变化 | 音频管理 | `virtual void EnableAudioSpatialRender(bool enable) = 0;` | [`virtual void EnableSpatialAudio(bool enable) = 0;`](Windows-api.md#enablespatialaudio) | |

| 原接口废弃，使用新接口代替 | 音频管理 | - `void EnableExternalAudioDevice(const AudioFormat &recording_format, const AudioFormat &playback_format) = 0;`| - [`int SetAudioSourceType (AudioSourceType type) = 0;`](Windows-api.md#IRtcEngineLite-setaudiosourcetype)| \

|||- `void DisableExternalAudioDevice() = 0;` |- [`int SetAudioRenderType (AudioRenderType type) = 0;`](Windows-api.md#setaudiorendertype) |

| 参数变更 | 音频管理 | - `bool PushExternalAudioFrame(int8_t* data, int samples) = 0;`| - [`bool PushExternalAudioFrame(IAudioFrame* audioFrame) = 0;`](Windows-api.md#pushexternalaudioframe)| \

|||- `bool PullExternalAudioFrame(int8_t* data, int samples) = 0;` |- [`bool PullExternalAudioFrame(IAudioFrame* audioFrame) = 0;`](Windows-api.md#pullexternalaudioframe) |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
|---|---|---|

| 枚举值增删 | [`TranscoderAudioCodecProfile`](Windows-keytype.md#transcoderaudiocodecprofile) |删除枚举值：`kByteAACProfileMain`。\

||| 枚举值`kByteAACProfileHEv1`的值变为 1，枚举值`kByteAACProfileHEv2`的值变为 2。 |
| 类型名称变化 | `ByteRTCAudioRouteDevice` | 修改为 `ByteRTCAudioRoute` |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增删 | [`ErrorCode`](Windows-errorcode.md#errorcode) | 新增枚举值：`-1083` |


## 3.39

### 方法变更

以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 返回值变更 | 实时消息 | `void Login(const char* token, const char* uid)` | [`int64_t Login(const char* token, const char* uid)`](Windows-api.md#IRtcEngineLite-login) | --- |

|API 行为变更 |订阅媒体流|SDK 在每条远端流属性中维护订阅关系。如果该流被移除，订阅关系也将取消 |SDK 在房间属性中维护订阅关系列表。订阅关系将在用户退房后才会取消。 |\--- \
||[subscribeStream](Windows-api.md#IRTCRoom-subscribestream)\

||[unsubscribeStream](Windows-api.md#IRTCRoom-unsubscribestream) |\
||[subscribeScreen](Windows-api.md#IRTCRoom-subscribescreen) |\

||[unsubscribeScreen](Windows-api.md#IRTCRoom-unsubscribescreen)


    
### 回调变更

以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法  | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 实时消息 | `virtual void OnServerMessageSendResult(int64_t msgid, int error)` | [`virtual void OnServerMessageSendResult(int64_t msgid, int error, const bytertc::ServerACKMsg& msg)`](Windows-callback.md#IRtcEngineLiteEventHandler-onservermessagesendresult) |  |
| 参数变化 | 转推直播 | `virtual void OnStreamMixingEvent(StreamMixingEvent event, const char* task_id, int error, StreamMixingType mix_type) = 0;` | [`virtual void OnStreamMixingEvent(StreamMixingEvent event, const char* task_id, StreamMixingErrorCode error, StreamMixingType mix_type) = 0;`](Windows-callback.md#ITranscoderObserver-onstreammixingevent) |



### 类型变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举类新增 | [`StreamMixingEvent`](Windows-keytype.md#streammixingevent) | |


## 3.38

### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 成员变量增删 | [`ScreenCaptureParameters`](Windows-keytype.md#screencaptureparameters) | 新增 `content_hint` |
| 成员变量增删 | [`SubscribeConfig`](Windows-keytype.md#subscribeconfig) | 新增成员变量 `framerate` |
| 成员变量变化 | [`RemoteVideoConfig`](Windows-keytype.md#remotevideoconfig) |成员变量 `frame_rate_ratio` 变为 `framerate`， 由输入与原始帧率的比例变为输入期望订阅的最大帧率 |
| 枚举值增删 | [`AudioMixingError`](Windows-keytype.md#audiomixingerror) | 新增枚举值：`kAudioMixingErrorInValidPlaybackSpeed` |
|枚举值增删|[`MediaDeviceState`](Windows-keytype.md#mediadevicestate)|新增枚举值：`kMediaDeviceInterruptionBegan`，表示媒体设备采集暂停，等待自动恢复|
|枚举值增删|[`MediaDeviceState`](Windows-keytype.md#mediadevicestate)|新增枚举值：`kMediaDeviceInterruptionEnded`，表示媒体设备采集已自动恢复|

### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值改名 | [`ErrorCode`](Windows-errorcode.md#errorcode) | 表示用户被踢出房间的错误码由 `kBrerrKickedOut` 变更为 `kErrorCodeKickedOut` |
| 枚举值增删 | [`ErrorCode`](Windows-errorcode.md#errorcode) | 新增错误码：`kRoomErrorTokenExpired`，表示用户因 Token 过期被踢出房间 |
| 枚举值增删 | [`ErrorCode`](Windows-errorcode#errorcode) | 新增枚举值：`kRoomErrorUpdateTokenWithInvalidToken`，表示调用 [UpdateToken](Windows-api.md#updatetoken) 使用的 Token 无效 |


## 3.37

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 合并 | 音频数据回调 | <li>`virtual void SetRecordingAudioFrameParameters(int sample_rate, int channels) = 0;`</li><li>`virtual void SetPlaybackAudioFrameParameters(int sample_rate, int channels) = 0;`</li><li>`virtual void SetMixedAudioFrameParameters(int sample_rate, int channels) = 0;`</li> | [`virtual void EnableAudioFrameCallback(AudioFrameCallbackMethod method, AudioFormat format) = 0;`](Windows-api.md#IRtcEngineLite-enableaudioframecallback) | 在`format`中设置回调的音频数据类型 |
| 参数增加 | 本地录制 | `virtual int StartFileRecording(StreamIndex type, RecordingConfig config) = 0;` | [`virtual int StartFileRecording(StreamIndex type, RecordingConfig config, RecordingType recording_type) = 0;`](Windows-api.md#IRtcEngineLite-startfilerecording) | |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 拆分 | 引擎管理 | `virtual void OnMediaDeviceStateChanged(const char* device_id,bytertc::MediaDeviceType device_type,bytertc::MediaDeviceState device_state,bytertc::MediaDeviceError device_error) {(void)device_id;(void)device_type;(void)device_state;(void)device_error;}` | <li>[`virtual void OnAudioDeviceStateChanged(const char* device_id, bytertc::RTCAudioDeviceType device_type,bytertc::MediaDeviceState device_state, bytertc::MediaDeviceError device_error) {(void)device_id;(void)device_type;(void)device_state;(void)device_error;}`](Windows-callback.md#IRtcEngineLiteEventHandler-onaudiodevicestatechanged)</li><li>[`virtual void OnVideoDeviceStateChanged(const char* device_id, bytertc::RTCVideoDeviceType device_type,bytertc::MediaDeviceState device_state, bytertc::MediaDeviceError device_error) {(void)device_id;(void)device_type;(void)device_state;(void)device_error;}`](Windows-callback.md#IRtcEngineLiteEventHandler-onvideodevicestatechanged)</li> | 媒体设备状态回调拆分为音频和视频设备状态回调 |
| 拆分 | 引擎管理 | `virtual void OnMediaDeviceWarning(const char* device_id, bytertc::MediaDeviceType device_type,bytertc::MediaDeviceWarning device_warning){(void)device_id;(void)device_type;(void)device_warning;}` | <li>[`virtual void OnAudioDeviceWarning(const char* device_id, bytertc::RTCAudioDeviceType device_type,bytertc::MediaDeviceWarning device_warning) {(void)device_id;(void)device_type;(void)device_warning;}`](Windows-callback.md#IRtcEngineLiteEventHandler-onaudiodevicewarning)</li><li>[`virtual void OnVideoDeviceWarning(const char* device_id, bytertc::RTCVideoDeviceType device_type,bytertc::MediaDeviceWarning device_warning) {(void)device_id;(void)device_type;(void)device_warning;}`](Windows-callback.md#IRtcEngineLiteEventHandler-onvideodevicewarning)</li> | 媒体设备警告回调拆分成音频和视频设备警告回调 |
| 参数变化 | 音频数据回调 | `virtual void OnRecordAudioFrame(const AudioFrame& audio_frame) = 0;` | [`virtual void OnRecordAudioFrame(const IAudioFrame& audio_frame) = 0;`](Windows-callback.md#IAudioFrameObserver-onrecordaudioframe) | `IAudioFrame`与`AudioFrame`之间的相互转换，参看示例代码[转换`samples`与`data_size()`](#1)。 |
| 参数变化 | 音频数据回调 | `virtual void OnPlaybackAudioFrame(const AudioFrame& audio_frame) = 0;` | [`virtual void OnPlaybackAudioFrame(const IAudioFrame& audio_frame) = 0;`](Windows-callback.md#IAudioFrameObserver-onplaybackaudioframe) | ^^ |
| 参数变化 | 音频数据回调 | `virtual void OnMixedAudioFrame(const AudioFrame& audio_frame) = 0;` | [`virtual void OnMixedAudioFrame(const IAudioFrame& audio_frame) = 0;`](Windows-callback.md#IAudioFrameObserver-onmixedaudioframe) | ^^ |

<span id="1"></span>转换`samples`与`data_size()`，示例代码：   
```
samples = data_size() / (channel() * 2)
```


## 3.36

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 多房间 | <li>`virtual void StartLiveTranscoding(ITranscoderParam* param, ITranscoderObserver* observer) = 0;`</li><li>`virtual void StopLiveTranscoding() = 0;`</li><li>`virtual void UpdateLiveTranscoding(ITranscoderParam* param) = 0;`</li> | <li>[`virtual void StartLiveTranscoding(const char* task_id, ITranscoderParam* param, ITranscoderObserver* observer) = 0;`](Windows-api.md#IRtcRoom-startlivetranscoding)</li><li>[`virtual void StopLiveTranscoding(const char* task_id) = 0;`](Windows-api.md#IRtcRoom-stoplivetranscoding)</li><li>[`virtual void UpdateLiveTranscoding(const char* task_id, ITranscoderParam* param) = 0;`](Windows-api.md#IRtcRoom-updatelivetranscoding)</li> | 增加参数，设置转推直播任务 ID |
| 参数变化 | 多房间 | <li>`virtual void PublishScreen() = 0;`</li><li>`virtual void UnpublishScreen() = 0;`</li> | <li>[`virtual void PublishScreen(MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-publishscreen)</li><li>[`virtual void UnpublishScreen(MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-unpublishscreen)</li> | 新增参数，设置发布/取消发布的媒体类型 |
| 名称和参数变化 | 视频管理 | `virtual void SetRemoteVideoCanvas(const char* user_id, StreamIndex index, const VideoCanvas& canvas) = 0;` | [`virtual void SetRemoteStreamVideoCanvas(RemoteStreamKey stream_key, const VideoCanvas& canvas) = 0;`](Windows-api.md#setremotestreamvideocanvas) |
| 拆分 | 多房间 | `virtual void SubscribeUserStream(const char* user_id, StreamIndex stream_type, SubscribeMediaType media_type, const SubscribeVideoConfig& video_config) = 0;` | <li>[`virtual void SubscribeStream(const char *user_id,MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-subscribestream)</li><li>[`virtual void UnsubscribeStream(const char *user_id,MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-unsubscribestream)</li><li>[`virtual void SubscribeScreen(const char *user_id,MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-subscribescreen)</li><li>[`virtual void UnsubscribeScreen(const char *user_id,MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-unsubscribescreen)</li> | 解耦摄像头/麦克风采集的媒体流与屏幕共享媒体流的订阅/取消订阅 |
| 拆分 | 视频管理 | `virtual int SetVideoEncoderConfig(StreamIndex index, const VideoSolution* solutions, int solution_num) = 0;` | <li>[`virtual int SetVideoEncoderConfig(const VideoEncoderConfig* channel_solutions, int solution_num) = 0;`](Windows-api.md#IRtcEngineLite-setvideoencoderconfig-2)</li><li>[`virtual int SetScreenVideoEncoderConfig(const VideoEncoderConfig& screen_solution) = 0;`](Windows-api.md#IRtcEngineLite-setscreenvideoencoderconfig)</li> | 使用独立的接口分别设置摄像头视频流和屏幕视频流的发布参数 |
| 合并 | 多房间 | <li>`virtual void Publish() = 0;`</li><li>`virtual void Unpublish() = 0;`</li><li>`virtual void MuteLocalAudio(MuteState mute_state) = 0;`</li><li>`virtual void MuteLocalVideo(MuteState muteState) = 0;`</li> | <li>[`virtual void PublishStream(MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-publishstream)</li><li>[`virtual void UnpublishStream(MediaStreamType type) = 0;`](Windows-api.md#IRtcRoom-unpublishstream)</li> | 新版本中新增独立的接口单独控制摄像头/麦克风采集的音频/视频的发布/取消发布 |




### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 房间管理 | `virtual void bytertc::IRTCRoomEventHandler::OnUserLeave(const char* uid, UserOfflineReason reason)` | [`virtual void bytertc::IRTCRoomEventHandler::OnUserLeave(const char* uid, UserOfflineReason reason)`](Windows-callback.md#IRTCRoomEventHandler-onuserleave) | `reason` 参数变化 |
| 拆分或合并 |多房间 | <li>`virtual void OnStreamAdd(const MediaStreamInfo& stream)`</li><li>`virtual void OnStreamRemove(const MediaStreamInfo& stream, StreamRemoveReason reason)`</li><li>`virtual void OnUserMuteAudio(const char* user_id, MuteState mute_state)`</li><li>`virtual void OnUserMuteVideo(const char* uid, MuteState mute)`</li> | <li>[`virtual void OnUserPublishStream(const char* uid, MediaStreamType type) {(void)uid;(void)type;}`](Windows-callback.md#IRTCRoomEventHandler-onuserpublishstream)</li><li>[`virtual void OnUserPublishScreen(const char* uid, MediaStreamType type) {(void)uid; (void)type;}`](Windows-callback.md#IRTCRoomEventHandler-onuserpublishscreen)</li><li>[`virtual void OnUserUnPublishStream(const char* uid, MediaStreamType type,StreamRemoveReason reason) {(void)uid; (void)type; (void)reason;}`](Windows-callback.md#IRTCRoomEventHandler-onuserunpublishstream)</li><li>[`virtual void OnUserUnPublishScreen(const char* uid, MediaStreamType type,StreamRemoveReason reason) {(void)uid;(void)type;(void)reason;}`](Windows-callback.md#IRTCRoomEventHandler-onuserunpublishscreen)</li> | 解耦新增或移除摄像头/麦克风采集的媒体流与新增屏幕共享媒体流的回调，同时去除旧版本回调在功能上的重合 |
| 删除 | 转推直播 | `virtual void OnLiveTranscodingResult(const char* url, int error) {(void)url;(void)error;}` | / |



### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 成员变量变化 | [LocalStreamStats](Windows-keytype#localstreamstats) 和 [RemoteStreamStats](Windows-keytype#remotestreamstats) | `txQuality` 和 `rxQuality` 成员变量移动到了新增类型 [NetworkQualityStats](Windows-keytype#networkqualitystats) 中，通过 [OnNetworkQuality](Windows-callback.md#onnetworkquality) 回调获取 |
| 成员变量变化 | [`AudioPropertiesInfo`](Windows-keytype.md#audiopropertiesinfo) | 成员变量 `volume` 拆分成 `linear_volume` 和 `nonlinear_volume` |
| 成员变量增删 | [`RTCRoomConfig`](Windows-keytype.md#rtcroomconfig) | 新增 `remote_video_config` |
| 成员变量增删 | [`MultiRoomConfig`](Windows-keytype.md#multiroomconfig) | 新增 `remote_video_config` |


## 3.35

### 行为变更

自此版本起，本地视频采集参数默认由系统自动设置，而不是和编码参数保持一致。你可以通过 VideoCaptureConfig 进行相关设置。如果你的代码逻辑中对采集到的视频帧进行了自定义处理，应对处理逻辑进行相应修改。

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 视频管理 | `virtual int SetVideoCaptureConfig(const VideoCaptureConfig& videoCaptureConfig) = 0;` | [`virtual int SetVideoCaptureConfig(const VideoCaptureConfig& videoCaptureConfig) = 0;`](Windows-api.md#setvideocaptureconfig) |增加摄像头采集参数中的模式设置|


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 名称变化 | 视频管理 | `virtual void OnFirstRemoteVideoFrameRendered(const RemoteStreamKey key, const VideoFrameInfo& info) {(void)key; (void)info;}` | [`virtual void OnFirstRemoteVideoFrameDecoded(const RemoteStreamKey key, const VideoFrameInfo& info) {(void)key; (void)info;}`](Windows-callback.md#onroomerror) |



## 3.34

### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`NetworkDetectionStopReason`](Windows-keytype.md#networkdetectionstopreason) | 新增了枚举值：`kNetworkDetectionStopReasonInnerErr` |
| 枚举值增减 | [`AudioMixingError`](Windows-keytype.md#audiomixingerror) | 新增了枚举值：`kAudioMixingErrorInValidPitch` |
| 成员变量变化 | [`AudioMixingConfig`](Windows-keytype.md#audiomixingconfig) | 新增成员变量：`position` 和 `callback_on_progress_interval` |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增了枚举值：`-5011` |



## 3.33

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 音频管理 | <li>`virtual void EnableAudioMixingFrame(AudioMixingType type) = 0;`</li><li>`virtual void DisableAudioMixingFrame() = 0;`</li><li>`virtual int PushAudioMixingFrame(IAudioFrame* audio_frame) = 0;`</li> | <li>[`virtual void EnableAudioMixingFrame(int id, AudioMixingType type) = 0;`](Windows-api.md#enableaudiomixingframe)</li><li>[`virtual void DisableAudioMixingFrame(int id) = 0;`](Windows-api.md#disableaudiomixingframe)</li><li>[`virtual int PushAudioMixingFrame(int id, IAudioFrame* audio_frame) = 0;`](Windows-api.md#pushaudiomixingframe)</li> |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |

| 枚举值增减 | [`VideoPixelFormat`](Windows-keytype.md#videopixelformat) | 新增了枚举值：<li>`kVideoPixelFormatTexture2D`</li><li>`kVideoPixelFormatTextureOES`</li>

| 成员变量变化 | [`IVideoFrame`](Windows-keytype.md#ivideoframe) | <li>`virtual int frame_type() const = 0;` 变更为 `virtual VideoFrameType frame_type() const = 0;`</li><li>`virtual int pixel_format() const = 0;` 变更为 `virtual VideoPixelFormat pixel_format() const = 0;`</li><li>`virtual int rotation() const = 0;` 变更为 `virtual VideoRotation rotation() const = 0;`</li><li>`virtual int color_space() const = 0;` 变更为 `virtual ColorSpace color_space() const = 0;`</li> |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode#warningcode) | 废弃了枚举值 `-5002` ~ `-5008`。<br>使用 [`OnMediaDeviceStateChanged`](Android-callback.md#onmediadevicestatechanged) 代替。 |


## 3.30

### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 成员变量变化 | [`LocalAudioStats`](Windows-keytype.md#localaudiostats) | 新增了成员变量：`jitter` |
| 成员变量变化 | [`RemoteAudioStats`](Windows-keytype.md#remoteaudiostats) | 新增了成员变量：`jitter` |
| 成员变量变化 | [`LocalVideoStats`](Windows-keytype.md#localvideostats) | 新增了成员变量：`jitter` |
| 成员变量变化 | [`RemoteVideoStats`](Windows-keytype.md#remotevideostats) | 新增了成员变量：`jitter` |


## 3.29

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 多房间 | `virtual void JoinRoom(const char* token, const UserInfo& user_info, const MultiRoomConfig& config) = 0;` | [`virtual int JoinRoom(const char* token, const UserInfo& user_info, const MultiRoomConfig& config) = 0;`](Windows-api.md#joinroom-2) |
| 参数变化 | 房间管理 | `virtual void JoinRoom(const char* token, const char* room_id, const UserInfo& user_info, const RTCRoomConfig& room_config) = 0;` | [`virtual int JoinRoom(const char* token, const char* room_id, const UserInfo& user_info, const RTCRoomConfig& room_config) = 0;`](Windows-api.md#joinroom) |
| 参数变化 | 视频管理 | `virtual void SetVideoSourceType(VideoSourceType type) = 0;` | [`virtual void SetVideoSourceType(StreamIndex stream_index, VideoSourceType type) = 0;`](Windows-api.md#setvideosourcetype) |
| 名称和参数变化 | 音频管理 | `virtual void SetAudioVolumeIndicationInterval(int interval) = 0;` | [`virtual void EnableAudioPropertiesReport(const AudioPropertiesConfig& config) = 0;`](Windows-api.md#enableaudiopropertiesreport) |
| 名称和参数变化 | 视频管理 | `virtual void SetLocalVideoMirrorMode(MirrorMode mirrorMode) = 0;` | [`virtual void SetLocalVideoMirrorType(MirrorType mirrorType) = 0;`](Windows-api.md#setlocalvideomirrortype) |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 拆分或合并 |音频管理 | `virtual void SetAudioVolumeIndicationInterval(int interval) = 0;` | <li>[`virtual void OnLocalAudioPropertiesReport(const LocalAudioPropertiesInfo * audio_properties_infos, int audio_properties_info_number)`](Windows-callback.md#onlocalaudiopropertiesreport)</li><li>[`virtual void OnRemoteAudioPropertiesReport(const RemoteAudioPropertiesInfo* audio_properties_infos, int audio_properties_info_number, int total_remote_volume)`](Windows-callback.md#onremoteaudiopropertiesreport)</li> | 旧版接口拆分为 `OnLocalAudioPropertiesReport` 和 `OnRemoteAudioPropertiesReport` |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`ErrorCode`](Windows-callback.md#errorcode) | 增加枚举值：`-1007`、`-1008` |


## 3.28

### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`AudioSampleRate`](Windows-keytype.md#audiosamplerate) | 新增了枚举值：`kAudioSampleRateAuto` |
| 枚举值增减 | [`AudioChannel`](Windows-keytype.md#audiochannel) | 新增了枚举值：`kAudioChannelAuto` |


## 3.27

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 引擎管理 | `BYTERTC_API int Feedback(const char* data);` | [`virtual int Feedback(const char* data) = 0;`](Windows-api.md#feedback) |
| 参数变化 | 视频管理 | `virtual int SetVideoEncoderConfig(const VideoSolution* solutions, int solution_num) = 0;` | [`virtual int SetVideoEncoderConfig(StreamIndex index, const VideoSolution* solutions, int solution_num) = 0;`](Windows-api.md#setvideoencoderconfig) |
| 参数变化 | 屏幕共享 | `virtual void PublishScreen(const ScreenParameters& paramters) = 0;` | [`virtual void PublishScreen() = 0;`](Windows-api.md#publishscreen) |
| 名称和参数变化 | 音频管理 | `virtual void SetRecordingVolume(const int volume) = 0;` | [`virtual void SetCaptureVolume(StreamIndex index, int volume) = 0;`](Windows-api.md#setcapturevolume) |
| 名称和参数变化 | 视频管理 | `virtual void RegisterMetadataObserver(IMetadataObserver* observer) = 0;` | [`virtual int SendSEIMessage(StreamIndex stream_index, const uint8_t* message, int length, int repeat_count) = 0;`](Windows-api.md#sendseimessage) |
| 名称和参数变化 | 屏幕共享 | `virtual void StopScreenCapture() = 0;` | [`virtual void StopScreenVideoCapture() = 0;`](Windows-api.md#stopscreenvideocapture) | 变更后接口仅停止采集，不取消发布 |
| 拆分或合并 | 屏幕共享 | <li>`virtual int StartScreenCaptureByWindowId(view_t window_id, const Rectangle& region_rect, const DesktopCaptureParameters& capture_params) = 0;`</li><li>`virtual int StartScreenCaptureByDisplayId(unsigned int display_id, const Rectangle& region_rect, const DesktopCaptureParameters& capture_params) = 0;`</li><li>`virtual int StartScreenCaptureByScreenRect(const Rectangle& screen_rect, const Rectangle& region_rect, const DesktopCaptureParameters& capture_params) = 0;`</li> | <li>[`virtual int StartScreenVideoCapture(const ScreenCaptureSourceInfo& source_info, const ScreenCaptureParameters& capture_params) = 0;`](Windows-api.md#startscreenvideocapture)</li>|


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 名称和参数变化 | 视频数据回调 | `virtual void OnMetadataReceived(const char* roomid, const char* uid, const VideoMetadataBuffer& metadata) = 0;` | [`virtual void OnSEIMessageReceived(RemoteStreamKey stream_key, const uint8_t* message, int length){(void)stream_key; (void)message; (void)length; }`](Windows-callback.md#onseimessagereceived) |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`ProblemFeedbackOption`](Windows-keytype.md#problemfeedbackoption) | 删除了枚举值：<li>`kProblemFeedbackOptionConnectionFailed`</li><li>`kProblemFeedbackOptionAudioDelay`</li><li>`kProblemFeedbackOptionVideoDelay`</li> 新增了枚举值：<li>`KFeedbackOptionEarBackDelay`</li> |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增了枚举值：<li>`kWarningCodeSetScreenAudioSourceTypeFailed`</li><li>`kWarningCodeSetScreenAudioStreamIndexFailed`</li> |


## 3.26

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 房间管理 | `virtual int JoinRoom(const char* token, const char* room_id, const UserInfo& user_info, RoomProfileType profile_type) = 0;` | [`virtual int JoinRoom(const char* token, const char* room_id, const UserInfo& user_info, const RTCRoomConfig& room_config) = 0;`](Windows-api.md#joinroom) |
| 名称和参数变化 | 房间管理 | `virtual void SubscribeStream(const char* user_id, const SubscribeConfig& info) = 0;` | [`virtual void SubscribeUserStream(const char* user_id, StreamIndex stream_type, SubscribeMediaType media_type, const SubscribeVideoConfig& video_config) = 0;`](Windows-api.md#subscribeuserstream) |
| 名称和参数变化 | 房间管理 | `virtual  void  SetUserRole(UserRoleType  role) = 0;` | [`virtual void SetUserVisibility(bool enable) = 0;`](Windows-api.md#setuservisibility) |
| 拆分或合并 | 视频管理/音频管理 | <li>`virtual  void  MuteAllRemoteVideo(MuteState  muteState) = 0;`</li><li>`virtual void MuteAllRemoteAudio(MuteState mute_state) = 0;`</li> | <li>`virtual void PauseAllSubscribedStream(PauseResumeControlMediaType media_type) = 0;`</li>| 通过 [`PauseAllSubscribedStream`](Windows-api.md#pauseallsubscribedstream) 和 [`ResumeAllSubscribedStream`](Windows-api.md#resumeallsubscribedstream) 可以暂停或恢复接收所有远端媒体流 |
| 删除 | 房间管理 | `virtual void EnableAutoPublish(bool auto_publish) = 0;` | / | 使用 [`JoinRoom`](Windows-api.md#joinroom) 中的 room_config 进行设置 |
| 删除 | 房间管理 | `virtual void EnableAutoSubscribe(SubscribeMode audio_mode, SubscribeMode video_mode) = 0;` | / | 使用 [`JoinRoom`](Windows-api.md#joinroom) 中的 room_config 进行设置 |
| 删除 | 视频管理 | `virtual void RemoveAllRemoteVideo() = 0;` | / |
| 删除 | 视频管理 | `virtual void RemoveAllRemoteScreen() = 0;` | / |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增了枚举值：<li>`kWarningCodePublishStreamForbiden`</li><li>`kWarningCodeUserNotifyStop`</li> |
| 枚举值增减 | [`UserMessageSendResult`](Windows-errorcode.md#usermessagesendresult) | 新增了枚举值：<li>`kUserMessageSendResultNotLogin`</li><li>`kUserMessageSendResultServerParamsNotSet`</li> |


## 3.25

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 混音 | `virtual int GetAudioMixingDuration() = 0;` | [`virtual int GetAudioMixingDuration(int id) = 0;`](Windows-api.md#getaudiomixingduration) |
| 参数变化 | 混音 | `virtual int GetAudioMixingCurrentPosition() = 0;` | [`virtual int GetAudioMixingCurrentPosition(int id) = 0;`](Windows-api.md#getaudiomixingcurrentposition) |
| 参数变化 | 混音 | `virtual int SetAudioMixingPosition(int pos) = 0;` | [`virtual void SetAudioMixingPosition(int id, int position) = 0;`](Windows-api.md#setaudiomixingposition) |
| 名称和参数变化 | 混音 | `virtual int PreloadEffect(int sound_id, const char* file_path) = 0;` | [`virtual void PreloadAudioMixing(int id, const char* file_path) = 0;`](Windows-api.md#preloadaudiomixing) |
| 拆分或合并 | 自定义视频采集渲染 | <li>`void SetRemoteVideoRender(const char* uid, IVideoSink* render)`</li><li>`void SetRemoteScreenRender(const char* uid, IVideoSink* render)`</li> | `virtual void SetRemoteVideoSink(RemoteStreamKey stream_key, IVideoSink* video_sink,IVideoSink::PixelFormat required_format) = 0;` | 多个旧版接口合并为 [`SetRemoteVideoSink`](Windows-api.md#setremotevideosink) |
| 拆分或合并 | 自定义视频采集渲染 | <li>`void SetLocalVideoRender(IVideoSink* render)`</li><li>`void SetLocalScreenRender(IVideoSink* render)`</li> | `virtual void SetLocalVideoSink(StreamIndex index, IVideoSink* video_sink,IVideoSink::PixelFormat required_format) = 0;` | 多个旧版接口合并为 [`SetLocalVideoSink`](Windows-api.md#setlocalvideosink) |
| 拆分或合并 | 混音 | <li>`virtual int StartAudioMixing(const char* file_path, bool loopback, bool replace, int cycle) = 0;`</li><li>`virtual int PlayEffect(int sound_id, const char* file_path, bool loopback, int cycle, int volume) = 0;`</li> | `virtual void StartAudioMixing(int id, const char * file_path, const AudioMixingConfig& config) = 0;` | 多个接口合并为[`StartAudioMixing`](Windows-api.md#startaudiomixing) |
| 拆分或合并 | 混音 | <li>`virtual void StopAudioMixing() = 0;`</li><li>`virtual int StopEffect(int sound_id) = 0;`</li><li>`virtual void StopAllEffects() = 0;`</li> | `virtual void StopAudioMixing(int id) = 0;` | 多个接口合并为[`StopAudioMixing`](Windows-api.md#stopaudiomixing) |
| 拆分或合并 | 混音 | <li>`virtual int PauseAudioMixing() = 0;`</li><li>`virtual int PauseEffect(int sound_id) = 0;`</li><li>`virtual void PauseAllEffects() = 0;`</li> | `virtual void PauseAudioMixing(int id) = 0;` | 多个接口合并为[`PauseAudioMixing`](Windows-api.md#pauseaudiomixing) |
| 拆分或合并 | 混音 | <li>`virtual int ResumeAudioMixing() = 0;`</li><li>`virtual int ResumeEffect(int sound_id) = 0;`</li><li>`virtual void ResumeAllEffects() = 0;`</li> | `virtual void ResumeAudioMixing(int id) = 0;` | 多个接口合并为[`ResumeAudioMixing`](Windows-api.md#resumeaudiomixing) |
| 拆分或合并 | 混音 | <li>`virtual int UnloadEffect(int sound_id) = 0;`</li><li>`virtual void UnloadAllEffects() = 0;`</li> | `virtual void UnloadAudioMixing(int id) = 0;` | 多个接口合并为[`UnloadAudioMixing`](Windows-api.md#unloadaudiomixing) |
| 拆分或合并 | 混音 | <li>`virtual int AdjustAudioMixingVolume(int volume) = 0;`</li><li>`virtual int SetVolumeOfEffect(int sound_id, int volume) = 0;`</li><li>`virtual int AdjustAudioMixingPlayoutVolume(int volume) = 0;`</li><li>`virtual int AdjustAudioMixingPublishVolume(int volume) = 0;`</li><li>`virtual void SetEffectsVolume(int volume) = 0;`</li> | ` virtual void SetAudioMixingVolume(int id, int volume, AudioMixingType type) = 0;` | 多个接口合并为[`SetAudioMixingVolume`](Windows-api.md#setaudiomixingvolume) |
| 拆分或合并 | 混音 | `virtual void SetAudioPlayoutMixStream(bool enable, int sample_rate, int channel_num) = 0;` | <li>`virtual void EnableAudioMixingFrame(AudioMixingType type) = 0;`</li><li>`virtual void DisableAudioMixingFrame() = 0;`</li> | 旧版接口拆分为[`EnableAudioMixingFrame`](Windows-api.md#enableaudiomixingframe) 和 [`DisableAudioMixingFrame`](Windows-api.md#disableaudiomixingframe)  |
| 删除 | 混音 | `virtual int GetEffectVolume(int sound_id) = 0;` | / |
| 删除 | 混音 | `virtual int GetAudioMixingStreamCachedFrameNum() = 0;` | / |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |

| 参数变化 | 混音 | `virtual void OnAudioMixingStateChanged(bytertc::AudioMixingState state, bytertc::AudioMixingError error) {}` | [`virtual void OnAudioMixingStateChanged(int id, bytertc::AudioMixingState state, bytertc::AudioMixingError error) {}`](Windows-callback.md#onaudiomixingstatechanged)

| 删除 | 视频管理 | `virtual void OnStart() = 0;` | / |
| 删除 | 视频管理 | `virtual void OnStop() = 0;` | / |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`AudioMixingState`](Windows-keytype.md#audiomixingstate) | 新增了枚举值：<li>`kAudioMixingStatePreloaded`</li><li>`kAudioMixingStateFinished`</li> |
| 枚举值增减 | [`AudioMixingError`](Windows-keytype.md#audiomixingerror) | 删除了枚举值： <li>`kAudioMixingErrorCanNotOpen`</li>新增了枚举值：<li>`kAudioMixingErrorPreloadFailed`</li><li>`kAudioMixingErrorStartFailed`</li><li>`kAudioMixingErrorIdNotFound`</li><li>`kAudioMixingErrorSetPositionFailed`</li><li>`    kAudioMixingErrorInValidVolume`</li><li>`kAudioMixingErrorLoadConflict`</li> |


## 3.24

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 视频特效 | `virtual void SetEffectNodes(const char** effectNodePaths, int nodeNum) = 0;` | [`virtual int SetEffectNodes(const char** effectNodePaths, int nodeNum) = 0;`](Windows-api.md#seteffectnodes) |
| 参数变化 | 视频特效 | `virtual void UpdateNode(const char* nodePath, const char* nodeKey, float nodeValue) = 0;` | [`virtual int UpdateNode(const char* nodePath, const char* nodeKey, float nodeValue) = 0;`](Windows-api.md#updatenode) |
| 参数变化 | 视频特效 | `virtual void SetColorFilter(const char* resPath) = 0;` | [` virtual int SetColorFilter(const char* resPath) = 0;`](Windows-api.md#setcolorfilter) |
| 参数变化 | 视频特效 | `virtual void SetColorFilterIntensity(float intensity) = 0;` | [` virtual int SetColorFilterIntensity(float intensity) = 0;`](Windows-api.md#setcolorfilterintensity) |
| 参数变化 | 视频管理 | `virtual int MuteLocalVideo(MuteState muteState) = 0;` | [`virtual void MuteLocalVideo(MuteState muteState) = 0;`](Windows-api.md#mutelocalvideo) |
| 名称和参数变化 | 视频管理 | `virtual void SetExternalVideoSource(bool enable) = 0;` | [`virtual void SetVideoSourceType(VideoSourceType type) = 0;`](Windows-api.md#setvideosourcetype) |
| 删除 | 视频特效 | `virtual int CheckSupport() = 0;` | / |
| 删除 | 视频特效 | `virtual void AddEffectNodes(const char** effectNodePaths, int nodeNum) = 0;` | / |
| 删除 | 视频特效 | `virtual void RemoveEffectNodes(const char** effectNodePaths, int nodeNum) = 0;` | / |
| 删除 | 视频管理 | `virtual bool GetLocalVideoMirrorMode() = 0;` | / |
| 删除 | 视频管理 | `virtual void SetDefaultMuteAllRemoteVideoStreams(bool mute) = 0;` | / |
| 删除 | 音频管理 | `virtual void SetAudioPerformanceProfile(AudioPerformanceProfile profile) = 0;` | / |
| 删除 | 自定义音频采集渲染 | `virtual void SetAudioDeviceObserver(IAudioDeviceObserver* obs) = 0;` | / |



### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 删除 | 视频管理 | `virtual void OnMirrorStateChanged(bool mirrored)` | / |


## 3.23

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 拆分或合并 | 音频管理 | `virtual int EnableLocalAudio(bool enable) = 0;` | <li>[`virtual void StartAudioCapture() = 0;`](Windows-api.md#startaudiocapture)</li><li>[`virtual void StopAudioCapture() = 0;`](Windows-api.md#stopaudiocapture)</li> | <li>拆分后的接口解除了音频采集与发布的绑定关系。无论是否发布音频，你都可以开启音频采集，并且停止发布后不再自动关闭采集</li><li>新接口解除了对外部源的推送控制，仅控制是否进行内部音频采集</li> |
| 拆分或合并 | 视频管理 | `virtual int EnableLocalVideo(bool enable) = 0;` | <li>[`virtual void StartVideoCapture() = 0;`](Windows-api.md#startvideocapture)</li><li>[`virtual void StopVideoCapture() = 0;`](Windows-api.md#stopvideocapture)</li> | <li>拆分后的接口解除了视频采集与发布的绑定关系。无论是否发布视频，你都可以开启视频采集，并且停止发布后不再自动关闭采集</li><li>新接口解除了对外部源的推送控制，仅控制是否进行内部音频采集</li> |
| 方法行为变化 | 视频管理 |`virtual void SetExternalVideoSource(bool enable) = 0;` | `virtual void SetExternalVideoSource(bool enable) = 0;` | <li>由内部采集切换至自定义采集时会自动关闭内部采集</li><li>由自定义采集切换至内部采集时，必须先关闭自定义采集，后手动开启内部采集</li><li>进房前后均可切换</li> | 
| 方法行为变化 | 自定义音频采集渲染 |`virtual void SetExternalVideoSource(bool enable) = 0;` | `virtual void SetExternalVideoSource(bool enable) = 0;` | <li>由内部采集切换至自定义采集时会自动关闭内部采集</li><li>由自定义采集切换至内部采集时，必须先关闭自定义采集，后手动开启内部采集</li><li>仅支持进房前切换</li> | 
| 删除 | 视频管理 | `virtual int StartPreview() = 0;` | / |
| 删除 | 视频管理 | `virtual int StopPreview() = 0;` | / |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增了枚举值：<li>`kWarningCodeMediaDeviceOperationDenied`</li><li>`kWarningCodeInvalidCanvasHandle`</li> |


## 3.22

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 名称变化 | 视频设备管理 | `virtual int InitRecordingDeviceForTest(const char deviceId[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int InitAudioCaptureDeviceForTest(const char deviceId[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#initaudiocapturedevicefortest) |
| 名称变化 | 视频设备管理 | `virtual int InitPlaybackDeviceForTest(const char deviceId[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int InitAudioPlaybackDeviceForTest(const char deviceId[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#initaudioplaybackdevicefortest) |
| 名称变化 | 视频设备管理 | `virtual int StopAudioRecordingDeviceTest() = 0;` | [`virtual int StopAudioCaptureDeviceTest() = 0;`](Windows-api.md#stopaudiocapturedevicetest) |
| 名称变化 | 视频设备管理 | `virtual int StartAudioRecordingDeviceTest(int indication_interval) = 0;` | [`virtual int StartAudioCaptureDeviceTest(int indication_interval) = 0;`](Windows-api.md#startaudiocapturedevicetest) |
| 名称变化 | 视频设备管理 | `virtual int StopPlaybackDeviceTest() = 0;` | [`virtual int StopAudioPlaybackDeviceTest() = 0;`](Windows-api.md#stopaudioplaybackdevicetest) |
| 名称变化 | 视频设备管理 | `virtual int StartPlaybackDeviceTest(const char* test_audio_file_path) = 0;` | [`virtual int StartAudioPlaybackDeviceTest(const char* test_audio_file_path) = 0;`](Windows-api.md#startaudioplaybackdevicetest) |
| 名称变化 | 视频设备管理 | `virtual int GetRecordingDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int GetAudioCaptureDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#getaudiocapturedevice) |
| 名称变化 | 视频设备管理 | `virtual int GetPlaybackDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int GetAudioPlaybackDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#getaudioplaybackdevice) |
| 名称变化 | 视频设备管理 | `virtual int GetRecordingDeviceMute(bool* mute) = 0;` | [`virtual int GetAudioCaptureDeviceMute(bool* mute) = 0;`](Windows-api.md#getaudiocapturedevicemute) |
| 名称变化 | 视频设备管理 | `virtual int SetRecordingDeviceMute(bool mute) = 0;` | [`virtual int SetAudioCaptureDeviceMute(bool mute) = 0;`](Windows-api.md#setaudiocapturedevicemute) |
| 名称变化 | 视频设备管理 | `virtual int GetPlaybackDeviceMute(bool* mute) = 0;` | [`virtual int GetAudioPlaybackDeviceMute(bool* mute) = 0;`](Windows-api.md#getaudioplaybackdevicemute) |
| 名称变化 | 视频设备管理 | `virtual int SetPlaybackDeviceMute(bool mute) = 0;` | [`virtual int SetAudioPlaybackDeviceMute(bool mute) = 0;`](Windows-api.md#setaudioplaybackdevicemute) |
| 名称变化 | 视频设备管理 | `virtual int GetRecordingDeviceVolume(unsigned int* volume) = 0;` | [`virtual int GetAudioCaptureDeviceVolume(unsigned int* volume) = 0;`](Windows-api.md#getaudiocapturedevicevolume) |
| 名称变化 | 视频设备管理 | `virtual int SetRecordingDeviceVolume(unsigned int volume) = 0;` | [`virtual int SetAudioCaptureDeviceVolume(unsigned int volume) = 0;`](Windows-api.md#setaudiocapturedevicevolume) |
| 名称变化 | 视频设备管理 | `virtual int GetPlaybackDeviceVolume(unsigned int* volume) = 0;` | [`virtual int GetAudioPlaybackDeviceVolume(unsigned int* volume) = 0;`](Windows-api.md#getaudioplaybackdevicevolume) |
| 名称变化 | 视频设备管理 | `virtual int SetPlaybackDeviceVolume(unsigned int volume) = 0;` | [`virtual int SetAudioPlaybackDeviceVolume(unsigned int volume) = 0;`](Windows-api.md#setaudioplaybackdevicevolume) |
| 名称变化 | 视频设备管理 | `virtual int SetRecordingDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int SetAudioCaptureDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#setaudiocapturedevice) |
| 名称变化 | 视频设备管理 | `virtual int SetPlaybackDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int SetAudioPlaybackDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#setaudioplaybackdevice) |
| 名称变化 | 视频设备管理 | `virtual IAudioDeviceCollection* EnumerateRecordingDevices() = 0;` | [`virtual IDeviceCollection* EnumerateAudioCaptureDevices() = 0;`](Windows-api.md#enumerateaudiocapturedevices) |
| 名称变化 | 视频设备管理 | `virtual IAudioDeviceCollection* EnumeratePlaybackDevices() = 0;` | [`virtual IDeviceCollection* EnumerateAudioPlaybackDevices() = 0;`](Windows-api.md#enumerateaudioplaybackdevices) |
| 名称变化 | 视频设备管理 | `virtual int GetDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int GetVideoCaptureDevice(char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#getvideocapturedevice) |
| 名称变化 | 视频设备管理 | `virtual int SetDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;` | [`virtual int SetVideoCaptureDevice(const char device_id[MAX_DEVICE_ID_LENGTH]) = 0;`](Windows-api.md#setvideocapturedevice) |
| 名称变化 | 视频设备管理 | `virtual IVideoDeviceCollection* EnumerateVideoDevices() = 0;` | [`virtual IDeviceCollection* EnumerateVideoCaptureDevices() = 0;`](Windows-api.md#enumeratevideocapturedevices) |
| 参数变化 | 视频设备管理 | `virtual int SwitchCamera() = 0;` | [`virtual int SwitchCamera(CameraID camera_id) = 0;`](Windows-api.md#switchcamera) |
| 名称和参数变化 | 视频设备管理 | `virtual void SetEnableSpeakerphone(bool enable) = 0;` | [`virtual int SetAudioPlaybackDevice(AudioPlaybackDevice device) = 0;`](Windows-api.md#setaudioplaybackdevice) |
| 删除 | 视频设备管理 | `virtual void Release() = 0;` | / | [`IVideoDeviceManager`](Windows-api.md#ivideodevicemanager) 类型下 `Release` 删除 |
| 删除 | 音频设备管理 | `virtual void Release() = 0;` | / | [`IAudioDeviceManager`](Windows-api.md#iaudiodevicemanager) 类型下 `Release` 删除 |
| 删除 | 音频设备管理 | `virtual void SetEnableSpeakerphone(bool enable) = 0;` | / |
| 删除 | 音频设备管理 | `virtual int GetPlaybackDeviceInfo(char device_id[MAX_DEVICE_ID_LENGTH], char device_name[MAX_DEVICE_ID_LENGTH]) = 0;` | / |
| 删除 | 音频设备管理 | `virtual int GetRecordingDeviceInfo(char device_id[MAX_DEVICE_ID_LENGTH], char device_name[MAX_DEVICE_ID_LENGTH]) = 0;` | / |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 引擎管理 | `virtual void OnMediaDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, bytertc::MediaDeviceState device_state)` | [`virtual void OnMediaDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, bytertc::MediaDeviceState device_state, bytertc::MediaDeviceError device_error)`](Windows-callback#onmediadevicestatechanged) | [`MediaDeviceType`](Windows-keytype.md#mediadevicetype) 枚举值名称变更 |
| 参数变化 | 房间管理 | `virtual void OnUserJoined(const UserInfo& user_info, const char* team_id, const RangeAudioMode send_mode, int elapsed)` | [`virtual void OnUserJoined(const UserInfo& user_info, int elapsed)`](Windows-callback.md#onuserjoined) |

| 删除 | 引擎管理 | `virtual void OnMediaDeviceNotification(const char* device_id,bytertc::MediaDeviceType device_type,bytertc::MediaDeviceNotification notification_type) {(void)device_id;(void)device_type;(void)notification_type;}` | / | 枚举类 `MediaDeviceNotification` 已删除 ｜

### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`MediaDeviceState`](Windows-keytype.md#mediadevicestate) | 删除了枚举值： <li>`kMediaDeviceStateStartFailed`</li><li>`kMediaDeviceStateStopFailed`</li> 新增了枚举值：<li>`kMediaDeviceStateRuntimeError`</li><li>`kMediaDeviceStateAdded`</li><li>`kMediaDeviceStateRemoved`</li> |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`WarningCode`](Windows-errorcode.md#warningcode) | 新增了枚举值：`kWarningCodeRecordingSilence` |
| 枚举值增减 | [`LocalVideoStreamError`](Windows-errorcode.md#localvideostreamerror) | 新增了枚举值：`kLocalVideoStreamErrorDeviceDisconnected` |


## 3.21

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 名称变化 | 引擎管理 | `BYTE_API void DestroyByteRtcEngine(bytertc::IRtcEngine* engine);` | [`BYTERTC_API void DestroyRtcEngine(bytertc::IRtcEngine* engine);`](Windows-api.md#destroyrtcengine) |
| 名称变化 | 视频管理 | `int SetVideoProfiles(const VideoSolution* solutions, int solution_num)` | [`int SetVideoEncoderConfig(const VideoSolution* solutions, int solution_num)`](Windows-api.md#setvideoencoderconfig) |
| 名称变化 | 房间管理 | `virtual void LeaveChannel()` | [`virtual void LeaveRoom()`](Windows-api.md#leaveroom) |
| 名称变化 | 房间管理 | `virtual void RenewToken(const char* token)` | [`virtual void UpdateToken(const char* token)`](Windows-api.md#updatetoken) |
| 参数变化 | 加密 | `void SetEncryptInfo(ByteEngineEncryptType encrypt_type, const char* key, int key_size)` | [`void SetEncryptInfo(EncryptType encrypt_type, const char* key, int key_size)`](Windows-api.md#setencryptinfo) | 
| 参数变化 | 加密 | `void SetCustomizeEncryptHandler(IByteEngineEncryptHandler* handler)` | [`void SetCustomizeEncryptHandler(IEncryptHandler* handler)`](Windows-api.md#setcustomizeencrypthandler)) | 
| 参数变化 | 房间管理 | `virtual void EnableAutoSubscribe(SubscribeMode audio_mode, SubscribeMode video_mode) = 0;` | `virtual void EnableAutoSubscribe(SubscribeMode audio_mode, SubscribeMode video_mode) = 0;` | [`SubscribeMode`](Windows-keytype.md#subscribemode) 枚举值名称变化 |
| 参数变化 | 性能回退 | `virtual int SetPublishFallbackOption(int option) = 0;` | [`virtual int SetPublishFallbackOption(PublishFallbackOption option)`](Windows-api.md#setpublishfallbackoption) |
| 参数变化 | 性能回退 | `virtual int SetSubscribeFallbackOption(SubscribeFallbackOptions option)` | [`virtual int SetSubscribeFallbackOption(SubscribeFallbackOption option)`](Windows-api.md#setsubscribefallbackoption) |
| 参数变化 | 视频管理 | `int ReplaceBackground(BACKGROUND_MODE mode, DIVIDE_MODEL divide_model)` | [`int ReplaceBackground(BackgroundMode mode, DivideMode divide_model) = 0;`](Windows-api.md#replacebackground) |
| 参数变化 | 视频管理 | `void SetLocalVideoMirrorMode(bool enable)` | [`void SetLocalVideoMirrorMode(MirrorMode mode)`](Windows-api.md#setlocalvideomirrormode) |
| 参数变化 | 视频管理 | `virtual bool PushScreenFrame(IByteVideoFrame* frame)` | [`virtual bool PushScreenFrame(IVideoFrame* frame)`](Windows-api.md#pushscreenframe) |
| 参数变化 | 视频管理 | `virtual bool PushExternalVideoFrame(IByteVideoFrame* frame)` | [`virtual bool PushExternalVideoFrame(IVideoFrame* frame)`](Windows-api.md#pushexternalvideoframe) |
| 名称和参数变化 | 视频管理 | `int MuteLocalVideoStream(bool mute)` | [`void MuteLocalVideo(MuteState state)`](Windows-api.md#mutelocalvideo) |
| 名称和参数变化 | 视频管理 | `BYTE_API IByteVideoFrame* BuildByteVideoFrame(const ByteVideoFrameBuilder& builder)` | [`BYTERTC_API IVideoFrame* BuildVideoFrame(const VideoFrameBuilder& builder)`](Windows-api.md#buildvideoframe) |
| 名称和参数变化 | 引擎管理 | `virtual const char* GetVersion(int* build) = 0;` | [`BYTERTC_API const char* GetSDKVersion()`](Windows-api.md#getsdkversion) |
| 名称和参数变化 | 房间管理 | `virtual int JoinChannel(const char* token, const char* channel_id, const char* uid, const char* info)` | [`virtual int JoinRoom(const char* token, const char* room_id, const UserInfo& user_info, RoomProfileType profile_type)`](Windows-api.md#joinroom) |
| 名称和参数变化 | 房间管理 | `virtual void SetClientRole(CLIENT_ROLE_TYPE role)` | [`virtual void SetUserRole(UserRoleType role)`](Windows-api.md#setuserrole) |
| 拆分或合并 | 视频管理 | <li>`int SetupLocalVideo(const VideoCanvas& canvas)`</li><li>`int SetupLocalScreen(const VideoCanvas& canvas)`</li> | [`void SetLocalVideoCanvas(StreamIndex index, const VideoCanvas& canvas)`](Windows-api.md#setlocalvideocanvas) |
| 拆分或合并 | 视频管理 | <li>`void SetupRemoteVideo(const VideoCanvas& canvas)`</li><li>`void SetupRemoteScreen(const VideoCanvas& canvas)`</li> | [`void SetRemoteVideoCanvas(char* user_id, StreamIndex index, const VideoCanvas& canvas)`](Windows-api.md#setremotevideocanvas) |
| 拆分或合并 | 视频管理 | <li>`void MuteRemoteVideoStream(const char* userid)`</li><li>`void UnmuteRemoteVideoStream(const char* userid)`</li> | [`void MuteRemoteVideo(const char* uid, MuteState state)`](Windows-api.md#muteremotevideo) |
| 拆分或合并 | 视频管理 | <li>`void MuteAllRemoteVideoStreams()`</li><li>`void UnmuteAllRemoteVideoStreams()`</li> | [`void MuteAllRemoteVideo(MuteState state)`](Windows-api.md#muteallremotevideo) |
| 拆分或合并 | 引擎管理 | <li>`BYTE_API bytertc::IRtcEngine* CreateByteRtcEngine(const char* app_id, bytertc::IRtcEngineEventHandler* event_handler);`</li><li>`BYTE_API bytertc::IRtcEngine* CreateByteRtcEngineWithParameters(const char* app_id, bytertc::IRtcEngineEventHandler* event_handler, const char* parameters);`</li> | [`BYTERTC_API bytertc::IRtcEngine* CreateRtcEngine(const char* app_id, bytertc::IRtcEngineEventHandler* event_handler, const char* parameters);`](Windows-api.md#creatertcengine) |
| 拆分或合并 | 音频管理 | `void SetExternalAudioSource(bool enable, int sample_rate, unsigned int record_channels, unsigned int playout_channels)` | <li>[`void EnableExternalAudioDevice(const AudioFormat &recording_format, const AudioFormat &playback_format)`](Windows-api.md#enableexternalaudiodevice)</li><li>[`void DisableExternalAudioDevice()`](Windows-api.md#disableexternalaudiodevice)</li> | 旧版接口拆分为 [`EnableExternalAudioDevice`](Windows-api.md#enableexternalaudiodevice) 和 [`DisableExternalAudioDevice`](Windows-api.md#disableexternalaudiodevice) |
| 删除 | 房间管理 | `virtual void SetChannelProfile(CHANNEL_PROFILE_TYPE profile_type)` | / | 删除旧版接口，设置 channelProfile 使用 `joinRoom` | 
| 删除 | 房间管理 | `virtual int JoinChannel( const char* token, const char* channel_id, const char* uid, const char* info, const char* trace_id)` | / |
| 删除 | 引擎管理 | `BYTE_API void EnablePerformanceCollect(bool enable);` | / |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 名称变化 | 房间管理 | `virtual void OnChannelError(int err)` | [`virtual void OnRoomError(int err)`](Windows-callback.md#onroomerror) |
| 名称变化 | 房间管理 | `virtual void OnChannelWarning(int warn)` | [`virtual void OnRoomWarning(int warn)`](Windows-callback.md#onroomwarning) |
| 名称变化 | 性能回退 | `virtual void OnRemoteStreamSwitch(const RemoteStreamSwitch& event)` | [`virtual void OnSimulcastSubscribeFallback(const RemoteStreamSwitch& event)`](Windows-callback.md#onsimulcastsubscribefallback) |
| 参数变化 | 网络连接 | `void OnConnectionStateChanged(bytertc::CONNECTION_STATE state)` | [`void OnConnectionStateChanged(bytertc::ConnectionState state)`](Windows-callback.md#onconnectionstatechanged) |
| 参数变化 | 房间管理 | `virtual void OnStreamRemove(const ByteStream& stream, RtcStreamRemoveReason reason)` | [`virtual void OnStreamRemove(const MediaStreamInfo& stream, StreamRemoveReason reason)`](Windows-callback.md#onstreamremove) |
| 参数变化 | 房间管理 | `virtual void OnStreamAdd(const ByteStream& stream)` | [`virtual void OnStreamAdd(const MediaStreamInfo& stream)`](Windows-callback.md#onstreamadd) |
| 参数变化 | 房间管理 | `virtual void OnUserJoined(const char* uid, const char* team_id, const RangeAudioMode send_mode, int elapsed)` | [`virtual void OnUserJoined(const UserInfo& user_info, const char* team_id, const RangeAudioMode send_mode, int elapsed)`](Windows-callback.md#onuserjoined) | 
| 参数变化 | 引擎管理 | `virtual void OnMediaDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, bytertc::MediaDeviceState device_state)` | `virtual void OnMediaDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, bytertc::MediaDeviceState device_state)` | [`MediaDeviceType`](Windows-keytype.md#mediadevicetype) 和 [`MediaDeviceState`](Windows-keytype.md#mediadevicestate) 枚举值名称变化 |
| 参数变化 | 性能回退 | `void OnPerformanceAlarms(``**int**` `level,` `**const**` `bytertc::SourceWantedData& data)` | [`virtual void OnPerformanceAlarms(bytertc::PerformanceAlarmMode mode, const char* room_id, bytertc::PerformanceAlarmReason reason, const bytertc::SourceWantedData& data) `](Windows-callback.md#onperformancealarms) |
| 参数变化 | 视频管理 | `virtual bool OnRemoteVideoFrame(const char* roomid, const char* uid, IByteVideoFrame* videoFrame)` | `virtual bool OnRemoteVideoFrame(const char* roomid, const char* uid, IVideoFrame* videoFrame)` | [`IVideoFrame`](Windows-api.md#ivideoframe) 类型名称变化 |
| 参数变化 | 视频管理 | `virtual bool OnLocalVideoFrame(IByteVideoFrame* videoFrame)` | `virtual bool OnLocalVideoFrame(IVideoFrame* videoFrame)` | [`IVideoFrame`](Windows-api.md#ivideoframe) 类型名称变化 |
| 参数变化 | 视频管理 | `virtual bool OnLocalScreenFrame(IByteVideoFrame* videoFrame) ;` | `virtual bool OnLocalScreenFrame(IVideoFrame* videoFrame)` | [`IVideoFrame`](Windows-api.md#ivideoframe) 类型名称变化 |
| 参数变化 | 视频管理 | `virtual bool OnRemoteScreenFrame(const char* roomid, const char* uid, IByteVideoFrame* videoFrame)` | `virtual bool OnRemoteScreenFrame(const char* roomid, const char* uid, IVideoFrame* videoFrame)` | [`IVideoFrame`](Windows-api.md#ivideoframe) 类型名称变化 |
| 参数变化 | 视频管理 | `void OnLocalVideoStateChanged(LocalVideoStreamState state, LocalVideoStreamError error)` | [`void OnLocalVideoStateChanged(StreamIndex stream_index，LocalVideoStreamState state, LocalVideoStreamError error)`](Windows-callback.md#onlocalvideostatechanged) | 
| 参数变化 | 视频管理 | `void OnRemoteVideoStateChanged(const char* uid, RemoteVideoState state, RemoteVideoStateReason reason, int elapsed)` | [`void OnRemoteVideoStateChanged( RemoteStreamKey key, RemoteVideoState state, RemoteVideoStateReason reason)`](Windows-callback.md#onremotevideostatechanged) |
| 参数变化 | 视频管理 | `void OnUserMuteVideo(const char* uid, bool muted)` | [`void OnUserMuteVideo(const char* uid, MuteState mute)`](Windows-callback.md#onusermutevideo) |
| 参数变化 | 视频管理 | `void OnMuteAllRemoteVideo(const char* uid, bool muted)` | [`void OnMuteAllRemoteVideo(const char* uid, MuteState mute)`](Windows-callback.md#onmuteallremotevideo) |
| 参数变化 | 视频数据回调 | `virtual bool OnReadyToSendMetadata(ByteMetadataBuffer* metadata)` | `virtual bool OnReadyToSendMetadata(VideoMetadataBuffer* metadata)` | [`VideoMetadataBuffer`](Windows-keytype.md#videometadatabuffer) 类型变化 |
| 参数变化 | 视频数据回调 | `virtual void OnMetadataReceived(const char* roomid, const char* uid, const ByteMetadataBuffer& metadata)` | `virtual void OnMetadataReceived(const char* roomid, const char* uid, const VideoMetadataBuffer& metadata)` | [`VideoMetadataBuffer`](Windows-keytype.md#videometadatabuffer) 类型变化 |
| 参数变化 | 音频管理 | `OnRemoteAudioStateChanged(const RemoteStreamKey& key, RemoteAudioState state, RemoteAudioStateReason reason)` | [`OnRemoteAudioStateChanged(const RemoteStreamKey& key, RemoteAudioState state, RemoteAudioStateChangeReason reason)`](Windows-callback.md#onremoteaudiostatechanged) |

| 参数变化 | 流消息 | `virtual void OnUserMessageSendResult(int64_t msgid, int error)` | [`virtual void OnUserMessageSendResult(int64_t msgid, int error)`](Windows-callback#onusermessagesendresult) | [`UserMessageSendResult`](Windows-keytype.md#usermessagesendresult) 枚举值名称变更 & 新增枚举值 ｜

| 拆分或合并 | 房间管理 | <li>`virtual void OnJoinChannelSuccess(const char* room_id, const char* uid, int elapsed)`</li><li>`virtual void OnRejoinChannelSuccess(const char* room_id, const char* uid, int elapsed)`</li> | `virtual void OnJoinRoomResult(const char* room_id, const char* uid, int error_code, JoinRoomType join_type, int elapsed)` | 旧版接口合并为 [`OnJoinRoomResult`](Windows-callback.md#onjoinroomresult) |
| 拆分或合并 | 视频管理 | <li>`void OnFirstLocalVideoFrame(int width, int height, int elapsed)`</li><li>`void OnFirstLocalScreenFrame(int width, int height, int elapsed)`</li> | `void OnFirstLocalVideoFrameCaptured(StreamIndex index, VideoFrameInfo info)` | 旧版接口合并为 [`OnFirstLocalVideoFrameCaptured`](Windows-callback.md#onfirstlocalvideoframecaptured) |
| 拆分或合并 | 视频管理 | <li>`void OnFirstRemoteScreenFrame(const char* uid, int width, int height, int elapsed)`</li><li>`void OnFirstRemoteVideoFrame(const char* uid, int width, int height, int elapsed)`</li> | `void OnFirstRemoteVideoFrameRendered(const RemoteStreamKey key, const FrameInfo& info)` | 旧版接口合并为 [`OnFirstRemoteVideoFrameRendered`](Windows-callback.md#onfirstremotevideoframerendered) | 
| 拆分或合并 | 视频管理 | `void OnVideoSizeChanged(const char* uid, int width, int height, int rotation)` | <li>`void OnLocalVideoSizeChanged(StreamIndex index, const FrameInfo& info)`</li><li>`void OnRemoteVideoSizeChanged(RemoteStreamKey key, const FrameInfo& info)`</li> | 

| 拆分或合并 | 数据统计 | <li>`void OnRemoteAudioStats(const RemoteAudioStats& stats)`</li><li>`void OnRemoteVideoStats(const RemoteVideoStats& stats)`</li><li>`void OnNetworkQuality(const char* uid, NetworkQuality tx_quality, NetworkQuality rx_quality)`</li> | `void OnRemoteStreamStats(const RemoteStreamStats& stats)` | 旧版接口合并为 [`OnRemoteStreamStats`](Windows-callback.md#onremotestreamstats)  

| 拆分或合并 | 数据统计 | <li>`void OnLocalAudioStats(const LocalAudioStats& stats)`</li><li>`void OnLocalVideoStats(const LocalVideoStats& stats)`</li><li>`void OnNetworkQuality(const char* uid, NetworkQuality tx_quality, NetworkQuality rx_quality)`</li> | `void OnLocalStreamStats(const LocalStreamStats& stats)` | 旧版接口合并为 [`OnLocalStreamStats`](Windows-callback.md#onlocalstreamstats) |
| 删除 | 房间管理 | `virtual void OnLoginCompletion(int error_code, const ByteStream* list_streams, int stream_number)` | / |
| 删除 | 数据统计 | `void OnAudioQuality(const char* uid, int quality, unsigned short delay, unsigned short lost)` | / |
| 名称和参数变化 | 房间管理 | `virtual void OnUserOffline(const char* uid, USER_OFFLINE_REASON_TYPE reason)` | `virtual void OnUserLeave(const char* uid, UserOfflineReason reason)` |
| 名称和参数变化 | 房间管理 | `virtual void OnLeaveChannel(const RtcStats& stats)` | `virtual void OnLeaveRoom(const RtcRoomStats& stats)` |
| 名称和参数变化 | 数据统计 | `void OnRtcStats(const RtcStats& stats)` | [`void OnRoomStats(const RtcRoomStats& stats)`](Windows-callback.md#onroomstats) |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 名称变化 | [`ProblemFeedbackOption`](Windows-keytype.md#problemfeedbackoption) | 替代`PROBLEM_FEEDBACK` | 
| 名称变化 | [`ManagedMemory`](Windows-keytype.md#managedmemory) | 替代`ByteManagedMemory` | 
| 枚举值增减 | [`UserMessageSendResult`](Windows-keytype.md#usermessagesendresult) | 新增了枚举值：`kUserMessageSendResultInit` |
| 枚举值增减 | [`RemoteAudioStats`](Windows-keytype.md#remotestreamstats) | 删除了枚举值：`uid`，此变量请参考 `RemoteStreamStats` 中的  [`uid`](Windows-keytype.md#uid) |
| 枚举值增减 | [`RemoteVideoStats`](Windows-keytype.md#remotevideostats) | 删除了枚举值：`uid`，此变量请参考 `RemoteStreamStats` 中的  [`uid`](Windows-keytype.md#uid) |


## 3.20

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 名称变化 | 视频管理 | `int SetVideoProfiles(const VideoSolution* solutions, int solution_num)` | [`int SetVideoEncoderConfig(const VideoSolution* solutions, int solution_num)`](Windows-api.md#setvideoencoderconfig) |
| 名称变化 | 音频管理 | `void AdjustRecordingSignalVolume(const int volume)` | [`void SetRecordingVolume(const int volume)`](Windows-api.md#setrecordingvolume) |
| 名称变化 | 音频管理 | `void AdjustPlaybackSignalVolume(const int volume)` | [`void SetPlaybackVolume(const int volume)`](Windows-api.md#setplaybackvolume) |
| 名称变化 | 音频管理 | `void AdjustAudioLoopbackCaptureVolume(int volume)` | [`void SetScreenAudioVolumeBeforeMixing(int volume)`](Windows-api.md#setscreenaudiovolumebeforemixing) |
| 名称变化 | 音频管理 | `void AdjustRemoteAudioVolume(const char* uid, int volume)` | [`void SetRemoteAudioPlaybackVolume(const char* uid, int volume)`](Windows-api.md#setremoteaudioplaybackvolume) |
| 参数变化 | 视频管理 | `void SetLocalVideoMirrorMode(bool enable)` | [`void SetLocalVideoMirrorMode(MirrorMode mode)`](Windows-api.md#setlocalvideomirrormode) |
| 名称和参数变化 | 视频管理 | `int MuteLocalVideoStream(bool mute)` | [`void MuteLocalVideo(MuteState state)`](Windows-api.md#mutelocalvideo) |
| 名称和参数变化 | 音频管理 | `int MuteLocalAudioStream(bool mute)` | [`void MuteLocalAudio(MuteState mute_state)`](Windows-api.md#mutelocalaudio) |
| 名称和参数变化 | 音频管理 | `void SetAudioPerfProfile(AudioPerfProfile profile)` | [`void SetAudioPerformanceProfile(AudioPerformanceProfile profile)`](Windows-api.md#setaudioperformanceprofile) |
| 名称和参数变化 | 音频管理 | `void EnableAudioVolumeIndication(int interval, int smooth)` | [`void SetAudioVolumeIndicationInterval(int interval)`](Windows-api.md#setaudiovolumeindicationinterval) |
| 拆分或合并 | 视频管理 | <li>`int SetupLocalVideo(const VideoCanvas& canvas)`</li><li>`int SetupLocalScreen(const VideoCanvas& canvas)`</li> | [`void SetLocalVideoCanvas(StreamIndex index, const VideoCanvas& canvas)`](Windows-api.md#setlocalvideocanvas) |
| 拆分或合并 | 视频管理 | <li>`void SetupRemoteVideo(const VideoCanvas& canvas)`</li><li>`void SetupRemoteScreen(const VideoCanvas& canvas)`</li> | [`void SetRemoteVideoCanvas(char* user_id, StreamIndex index, const VideoCanvas& canvas)`](Windows-api.md#setremotevideocanvas) |
| 拆分或合并 | 视频管理 | <li>`void MuteRemoteVideoStream(const char* userid)`</li><li>`void UnmuteRemoteVideoStream(const char* userid)`</li> | [`void MuteRemoteVideo(const char* uid, MuteState state)`](Windows-api.md#muteremotevideo) |
| 拆分或合并 | 视频管理 | <li>`void MuteAllRemoteVideoStreams()`</li><li>`void UnmuteAllRemoteVideoStreams()`</li> | [`void MuteAllRemoteVideo(MuteState state)`](Windows-api.md#muteallremotevideo) |
| 拆分或合并 | 音频管理 | `void EnableAudioLoopBackCapture(bool enable)` | <li>[`void StartMixScreenAudioToMainStream();`](Windows-api.md#startmixscreenaudiotomainstream)</li><li>[`void StopMixScreenAudioToMainStream()`](Windows-api.md#stopmixscreenaudiotomainstream)</li> |
| 拆分或合并 | 音频管理 | <li>`void SetDefaultMuteAllRemoteAudioStreams(bool mute)`</li><li>`void MuteAllRemoteAudio()`</li><li>`void UnmuteAllRemoteAudioStreams()`</li> | [`void MuteAllRemoteAudio(MuteState mute_state)`](Windows-api.md#muteallremoteaudio) |
| 拆分或合并 | 音频管理 | <li>`void MuteRemoteAudioStream(const char* uid)`</li><li>`void UnmuteRemoteAudioStream(const char* uid)`</li> | [`void MuteRemoteAudio(const char* user_id, MuteState mute_state)`](Windows-api.md#muteremoteaudio) |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 视频管理 | `void OnLocalVideoStateChanged(LocalVideoStreamState state, LocalVideoStreamError error)` | [`void OnLocalVideoStateChanged(StreamIndex stream_index，LocalVideoStreamState state, LocalVideoStreamError error)`](Windows-callback.md#onlocalvideostatechanged) |
| 参数变化 | 视频管理 | `void OnRemoteVideoStateChanged(const char* uid, RemoteVideoState state, RemoteVideoStateReason reason, int elapsed)` | [`void OnRemoteVideoStateChanged( RemoteStreamKey key, RemoteVideoState state, RemoteVideoStateReason reason)`](Windows-callback.md#onremotevideostatechanged) |
| 参数变化 | 视频管理 | `void OnUserMuteVideo(const char* uid, bool muted)` | [`void OnUserMuteVideo(const char* uid, MuteState mute)`](Windows-callback.md#onusermutevideo) |
| 参数变化 | 视频管理 | `void OnMuteAllRemoteVideo(const char* uid, bool muted)` | [`virtual void OnMuteAllRemoteVideo(const char* uid, MuteState mute)`](Windows-callback.md#onmuteallremotevideo) |
| 参数变化 | 音频管理 | `void OnMuteAllRemoteAudio(const char* uid, bool muted)` | [`void OnMuteAllRemoteAudio(const char* user_id, MuteState mute_state)`](Windows-callback.md#onmuteallremoteaudio) |
| 参数变化 | 音频管理 | `void OnAudioVolumeIndication(const AudioVolumeInfo* speakers, unsigned int speaker_number, int total_volume)` | [`void OnAudioVolumeIndication(const AudioVolumeInfo* speakers, unsigned int speaker_number, int total_remote_volume)`](Windows-callback.md#onaudiovolumeindication) |
| 参数变化 | 音频管理 | `void OnUserMuteAudio(const char* uid, bool muted)` | [`void OnUserMuteAudio(const char* user_id, MuteState mute_state)`](Windows-callback.md#onusermuteaudio) |
| 参数变化 | 音频管理 | `void OnFirstLocalAudioFrame(int elapsed)` | [`void OnFirstLocalAudioFrame(StreamIndex index)`](Windows-callback.md#onfirstlocalaudioframe) |
| 参数变化 | 音频管理 | `void OnFirstRemoteAudioFrame(const char* uid, int elapsed)` | [`void OnFirstRemoteAudioFrame(RemoteStreamKey key)`](Windows-callback.md#onfirstremoteaudioframe) |
| 参数变化 | 音频管理 | `void OnRemoteAudioStateChanged(const char* uid, RemoteAudioState state, RemoteAudioStateReason reason, int elapsed)` | [`void OnRemoteAudioStateChanged(RemoteStreamKey key, RemoteAudioState state, RemoteAudioStateReason reason)`](Windows-callback.md#onremoteaudiostatechanged) |
| 拆分或合并 | 视频管理 | <li>`void OnFirstLocalVideoFrame(int width, int height, int elapsed)`</li><li>`void OnFirstLocalScreenFrame(int width, int height, int elapsed)`</li> | [`void OnFirstLocalVideoFrameCaptured(StreamIndex index, VideoFrameInfo info)`](Windows-callback.md#onfirstlocalvideoframecaptured) | / |
| 拆分或合并 | 视频管理 | <li>`void OnFirstRemoteScreenFrame(const char* uid, int width, int height, int elapsed)`</li><li>`void OnFirstRemoteVideoFrame(const char* uid, int width, int height, int elapsed)`</li>| [`void OnFirstRemoteVideoFrameRendered(const RemoteStreamKey key, const FrameInfo& info)`](Windows-callback.md#onfirstremotevideoframerendered) | / |
| 拆分或合并 | 视频管理 | `void OnVideoSizeChanged(const char* uid, int width, int height, int rotation)` | <li>[`void OnLocalVideoSizeChanged(StreamIndex index, const FrameInfo& info)`](Windows-callback.md#onlocalvideosizechanged)</li><li>[`void OnRemoteVideoSizeChanged(RemoteStreamKey key, const FrameInfo& info)`](Windows-callback.md#onremotevideosizechanged)</li> | / |
| 拆分或合并 | 引擎管理 | <li>`void OnConnecting()`</li><li>`void OnReconnecting()`</li><li>`void OnConnected()`</li><li>`void OnDisconnected()`</li><li>`void OnConnectionLost()`</li><li>`void OnConnectionInterrupted()`</li> | [`void OnConnectionStateChanged(CONNECTION_STATE state)`](Windows-callback.md#onconnectionstatechanged) | 多个旧版回调合并为 OnConnectionStateChanged 中的多个状态 |
| 删除 | 视频管理 | `void OnFirstRemoteVideoDecoded(const char* uid, int width, int height, int elapsed)` | / |


## 3.19.2

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 房间管理 | `void EnableAutoSubscribe(bool auto_subscribe)` | [`void EnableAutoSubscribe(SubscribeMode audio_mode, SubscribeMode video_mode)`](Windows-api.md#enableautosubscribe) |


### 类型变更
以下表格中的类型发生了变化，你需要在工程文件中找到该类型，并根据变化调整相关处理逻辑：

| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 枚举值增减 |[`CLIENT_ROLE_TYPE`](Windows-keytype.md#client-role-type) | 删除了枚举值：`CLIENT_ROLE_AUDIENCE`，建议使用 `CLIENT_ROLE_SILENT_AUDIENCE` 代替。 |


### 错误码变更
以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 枚举值增减 | [`RTC_ERROR_CODE`](Windows-errorcode.md#rtc-error-code) | 新增了枚举值：<li>`BRERR_OVER_STREAM_PUBLISH_LIMIT`</li><li>`BRERR_OVER_SCREEN_PUBLISH_LIMIT`</li><li>`BRERR_OVER_VIDEO_PUBLISH_LIMIT`</li> | 


## 3.19.1

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 删除 | / | `int Feedback(const char* data)` | / |
| 删除 | 音频管理 | `int SetAudioProfile(AUDIO_PROFILE_TYPE profile, AUDIO_SCENARIO_TYPE scenario)` | / |
| 删除 | 视频管理 | `void RemoveLocalVideo()` | / |
| 删除 | 视频管理 | `void RemoveLocalScreen()` | / |
| 删除 | 视频管理 | `void RemoveRemoteVideo(const char* userid)` | / |
| 删除 | 视频管理 | `void RemoveRemoteScreen(const char* userid)` | / |
| 删除 | 视频管理 | `void RemoteFristVideoFrameRendered(const char* userid, unsigned int elapse)` | / |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 删除 | 音频管理 | `void OnRemoteAudioMixingBegin()` | / |


## 3.18.3

### 方法变更
以下表格中的方法发生了变化。你需要在工程文件中找到该方法，并进行相关修改：

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 房间管理 | `void Unsubscribe(const char* stream_id)` | [`void Unsubscribe(const char* user_id, bool is_screen)`](Windows-api.md#unsubscribe) |
| 参数变化 | 房间管理 | `void SubscribeStream(const char* stream_id, const SubscribeConfig& info)` | [`void SubscribeStream(const char* user_id, const SubscribeConfig& info)`](Windows-api.md#subscribestream) |
| 删除 | / | `CreateByteRtcEngineWithParameters(const char* app_id, bytertc::IRtcEngineEventHandler* event_handler, const char* parameters)` | / |
| 删除 | / | `createByteRtcEngineWithPtrAndParameters(const char* app_id, std::unique_ptr<bytertc::IRtcEngineEventHandler> event_handler, const char* parameters);` | / |
| 删除 | / | `void UpdateCloudRending(const char* cloudrenderJsonString) override` | / |


### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：

| 变更详情 | 功能模块 | 变动前回调 | 变动后回调  | 备注 |
| --- | --- | --- | --- | --- |
| 参数变化 | 音频管理 | `void OnRemoteAudioFrame(const char* stream_id, const IByteAudioFrame& audio_frame, const ByteStreamInfo& stream_info)` | [`void OnRemoteAudioFrame(const IByteAudioFrame& audio_frame, const ByteStreamInfo& stream_info)`](Windows-callback.md#onremoteaudioframe) |
| 参数变化 | 房间管理 | `void OnStreamRemove(const ByteStream& stream)` | [`void OnStreamRemove(const ByteStream& stream, RtcStreamRemoveReason reason)`](Windows-callback.md#onstreamremove) |
| 删除 | 音频设备管理 | `void OnAudioDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, bytertc::MediaDeviceStateType device_state)` | / |
| 删除 | 视频设备管理 | `void OnVideoDeviceStateChanged(const char* device_id, bytertc::MediaDeviceType device_type, ytertc::MediaDeviceStateType device_state)` | / |