---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
keywords: 实时音视频    # use ',' as separator
---

如果你希望从此前版本的 Electron 客户端 SDK 升级到最新的客户端 SDK，请在工程文件中，替换最新的客户端 SDK 文件，并参考本文完成 API，回调，参数类型等的替换。
> 升级过程中，你可能需要参考[历史版本文档归档](70068)。

## 3.57

### 回调变更
| 序号 | 变更详情 | 功能模块 | 变更前回调 | 变更后回调 | 说明 |
| --- | --- | --- | --- | --- | --- |
| 1 | 参数变更 | 消息 | `virtual void onLogout()` | [`virtual void onLogout(int reason)`](Android-callback#IRTCVideoEventHandler-onlogout) | 在 `onLogout` 回调上新增 reason 参数，区分用户主动/被动登出。具体参数类型参看 `LogoutReason`。 |


### 类型变更

| 序号 | 变更详情 | 功能模块 | 改动的数据类型 | 说明 |
| --- | --- | --- | --- | --- |
| 1 | 成员变量新增 | 字幕翻译服务 | [`SubtitleMessage`](Electron-keytype#subtitlemessage) | 在字幕内容回调 `onSubtitleMessageReceived` 的参数 `SubtitleMessage` 中新增成员变量 `language` 和 `mode`，可用于同时收到字幕原文和字幕译文。 |
| 2 | 成员变量变更 | CDN 推流 | [`MixedStreamLayoutRegionConfig`](Electron-keytype#mixedstreamlayoutregionconfig) | 转推直播单个用户画面由设置相对于整体画面的归一化比例变更为可设置像素绝对值。 |
| 3 | 成员变量新增 | 音频管理 | [`AudioPropertiesInfo`](Electron-keytype#audiopropertiesinfo) | 新增变量 `voicePitch` 返回本地用户的人声基频。 |
| 4 | 成员变量新增 | 引擎管理 | [`LogConfig`](Electron-keytype#logconfig) | 新增变量 `log_filename_prefix` 用于自定义日志文件前缀。|


#### 规范代码风格
该版本对所有不规范的枚举值和成员变量名进行了统一修复，对齐 Native 端名称，提升代码规范度和易用性。
1. 枚举值

    | 变更对象 | 3.54 及之前版本 | 3.57 | 
    | --- | --- | --- | 
    | `StreamLayoutMode`| <ul><li>`kLayoutAutoMode` </li><li>`kLayoutCustomerMode`</li></ul> | <ul><li>`kStreamLayoutModeAuto` </li><li>`kStreamLayoutModeCustom` </li></ul> | 
    | `SEICountPerFrame` |<ul><li>`kSingleSEIPerFrame` </li><li>`kMultiSEIPerFrame`</li></ul> | <ul><li>`kSEICountPerFrameSingle` </li><li>`kSEICountPerFrameMulti` </li></ul> | 
    | `CapturePreference` |<ul><li>`KAuto` </li><li>`KManual` </li><li>`KAutoPerformance`</li></ul> | <ul><li>`kAuto` </li><li>`kManual` </li><li>`kAutoPerformance` </li></ul> | 
    | `RecordingType` |<ul><li>`kRecordAudioOnly` </li><li>`kRecordVideoOnly` </li><li>`kRecordVideoAndAudio`</li></ul> | <ul><li>`kRecordingTypeAudioOnly` </li><li>`kRecordingTypeVideoOnly` </li><li>`kRecordingTypeVideoAndAudio` </li></ul> | 
    | `VirtualBackgroundSourceType` |<ul><li>`kVirtualBackgroundSourceColor` </li><li>`kVirtualBackgroundSourceImage`</li></ul> | <ul><li>`kVirtualBackgroundSourceTypeColor` </li><li>`kVirtualBackgroundSourceTypeImage` </li></ul> | 
    | `ZoomConfigType` |<ul><li>`kZoomFocusOffset` </li><li>`kZoomMoveOffset`</li></ul> | <ul><li>`kZoomConfigTypeFocusOffset` </li><li>`kZoomConfigTypeMoveOffset` </li></ul> | 
    | `ZoomDirectionType` |<ul><li>`kCameraMoveLeft` </li><li>`kCameraMoveRight` </li><li>`kCameraMoveUp` </li><li>`kCameraMoveDown` </li><li>`kCameraZoomOut` </li><li>`kCameraZoomIn` </li><li>`kCameraReset`</li></ul> | <ul><li>`kZoomDirectionTypeMoveLeft` </li><li>`kZoomDirectionTypeMoveRight` </li><li>`kZoomDirectionTypeMoveUp` </li><li>`kZoomDirectionTypeMoveDown` </li><li>`kZoomDirectionTypeZoomOut` </li><li>`kZoomDirectionTypeZoomIn` </li><li>`kZoomDirectionTypeReset` </li></ul> | 
    | `AudioFrameCallbackMethod` |<ul><li>`kAudioFrameCallbackRecord` </li><li>`kAudioFrameCallbackPlayback` </li><li>`kAudioFrameCallbackMixed` </li><li>`kAudioFrameCallbackRemoteUser` </li><li>`kAudioFrameCallbackRecordScreen`</li></ul> | <ul><li>`kRecord` </li><li>`kPlayback` </li><li>`kMixed` </li><li>`kRemoteUser` </li><li>`kRecordScreen` </li></ul> | 
    | `AudioAlignmentMode` |<ul><li>`kAudioAlighmentModeOff` </li><li>`kAudioAlighmentModeAudioMixing`</li></ul> | <ul><li>`kAudioAlignmentModeOff` </li><li>`kAudioAlignmentModeAudioMixing` </li></ul> | 
    | `SetRoomExtraInfoResult` |<ul><li>`kSetRoomExtraInfoErrorNotJoinRoom` </li><li>`kSetRoomExtraInfoErrorKeyIsNull` </li><li>`kSetRoomExtraInfoErrorValueIsNull` </li><li>`kSetRoomExtraInfoResultUnknow` </li><li>`kSetRoomExtraInfoErrorKeyIsEmpty` </li><li>`kSetRoomExtraInfoErrorTooOften` </li><li>`kSetRoomExtraInfoErrorSilentUser` </li><li>`kSetRoomExtraInfoErrorKeyTooLong` </li><li>`kSetRoomExtraInfoErrorValueTooLong` </li><li>`kSetRoomExtraInfoErrorServer`<li>`kSetRoomExtraInfoResultSuccess` </li></ul>|<ul><li>`kSetRoomExtraInfoResultErrorNotJoinRoom` </li><li>`kSetRoomExtraInfoResultErrorKeyIsNull` </li><li>`kSetRoomExtraInfoResultErrorValueIsNull` </li><li>`kSetRoomExtraInfoResultResultUnknow` </li><li>`kSetRoomExtraInfoResultErrorKeyIsEmpty` </li><li>`kSetRoomExtraInfoResultErrorTooOften` </li><li>`kSetRoomExtraInfoResultErrorSilentUser` </li><li>`kSetRoomExtraInfoResultErrorKeyTooLong` </li><li>`kSetRoomExtraInfoResultErrorValueTooLong` </li><li>`kSetRoomExtraInfoResultErrorServer` </li><li>`kSetRoomExtraInfoSuccess` </li></ul> | 
    | `HardwareEchoDetectionResult` |<ul><li>`kHardwareEchoDetectionCanceled` </li><li>`kHardwareEchoDetectionUnknown` </li><li>`kHardwareEchoDetectionNormal` </li><li>`kHardwareEchoDetectionPoor`</li></ul> | <ul><li>`kHardwareEchoDetectionResultCanceled` </li><li>`kHardwareEchoDetectionResultUnknown` </li><li>`kHardwareEchoDetectionResultNormal` </li><li>`kHardwareEchoDetectionResultPoor` </li></ul> | 
    | `StreamMixingEvent` |<ul><li>`kStreamMixingStart` </li><li>`kStreamMixingStartSuccess` </li><li>`kStreamMixingStartFailed` </li><li>`kStreamMixingUpdate` </li><li>`kStreamMixingUpdateSuccess` </li><li>`kStreamMixingUpdateFailed` </li><li>`kStreamMixingStop` </li><li>`kStreamMixingStopSuccess` </li><li>`kStreamMixingStopFailed` </li><li>`kStreamMixingChangeMixType` </li><li>`kStreamMixingFirstAudioFrameByClientMix` </li><li>`kStreamMixingFirstVideoFrameByClientMix` </li><li>`kStreamMixingUpdateTimeout` </li><li>`kStreamMixingStartTimeout` </li><li>`kStreamMixingRequestParamError` </li><li>`kStreamMixingMixImageEvent`</li></ul> | <ul><li>`kStreamMixingEventStart` </li><li>`kStreamMixingEventStartSuccess` </li><li>`kStreamMixingEventStartFailed` </li><li>`kStreamMixingEventUpdate` </li><li>`kStreamMixingEventUpdateSuccess` </li><li>`kStreamMixingEventUpdateFailed` </li><li>`kStreamMixingEventStop` </li><li>`kStreamMixingEventStopSuccess` </li><li>`kStreamMixingEventStopFailed` </li><li>`kStreamMixingEventChangeMixType` </li><li>`kStreamMixingEventFirstAudioFrameByClientMix` </li><li>`kStreamMixingEventFirstVideoFrameByClientMix` </li><li>`kStreamMixingEventUpdateTimeout` </li><li>`kStreamMixingEventStartTimeout` </li><li>`kStreamMixingEventRequestParamError` </li><li>`kStreamMixingEventMixImageEvent` </li></ul> | 
    | `SingleStreamPushEvent` |<ul><li>`kSingleStreamPushStart` </li><li>`kSingleStreamPushSuccess` </li><li>`kSingleStreamPushFailed` </li><li>`kSingleStreamPushStop` </li><li>`kSingleStreamPushTimeout` </li><li>`kSingleStreamPushParamError`</li></ul> |<ul><li>`kSingleStreamPushEventStart` </li><li>`kSingleStreamPushEventSuccess` </li><li>`kSingleStreamPushEventFailed` </li><li>`kSingleStreamPushEventStop` </li><li>`kSingleStreamPushEventTimeout` </li><li>`kSingleStreamPushEventParamError` </li></ul> | 

2. 成员变量

    | 变更对象 | 3.54 及之前版本 | 3.57 | 
    | --- | --- | --- | 
    | `SourceCrop` | <ul><li>`LocationX`</li><li>`LocationY`</li><li>`WidthProportion`</li><li>`HeightProportion`</li></ul> | <ul><li>`location_x`</li><li>`location_y`</li><li>`width_proportion`</li><li>`height_proportion`</li></ul>  | 
    | `EchoTestConfig` |<ul><li>`audioPropertiesReportInterval`</li><li>`roomId`</li></ul>|<ul><li>`audio_properties_report_interval`</li><li>`room_id`</li><li>`enable_audio`</li><li>`enable_video`</li></ul>|
    | `VideoEncoderConfig`|<ul><li>`frameRate` </li><li>`maxBitrate` </li><li>`minBitrate` </li><li>`encoderPreference` </li></ul> |<ul><li>`frame_rate` </li><li>`max_bitrate` </li><li>`min_bitrate` </li><li>`encoder_preference` </li></ul>|
    | `ScreenCaptureSourceInfo` |<ul><li>`primaryMonitor`</li></ul> |<ul><li>`primary_monitor` </li></ul> |
    | `ScreenVideoEncoderConfig` |<ul><li>`frameRate` </li><li>`maxBitrate` </li><li>`minBitrate` </li><li>`encoderPreference` </li></ul>|<ul><li>`frame_rate` </li><li>`max_bitrate` </li><li>`min_bitrate` </li><li>`encoder_preference`</li></ul> |
    | `VideoCaptureConfig` |<ul><li>`capturePreference` </li><li>`frameRate` </li>|<ul><li>`capture_preference` </li><li>`frame_rate`</li></ul> |
    | `RTCWatermarkConfig` |<ul><li>`visibleInPreview` </li><li>`positionInLandscapeMode` </li><li>`positionInPortraitMode`</li></ul>|<ul><li>`visible_in_preview` </li><li>`position_in_landscape_mode` </li><li>`position_in_portrait_mode`</li></ul>|
    | `MixedStreamVideoConfig` | `enable_Bframe`|`enable_bframe`|
    | `RtcRoomStats` |<ul><li>`txLostrate` </li><li>`rxLostrate` </li></ul>|<ul><li>`tx_lostrate` </li><li>`rx_lostrate`</li></ul> |


### 错误码变更

以下表格中的错误码发生了变化，你需要进行相应的处理：

| 变更详情 | 错误码 | 备注 |
| --- | --- | --- |
| 名称变更 | [`AudioRecordingErrorCode`](Electron-errorcode#audiorecordingerrorcode) <ul><li>`kAudioRecordingErrorNotInRoom` </li><li>`kAudioRecordingAlreadyStarted`</li><li>`kAudioRecordingNotStarted`</li></ul>| 变更为：<ul><li>`kAudioRecordingErrorCodeNotInRoom`</li><li>`kAudioRecordingErrorCodeAlreadyStarted`</li><li>`kAudioRecordingErrorCodeNotStarted`</li></ul> |
| 名称变更 | [`StreamMixingErrorCode`](Electron-errorcode#streammixingerrorcode)  <ul><li>`kStreamMixingErrorOK`</li><li>`kStreamMixingErrorBase`</li><li>`kStreamMixingErrorInvalidParam`<li>`kStreamMixingErrorInvalidState`</li></li><li>`kStreamMixingErrorInvalidOperator`</li><li>`kStreamMixingErrorTimeout`</li><li>`kStreamMixingErrorInvalidParamByServer`</li><li>`kStreamMixingErrorSubTimeoutByServer`</li><li>`kStreamMixingErrorInvalidStateByServer`</li><li>`kStreamMixingErrorAuthenticationByCDN`</li><li>`kStreamMixingErrorTimeoutBySignaling`</li><li>`kStreamMixingErrorMixImageFail`</li><li>`kStreamMixingErrorUnKnownByServer`</li></ul> | 变更为：<ul><li>`kStreamMixingErrorCodeOK`</li><li>`kStreamMixingErrorCodeBase`</li><li>`kStreamMixingErrorCodeInvalidParam`<li> `kStreamMixingErrorCodeInvalidState`</li></li><li>`kStreamMixingErrorCodeInvalidOperator`</li><li>`kStreamMixingErrorCodeTimeout`</li><li>`kStreamMixingErrorCodeInvalidParamByServer`</li><li>`kStreamMixingErrorCodeSubTimeoutByServer`</li><li>`kStreamMixingErrorCodeInvalidStateByServer`</li><li>`kStreamMixingErrorCodeAuthenticationByCDN`</li><li>`kStreamMixingErrorCodeTimeoutBySignaling`</li><li>`kStreamMixingErrorCodeMixImageFail`</li><li> `kStreamMixingErrorCodeUnKnownByServer`</li></ul> |


## 3.54

该版本为全部 API 增加返回值，通过返回值可以明确发现失败的 API 调用，定位失败原因。具体返回值的含义参看各 API 注释。

### 方法变更

| 变更详情 | 功能模块 | 变动前方法 | 变动后方法 | 说明 |
| --- | --- | --- | --- | --- |
|拆分|音视频传输|[`setPublicStreamVideoSink`](Electron-api#rtcvideo-setpublicstreamvideosink)|拆分为两个方法<br>绑定：[`setPublicStreamVideoSink`](Electron-api#rtcvideo-setpublicstreamvideosink)<br>解绑：[`unsetPublicStreamVideoSink`](Electron-api#rtcvideo-unsetpublicstreamvideosink)| |
|行为变更|音频管理|<ul><li>[`enumerateAudioCaptureDevices`](Electron-api#rtcvideo-enumerateaudiocapturedevices)</li><li>[`enumerateAudioPlaybackDevices`](Electron-api#rtcvideo-enumerateaudioplaybackdevices)</li></ul>||等待超时后返回空列表，超时时间默认为 10 s|
|行为变更|视频管理|[`enumerateVideoCaptureDevices`](Electron-api#rtcvideo-enumeratevideocapturedevices)||等待超时后返回空列表，超时时间默认为 10 s|
|参数变更|引擎管理|[`createRTCVideo`](Electron-api#rtcvideo-creatertcvideo)删除了入参 document_path。<br>使用 [`setLogConfig`](Electron-api#setlogconfig) 指定日志相关配置。|| |
|混音相关的方法从 `RTCVideo` 中剥离出来，具体变动情况请参看[混音相关的新旧接口对应表](#audiomixingchangelog)|混音|`RTCVideo`|<ul><li>`RTCMediaPlayer`</li><li>`RTCAudioEffectPlayer`</li></ul>|一般来说，对于短时间的音效（比如小于 20s），可以使用音效类；对于较长的音频或 PCM 数据，可以使用音乐类。|

### 类型变更

| 变更详情 | 数据类型 | 说明 |
| --- | --- | --- |
|参数变更|[`IAudioFrame`](Electron-keytype#iaudioframe)|变量 `type` 名称变更为 `frame_type`|
|类型变更|[`format`](Electron-keytype#ivideoframe-format)|类型由 `number` 变更为枚举类 [`VideoPixelFormat`](Electron-keytype#videopixelformat)|
|参数增删|[`IDataFrame`](Electron-keytype#idataframe)|删除无意义字段 `u32_data_size`|
|参数增删|[`IPublicStreamParam`](Electron-keytype#ipublicstreamparam)|增加参数 [`bg_color`](Electron-keytype#ipublicstreamparam-bg_color)|

### 错误码变更

|变更详情|错误码|备注|
| --- | --- | --- |
|枚举值增删|`ErrorCode`|删除枚举值：`kErrorCodeOverScreenPublishLimit = -1081`、`kErrorCodeOverVideoPublishLimit =  -1082 `|

**附：混音相关的新旧接口对应表**<span id="audiomixingchangelog"></span>

| 接口分类 | 接口用途 | <div style="width: 150pt">废弃类/接口</div> | <div style="width: 150pt">新类/接口（音效 RTCAudioEffectPlayer）</div> | <div style="width: 150pt">新类/接口（音乐 RTCMediaPlayer）</div> | <div style="width: 150pt">备注</div> |
| --- | --- | --- | --- | --- | --- |
| 混音主调接口 | 将音效文件加载至内存 | - `preloadAudioMixing` | - [`preload`](Electron-api#rtcaudioeffectplayer-preload) | - [`open`](Electron-api#rtcmediaplayer-open) |  |\
||| - `unloadAudioMixing` | - [`unload`](Electron-api#rtcaudioeffectplayer-unload) |\
|||| - [`unloadAll`](Electron-api#rtcaudioeffectplayer-unloadall) |
|^^  | 播放/停止/暂停/恢复 | - `startAudioMixing` | - [`start`](Electron-api#rtcaudioeffectplayer-start) | - [`start`](Electron-api#rtcmediaplayer-start) |  |\
||| - `stopAudioMixing` | - [`stop`](Electron-api#rtcaudioeffectplayer-stop) | - [`stop`](Electron-api#rtcmediaplayer-stop) |\
||| - `stopAllAudioMixing` | - [`stopAll`](Electron-api#rtcaudioeffectplayer-stopall) | - [`pause`](Electron-api#rtcmediaplayer-pause) |\
||| - `pauseAudioMixing` | - [`pause`](Electron-api#rtcaudioeffectplayer-pause) | - [`resume`](Electron-api#rtcmediaplayer-resume) |\
||| - `pauseAllAudioMixing` | - [`pauseAll`](Electron-api#rtcaudioeffectplayer-pauseall) |\
||| - `resumeAudioMixing` | - [`resume`](Electron-api#rtcaudioeffectplayer-resume) |\
||| - `resumeAllAudioMixing` | - [`resumeAll`](Electron-api#rtcaudioeffectplayer-resumeall) |
|^^  | 获取/指定位置/时长 | - `setAudioMixingPosition` | - [`setPosition`](Electron-api#rtcaudioeffectplayer-setposition) | - [`setPosition`](Electron-api#rtcmediaplayer-setposition) |  |\
||| - `getAudioMixingCurrentPosition` | - [`getPosition`](Electron-api#rtcaudioeffectplayer-getposition) | - [`getPosition`](Electron-api#rtcmediaplayer-getposition) |\
||| - `getAudioMixingDuration` | - [`getDuration`](Electron-api#rtcaudioeffectplayer-getduration) | - [`getTotalDuration`](Electron-api#rtcmediaplayer-gettotalduration) |\
||||| - [`getPlaybackDuration`](Electron-api#rtcmediaplayer-getplaybackduration) |
| ^^ | 获取/指定音量 | - `setAudioMixingVolume` | - [`setVolume`](Electron-api#rtcaudioeffectplayer-setvolume) | - [`setVolume`](Electron-api#rtcmediaplayer-setvolume) |  |\
||| - NA | - [`setVolumeAll`](Electron-api#rtcaudioeffectplayer-setvolumeall) | - [`getVolume`](Electron-api#rtcmediaplayer-getvolume) |\
|||| - [`getVolume`](Electron-api#rtcaudioeffectplayer-getvolume) |
| ^^ | 调整音调 |  `setAudioMixingPitch` | NA | [`setAudioPitch`](Electron-api#rtcmediaplayer-setaudiopitch) |  |
| ^^ | 设置声道模式 | `setAudioMixingDualMonoMode` | NA | [`setAudioDualMonoMode`](Electron-api#rtcmediaplayer-setaudiodualmonomode) |  |
| ^^ | 获取/设置音轨数 | - `getAudioTrackCount` | NA | - [`getAudioTrackCount`](Electron-api#rtcmediaplayer-getaudiotrackcount) | `Index` 取值修改为从 0 开始 |\
||| - `selectAudioTrack` || - [`selectAudioTrack`](Electron-api#rtcmediaplayer-selectaudiotrack) |
| ^^ | 设置播放速度 | `setAudioMixingPlaybackSpeed` | NA | [`setPlaybackSpeed`](Electron-api#rtcmediaplayer-setplaybackspeed) |  |
| ^^ | 设置播放进度回调间隔 | `setAudioMixingProgressInterval` | NA | [`setProgressInterval`](Electron-api#rtcmediaplayer-setprogressinterval) |  |
| ^^ | 设置响度 | `setAudioMixingLoudness` | NA | [`setLoudness`](Electron-api#rtcmediaplayer-setloudness) |  |
| 混音回调接口 | 播放状态回调 | `onAudioMixingStateChanged` | - [`setEventHandler`](Electron-api#rtcaudioeffectplayer-seteventhandler) | - [`setEventHandler`](Electron-api#rtcmediaplayer-seteventhandler) |  |\
|||| - [`onAudioEffectPlayerStateChanged`](Electron-event#rtcaudioeffectplayercallback-onaudioeffectplayerstatechanged) | - [`onMediaPlayerStateChanged`](Electron-event#rtcmediaplayercallback-onmediaplayerstatechanged) |\
||||| - [`onMediaPlayerPlayingProgress`](Electron-event#rtcmediaplayercallback-onmediaplayerplayingprogress) |

## 3.52
### 方法变更

| 变更详情 | 功能模块 | 方法 | 说明 |
| --- | --- | --- | --- |
| 参数变更 | 引擎管理 | [`feedback`](Electron-api#rtcvideo-feedback) | 参数数据类型变更 |
| 接口名称变更 | CDN 推流 | `startLiveTranscoding` | 用 [`startPushMixedStreamToCDN`](Electron-api#rtcvideo-startpushmixedstreamtocdn) 替代 |
| ^^ | ^^ | `stopLiveTranscoding` | 用 [`stopPushStreamToCDN`](Electron-api#rtcvideo-stoppushstreamtocdn) 替代 |
| ^^ | ^^ | `updateLiveTranscoding` | 用 [`updatePushMixedStreamToCDN`](Electron-api#rtcvideo-updatepushmixedstreamtocdn) 替代 |
| 接口废弃 | 高级功能 | `updatePosition` | 用 [`updateSelfPosition()`](Electron-api#updateselfposition) 替代，新接口支持本地用户同时设置自己的发声位置和发声朝向。 |\
||| `updateSelfOrientation` |
| ^^ | ^^ | `updateListenerPosition` | 用 [`updateRemotePosition()`](Electron-api#updateremoteposition)替代，新接口支持本地用户设置远端用户的发声位置和发声朝向。 |\
||| `updateListenerOrientation` |

### 回调变更

| 变更详情 | 方法 | 说明 |
| --- | --- | --- |
| 参数变更 | [`onPublicStreamSEIMessageReceived`](Windows-callback#IRTCVideoEventHandler-onpublicstreamseimessagereceived) | 参数 `sourceType` 的类型由 `SEIMessageSourceType` 变更为 `DataMessageSourceType` |\
||| 拆分为： |\
||||\
||| - [`onPublicStreamSEIMessageReceived`](Electron-event#rtcroomcallback-onpublicstreamseimessagereceived)：接收客户端插入的 SEI 消息。 |\
||| - [`onPublicStreamDataMessageReceived`](Electron-event#rtcroomcallback-onpublicstreamdatamessagereceived)：接收服务端插入的 SEI 消息和其他数据信息，例如音量信息。 |

### 错误码变更

| **变更详情** | **错误码** | **说明** |
| --- | --- | --- |
| 枚举值变更 | [`PublicStreamErrorCode`](Electron-keytype#publicstreamerrorcode)` | 新增枚举值： |\
||||\
||| - `kPublicStreamErrorCodePullNoPushStream = 1300` |\
||||\
||| 名称变更： |\
||||\
||| - `kPublicStreamOK = 0` 更新为 `kPublicStreamErrorCodeOK = 0` |\
||| 	 |\
||| - `kPublicStreamPushInvalidParam = 1191` 更新为 `kPublicStreamErrorCodePushInvalidParam = 119` |\
||| 	 |\
||| - `kPublicStreamPushInvalidStatus = 1192` 更新为 `kPublicStreamErrorCodePushInvalidStatus = 1192` |\
||| 	 |\
||| - `kPublicStreamPushInternalError = 1193` 更新为 `kPublicStreamErrorCodePushInternalError = 1193` |\
||| 	 |\
||| - `kPublicStreamPushFailed = 1195` 更新为 `kPublicStreamErrorCodePushFailed = 1195` |\
||| 	 |\
||| - `kPublicStreamPushTimeout = 1196` 更新为 `kPublicStreamErrorCodePushTimeout = 1196` |
| ^^ | [`ErrorCode`](Electron-errorcode#errorcode) | 新增错误码枚举值：`kErrorCodeJoinRoomRoomForbidden=-1025` 和 `kErrorCodeJoinRoomUserForbidden=-1026`。当服务端在指定房间封禁指定用户，而此用户加入房间失败，或从房间中被踢出时收到。 |
| ^^ | ^^ | 废弃枚举值：`kErrorCodeOverScreenPublishLimit=-1081`，用 `kErrorCodeOverStreamPublishLimit=-1080` 代替。 |
## 3.50

接口类名称由 `veRTCVideo` 变更为 `RTCVideo`，`veRTCRoom` 变更为 `RTCRoom`。
### 方法变更
| 变更详情 | 功能模块 | 变动前方法 | 变动后方法 | 备注 |
| --- | --- | --- | --- | --- |
| 拆分 | 视频管理 | registerFaceDetectionObserver | * enableFaceDetection <br> * disableFaceDetection | 解除人脸识别与视频特效之间的耦合，提升接口易用性。 |
| 废弃 | 范围语音 | registerRangeAudioObserver <br> onRangeAudioInfor | None | 此前，在手动订阅的场景下，如果你希望使用范围语音功能，你必须注册相关回调获取的衰减系数，设定音量。 <br> 自此版本起，无论是手动订阅还是自动订阅，衰减效果都由 SDK 实现，无需使用此接口。 |
| 替代 | 音频管理 | muteAudioPlayback | setPlaybackVolume | 将本地音量设置为 0 可静音本地音频播放 |
| 参数类型变更 | 屏幕共享 | public setVideoEncoderConfig(solutions: VideoEncoderConfig[]): number | setScreenVideoEncoderConfig(screenSolution: VideoEncoderConfig): any; | 参数类型变更为新增的 VideoEncoderConfig |
| 拆分 | 音视频处理 | * checkLicense <br> * setAlgoModelPath | initCVResource |  |
|  |  | enableEffect | * enableVideoEffect <br> * disableVideoEffect |  |
|  |  | updateNode | updateEffectNode |  |
|  |  | setBackgroundSticker | * enableVirtualBackground <br> * disableVirtualBackground |  |
| 参数变更 | 消息 | public sendSEIMessage(stream_index: number, message: Uint8Array, repeat_count: number) => number | public sendSEIMessage(stream_index: number,message: Uint8Array,repeat_count: number,mode: SEICountPerFrame): number | 支持 SEI 多发模式，即在 1 帧间隔内多次发送 SEI 数据时，多个 SEI 随下个视频帧同时发送。 |

### 回调变更
以下表格中的回调发生了变化。你需要在工程文件中找到该回调，并进行相关修改：
| 变更详情 | 功能模块 | 变动前方法 | 变动后方法 | 备注 |
| --- | --- | --- | --- | --- |
| 参数变更 | 消息 | onPublicStreamSEIMessageReceived(public_stream_id: string, message: string) => void | onPublicStreamSEIMessageReceived(public_stream_id: string, source_type: SEIMessageSourceType) => void | 新增参数 source_type |
| 接口废弃 | 音频管理 | onRemoteAudioStateChanged 和 onRemoteVideoStateChanged | / |  |
| 替代 | CDN 推流 | * onStreamMixingVideoFrame <br> * onStreamMixingAudioFrame <br> * onStreamMixingDataFrame | * onMixingVideoFrame <br> * onMixingAudioFrame <br> * onMixingDataFrame |  |



### 类型变更
| 变更详情 | 数据类型 | 备注 |
| --- | --- | --- |
| 成员变量变更 | FaceDetectResult | 新增成员变量：frame_timestamp_us |
| 成员变量变更 | TranscoderAudioParam | 新增成员变量：audio_codec_type |
| 成员变量变更 | TranscoderVideoParam | 新增成员变量：bFrame <br> 删除了：lowLatency <br> 名称变更：video_codec_profile 变更为 video_codec_type，类型由 TranscoderVideoCodecProfile 改为 TranscoderVideoCodecType |
| 成员变量变更 | TranscoderLayoutRegion | 新增成员变量： <br> corner_radius <br> type <br> data <br> data_param <br> spatial_position |
| 成员变量变更，名称变更 | ITranscoderParam | 类型名称由 TranscoderParam 改为 ITranscoderParam <br> 新增成员变量：expected_mix_type: StreamMixingType |
| 枚举值变更 | TranscoderAudioCodecProfile | 删除了 kByteAACProfileMain <br> kByteAACProfileHEv1 对应的数值由 2 变更为 1 <br> kByteAACProfileHEv2 对应的数值由 3 变更为 2 |
| 配置变更 | RoomProfileType | 房间属性的默认值 kRoomProfileTypeCommunication = 0，对应的由 kRoomProfileTypeChatRoom = 6 变更为 kRoomProfileTypeMeeting = 16。 |
| 新增 | PublicStreamErrorCode | onPlayPublicStreamResult 和 onPushPublicStreamResult 中的 errorCode 参数类型由 int 改为 PublicStreamErrorCode |
| 参数数据结构改动 | AudioPropertiesConfig | 数据结构中，新增参数 smooth |
| 取值范围拓展 | TranscoderLayoutRegion 中，width 和 height | 取值范围由 (0.0, 1.0] 拓展为 [0.0, 1.0]。 |
