---
is_dir: False    # True for dir; False for doc
status: 1    # 0 for offline; 1 for online; 2 for whitelist; 4 for online but hidden in TOC
keywords: 实时音视频    # use ',' as separator
---

本文档提供用户资料的功能使用说明。你可以通过用户资料功能模块实现用户头像、昵称等字段的自定义，无需自行建设用户资料逻辑。

API 接口详细文档参看 [Android API 参考](https://www.volcengine.com/docs/6348/293449)、[iOS API 参考](https://www.volcengine.com/docs/6348/293482)、[Web API 参考](https://www.volcengine.com/docs/6348/293490)、[微信小程序 API 参考](https://www.volcengine.com/docs/6348/293535)。

# 前提条件

参看[构建基础应用](https://www.volcengine.com/docs/6348/291088)集成使用 IM SDK，版本 v1.2.0 以上。
[注册用户](https://www.volcengine.com/docs/6348/1125993) 后才能正常使用用户资料功能。
Web 端 / 小程序端需要在实例化时传入 `ContactPlugin`。

```typescript
import { BytedIM, ContactPlugin } from '@volcengine/im-web-sdk'; // 小程序为 @volcengine/im-mp-sdk
const bytedIMInstance = new BytedIM({/* 省略 options */}, [ContactPlugin]);
```

# 核心功能


## 设置用户资料

使用 `setUserSelfPortrait` 设置用户头像。

```mixin-react
const list = [
  {
    "lang": "java",
    "text": `BIMClient.getInstance().getService(BIMContactExpandService.class).setUserSelfPortrait(url, new BIMResultCallback<BIMUserFullInfo>() {
            @Override
            public void onSuccess(BIMUserFullInfo bimUserProfile) {
            
            }

            @Override
            public void onFailed(BIMErrorCode code) {
     
            }
        })
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
[[BIMClient sharedInstance] setUserSelfPortrait:url completion:^(BIMError * _Nullable error) {
    if (error) {
        
    } else {
        
    }
}];
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.setUserProfile({portrait: "..." /* 用户头像地址 */ })`, 
  },
]
return (<PreCodeTabs list={list} />);
```
使用 `setUserSelfNickName` 设置用户昵称。

```mixin-react
const list = [
  {
    "lang": "java",
    "text": `   BIMClient.getInstance().getService(BIMContactExpandService.class).setUserSelfNickName(nickName, new BIMResultCallback<BIMUserFullInfo>() {
            @Override
            public void onSuccess(BIMUserFullInfo bimUserProfile) {
          
            }

            @Override
            public void onFailed(BIMErrorCode code) {
            }
        });
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
[[BIMClient sharedInstance] setUserSelfNickName:nickName completion:^(BIMError * _Nullable error) {
    if (error) {
        
    } else {
        
    }
}];
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.setUserProfile({nickname: "nickname"})`, 
  },
]
return (<PreCodeTabs list={list} />);
```
使用 `setUserSelfExt` 设置用户额外信息。

```mixin-react
const list = [
  {
    "lang": "java",
    "text": ` BIMClient.getInstance().getService(BIMContactExpandService.class).setUserSelfExt(ext, new BIMResultCallback<BIMUserFullInfo>() {
            @Override
            public void onSuccess(BIMUserFullInfo bimUserProfile) {
     
            }

            @Override
            public void onFailed(BIMErrorCode code) {
            }
        });
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
[[BIMClient sharedInstance] setUserSelfExt:ext completion:^(BIMError * _Nullable error) {
    if (error) {
        
    } else {
        
    }
}];
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.setUserProfile({ext: {/* 额外信息 */}})`, 
  },
]
return (<PreCodeTabs list={list} />);
```

## 获取用户信息

使用 `getUserFullInfo` 获取用户信息。
```mixin-react
const list = [
  {
    "lang": "java",
    "text": ` BIMClient.getInstance().getService(BIMContactExpandService.class).getUserFullInfo(showUid, true,new BIMResultCallback<BIMUserFullInfo>() {
            @Override
            public void onSuccess(BIMUserFullInfo fullInfo) {
                
            }

            @Override
            public void onFailed(BIMErrorCode code) {
            }
        });
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
BIMUserFullInfo *fullInfo = [[VEIMDemoUserManager sharedManager] fullInfoWithUserID:uid];
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.getUserProfilesOnline({userIds: ["10001"]})`, 
  },
]
return (<PreCodeTabs list={list} />);
```

使用 `getUserFullInfoList` 批量获取用户信息。
```mixin-react
const list = [
  {
    "lang": "java",
    "text": `  BIMClient.getInstance().getService(BIMContactExpandService.class).getUserFullInfoList(addIdList, new BIMResultCallback<List<BIMUserFullInfo>>() {
            @Override
            public void onSuccess(List<BIMUserFullInfo> userFullInfos) {
           
            }

            @Override
            public void onFailed(BIMErrorCode code) {

            }
        });
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
[[VEIMDemoUserManager sharedManager] getUserFullInfoList:uidList syncServer:NO completion:^(NSArray<BIMUserFullInfo *> * _Nullable infos, BIMError * _Nullable error) {
    if (error) {

    } else {

    }
}];
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.getUserProfilesOnline({userIds: ["10001", "10002", "10003"]})`, 
  },
]
return (<PreCodeTabs list={list} />);
```

## 好友资料变更监听

使用 `addFriendListener` 用户资料变更后，好友将收到用户资料变更的回调。

```mixin-react
const list = [
  {
    "lang": "java",
    "text": `BIMClient.getInstance().getService(BIMContactExpandService.class).addFriendListener(new BIMFriendListener() {
            ...
            
            @Override
            public void onUserProfileUpdate(BIMUserFullInfo userFullInfo) {
                //好友信息变更回调
            }
        });
`,
    "selected": true,
  },
  {
    "lang": "objectivec",
    "text": `
[[BIMClient sharedInstance] addFriendListener:self];

//好友信息变更回调
- (void)onUserProfileUpdate:(BIMUserFullInfo *)info
 {
    
}
`, 
  },
  {
    "lang": "TypeScript",
    "text": `instance.event.subscribe(IMEvent.ProfileUpdate, () => { /* 处理用户资料更新... */ })`, 
  },
]
return (<PreCodeTabs list={list} />);
```
